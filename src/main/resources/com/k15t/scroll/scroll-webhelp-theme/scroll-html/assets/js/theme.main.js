!function(e){window.SCROLL_WEBHELP=window.SCROLL_WEBHELP||{},window.SCROLL_WEBHELP.escapeHtml=function(t){return e("<div />").text(t).html()};var t="desktop";navigator.userAgent.indexOf("MSIE")>0||navigator.userAgent.indexOf("Trident"),Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor");function n(){e("body").bind("click",(function(t){!e(t.target).parents("#ht-search").length&&e("#ht-search").hasClass("open")&&(e("body").unbind("click"),a())})),e("#ht-search").addClass("open"),setTimeout((function(){e(".ht-search-clear").addClass("show")}),250),d=!0,e(".search-input")[0].focus()}function a(){input=e("#ht-search"),input.find(".ht-search-dropdown").removeClass("open"),e(".ht-search-dropdown a.hover").removeClass("hover"),e(document).unbind("keydown")}function o(t){var n=e(".ht-search-input .ht-search-dropdown"),a=n.find("ul");t=encodeURIComponent(t),a.empty();window.SCROLL_WEBHELP&&window.SCROLL_WEBHELP.search&&window.SCROLL_WEBHELP.search.performSearch(t,(function(t,o){e.each(t,(function(e,t){a.append('<li n="'+e+'" class="search-result"><a href="'+t.link.toLowerCase().replace(".html","")+'">'+SCROLL_WEBHELP.escapeHtml(t.title)+"</a></li>")}));var r=e('<li class="search-key" n="'+t.length+'"></li>'),c=e('<a class="search-key-button" href="#">Search:&nbsp;</a>'),d=e("<b></b>").text(decodeURIComponent(o)),h=r.append(c.append(d));h.bind("click",(function(e){s(),e.preventDefault()})),a.append(h),a.children("li").each((function(t,n){var o=e(n);o.bind("mouseover",(function(){a.find("li a").removeClass("hover"),o.find("a").addClass("hover")}))})),n.addClass("open"),e("#search input.search-input").on("keydown",(function(e){switch(e.which){case 38:i(-1,n);break;case 40:i(1,n);break;default:return}e.preventDefault()}))}))}function i(t,n){var a=n.find("a").length,o=parseInt(n.find("a.hover").parent().attr("n"));isNaN(o)&&(o=-1);var i=o+t,s=n.height()-2,r=parseInt(n.find("a.hover").outerHeight());i<0||i>=a||e.each(n.find("a"),(function(t,a){t==o&&e(this).removeClass("hover"),t==i&&(e(this).addClass("hover"),r*(t+1)-n.scrollTop()>s?n.scrollTop(r*(t+1)-s):r*(t+1)-n.scrollTop()<r&&n.scrollTop()>0&&n.scrollTop(r*t))}))}function s(){var t=e(".ht-search-dropdown a.hover");0!=t.length?t.is(".search-key-button")?kenticoThemeOpenSearchResultsPage():window.location.href=t.attr("href"):kenticoThemeOpenSearchResultsPage()}function r(){e("article.ht-content").outerHeight()<e(window).innerHeight()?e("#ht-jump-top").fadeOut():e("#ht-jump-top").fadeIn()}function c(n){switch(parseInt(e("#ht-mq-detect").css("width").replace("px",""))){case 1:t="mobile";break;case 2:t="potrait";break;case 3:t="landscape";break;case 4:case 5:t="desktop"}var a=e("meta[name='confluence-base-url']").attr("content"),o=e("meta[name='confluence-space-key']").attr("content").toLowerCase(),i=a;o!==CONFIG.DOC_ROOT_URL_SPACE_KEY&&(i=i+"/"+o);var s=e(location).attr("href");s==i||s==i+"/"||s.indexOf(i+"/search")>=0||("desktop"==t?n||e("html").addClass("show-sidebar"):e("html").removeClass("show-sidebar"),"desktop"==t||"landscape"==t?e(".search-input").addClass("show"):e(".search-input").removeClass("show")),setTimeout((function(){e("#ht-sidebar").addClass("animate")}),500),setTimeout((function(){e(".search-input").addClass("animate")}),500)}e(document).ready((function(){c(!1),function(){window.SCROLL&&window.SCROLL.initPageTree&&window.SCROLL.initPageTree();e("#ht-menu-toggle").bind("click",(function(e){e.preventDefault(),setTimeout(toggleSidebar(),.05)}))}(),w(),function(){var t=function(e,t){var n,a;return function(){var o=arguments,i=this,s=function(){a=e.apply(i,o)};return clearTimeout(n),n=setTimeout(s,t),a}},n=t(o,200),a=e("#search input.search-input");a.on("focus",(function(e){d=!0,a.on("blur",(function(e){d=!1}))})),a.on("input",(function(t){var o=a.val();o.length>=3&&n(o),0==o.length&&e(".ht-search-dropdown").removeClass("open")})),a.on("keydown",(function(e){13===e.which&&s()})),e("form#search").on("submit",(function(){return!1}))}(),e("#ht-search-button").bind("click",(function(e){e.preventDefault(),n()})),e("#searchButton").bind("click",(function(t){t.preventDefault(),e(".search-input").hasClass("show")||e(".search-input").is(":visible")?s():e(".search-input").addClass("show")})),e(".ht-search-clear").bind("click",(function(e){e.preventDefault(),a()})),r(),e("#ht-jump-top").bind("click",(function(t){t.preventDefault(),e("body,html").animate({scrollTop:0},100)})),d=!1,e("body").bind("keyup",(function(e){if(!d||27==e.which){switch(e.which){case 219:"desktop"!==t&&toggleSidebar();break;case 191:sidebarExpanded||n();break;case 71:71==h&&(sidebarExpanded||n());break;case 27:a()}h=e.which}})),e(".sp-picker").change((function(){e(this).closest("form").trigger("submit")})),function(){var t=500,n=10;window.location.hash&&setTimeout((function(){e(window).scrollTo(document.getElementById(window.location.hash.substr(1)),{offset:-(e("#ht-headerbar").height()+n),duration:t,interrupt:!0,axis:"y"})}),0);e(".ht-content").on("click",'a[href^="'+location.pathname+'\\#"], a[href^=\\#]',(function(a){a.preventDefault();var o=document.getElementById(this.hash.substr(1));return o||(o=document.getElementById(decodeURI(this.hash.substr(1)))),e(window).stop(!0).scrollTo(o,{offset:-(e("#ht-headerbar").height()+n),duration:t,interrupt:!0,axis:"y"}),history&&"file"!=location.protocol.substr(0,4)&&history.pushState({},"",e(a.target).attr("href")),!1}))}(),e("#ht-loader").hide()})),function(){var t=e(".js-header-search-open"),n=e(".js-header-search-close"),a=e(".js-header-search-box"),o=250;t.click((function(e){a.css("display","flex").hide().fadeIn(o)})),n.click((function(e){a.fadeOut(o)}));var i=e(".js-menu-toggle"),s=e("#ht-sidebar");function r(){i.removeClass("is-active"),s.fadeOut(o)}i.click((function(e){i.hasClass("is-active")?r():(i.addClass("is-active"),s.fadeIn(o))})),window.addEventListener("click",(function(e){i[0].contains(e.target)||s[0].contains(e.target)||r()}))}();var d,h,l,u=new Date(1,1,2e3,12,0,0),p=!1;function f(){new Date-u<200?setTimeout(f,200):(p=!1,r(),c(!0),w())}function w(){e("#ht-wrap-container").width()>640?(e("#ht-wrap-container").addClass("sp-grid-float"),e("#ht-wrap-container").removeClass("sp-grid-fluid"),e(".sp-grid-cell.sp-grid-60").first().after(e(".sp-grid-cell.sp-grid-40"))):(e("#ht-wrap-container").addClass("sp-grid-fluid"),e("#ht-wrap-container").removeClass("sp-grid-float"),e(".sp-grid-cell.sp-grid-60").first().before(e(".sp-grid-cell.sp-grid-40")))}e(window).resize((function(){u=new Date,!1===p&&(p=!0,setTimeout(f,200))})),new ClipboardJS(".js-codeClipboard",{target:function(t){return e(t).closest(".js-codePanel").find(".js-code")[0]}}).on("success",(function(t){var n=e(t.trigger);n.addClass("is-copied"),l&&window.clearTimeout(l),l=window.setTimeout((function(){n.removeClass("is-copied")}),2e3),t.clearSelection()}))}($);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRoZW1lLm1haW4uanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsIlNDUk9MTF9XRUJIRUxQIiwidGV4dCIsImh0bWwiLCJ2aWV3cG9ydCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluZGV4T2YiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJIVE1MRWxlbWVudCIsInJlc3VsdHNMaXN0IiwiYmluZCIsImUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJsZW5ndGgiLCJoYXNDbGFzcyIsImVtcHR5IiwidW5iaW5kIiwiaGFuZGxlU2VhcmNoUmVzdWx0cyIsImVhY2giLCJzZWFyY2hSZXN1bHRzIiwiYWRkQ2xhc3MiLCJzZWFyY2hGaWVsZEFjdGl2ZSIsImZvY3VzIiwia2V5YnV0dG9uIiwiY2hpbGRyZW4iLCJyZW1vdmVDbGFzcyIsImRvY3VtZW50IiwiZG9TZWFyY2giLCJxdWVyeSIsImRyb3Bkb3duIiwicHJldmVudERlZmF1bHQiLCJmaW5kIiwic2VhcmNoIiwicGVyZm9ybVNlYXJjaCIsImN1cnJlbnRpdGVtIiwiaW5kZXgiLCJzZWFyY2hSZXN1bHQiLCJsaW5rIiwidG9Mb3dlckNhc2UiLCJyZXBsYWNlIiwiZXNjYXBlSHRtbCIsInRpdGxlIiwibmV4dGl0ZW0iLCJrZXlidXR0b25fbGluayIsImtleWJ1dHRvbl9zZWFyY2hlZFRlcm0iLCJkZWNvZGVVUklDb21wb25lbnQiLCJrZXlidXR0b25fbGkiLCJhcHBlbmQiLCJzY3JvbGxUb3AiLCJpdGVtaGVpZ2h0IiwiaXRlbSIsImxpIiwic2VsZWN0ZWQiLCJsb2NhdGlvbiIsImF0dHIiLCJ3aGljaCIsImRyb3Bkb3duS2V5ZG93biIsImtlbnRpY29UaGVtZU9wZW5TZWFyY2hSZXN1bHRzUGFnZSIsImNsb3NlU2VhcmNoIiwiZGlyZWN0aW9uIiwiaXRlbWNvdW50IiwicGFyc2VJbnQiLCJwYXJlbnQiLCJpc05hTiIsImRyb3Bkb3duSGVpZ2h0IiwiaGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCIkY2xvc2VTZWFyY2giLCJ0cmFuc2l0aW9uTXMiLCJ2YWwiLCJjbGljayIsInRoaXMiLCJjc3MiLCIkc2lkZWJhciIsIiRtZW51VG9nZ2xlIiwiaXMiLCJocmVmIiwiY2hlY2tGb290ZXIiLCJpbm5lckhlaWdodCIsImZpcmVFdmVudCIsIndvcmtlZCIsImZhZGVJbiIsImNoZWNrRGV2aWNlIiwicmVzaXplIiwiaW5pdEtleWJvYXJkIiwic2lkZWJhckV4cGFuZGVkIiwiYmFzZVVybCIsInNwYWNlS2V5IiwiaG9tZVBhdGgiLCJDT05GSUciLCJET0NfUk9PVF9VUkxfU1BBQ0VfS0VZIiwiY3VyclBhdGgiLCJzZXRDb29raWUiLCJzZXRJdGVtIiwibG9jYWxTdG9yYWdlIiwiY3ZhbHVlIiwiY29va2llIiwiZXhwaXJlcyIsInNldFRpbWVvdXQiLCJyZWFkeSIsImR1cmF0aW9uIiwiU0NST0xMIiwiaW5pdFBhZ2VUcmVlIiwiaW50ZXJydXB0IiwidG9nZ2xlU2lkZWJhciIsImluaXRTaWRlYmFyIiwiaW5pdFNlYXJjaCIsImlucHV0IiwiZnVuYyIsIndhaXQiLCJyZXN1bHQiLCJhcmdzIiwiYXJndW1lbnRzIiwiY29udGV4dCIsImRlYm91bmNlZCIsImFwcGx5IiwiY2xlYXJUaW1lb3V0IiwidGltZW91dCIsIm9wZW5TZWFyY2giLCJkZWJvdW5jZWRTZWFyY2giLCJkZWJvdW5jZSIsIm9uIiwic3RyIiwic3ZnIiwidG9nZ2xlIiwiY29udGFpbmVyIiwibGFiZWwiLCJhbGxBY2Nlc3NpYmxlIiwiYWxsRW50cmllc0FjY2Vzc2libGUiLCJzZWxlY3QiLCJzZWxlY3RvciIsImVsZW1lbnQiLCJhbmltYXRlIiwiY3JlYXRlRXZlbnQiLCJjbGlwYm9hcmQiLCIkdHJpZ2dlciIsImNsaXBib2FyZFRpbWVvdXQiLCJsYXN0S2V5Iiwic2Nyb2xsVG9Qb3NpdGlvbiIsImNoYW5nZSIsImNsb3Nlc3QiLCJ0cmlnZ2VyIiwiYWRkaXRpb25hbE9mZnNldCIsImhhc2giLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiZ2V0RWxlbWVudEJ5SWQiLCJzdWJzdHIiLCJvZmZzZXQiLCJheGlzIiwicGF0aG5hbWUiLCJkZWNvZGVVUkkiLCJwcm90b2NvbCIsInRhcmdldCIsImhpZGUiLCIkb3BlblNlYXJjaCIsIiRzZWFyY2giLCJ0b29nbGVEcm9wZG93biIsImZhZGVPdXQiLCJoaWRlTWVudSIsImNyZWF0ZU9wdGlvblRleHQiLCJvcHRpb24iLCJvcHRpb25UZXh0IiwidmVyc2lvbkFjY2Vzc2libGUiLCJhZGRFdmVudExpc3RlbmVyIiwiY29udGFpbnMiLCJvcGVuIiwicnRpbWUiLCJ2YWx1ZSIsInJlc2l6ZWVuZCIsIkRhdGUiLCJzdWJzdHJpbmciLCJjaGVja0dyaWQiLCJ3aWR0aCIsImZpcnN0IiwiYWZ0ZXIiLCJiZWZvcmUiLCJjb25zb2xlIiwibmFtZSIsIkNsaXBib2FyZEpTIiwiY2xlYXJTZWxlY3Rpb24iXSwibWFwcGluZ3MiOiJDQUFBLFNBQUNBLEdBUUdDLE9BQU9DLGVBQWlCRCxPQUFPQyxnQkFBb0IsQ0FBQSxFQUcvQ0QsT0FBT0QsZUFBYUcsV0FBZSxTQUFFQSxHQUN4QyxPQUFBSCxFQUFBLFdBQUFHLEtBQUFBLEdBQUFDLE1BRUQsRUFFQSxJQUNBQyxFQUFBLFVBSVlDLFVBQVVDLFVBQVVDLFFBQVEsUUFBVSxHQUFPRixVQUFVQyxVQUFVQyxRQUFRLFdBR3BFQyxPQUFDQyxVQUFXQyxTQUFBQyxLQUFBWCxPQUFBWSxhQUFBTCxRQUFBLGVBNFB6QixTQUFJTSxJQUNMZCxFQUFBLFFBQUFlLEtBQUEsU0FBQSxTQUFBQyxJQUNHQyxFQUFBQSxFQUFBQSxRQUFBQSxRQUF5QixjQUFBQyxRQUFBbEIsRUFBQSxjQUFBbUIsU0FBQSxVQUVmQyxFQUFBQSxRQUFPQyxPQUFBLFNBRWZDLElBMUNKLElBNkNNQyxFQUFBQSxjQUFLQyxTQUFlLFFBQ2xCVixZQUFXLFdBQ2JkLEVBQUEsb0JBQUF5QixTQUFBLE9BM0NOLEdBQUcsS0E2Q0NDLEdBQUEsRUFDQTFCLEVBQUEsaUJBQUEsR0FBQTJCLE9BM0NSLENBR0Es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QSxFQW5HWixTQTZHaUJvRCxJQUNELElBQUFDLEtBQVNDLEVBVlAsSUFXTnpFLFdBQUF1RSxFQVhNLE1BYWRwRCxHQUFBLEVBRU94QyxJQUNYSyxHQUFBLEdBN0dRMEYsSUFpSFosQ0FFSSxTQUFTQSxJQUNEakwsRUFBRSxzQkFBc0JrTCxRQUFVLEtBQ2xDbEwsRUFBRSxzQkFBc0J5QixTQUFTLGlCQUNqQ3pCLEVBQUUsc0JBQXNCOEIsWUFBWSxpQkFFcEM5QixFQUFFLDRCQUE0Qm1MLFFBQVFDLE1BQU1wTCxFQUFFLCtCQUU5Q0EsRUFBRSxzQkFBc0J5QixTQUFTLGlCQUNqQ3pCLEVBQUUsc0JBQXNCOEIsWUFBWSxpQkFFcEM5QixFQUFFLDRCQUE0Qm1MLFFBQVFFLE9BQU9yTCxFQUFFLDZCQUV2RCxDQTlJQUEsRUFBRUMsUUE2R1VxTCxRQUFZLFdBQ2hCVixFQUFBLElBQUFHLE1BQ0csSUFBQXJELElBQ0M2RCxHQUFZLEVBQ1ZoRixXQUFXdUUsRUFMUCxLQXRHbEIsSUFnSm9CLElBQUlVLFlBQVksb0JBQXFCLENBQ2pEMUIsT0FBUSxTQUFTWixHQUliLE9BSGFsSixFQUFFa0osR0FBU0QsUUFBUSxpQkFDYjdHLEtBQUssWUFFWCxFQUNqQixJQUdNMEYsR0FBRyxXQUFXLFNBQVU5RyxHQUM5QixJQUFJNEgsRUFBVzVJLEVBQUVnQixFQUFFa0ksU0FDbkJOLEVBQVNuSCxTQUFTLGFBRWRvSCxHQUNBNUksT0FBT3dILGFBQWFvQixHQUd4QkEsRUFBbUI1SSxPQUFPc0csWUFBVyxXQUNqQ3FDLEVBQVM5RyxZQUFZLFlBQ3pCLEdBQUcsS0FFSGQsRUFBRXlLLGdCQUNOLEdBRVAsQ0FuMUJELENBbTFCR3pMIiwiZmlsZSI6InRoZW1lLm1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oJCkge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogSzE1dCBIZWxwIFRoZW1lXHJcbiAgICAgKiBNb2RpZmllZCBNYWluIEphdmFzY3JpcHRcclxuICAgICAqXHJcbiAgICAgKiovXHJcblxyXG4gICAgd2luZG93LlNDUk9MTF9XRUJIRUxQID0gd2luZG93LlNDUk9MTF9XRUJIRUxQIHx8IHt9O1xyXG5cclxuICAgIHdpbmRvdy5TQ1JPTExfV0VCSEVMUC5lc2NhcGVIdG1sID0gZnVuY3Rpb24odGV4dCkge1xyXG4gICAgICAgIHJldHVybiAkKCc8ZGl2IC8+JykudGV4dCh0ZXh0KS5odG1sKCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB2YXIgc2VhcmNoVVJMID0gJ3NlYXJjaC5qc29uJztcclxuICAgIHZhciB2aWV3cG9ydCA9ICdkZXNrdG9wJztcclxuICAgIHZhciBzdmRyb3Bkb3duID0gZmFsc2U7XHJcbiAgICAvLyB2YXIgcGFnZUlkO1xyXG5cclxuICAgIC8vIGZpcmVmb3ggZGV0ZWN0aW9uXHJcbiAgICB2YXIgaXNGaXJlZm94ID0gdHlwZW9mIEluc3RhbGxUcmlnZ2VyICE9PSAndW5kZWZpbmVkJzsgLy8gRmlyZWZveCAxLjArXHJcbiAgICB2YXIgaXNJRSA9IChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFXCIpID4gMCkgfHwgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIlRyaWRlbnRcIikgPiAwKTtcclxuICAgIHZhciBpc1NhZmFyaSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3cuSFRNTEVsZW1lbnQpLmluZGV4T2YoJ0NvbnN0cnVjdG9yJykgPiAwOyAvLyBBdCBsZWFzdCBTYWZhcmkgMys6IFwiW29iamVjdCBIVE1MRWxlbWVudENvbnN0cnVjdG9yXVwiXHJcblxyXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIC8vIHBhZ2VJZCA9ICQoJ2JvZHknKS5hdHRyKCdwYWdlaWQnKTtcclxuICAgICAgICAvKiBTZXQgVHlwZSBvZiBEZXZpY2UgKi9cclxuICAgICAgICBjaGVja0RldmljZShmYWxzZSk7IC8vIENVU1RPTSAtIGZhbHNlIHBhcmFtZXRlciB0byBpbmRpY2F0ZSB0aGF0IHRoZSBjYWxsIGlzIG9uIHRoZSBpbml0aWFsIHBhZ2UgbG9hZFxyXG5cclxuICAgICAgICAvKiBpbml0IFNpZGViYXIgRnVuY3Rpb25zICovXHJcbiAgICAgICAgLy8gaW5pdERyYWdiYXIoKTtcclxuICAgICAgICBpbml0U2lkZWJhcigpO1xyXG4gICAgICAgIGNoZWNrR3JpZCgpO1xyXG5cclxuICAgICAgICAvKiBpbml0IFNlYXJjaCBGdW5jdGlvbnMgKi9cclxuICAgICAgICBpbml0U2VhcmNoKCk7XHJcbiAgICAgICAgaW5pdEJ1dHRvbnMoKTtcclxuXHJcbiAgICAgICAgaW5pdEZvb3RlcigpO1xyXG4gICAgICAgIC8vIHNldENvbnRlbnRXaWR0aCgpOyAvLyBDVVNUT00gY29udGVudCB3aWR0aCBhZGp1c3RtZW50c1xyXG5cclxuICAgICAgICAvKiBpbml0IEtleWJvYXJkICovXHJcbiAgICAgICAgaW5pdEtleWJvYXJkKCk7XHJcblxyXG4gICAgICAgICQoJy5zcC1waWNrZXInKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJ2Zvcm0nKS50cmlnZ2VyKCdzdWJtaXQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyogaGFuZGxlIGxpbmtzIHRvIGFuY2hvcnMgY29ycmVjdGx5IHdpdGggdGhlIGhlYWRlcmJhciAqL1xyXG4gICAgICAgIHNjcm9sbFRvUG9zaXRpb24oKTtcclxuXHJcbiAgICAgICAgLy9zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyQoJyNodC1sb2FkZXInKS5oaWRlKCk7fSwgNTAwKTtcclxuICAgICAgICAkKCcjaHQtbG9hZGVyJykuaGlkZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgID0gICAgICAgICAgICBSZXNpemUgU2lkZWJhciAgICAgICAgICAgID1cclxuICAgICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdERyYWdiYXIoKSB7XHJcbiAgICAgICAgc2V0RHJhZ2JhcihwYXJzZUludChnZXRDb29raWUoJ3NpZGViYXItd2lkdGgnKSkpO1xyXG5cclxuICAgICAgICAkKCcjaHQtc2lkZWJhci1kcmFnYmFyJykubW91c2Vkb3duKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJChkb2N1bWVudCkubW91c2Vtb3ZlKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW91c2V4ID0gZS5wYWdlWCArIDI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1vdXNleCA8IDE5MCB8fCBtb3VzZXggPiAkKHdpbmRvdykuaW5uZXJXaWR0aCgpIC0gNDU1KXJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobW91c2V4IDwgMjIwKSQoJyNodC1zaWRlYmFyJykuYWRkQ2xhc3MoJ3NtYWxsJyk7XHJcbiAgICAgICAgICAgICAgICBlbHNlICQoJyNodC1zaWRlYmFyJykucmVtb3ZlQ2xhc3MoJ3NtYWxsJyk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHNldERyYWdiYXIobW91c2V4KTtcclxuICAgICAgICAgICAgICAgIHNldENvb2tpZSgnc2lkZWJhci13aWR0aCcsIG1vdXNleCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2hlY2tHcmlkKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkubW91c2V1cChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnVuYmluZCgnbW91c2Vtb3ZlJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNldFNjcm9sbFZlcnNpb25TZWxlY3QoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXREcmFnYmFyKHZhbCkge1xyXG4gICAgICAgIGlmICh2aWV3cG9ydCAhPSAnZGVza3RvcCcpcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAodmFsID09IGlzTmFOKCkpdmFsID0gMjk1O1xyXG5cclxuICAgICAgICAkKCcjaHQtc2lkZWJhcicpLndpZHRoKHZhbCk7XHJcbiAgICAgICAgaWYgKHZhbCA8IDIyMCkkKCcjaHQtc2lkZWJhcicpLmFkZENsYXNzKCdzbWFsbCcpO1xyXG5cclxuICAgICAgICAkKCcjaHQtd3JhcC1jb250YWluZXInKS5jc3MoXCJsZWZ0XCIsIHZhbCArIDEwKTtcclxuICAgICAgICAkKCcjaHQtaGVhZGVyYmFyJykuY3NzKCdsZWZ0JywgdmFsKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlbmREcmFnYmFyKCkge1xyXG4gICAgICAgIGlmICgkKCcjaHQtc2lkZWJhcicpLmF0dHIoJ3N0eWxlJykgPT0gJycpcmV0dXJuO1xyXG4gICAgICAgICQoJyNodC1zaWRlYmFyJykuYXR0cignc3R5bGUnLCAnJyk7XHJcbiAgICAgICAgJCgnI2h0LXdyYXAtY29udGFpbmVyJykuYXR0cignc3R5bGUnLCAnJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0U2Nyb2xsVmVyc2lvblNlbGVjdCh2aXNpYmxlKSB7XHJcbiAgICAgICAgJC5lYWNoKCQoJy5odC1zY3JvbGwtdmVyc2lvbnMtc2VsZWN0IHNlbGVjdCcpLCBmdW5jdGlvbiAoaW5kZXgsIHZhbCkge1xyXG4gICAgICAgICAgICBzZXREcm9wZG93bigkKHRoaXMpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgID0gICAgICAgICAgICBUb2dnbGUgU2lkZWJhcm5hdiAgICAgICAgICAgID1cclxuICAgICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdFNpZGViYXIoKSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5TQ1JPTEwgJiYgd2luZG93LlNDUk9MTC5pbml0UGFnZVRyZWUpIHtcclxuICAgICAgICAgICAgd2luZG93LlNDUk9MTC5pbml0UGFnZVRyZWUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoJyNodC1tZW51LXRvZ2dsZScpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRvZ2dsZVNpZGViYXIoKSwgMC4wNSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gIFxyXG4gICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgID0gICAgICAgICAgICAgICBIZWFkZXJiYXIgICAgICAgICAgICAgICAgPVxyXG4gICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICBmdW5jdGlvbiBzY3JvbGxUb1Bvc2l0aW9uKCkge1xyXG4gICAgICAgIHZhciBkdXJhdGlvbiA9IDUwMDtcclxuICAgICAgICB2YXIgYWRkaXRpb25hbE9mZnNldCA9IDEwO1xyXG5cclxuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhhc2gpIHtcclxuICAgICAgICAgICAgLy8gTmV0IHRvIHB1dCBpdCBhdCB0aGUgZW5kIG9mIHRoZSBldmVudCBsb29wIGZvciBtYWtpbmcgaXQgd29yayBpbiBJRSA6LShcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICQod2luZG93KS5zY3JvbGxUbyhcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh3aW5kb3cubG9jYXRpb24uaGFzaC5zdWJzdHIoMSkpLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAtKCQoJyNodC1oZWFkZXJiYXInKS5oZWlnaHQoKSArIGFkZGl0aW9uYWxPZmZzZXQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVycnVwdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXhpczogJ3knXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKCcuaHQtY29udGVudCcpLm9uKCdjbGljaycsICdhW2hyZWZePVwiJytsb2NhdGlvbi5wYXRobmFtZSsnXFxcXCNcIl0sIGFbaHJlZl49XFxcXCNdJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5oYXNoLnN1YnN0cigxKSk7XHJcbiAgICAgICAgICAgIGlmICghZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgLy8gbG9vayBmb3IgZWxlbWVudCB3aXRoIGVuY29kZWQgSUQgLSBoYXNoIGlzIHByb3ZpZGVkIGRpZmZlcmVudCBpbiBGaXJlZm94XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVjb2RlVVJJKHRoaXMuaGFzaC5zdWJzdHIoMSkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKHdpbmRvdykuc3RvcCh0cnVlKS5zY3JvbGxUbyhcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAtKCQoJyNodC1oZWFkZXJiYXInKS5oZWlnaHQoKSArIGFkZGl0aW9uYWxPZmZzZXQpLFxyXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcnJ1cHQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYXhpczogJ3knXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvLyBQdXNoU3RhdGUgaXMgbm90IHN1cHBvcnRlZCBmb3IgbG9jYWwgZmlsZXMgKGZpbGU6Ly8vLi4uKVxyXG4gICAgICAgICAgICAvLyBTZWUgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MzAxMjEwXHJcbiAgICAgICAgICAgIGlmIChoaXN0b3J5ICYmIGxvY2F0aW9uLnByb3RvY29sLnN1YnN0cigwLDQpICE9ICdmaWxlJykge1xyXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoe30sICcnLCAkKGUudGFyZ2V0KS5hdHRyKCdocmVmJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgID0gICAgICAgICAgICAgICBTZWFyY2ggICAgICAgICAgICAgICAgICAgID1cclxuICAgICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdFNlYXJjaCgpIHtcclxuICAgICAgICB2YXIgZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0KSB7XHJcbiAgICAgICAgICAgIHZhciB0aW1lb3V0O1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciBkZWJvdW5jZWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGRlYm91bmNlZCwgd2FpdCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBkZWJvdW5jZWRTZWFyY2ggPSBkZWJvdW5jZShkb1NlYXJjaCwgMjAwKTtcclxuXHJcbiAgICAgICAgdmFyIGlucHV0ID0gJCgnI3NlYXJjaCBpbnB1dC5zZWFyY2gtaW5wdXQnKTtcclxuICAgICAgICBpbnB1dC5vbignZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBzZWFyY2hGaWVsZEFjdGl2ZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBpbnB1dC5vbignYmx1cicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBzZWFyY2hGaWVsZEFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIGlucHV0Lm9uKCdpbnB1dCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIHN0ciA9IGlucHV0LnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAoc3RyLmxlbmd0aCA+PSAzKSB7XHJcbiAgICAgICAgICAgICAgICBkZWJvdW5jZWRTZWFyY2goc3RyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHN0ci5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgJCgnLmh0LXNlYXJjaC1kcm9wZG93bicpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlucHV0Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUud2hpY2ggPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICBwZXJmb3JtU2VhcmNoKCk7IC8vIENVU1RPTVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJ2Zvcm0jc2VhcmNoJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uKCkgeyAvLyBDVVNUT01cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIG9wZW5TZWFyY2goKSB7XHJcbiAgICAgICAgJCgnYm9keScpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKCEkKGUudGFyZ2V0KS5wYXJlbnRzKCcjaHQtc2VhcmNoJykubGVuZ3RoICYmICQoJyNodC1zZWFyY2gnKS5oYXNDbGFzcygnb3BlbicpKSB7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykudW5iaW5kKCdjbGljaycpO1xyXG4gICAgICAgICAgICAgICAgY2xvc2VTZWFyY2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJyNodC1zZWFyY2gnKS5hZGRDbGFzcygnb3BlbicpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcuaHQtc2VhcmNoLWNsZWFyJykuYWRkQ2xhc3MoJ3Nob3cnKTtcclxuICAgICAgICB9LCAyNTApO1xyXG4gICAgICAgIHNlYXJjaEZpZWxkQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAkKCcuc2VhcmNoLWlucHV0JylbMF0uZm9jdXMoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDVVNUT006IFdlIG9ubHkgaGlkZSBzZWFyY2ggc3VnZ2VzdGlvbnMgb24gZXNjXHJcbiAgICBmdW5jdGlvbiBjbG9zZVNlYXJjaCgpIHtcclxuICAgICAgICBpbnB1dCA9ICQoJyNodC1zZWFyY2gnKTtcclxuICAgICAgICAvL2lucHV0LmZpbmQoJ2lucHV0JykudmFsKCcnKTtcclxuICAgICAgICAvL2lucHV0LmZpbmQoJ2lucHV0JykuYmx1cigpO1xyXG4gICAgICAgIC8vaW5wdXQucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgICAgICAvLyQoJy5odC1zZWFyY2gtY2xlYXInKS5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG4gICAgICAgIGlucHV0LmZpbmQoJy5odC1zZWFyY2gtZHJvcGRvd24nKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICBcclxuICAgICAgICAvLyBDVVNUT00gLSBSZW1vdmVzIHRoZSBob3ZlciBjbGFzcyBmcm9tIGl0ZW1zIHNlbGVjdGVkIGluIHRoZSBzZWFyY2ggZHJvcC1kb3duXHJcblx0XHR2YXIgc2VsZWN0ZWRTZWFyY2hMaW5rRWxlbWVudCA9ICQoXCIuaHQtc2VhcmNoLWRyb3Bkb3duIGEuaG92ZXJcIik7XHJcbiAgICAgICAgc2VsZWN0ZWRTZWFyY2hMaW5rRWxlbWVudC5yZW1vdmVDbGFzcyhcImhvdmVyXCIpO1xyXG4gICAgICBcclxuICAgICAgICAkKGRvY3VtZW50KS51bmJpbmQoJ2tleWRvd24nKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDVVNUT00gLSBjb21tZW50ZWQgb3V0LCBub3QgdXNlZCBpbiBvdXIgaW1wbGVtZW50YXRpb25cclxuICAgIC8qZnVuY3Rpb24gbmF2aWdhdGVUb1NlYXJjaFJlc3VsdHNQYWdlKHF1ZXJ5KSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5TQ1JPTExfV0VCSEVMUCAmJiB3aW5kb3cuU0NST0xMX1dFQkhFTFAuc2VhcmNoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5TQ1JPTExfV0VCSEVMUC5zZWFyY2gubmF2aWdhdGVUb1NlYXJjaFBhZ2UocXVlcnkpO1xyXG4gICAgICAgICAgICBjbG9zZVNlYXJjaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0qL1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBkb1NlYXJjaChxdWVyeSkge1xyXG4gICAgICAgIHZhciBkcm9wZG93biA9ICQoJy5odC1zZWFyY2gtaW5wdXQgLmh0LXNlYXJjaC1kcm9wZG93bicpO1xyXG4gICAgICAgIHZhciByZXN1bHRzTGlzdCA9IGRyb3Bkb3duLmZpbmQoJ3VsJyk7XHJcbiAgICAgIFx0Ly8gQ1VTVE9NIC0gRXNjYXBlcyBmb3JiaWRkZW4gY2hhcmFjdGVyc1xyXG5cdFx0cXVlcnkgPSBlbmNvZGVVUklDb21wb25lbnQocXVlcnkpO1xyXG4gICAgICBcclxuICAgICAgICByZXN1bHRzTGlzdC5lbXB0eSgpO1xyXG5cclxuICAgICAgICB2YXIgaGFuZGxlU2VhcmNoUmVzdWx0cyA9IGZ1bmN0aW9uKHNlYXJjaFJlc3VsdHMsIHF1ZXJ5KSB7XHJcbiAgICAgICAgICAgIC8vICQoZG9jdW1lbnQpLnVuYmluZCgna2V5ZG93bicpO1xyXG5cclxuICAgICAgICAgICAgJC5lYWNoKHNlYXJjaFJlc3VsdHMsIGZ1bmN0aW9uIChpbmRleCwgc2VhcmNoUmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzTGlzdC5hcHBlbmQoJzxsaSBuPVwiJyArIGluZGV4ICsgJ1wiIGNsYXNzPVwic2VhcmNoLXJlc3VsdFwiPjxhIGhyZWY9XCInICsgc2VhcmNoUmVzdWx0LmxpbmsudG9Mb3dlckNhc2UoKS5yZXBsYWNlKCcuaHRtbCcsJycpICsgJ1wiPicgKyBTQ1JPTExfV0VCSEVMUC5lc2NhcGVIdG1sKHNlYXJjaFJlc3VsdC50aXRsZSkgKyAnPC9hPjwvbGk+Jyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gQ1VTVE9NIC0gQnJva2VuIGRvd24gaW50byBpbmRpdmlkdWFsIGNvbXBvbmVudCBlbGVtZW50cywgbmVlZGVkIHRvIHNlY3VyZWx5IGRpc3BsYXkgdGhlIHF1ZXJ5IHZhbHVlXHJcbiAgICAgICAgICAgIC8vIENVU1RPTSAtIEFkZGVkIHRoZSAnZGVjb2RlVVJJQ29tcG9uZW50KCknIGNhbGwgdG8gdGhlIGRpc3BsYXllZCBzZWFyY2ggcXVlcnkgKHN0b3BzIGRpc3BsYXlpbmcgb2YgZW5jb2RlZCBcIlNlYXJjaDpcIiB2YWx1ZXMgaW4gdGhlIHNlYXJjaCBzdWdnZXN0ZXIgZHJvcC1kb3duKVxyXG4gICAgICAgICAgICB2YXIga2V5YnV0dG9uX2xpID0gJCgnPGxpIGNsYXNzPVwic2VhcmNoLWtleVwiIG49XCInICsgc2VhcmNoUmVzdWx0cy5sZW5ndGggKyAnXCI+PC9saT4nKTtcclxuICAgICAgICAgICAgdmFyIGtleWJ1dHRvbl9saW5rID0gJCgnPGEgY2xhc3M9XCJzZWFyY2gta2V5LWJ1dHRvblwiIGhyZWY9XCIjXCI+U2VhcmNoOiZuYnNwOzwvYT4nKTtcclxuICAgICAgICAgICAgdmFyIGtleWJ1dHRvbl9zZWFyY2hlZFRlcm0gPSAkKCc8Yj48L2I+JykudGV4dChkZWNvZGVVUklDb21wb25lbnQocXVlcnkpKTtcclxuICAgICAgICAgICAgdmFyIGtleWJ1dHRvbiA9IGtleWJ1dHRvbl9saS5hcHBlbmQoa2V5YnV0dG9uX2xpbmsuYXBwZW5kKGtleWJ1dHRvbl9zZWFyY2hlZFRlcm0pKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGtleWJ1dHRvbi5iaW5kKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIHBlcmZvcm1TZWFyY2goKTsgLy8gQ1VTVE9NXHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXN1bHRzTGlzdC5hcHBlbmQoa2V5YnV0dG9uKTtcclxuXHJcbiAgICAgICAgICAgIHJlc3VsdHNMaXN0LmNoaWxkcmVuKCdsaScpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaSA9ICQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICBsaS5iaW5kKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c0xpc3QuZmluZCgnbGkgYScpLnJlbW92ZUNsYXNzKCdob3ZlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpLmZpbmQoJ2EnKS5hZGRDbGFzcygnaG92ZXInKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGRyb3Bkb3duLmFkZENsYXNzKCdvcGVuJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSAkKCcjc2VhcmNoIGlucHV0LnNlYXJjaC1pbnB1dCcpO1xyXG5cclxuICAgICAgICAgICAgaW5wdXQub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChlLndoaWNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25LZXlkb3duKC0xLCBkcm9wZG93bik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25LZXlkb3duKDEsIGRyb3Bkb3duKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHdpbmRvdy5TQ1JPTExfV0VCSEVMUCAmJiB3aW5kb3cuU0NST0xMX1dFQkhFTFAuc2VhcmNoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5TQ1JPTExfV0VCSEVMUC5zZWFyY2gucGVyZm9ybVNlYXJjaChxdWVyeSwgaGFuZGxlU2VhcmNoUmVzdWx0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGRyb3Bkb3duS2V5ZG93bihkaXJlY3Rpb24sIGRyb3Bkb3duKSB7XHJcbiAgICAgICAgdmFyIGl0ZW1jb3VudCA9IGRyb3Bkb3duLmZpbmQoJ2EnKS5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRpdGVtID0gcGFyc2VJbnQoZHJvcGRvd24uZmluZCgnYS5ob3ZlcicpLnBhcmVudCgpLmF0dHIoJ24nKSk7XHJcbiAgICAgICAgaWYgKGlzTmFOKGN1cnJlbnRpdGVtKSljdXJyZW50aXRlbSA9IC0xO1xyXG5cclxuICAgICAgICB2YXIgbmV4dGl0ZW0gPSBjdXJyZW50aXRlbSArIGRpcmVjdGlvbjtcclxuICAgICAgICB2YXIgZHJvcGRvd25IZWlnaHQgPSBkcm9wZG93bi5oZWlnaHQoKSAtIDI7XHJcblxyXG4gICAgICAgIHZhciBpdGVtaGVpZ2h0ID0gcGFyc2VJbnQoZHJvcGRvd24uZmluZCgnYS5ob3ZlcicpLm91dGVySGVpZ2h0KCkpO1xyXG5cclxuICAgICAgICBpZiAobmV4dGl0ZW0gPCAwIHx8IG5leHRpdGVtID49IGl0ZW1jb3VudClyZXR1cm47XHJcblxyXG4gICAgICAgICQuZWFjaChkcm9wZG93bi5maW5kKCdhJyksIGZ1bmN0aW9uIChpbmRleCwgdmFsKSB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PSBjdXJyZW50aXRlbSkkKHRoaXMpLnJlbW92ZUNsYXNzKCdob3ZlcicpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPT0gbmV4dGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2hvdmVyJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKChpdGVtaGVpZ2h0ICogKGluZGV4ICsgMSkpIC0gZHJvcGRvd24uc2Nyb2xsVG9wKCkgPiBkcm9wZG93bkhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLnNjcm9sbFRvcCgoaXRlbWhlaWdodCAqIChpbmRleCArIDEpKSAtIGRyb3Bkb3duSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKGl0ZW1oZWlnaHQgKiAoaW5kZXggKyAxKSkgLSBkcm9wZG93bi5zY3JvbGxUb3AoKSA8IGl0ZW1oZWlnaHQgJiYgZHJvcGRvd24uc2Nyb2xsVG9wKCkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uc2Nyb2xsVG9wKGl0ZW1oZWlnaHQgKiBpbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0gIFxyXG5cclxuICBcclxuICAgIC8vIENVU1RPTTogUGVyZm9ybXMgYSBzZWFyY2hcclxuICAgIGZ1bmN0aW9uIHBlcmZvcm1TZWFyY2goKSB7XHJcblx0XHQvLyBBdHRlbXB0cyB0byBnZXQgYSBzZWxlY3RlZCBzZWFyY2ggZHJvcC1kb3duIGxpbmsgZWxlbWVudFxyXG4gICAgICAgIHZhciBzZWxlY3RlZCA9ICQoJy5odC1zZWFyY2gtZHJvcGRvd24gYS5ob3ZlcicpOyAgICAgICAgXHJcblxyXG5cdFx0aWYgKHNlbGVjdGVkLmxlbmd0aCAhPSAwKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxlY3RlZC5pcygnLnNlYXJjaC1rZXktYnV0dG9uJykpIHtcclxuXHRcdCAgICAgICAgLy8gSWYgdGhlIHNlbGVjdGVkIGl0ZW0gaXMgdGhlIGZpbmFsIFwiU2VhcmNoOiA8cXVlcnk+XCIgZWxlbWVudCwgb3BlbnMgdGhlIHNlYXJjaCByZXN1bHQgcGFnZSBcclxuICAgICAgICAgICAgICAgIGtlbnRpY29UaGVtZU9wZW5TZWFyY2hSZXN1bHRzUGFnZSgpOyAvLyBGdW5jdGlvbiBkZWZpbmVkIGluIHRoZW1lLmN1c3RvbS5qc1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIElmIHRoZSBzZWxlY3RlZCBpdGVtIGlzIGEgcGFnZSByZXN1bHQsIHJlZGlyZWN0cyBkaXJlY3RseSB0byBnaXZlbiBkb2N1bWVudGF0aW9uIHBhZ2VcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gc2VsZWN0ZWQuYXR0cignaHJlZicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHRcdFx0Ly8gT3BlbnMgdGhlIHNlYXJjaCByZXN1bHQgcGFnZSAoZGVmYXVsdCBjYXNlKVxyXG4gICAgICAgICAgICBrZW50aWNvVGhlbWVPcGVuU2VhcmNoUmVzdWx0c1BhZ2UoKTsgLy8gRnVuY3Rpb24gZGVmaW5lZCBpbiB0aGVtZS5jdXN0b20uanNcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGluaXRCdXR0b25zKCkge1xyXG5cclxuICAgICAgICAkKCcjaHQtc2VhcmNoLWJ1dHRvbicpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBvcGVuU2VhcmNoKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJyNzZWFyY2hCdXR0b24nKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIFx0aWYgKCQoXCIuc2VhcmNoLWlucHV0XCIpLmhhc0NsYXNzKFwic2hvd1wiKSB8fCAkKFwiLnNlYXJjaC1pbnB1dFwiKS5pcyhcIjp2aXNpYmxlXCIpKSB7XHJcbiAgICAgICAgICAgIFx0cGVyZm9ybVNlYXJjaCgpO1xyXG4gICAgICAgIFx0fSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoXCIuc2VhcmNoLWlucHV0XCIpLmFkZENsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcuaHQtc2VhcmNoLWNsZWFyJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGNsb3NlU2VhcmNoKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgID0gICAgICAgSGVhZGVyIHJlc3BvbnNpdml0eSAgICAgICAgPVxyXG4gICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyICRvcGVuU2VhcmNoID0gJCgnLmpzLWhlYWRlci1zZWFyY2gtb3BlbicpO1xyXG4gICAgICAgIHZhciAkY2xvc2VTZWFyY2ggPSAkKCcuanMtaGVhZGVyLXNlYXJjaC1jbG9zZScpO1xyXG4gICAgICAgIHZhciAkc2VhcmNoID0gJCgnLmpzLWhlYWRlci1zZWFyY2gtYm94Jyk7XHJcbiAgICAgICAgdmFyIHRyYW5zaXRpb25NcyA9IDI1MDtcclxuXHJcbiAgICAgICAgJG9wZW5TZWFyY2guY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAkc2VhcmNoXHJcbiAgICAgICAgICAgICAgICAuY3NzKFwiZGlzcGxheVwiLCBcImZsZXhcIilcclxuICAgICAgICAgICAgICAgIC5oaWRlKClcclxuICAgICAgICAgICAgICAgIC5mYWRlSW4odHJhbnNpdGlvbk1zKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJGNsb3NlU2VhcmNoLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgJHNlYXJjaC5mYWRlT3V0KHRyYW5zaXRpb25Ncyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciAkbWVudVRvZ2dsZSA9ICQoJy5qcy1tZW51LXRvZ2dsZScpO1xyXG4gICAgICAgIHZhciAkc2lkZWJhciA9ICQoJyNodC1zaWRlYmFyJyk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNob3dNZW51KCkge1xyXG4gICAgICAgICAgICAkbWVudVRvZ2dsZS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICRzaWRlYmFyLmZhZGVJbih0cmFuc2l0aW9uTXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaGlkZU1lbnUoKSB7XHJcbiAgICAgICAgICAgICRtZW51VG9nZ2xlLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgJHNpZGViYXIuZmFkZU91dCh0cmFuc2l0aW9uTXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJG1lbnVUb2dnbGUuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoJG1lbnVUb2dnbGUuaGFzQ2xhc3MoJ2lzLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgICAgICBoaWRlTWVudSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2hvd01lbnUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYgKCEkbWVudVRvZ2dsZVswXS5jb250YWlucyhlLnRhcmdldCkgJiYgISRzaWRlYmFyWzBdLmNvbnRhaW5zKGUudGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgaGlkZU1lbnUoKTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9KTtcclxuICAgIH0pKCk7XHJcblxyXG5cclxuICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICA9ICAgICAgICAgICAgRHJvcGRvd24gICAgICAgICAgICA9XHJcbiAgICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xyXG5cclxuICAgIGZ1bmN0aW9uIHNldERyb3Bkb3duKHNlbGVjdCkge1xyXG4gICAgICAgIHZhciBjb250YWluZXIgPSBzZWxlY3QucGFyZW50KCk7XHJcbiAgICAgICAgdmFyIHN2ZyA9ICc8c3ZnIHdpZHRoPVwiMTBweFwiIGhlaWdodD1cIjEwcHhcIiB2aWV3Qm94PVwiMCAwIDEwIDEwXCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIj48ZyBjbGFzcz1cImh0LXNlbGVjdC1idXR0b24taWNvblwiPjxwYXRoIGQ9XCJNMiwzIEw4LDMgTDUsNyBMMiwzIFpcIj48L3BhdGg+PC9nPjwvc3ZnPic7XHJcbiAgICAgICAgdmFyIHRvZ2dsZSA9ICQoJzxhIGNsYXNzPVwiaHQtc2VsZWN0LWJ1dHRvblwiPjxzcGFuPicgKyBjcmVhdGVPcHRpb25UZXh0KHNlbGVjdC5maW5kKCdvcHRpb246c2VsZWN0ZWQnKSkgKyAnPC9zcGFuPicgKyBzdmcgKyAnPC9hPicpO1xyXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmQodG9nZ2xlKTtcclxuXHJcbiAgICAgICAgdmFyIGxhYmVsID0gY29udGFpbmVyLnBhcmVudCgpLmZpbmQoJ2xhYmVsJykucmVtb3ZlKCk7XHJcbiAgICAgICAgdG9nZ2xlLnByZXBlbmQobGFiZWwpO1xyXG5cclxuICAgICAgICB2YXIgZHJvcGRvd24gPSAkKCc8ZGl2IGNsYXNzPVwiaHQtZHJvcGRvd24gaHQtZHJvcGRvd24tc2VsZWN0XCI+PHVsPjwvdWw+PC9kaXY+Jyk7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZChkcm9wZG93bik7XHJcblxyXG4gICAgICAgIHZhciBhbGxBY2Nlc3NpYmxlID0gYWxsRW50cmllc0FjY2Vzc2libGUoc2VsZWN0KTtcclxuICAgICAgICAkLmVhY2goc2VsZWN0LmZpbmQoJ29wdGlvbicpLCBmdW5jdGlvbiAoaW5kZXgsIHZhbCkge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9ICQoJzxsaSBuPVwiJyArIGluZGV4ICsgJ1wiPjxhIGRhdGEtc2Nyb2xsLWludGVncmF0aW9uLW5hbWU9XCInICsgc2VsZWN0LmF0dHIoJ25hbWUnKSArICdcIiBkYXRhLXNjcm9sbC1pbnRlZ3JhdGlvbi10aXRsZT1cIicgKyAkKHRoaXMpLnRleHQoKSArICdcIiBkYXRhLXNjcm9sbC1pbnRlZ3JhdGlvbi12YWx1ZT1cIicgKyAkKHRoaXMpLmF0dHIoJ3ZhbHVlJykgKyAnXCI+JyArIGNyZWF0ZU9wdGlvblRleHQoJCh0aGlzKSwgIWFsbEFjY2Vzc2libGUpICsgJzwvYT48L2xpPicpO1xyXG4gICAgICAgICAgICBkcm9wZG93bi5maW5kKCd1bCcpLmFwcGVuZChpdGVtKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2VsZWN0Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWwgPSBzZWxlY3QudmFsKCk7XHJcbiAgICAgICAgICAgIHRvZ2dsZS5maW5kKCdzcGFuJykudGV4dChzZWxlY3QuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudGV4dCgpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdG9nZ2xlLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZpZXdwb3J0ID09ICdtb2JpbGUnICYmICEoaXNGaXJlZm94IHx8IGlzSUUpKSB7XHJcbiAgICAgICAgICAgICAgICBvcGVuU2VsZWN0KHNlbGVjdCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgIHRvb2dsZURyb3Bkb3duKGNvbnRhaW5lciwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkLmVhY2goJCgnLicgKyBjb250YWluZXIuYXR0cignY2xhc3MnKSksIGZ1bmN0aW9uIChpbmRleCwgdmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykuZmluZCgnLmh0LXNlbGVjdC1idXR0b24nKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vZ2xlRHJvcGRvd24oJCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRvb2dsZURyb3Bkb3duKGNvbnRhaW5lciwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKiBDaGVjayBpZiBhbGwgb2YgdGhlIGVudHJpZXMgaW4gdGhlIGdpdmVuIHNlbGVjdCBhcmUgcnVudGltZSBhY2Nlc3NpYmxlIChjdXJyZW50bHkgb25seSByZWxldmFudCBmb3IgdmVyc2lvbnMpLiAqL1xyXG4gICAgZnVuY3Rpb24gYWxsRW50cmllc0FjY2Vzc2libGUoc2VsZWN0KSB7XHJcbiAgICAgICAgdmFyIGFsbEFjY2Vzc2libGUgPSB0cnVlO1xyXG4gICAgICAgIGlmIChzZWxlY3QuYXR0cignbmFtZScpID09PSAnc2Nyb2xsLXZlcnNpb25zOnZlcnNpb24tbmFtZScpIHtcclxuICAgICAgICAgICAgJC5lYWNoKHNlbGVjdC5maW5kKCdvcHRpb24nKSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYWxsQWNjZXNzaWJsZSAmPSAoJCh0aGlzKS5hdHRyKCdkYXRhLXZlcnNpb24tYWNjZXNzaWJsZScpID09PSAndHJ1ZScpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFsbEFjY2Vzc2libGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqIENyZWF0ZSB0aGUgdGV4dCBmb3IgdGhlIGRyb3AtZG93biBlbnRyaWVzICh2ZXJzaW9uIGVudHJpZXMgbWF5IGNvbnRhaW4gc29tZSBleHRyYSBpbmZvIG90aGVyIHRoYW4gdGhlIHByb3BlcnR5IG5hbWUpLiAqL1xyXG4gICAgZnVuY3Rpb24gY3JlYXRlT3B0aW9uVGV4dChvcHRpb24sIHNob3dWZXJzaW9uQWNjZXNzaWJpbGl0eSkge1xyXG4gICAgICAgIHZhciBvcHRpb25UZXh0ID0gb3B0aW9uLnRleHQoKTtcclxuICAgICAgICBpZiAoc2hvd1ZlcnNpb25BY2Nlc3NpYmlsaXR5KSB7XHJcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uQWNjZXNzaWJsZSA9IG9wdGlvbi5hdHRyKCdkYXRhLXZlcnNpb24tYWNjZXNzaWJsZScpO1xyXG4gICAgICAgICAgICBpZiAodmVyc2lvbkFjY2Vzc2libGUpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvblRleHQgKz0gJyA8c3BhbiBzdHlsZT1cImZsb2F0OiByaWdodDsgbWFyZ2luLWxlZnQ6IDAuOGVtOyBjb2xvcjogI2RkZGRkZDsnO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZlcnNpb25BY2Nlc3NpYmxlID09PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25UZXh0ICs9ICd2aXNpYmlsaXR5OiBoaWRkZW47JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9wdGlvblRleHQgKz0gJ1wiIGNsYXNzPVwiazE1dC1pY29uLXZpZXdwb3J0XCI+PC9zcGFuPic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvblRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdG9vZ2xlRHJvcGRvd24oY29udGFpbmVyLCBvcGVuKSB7XHJcbiAgICAgICAgaWYgKG9wZW4pIHtcclxuICAgICAgICAgICAgJCgnYm9keScpLmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGlmICgkKGUudGFyZ2V0KS5pcyhjb250YWluZXIuZmluZCgnKicpKSlyZXR1cm47XHJcbiAgICAgICAgICAgICAgICB0b29nbGVEcm9wZG93bihjb250YWluZXIsICFvcGVuKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJ2JvZHknKS51bmJpbmQoJ2NsaWNrJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdG9nZ2xlID0gY29udGFpbmVyLmZpbmQoJy5odC1zZWxlY3QtYnV0dG9uJyk7XHJcbiAgICAgICAgdmFyIGRyb3Bkb3duID0gY29udGFpbmVyLmZpbmQoJy5odC1kcm9wZG93bicpO1xyXG5cclxuICAgICAgICBpZiAob3Blbikge1xyXG4gICAgICAgICAgICB0b2dnbGUuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICBkcm9wZG93bi5hZGRDbGFzcygnb3BlbicpO1xyXG5cclxuICAgICAgICAgICAgJC5lYWNoKGRyb3Bkb3duLmZpbmQoJ2xpJyksIGZ1bmN0aW9uIChpbmRleCwgdmFsKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmJpbmQoJ21vdXNlb3ZlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5maW5kKCdsaSBhJykucmVtb3ZlQ2xhc3MoJ2hvdmVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdhJykuYWRkQ2xhc3MoJ2hvdmVyJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2EnKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2EnKS5hdHRyKCdkYXRhLXNjcm9sbC1pbnRlZ3JhdGlvbi1uYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gJChlLnRhcmdldCkuY2xvc2VzdCgnYScpLmF0dHIoJ2RhdGEtc2Nyb2xsLWludGVncmF0aW9uLXZhbHVlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gJChlLnRhcmdldCkuY2xvc2VzdCgnYScpLmF0dHIoJ2RhdGEtc2Nyb2xsLWludGVncmF0aW9uLXRpdGxlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZS5maW5kKCdzcGFuJykudGV4dCh0aXRsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUgKyAnPycgKyBuYW1lICsgJz0nICsgdmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdG9nZ2xlLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCdpbnB1dFtuYW1lPWNvbnRleHRdJykudmFsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ICs9ICcmY29udGV4dD0nICsgY29udGV4dDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICA9ICAgICAgICAgICAgSW5pdCBGb290ZXIgICAgICAgICAgICA9XHJcbiAgICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xyXG4gICAgZnVuY3Rpb24gaW5pdEZvb3RlcigpIHtcclxuICAgICAgICBjaGVja0Zvb3RlcigpO1xyXG5cclxuICAgICAgICAkKCcjaHQtanVtcC10b3AnKS5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJCgnYm9keSxodG1sJykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAwfSxcclxuICAgICAgICAgICAgICAgIDEwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY2hlY2tGb290ZXIoKSB7XHJcbiAgICAgICAgaWYgKCQoJ2FydGljbGUuaHQtY29udGVudCcpLm91dGVySGVpZ2h0KCkgPCAkKHdpbmRvdykuaW5uZXJIZWlnaHQoKSkge1xyXG4gICAgICAgICAgICAkKCcjaHQtanVtcC10b3AnKS5mYWRlT3V0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnI2h0LWp1bXAtdG9wJykuZmFkZUluKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgID0gICAgICAgICAgICBNZWRpYSBRdWVyeSBEZXRlY3Rpb24gICAgICAgICAgICA9XHJcbiAgICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuICAgIGZ1bmN0aW9uIGNoZWNrRGV2aWNlKHJlc2l6ZSkgeyAvLyBDVVNUT00gLSByZXNpemUgcGFyYW1ldGVyIGFkZGVkIHRvIGRpZmZlcmVudGlhdGUgYmV0d2VlbiBwYWdlIGxvYWQgYW5kIHJlc2l6ZSBjYWxsc1xyXG4gICAgICAgIHZhciBpID0gcGFyc2VJbnQoJCgnI2h0LW1xLWRldGVjdCcpLmNzcygnd2lkdGgnKS5yZXBsYWNlKCdweCcsICcnKSk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoaSkge1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICB2aWV3cG9ydCA9ICdtb2JpbGUnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICB2aWV3cG9ydCA9ICdwb3RyYWl0JztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgdmlld3BvcnQgPSAnbGFuZHNjYXBlJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgdmlld3BvcnQgPSAnZGVza3RvcCc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgICAgIHZpZXdwb3J0ID0gJ2Rlc2t0b3AnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgYmFzZVVybCA9ICQoXCJtZXRhW25hbWU9J2NvbmZsdWVuY2UtYmFzZS11cmwnXVwiKS5hdHRyKFwiY29udGVudFwiKTtcclxuICAgICAgICB2YXIgc3BhY2VLZXkgPSAkKFwibWV0YVtuYW1lPSdjb25mbHVlbmNlLXNwYWNlLWtleSddXCIpLmF0dHIoXCJjb250ZW50XCIpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgdmFyIGhvbWVQYXRoID0gYmFzZVVybDtcclxuXHRcdC8vIEhhbmRsaW5nIGZvciBjYXNlcyB3aGVyZSB0aGUgdmVyc2lvbiBpcyBkaXNwbGF5ZWQgd2l0aG91dCBhIHNwYWNlIGtleSBpbiB0aGUgVVJMXHJcblx0XHRpZiAoc3BhY2VLZXkgIT09IENPTkZJRy5ET0NfUk9PVF9VUkxfU1BBQ0VfS0VZKSB7XHJcblx0XHRcdGhvbWVQYXRoID0gaG9tZVBhdGggKyAnLycgKyBzcGFjZUtleTtcclxuXHRcdH1cclxuICAgICAgICB2YXIgY3VyclBhdGggPSAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJyk7XHJcblxyXG4gICAgICAgIC8vIE5vIHNpZGViYXIgZm9yIGhvbWVwYWdlcyBhbmQgc2VhcmNoIHJlc3VsdHMgKyBDb2xsYXBzZWQgc21hbGwgc2VhcmNoIGJveCBmb3Igc21hbGxlciBzY3JlZW5zXHJcbiAgICAgICAgaWYgKCAhKGN1cnJQYXRoID09IGhvbWVQYXRoIHx8IGN1cnJQYXRoID09IChob21lUGF0aCArICcvJykgfHwgY3VyclBhdGguaW5kZXhPZihob21lUGF0aCArICcvc2VhcmNoJykgPj0gMCkgKXtcclxuICAgICAgICAgICAgaWYgKHZpZXdwb3J0ID09ICdkZXNrdG9wJykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZXNpemUpIHsgLy8gRG9lcyBub3QgYXV0by1vcGVuIHRoZSBzaWRlYmFyIHdoZW4gcmVzaXppbmdcclxuICAgICAgICAgICAgICAgICAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ3Nob3ctc2lkZWJhcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKCdzaG93LXNpZGViYXInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBcdGlmICh2aWV3cG9ydCA9PSAnZGVza3RvcCcgfHwgdmlld3BvcnQgPT0gJ2xhbmRzY2FwZScpIHtcclxuICAgICAgICAgICAgICBcdCQoJy5zZWFyY2gtaW5wdXQnKS5hZGRDbGFzcygnc2hvdycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIFx0JCgnLnNlYXJjaC1pbnB1dCcpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE9uY2UgcmVuZGVyZWQsIGFkZCBDU1MgYW5pbWF0aW9uIGNsYXNzIHRvIHNpZGViYXIgZWxlbWVudFxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKCcjaHQtc2lkZWJhcicpLmFkZENsYXNzKCdhbmltYXRlJyk7fSw1MDApO1xyXG4gICAgICBcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXskKCcuc2VhcmNoLWlucHV0JykuYWRkQ2xhc3MoJ2FuaW1hdGUnKTt9LDUwMCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgID0gICAgICAgICAgICBXaW5kb3cgUmVzaXplICAgICAgICAgICAgPVxyXG4gICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xyXG4gICAgdmFyIHJ0aW1lID0gbmV3IERhdGUoMSwgMSwgMjAwMCwgMTIsIDAsIDApO1xyXG4gICAgdmFyIHRpbWVvdXQgPSBmYWxzZTtcclxuICAgIHZhciBkZWx0YSA9IDIwMDtcclxuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJ0aW1lID0gbmV3IERhdGUoKTtcclxuICAgICAgICBpZiAodGltZW91dCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdGltZW91dCA9IHRydWU7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQocmVzaXplZW5kLCBkZWx0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzaXplZW5kKCkge1xyXG4gICAgICAgIGlmIChuZXcgRGF0ZSgpIC0gcnRpbWUgPCBkZWx0YSkge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJlc2l6ZWVuZCwgZGVsdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgY2hlY2tGb290ZXIoKTtcclxuICAgICAgICAgICAgY2hlY2tEZXZpY2UodHJ1ZSk7IC8vIENVU1RPTSAtIHRydWUgcGFyYW1ldGVyIHRvIGluZGljYXRlIHRoYXQgdGhlIGNhbGwgaXMgb24gcmVzaXplXHJcbiAgICAgICAgICAgIGNoZWNrR3JpZCgpO1xyXG4gICAgICAgICAgICAvLyBzZXRDb250ZW50V2lkdGgoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb3BlblNlbGVjdChzZWxlY3Rvcikge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0gJChzZWxlY3RvcilbMF0sIHdvcmtlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHsgLy8gYWxsIGJyb3dzZXJzXHJcbiAgICAgICAgICAgIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtcclxuICAgICAgICAgICAgZS5pbml0TW91c2VFdmVudChcIm1vdXNlZG93blwiLCB0cnVlLCB0cnVlLCB3aW5kb3csIDAsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAwLCBudWxsKTtcclxuICAgICAgICAgICAgd29ya2VkID0gZWxlbWVudC5kaXNwYXRjaEV2ZW50KGUpO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuZmlyZUV2ZW50KSB7IC8vIGllXHJcbiAgICAgICAgICAgIHdvcmtlZCA9IGVsZW1lbnQuZmlyZUV2ZW50KFwib25tb3VzZWRvd25cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghd29ya2VkKSB7IC8vIHVua25vd24gYnJvd3NlciAvIGVycm9yXHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgPSAgICAgICAgICAgICBLZXlib2FyZCAgICAgICAgICAgICAgPVxyXG4gICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xyXG4gICAgdmFyIHNlYXJjaEZpZWxkQWN0aXZlO1xyXG4gICAgdmFyIGxhc3RLZXk7XHJcblxyXG4gICAgZnVuY3Rpb24gaW5pdEtleWJvYXJkKCkge1xyXG4gICAgICAgIHNlYXJjaEZpZWxkQWN0aXZlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICQoJ2JvZHknKS5iaW5kKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWFyY2hGaWVsZEFjdGl2ZSAmJiBlLndoaWNoICE9IDI3KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZS53aGljaCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAyMTk6IC8vIFtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmlld3BvcnQgIT09ICdkZXNrdG9wJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVTaWRlYmFyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgMTkxOiAvLyAvXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzaWRlYmFyRXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlblNlYXJjaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIDcxOiAvLyBnXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3RLZXkgPT0gNzEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzaWRlYmFyRXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5TZWFyY2goKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIDI3OiAvLyBlc2NcclxuICAgICAgICAgICAgICAgICAgICBjbG9zZVNlYXJjaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsYXN0S2V5ID0gZS53aGljaDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgPSAgICAgICAgICAgICAgQ29va2llcyAgICAgICAgICAgICAgID1cclxuICAgICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRDb29raWUoY25hbWUsIGN2YWx1ZSkge1xyXG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24ub3JpZ2luID09ICdmaWxlOi8vJykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY25hbWUsIGN2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTYXZpbmcgdGhlIHN0YXRlIG9mIHRoZSBkcmFnLWJhciBpcyBub3Qgc3VwcG9ydGVkIGJlY2F1c2UgbG9jYWxTdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgZC5zZXRUaW1lKGQuZ2V0VGltZSgpICsgKDI0ICogNjAgKiA2MCAqIDEwMDApKTtcclxuICAgICAgICAgICAgdmFyIGV4cGlyZXMgPSBcImV4cGlyZXM9XCIgKyBkLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNuYW1lICsgXCI9XCIgKyBjdmFsdWUgKyBcIjsgXCIgKyBleHBpcmVzICsgXCI7IHBhdGg9L1wiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRDb29raWUoY25hbWUpIHtcclxuICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLm9yaWdpbiA9PSAnZmlsZTovLycpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNuYW1lKTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTYXZpbmcgdGhlIHN0YXRlIG9mIHRoZSBkcmFnLWJhciBpcyBub3Qgc3VwcG9ydGVkIGJlY2F1c2UgbG9jYWxTdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gY25hbWUgKyBcIj1cIjtcclxuICAgICAgICAgICAgdmFyIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2EubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBjID0gY2FbaV07XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT0gJyAnKSBjID0gYy5zdWJzdHJpbmcoMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWUpID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYy5zdWJzdHJpbmcobmFtZS5sZW5ndGgsIGMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgPSAgICAgICAgICAgICAgIEdSSUQgICAgICAgICAgICAgICAgID1cclxuICAgICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICBmdW5jdGlvbiBjaGVja0dyaWQoKSB7XHJcbiAgICAgICAgaWYgKCQoJyNodC13cmFwLWNvbnRhaW5lcicpLndpZHRoKCkgPiA2NDApIHtcclxuICAgICAgICAgICAgJCgnI2h0LXdyYXAtY29udGFpbmVyJykuYWRkQ2xhc3MoJ3NwLWdyaWQtZmxvYXQnKTtcclxuICAgICAgICAgICAgJCgnI2h0LXdyYXAtY29udGFpbmVyJykucmVtb3ZlQ2xhc3MoJ3NwLWdyaWQtZmx1aWQnKTtcclxuICAgICAgICAgICAgLy8gUHV0cyBzaWRlIGNlbGwgYWZ0ZXIgbWFpbiBjZWxsXHJcbiAgICAgICAgICAgICQoJy5zcC1ncmlkLWNlbGwuc3AtZ3JpZC02MCcpLmZpcnN0KCkuYWZ0ZXIoJCgnLnNwLWdyaWQtY2VsbC5zcC1ncmlkLTQwJykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJyNodC13cmFwLWNvbnRhaW5lcicpLmFkZENsYXNzKCdzcC1ncmlkLWZsdWlkJyk7XHJcbiAgICAgICAgICAgICQoJyNodC13cmFwLWNvbnRhaW5lcicpLnJlbW92ZUNsYXNzKCdzcC1ncmlkLWZsb2F0Jyk7XHJcbiAgICAgICAgICAgIC8vIFB1dHMgbWFpbiBjZWxsIGJlZm9yZSBzaWRlIGNlbGxcclxuICAgICAgICAgICAgJCgnLnNwLWdyaWQtY2VsbC5zcC1ncmlkLTYwJykuZmlyc3QoKS5iZWZvcmUoJCgnLnNwLWdyaWQtY2VsbC5zcC1ncmlkLTQwJykpO1xyXG4gICAgICAgIH0gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgID0gICAgICAgICAgICAgQ2xpcGJvYXJkICAgICAgICAgICAgICA9XHJcbiAgICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXHJcbiAgICAoZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgY2xpcGJvYXJkVGltZW91dDtcclxuXHJcbiAgICAgICAgdmFyIGNsaXBib2FyZCA9IG5ldyBDbGlwYm9hcmRKUygnLmpzLWNvZGVDbGlwYm9hcmQnLCB7XHJcbiAgICAgICAgICAgIHRhcmdldDogZnVuY3Rpb24odHJpZ2dlcikge1xyXG4gICAgICAgICAgICAgICAgdmFyICRwYW5lbCA9ICQodHJpZ2dlcikuY2xvc2VzdCgnLmpzLWNvZGVQYW5lbCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyICRjb2RlID0gJHBhbmVsLmZpbmQoJy5qcy1jb2RlJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRjb2RlWzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNsaXBib2FyZC5vbignc3VjY2VzcycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciAkdHJpZ2dlciA9ICQoZS50cmlnZ2VyKTtcclxuICAgICAgICAgICAgJHRyaWdnZXIuYWRkQ2xhc3MoJ2lzLWNvcGllZCcpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNsaXBib2FyZFRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoY2xpcGJvYXJkVGltZW91dCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNsaXBib2FyZFRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICR0cmlnZ2VyLnJlbW92ZUNsYXNzKCdpcy1jb3BpZWQnKTtcclxuICAgICAgICAgICAgfSwgMjAwMCk7XHJcblxyXG4gICAgICAgICAgICBlLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KCkpXHJcbn0pKCQpO1xyXG4iXX0=
