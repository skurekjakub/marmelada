var longToByteArray=function(e){for(var o=[0,0,0,0],t=0;t<o.length;t++){var n=255&e;o[t]=n,e=(e-n)/256}return o},pageIdToB64=function(e){return btoa(longToByteArray(e).map(String.fromCharCode).map((function(e){return e[0]})).join("")).replace(/=/g,"")},generateTinyId=function(e){for(var o=!0,t="",n=e.length-1;n>=0;n--){var i=e.charAt(n);"="!==i&&"\n"!=i&&(o&&"A"===i||(o=!1,t="/"===i?"-"+t:"+"===i?"_"+t:i+t))}if(t.length>0){var r=t.charAt(t.length-1);"-"!==r&&"_"!==r||(t+="/")}return t};CONFIG.CONFLUENCE_PAGE_TINYID=generateTinyId(pageIdToB64(CONFIG.CONFLUENCE_PAGE_ID));var displayPageUrlId=function(e){var o=CONFIG.CONFLUENCE_PAGE_TINYID;o?$.ajax({url:CONFIG.HELPSERVICE_URLID_ENDPOINT+o,success:function(e){var t=JSON.parse(e);t.hasOwnProperty("Identifier")?$("#pageUrlId").text(" Help Service ID: "+t.Identifier+" (TinyID: "+o+")"):$("#pageUrlId").text(" Help Service ID: "+t.Error)},timeout:800}):$("#pageUrlId").text("Error when generating the page tiny ID. See the console for details.")};Prism.plugins.NormalizeWhitespace.setDefaults({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0,"remove-initial-line-feed":!1,"tabs-to-spaces":4});var setExportPdf=function(){var e=$("body").attr("data-pagetitle");$("#export-pdf").attr("href","../pdf/".concat(CONFIG.CONFLUENCE_SPACE_KEY.toLowerCase(),"/").concat(e.toLowerCase().replace(/ /g,"-"),".pdf"))};$(document).ready(setExportPdf);var versionSwitcherData,openPageLink=function(e){CONFIG.CONFLUENCE_PAGE_TINYID?togglePageLinkPanel(CONFIG.BASE_URL+"/x/"+CONFIG.CONFLUENCE_PAGE_TINYID):togglePageLinkPanel(window.location.href)},togglePageLinkPanel=function(e){$("#page-link-textbox").attr("value",e),$("#page-link-panel").hasClass("show")?$("#page-link-panel").removeClass("show"):$("#page-link-panel").addClass("show")},copyPageLinkToClip=function(){void 0===navigator.clipboard?Snackbar.show({text:"An error occurred while copying the page link to the clipboard",pos:"top-right",showAction:!1,customClass:"box-general box-warning",duration:"3500",backgroundColor:"#FFEBEB",textColor:"#151515"}):navigator.clipboard.writeText($("#page-link-textbox").attr("value")).then((function(){Snackbar.show({text:"Page link copied",pos:"top-right",showAction:!1,customClass:"box-general box-info",duration:"2500",backgroundColor:"#EEF3FC",textColor:"#151515"})})).catch((function(){Snackbar.show({text:"An error occurred while copying the page link to the clipboard",pos:"top-right",showAction:!1,customClass:"box-general box-warning",duration:"3500",backgroundColor:"#FFEBEB",textColor:"#151515"})}))},closePageLink=function(){return $("#page-link-panel").removeClass("show")},getVersionTextFromVersionId=function(e){return DOCUMENTATION_VERSIONS.find((function(o){return o.versionId==e})).versionText},getVersionTextFromHelpServiceId=function(e){return DOCUMENTATION_VERSIONS.find((function(o){return o.helpServiceVersion==e})).versionText},loadVersionLinkData=function(e){$.ajax({dataType:"json",url:CONFIG.HELPSERVICE_LISTALTVERSIONLINKS_ENDPOINT+e,timeout:2e3,tryCount:0,retryLimit:3,success:function(e){versionSwitcherData=e},error:function(e,o,t){if("timeout"==o)return this.tryCount++,this.tryCount<=this.retryLimit?void $.ajax(this):void 0}})},versionLinkUpdateDone=!1,insertVersionLinks=function(e){void 0!==e?(versionLinkUpdateDone||(e.forEach((function(e){var o=$(".js-menuDdl-version a:contains("+getVersionTextFromHelpServiceId(e.VersionUrlId)+")");o&&(o.attr("href",e.Url),o.addClass(" populated"))})),$(".js-menuDdl-version a").toArray().forEach((function(e){e.classList.contains("populated")||(e.classList.add("empty"),"Xperience 13"===e.textContent?(e.setAttribute("href",CONFIG.XPERIENCE13_MISSING_PAGES_URL+"?ref="+$(location).attr("href").split("/").pop()),e.setAttribute("title","The current page is not available in the Xperience 13 documentation. \r\nYou will be redirected to a general guidance page.")):"Xperience by Kentico"===e.textContent?(e.setAttribute("href",CONFIG.XP_MISSING_PAGES_URL+"?ref="+$(location).attr("href").split("/").pop()),e.setAttribute("title","The current page is not available in the Xperience by Kentico documentation. \r\nYou will be redirected to a general guidance page.")):e.setAttribute("title","The current page is not available for this documentation version. \r\nYou will be redirected to the home page for this version."))})),versionLinkUpdateDone=!0),openCloseVersionDdl()):openCloseVersionDdl()},insertSearchVersionLinks=function(){versionLinkUpdateDone||($(".js-menuDdl-version a").each((function(){var e=this.href.split("/"),o=getDocVersion(e[e.length-1]),t="/"!==this.href.slice(-1)?"/":"";if(CONFIG.CONFLUENCE_DEVMODEL_VERSIONSWITCHER_WHITELIST.indexOf(o)>=0)this.href=this.href+t+"search"+window.location.search;else{for(var n=window.location.search.split("&"),i=n.length;i-- >0;)0==n[i].indexOf("l=")&&n.splice(i,1);this.href=this.href+t+"search"+n.join("&")}})),versionLinkUpdateDone=!0);openCloseVersionDdl()},openCloseDocTypeDdl=function(){$(".js-menuDdl-docType").toggleClass("show"),$(".js-menuDdlBtn-docType").toggleClass("opened")},openCloseVersionDdl=function(){$(".js-menuDdl-version").toggleClass("show"),$(".js-menuDdlBtn-version").toggleClass("opened")},getDocType=function(e){return/api/i.test(e)?"API Examples":/tutorial/i.test(e)?"Tutorial":"Documentation"},getDocVersion=function(e){switch(e){case"K12SP":case"API12SP":case"K12SPTutorial":return"12sp";case"XP":case"Tutorial":case"Api":return"xp";default:return e.replace(/[^0-9]/g,"")}},getVersionLinkTitle=function(e){return"12sp"===e?"Kentico 12 Service Pack":getVersionTextFromVersionId(e)},buildDocLink=function(e,o,t,n){var i,r="/";if(-1===CONFIG.OBSOLETE_SPACE_KEY_FORMAT_VERSIONS.indexOf(e)){var a="xp"===e?"":e;switch(o){case"Tutorial":i=a+"tutorial";break;case"API Examples":i=a+"api";break;default:i=e}i===CONFIG.DOC_ROOT_URL_SPACE_KEY&&(i="",r="")}else switch(o){case"Tutorial":i="k"+e+"tutorial";break;case"API Examples":i="api"+e;break;default:i="k"+e}$('[name="ajs-base-url"]').attr("content");var s=t?o:getVersionTextFromVersionId(e);return'<li><a href="'+r+i+'"'+('class="'+(n?" current":"")+'"')+(' title="'+(t?o:getVersionLinkTitle(e))+'"')+">"+s+"</a></li>"},loadDocVersionHeaderList=function(e,o){var t=$('[name="confluence-user-logged-in"]').attr("content"),n=DOCUMENTATION_VERSIONS.filter((function(o){return("API Examples"!==e||"8"!==o.versionId&&"81"!==o.versionId&&"82"!==o.versionId)&&("true"===t||o.versionId!==CONFIG.DEV_DOCUMENTATION_VERSION_ID)&&"12"!==o.versionId})),i="";n.forEach((function(t){t.versionId==CONFIG.NEWEST_UNSUPPORTED_VERSION_ID&&(i+='<li class="js-unsupported-versions"><button class="header-ddl-button-nested js-unsupported-versions-button">All versions</button><ul class="menu-ddl-content nested-list docVersion js-unsupported-versions-list">'),i+=buildDocLink(t.versionId,e,!1,t.versionId==o)})),i+="</ul></li>",$(".js-menuDdlBtn-version").html(getVersionTextFromVersionId(o)),$(".js-menuDdl-version").html(i)};$(document).on("click",".js-unsupported-versions-button",(function(){$(".js-unsupported-versions-list").toggleClass("show"),$(".js-unsupported-versions-list").toggleClass("opened")}));var loadDocTypeHeaderList=function(e,o){var t=["Documentation","Tutorial","API Examples"];t=t.filter((function(o){return"8"!==e&&"81"!==e&&"82"!==e||"API Examples"!==o}));var n="";t.forEach((function(t){n+=buildDocLink(e,t,!0,t==o)})),$(".js-menuDdlBtn-docType").html(o),$(".js-menuDdl-docType").html(n)},loadHeaderLists=function(){var e=getDocVersion(CONFIG.CONFLUENCE_SPACE_KEY),o=getDocType(CONFIG.CONFLUENCE_SPACE_KEY);loadDocTypeHeaderList(e,o),loadDocVersionHeaderList(o,e)},closeHeaderDropDowns=function(e){var o=$(".js-menuDdlBtn-docType"),t=$(".js-menuDdlBtn-version"),n=$(".js-unsupported-versions-button"),i=$(".js-unsupported-versions-list"),r=$(".js-menuDdlBtn-devModel"),a=$(".js-menuDdl-devModel");n.is(e.target)||(o.is(e.target)||0!==o.has(e.target).length||($(".js-menuDdl-docType").removeClass("show"),o.removeClass("opened")),t.is(e.target)||0!==t.has(e.target).length||($(".js-menuDdl-version").removeClass("show"),t.removeClass("opened"),i.removeClass("opened"),i.removeClass("show")),r.is(e.target)||0!==a.has(e.target).length||(a.removeClass("show"),r.removeClass("opened")))};$(document).ready(loadHeaderLists),$(document).click(closeHeaderDropDowns);var isDevModelSwitcherSupported=function(){var e=CONFIG.CONFLUENCE_SPACE_KEY;return!e.toLowerCase().includes("api")&&CONFIG.CONFLUENCE_DEVMODEL_VERSIONSWITCHER_WHITELIST.indexOf(getDocVersion(e))>=0},getPageLabels=function(){var e=$('[name="confluence-page-labels"]').attr("content");return e=(e=e.slice(1,-1)).split(", ")},setDevModelWebStorage=function(){if(isDevModelSwitcherSupported()&&"undefined"!=typeof Storage){var e=getPageLabels();if(e.indexOf("mvc")>=0)return void(localStorage.kenticoDocumentationMode="mvc");if(e.indexOf("pe")>=0)return void(localStorage.kenticoDocumentationMode="pe");var o=window.location.search;if(o.indexOf("devModel=mvc")>=0)return void(localStorage.kenticoDocumentationMode="mvc");if(o.indexOf("devModel=pe")>=0)return void(localStorage.kenticoDocumentationMode="pe");localStorage.kenticoDocumentationMode&&null!==localStorage.getItem("kenticoDocumentationMode")||(localStorage.kenticoDocumentationMode="mvc")}},getCurrentDevModel=function(){var e=getPageLabels();if(e.indexOf("mvc")>=0)return"mvc";if(e.indexOf("pe")>=0)return"pe";var o=window.location.search;return o.indexOf("devModel=mvc")>=0?"all|mvc":o.indexOf("devModel=pe")>=0?"all|pe":"undefined"!=typeof Storage&&localStorage.kenticoDocumentationMode?"all|"+localStorage.kenticoDocumentationMode:"all|mvc"},translateToHelpServiceVersion=function(e){return DOCUMENTATION_VERSIONS.find((function(o){return o.versionId==e})).helpServiceVersion},switchDevModelStorage=function(e){"undefined"!=typeof Storage&&(localStorage.kenticoDocumentationMode=e)},openCloseDevModelDdl=function(){$(".js-menuDdl-devModel").toggleClass("show"),$(".js-menuDdlBtn-devModel").toggleClass("opened")},devModelMap={mvc:"MVC",pe:"Portal Engine"},initAltDevModelLink=function(){if(isDevModelSwitcherSupported()){var e=getCurrentDevModel(),o=!1;0===e.indexOf("all|")&&(o=!0,e=e.split("|")[1]);var t="mvc"==e?"pe":"mvc";$(".js-"+e+"-model-link").addClass("active");var n=$(".js-"+t+"-model-link");if(n){if($(".js-menuDdlBtn-devModel").html(devModelMap[e]),o)return n.on("click",(function(){switchDevModelStorage(t);var e=window.location.pathname.split("/");if("search"==e[e.length-1])kenticoThemeOpenSearchResultsPage();else{var o=window.location.href.replace(window.location.hash,"");o=(o=o.replace("#","")).split("?devModel")[0],window.location.href=o}})),void currentModelElement.on("click",(function(e){e.preventDefault(),openCloseDevModelDdl()}));var i=$("#dev-model-alt").attr("data-devmodel-alt");if(i){var r=getDocVersion(CONFIG.CONFLUENCE_SPACE_KEY),a=translateToHelpServiceVersion(r),s=CONFIG.HELPSERVICE_LINKMAPPER_ENDPOINT+a+"&link="+i;n.on("click",(function(){switchDevModelStorage(t),window.location.href=s}))}else{$(".js-menuDdlBtn-devModel").prop("disabled",!0).prop("title","");var c="mvc"==e?"MVC":"Portal Engine",l="mvc"==t?"MVC":"Portal Engine",d='<a id="alt-model-home-link" href="'+($("#ajs-context-path").attr("content")+"/"+CONFIG.CONFLUENCE_SPACE_KEY.toLowerCase()+"?devModel="+t)+'">'+l+" Home page</a>";$(".js-dev-model-unavailable-text").html("<p>This page is only available for the "+c+" development model.<br />You can switch to the "+d+".</p>")}}}};$(document).ready(setDevModelWebStorage),$(document).ready(initAltDevModelLink);var setDevFrameworkButtons=function(){$(".js-dev-model-switch-core").click((function(){coreFrameworkOnClick()})),$(".js-dev-model-switch-mvc").click((function(){mvcFrameworkOnClick()})),$(".js-dev-model-switch-indicator").click((function(e){"core"===localStorage.kenticoDocumentationFramework?mvcFrameworkOnClick():coreFrameworkOnClick()})),$(".js-dev-model-switch-mvc, .js-dev-model-switch-core ").on("keyup",(function(e){e.preventDefault(),e.stopPropagation(),32===e.keyCode&&("core"===localStorage.kenticoDocumentationFramework?mvcFrameworkOnClick():coreFrameworkOnClick())}))},setDevFrameworkCheckbox=function(){"mvc"===localStorage.kenticoDocumentationFramework?($(".js-dev-model-switch-mvc").attr("checked",!0),$(".js-dev-model-switch").addClass("is-dev-model-mvc").removeClass("is-dev-model-core")):"core"===localStorage.kenticoDocumentationFramework&&($(".js-dev-model-switch-core").attr("checked",!0),$(".js-dev-model-switch").addClass("is-dev-model-core").removeClass("is-dev-model-mvc"))},setCorrectFramework=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(localStorage.kenticoDocumentationFramework&&null!==localStorage.getItem("kenticoDocumentationFramework")||(localStorage.kenticoDocumentationFramework="mvc"),e){var o=new URLSearchParams(window.location.search).get("devmodel");"mvc"!==o&&"core"!==o||(localStorage.kenticoDocumentationFramework=o)}"mvc"===localStorage.kenticoDocumentationFramework&&($(".dev-model-core").css("display","none"),$(".dev-model-mvc").css("display","block")),"core"===localStorage.kenticoDocumentationFramework&&($(".dev-model-mvc").css("display","none"),$(".dev-model-core").css("display","block")),setDevFrameworkCheckbox()},setHoverTitles=function(){var e="Switch the displayed development model in the switcher under the page heading";$(".dev-model-core .codeContent").attr("title",e),$(".dev-model-mvc .codeContent").attr("title",e)},coreFrameworkOnClick=function(){localStorage.kenticoDocumentationFramework="core",setCorrectFramework()},mvcFrameworkOnClick=function(){localStorage.kenticoDocumentationFramework="mvc",setCorrectFramework()},showDevFrameworkSwitcher=function(){$(".js-dev-model-switch").removeClass("is-hidden")},setDevFrameworkSwitcher=function(){$(".dev-model-core").length+$(".dev-model-mvc").length>0&&(setCorrectFramework(!0),setDevFrameworkButtons(),setDevFrameworkCheckbox(),showDevFrameworkSwitcher(),setHoverTitles())};$(document).ready(setDevFrameworkSwitcher);var initSidebar=function e(){if(null!==$(".ht-nav-page-link").first())if($(".ht-nav-page-link.current").length){var o=$("div.ht-sidebar-content"),t=$("#ht-headerbar").outerHeight(!0),n=$(".ht-nav-page-link.current")[0].getBoundingClientRect().top;0===$("div.ht-sidebar-content")[0].scrollTop&&o.animate({scrollTop:Math.round(n-t-o.outerHeight()/2.5)},0),$("#ht-sidebar").addClass("animate")}else window.requestAnimationFrame(e)};window.requestAnimationFrame(initSidebar);var kenticoThemeOpenSearchResultsPage=function(){var e=$(".search-input").val();e=encodeURIComponent(e),e+="&max=10";var o=document.querySelector("#check-show-all-search-results"),t=!(o&&o.checked);window.SCROLL_WEBHELP&&window.SCROLL_WEBHELP.search&&(window.SCROLL_WEBHELP.search.navigateToSearchPage(e,t),$("#ht-search").find(".ht-search-dropdown").removeClass("open"),$(".ht-search-dropdown a.hover").removeClass("hover"),$(document).unbind("keydown"))},toggleSearchSuggestions=function(e){var o=$("input.search-input"),t=$(".ht-search-dropdown"),n=$("#searchButton"),i=$(".ht-search-dropdown a.hover");o.is(e.target)||0!==o.has(e.target).length||t.is(e.target)||0!==t.has(e.target).length?$(".ht-search-dropdown li.search-key").length&&t.addClass("open"):(t.removeClass("open"),i.removeClass("hover"),!n.is(e.target)&&0===n.has(e.target).length&&window.innerWidth<=800&&window.innerWidth>499&&o.removeClass("show"))};$(document).click(toggleSearchSuggestions);var setContentTopPadding=function(){var e=$(".searchbox-area-behind").first();e.length&&$(".ht-content").first().css("padding-top",e.outerHeight(!0)+"px")};$(document).ready(setContentTopPadding),$(window).resize(setContentTopPadding);var setFooterWidth=function(){var e=document.documentElement.clientWidth,o=$("#ht-wrap-container").width(),t=$("#ht-wrap-container").offset().left,n=e-o-t;$("#ht-footer").css({right:-n,"padding-right":n,left:-t,"padding-left":t})};function onElementHeightChange(e,o){var t,n=e.clientHeight;!function i(){t=e.clientHeight,n!=t&&o(),n=t,e.onElementHeightChangeTimer&&clearTimeout(e.onElementHeightChangeTimer),e.onElementHeightChangeTimer=setTimeout(i,200)}()}$(document).ready(setFooterWidth),$(window).resize(setFooterWidth),onElementHeightChange(document.body,setFooterWidth),$("span.expand-control").click((function(){var e=$(this).parent().next(),o=$(this).find("span.expand-control-text");e.hasClass("collapse")?(e.removeClass("collapse"),o.text("Collapse source")):(e.addClass("collapse"),o.text("Expand source"))}));var getPageIdIfEditingAllowed=function(){var e=$("#sp-viewport-control-opener").length,o=$(".search-input").is(":focus");if(0!=e&&!o){var t=$("body").attr("pageid");return t||0}return 0};function openLink(e,o){o?window.open(e,"_blank").focus():window.open(e,"_self")}$("p").each((function(){""==$(this).text().trim()&&0==$(this).children().length&&$(this).hide()}));var showHideSearchTips=function(){$("#search-tips").hasClass("show")?hideFrontLayer():showFrontLayer()},showFrontLayer=function(){$("#search-tips").addClass("show"),document.getElementById("search-tips-mask").style.visibility="visible",document.getElementById("search-tips").style.visibility="visible"},hideFrontLayer=function(){document.getElementById("search-tips-mask").style.visibility="hidden",document.getElementById("search-tips").style.visibility="hidden",$("#search-tips").removeClass("show")},createCookie=function(e,o,t,n){var i;n="; domain="+n;if(t){var r=new Date;r.setTime(r.getTime()+24*t*60*60*1e3),i="; expires="+r.toUTCString()}else i="";document.cookie=e+"="+o+i+"; path=/"+n},eraseCookie=function(e){createCookie(e,"",-1,"")},consentWithCookieUsage=function(){$("#cookie-banner").addClass("hidden"),createCookie("xperience.cookielevelselection",!0,365,".xperience.io")},hideCookieConsentBanner=function(){!document.cookie.replace(/(?:(?:^|.*;\s*)xperience.cookielevelselection\s*\=\s*([^;]*).*$)|^.*$/,"$1")&&navigator.cookieEnabled||$("#cookie-banner").addClass("hidden")},setCookieLevel=function(e){e="marketing"===(e=e)?4:"analytical"===e?3:"preference"===e?2:1,consentWithCookieUsage(),createCookie("xperience.cookieconsentlevel",e,365,".xperience.io"),1===e?(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"consent.update",consent:{functionality_storage:"granted",personalization_storage:"denied",analytics_storage:"denied",ad_storage:"denied",security_storage:"denied"}})):3===e&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"consent.update",consent:{functionality_storage:"granted",personalization_storage:"granted",analytics_storage:"granted",ad_storage:"denied",security_storage:"denied"}}))};$(document).ready((function(){hideCookieConsentBanner()}));var copyHeadingLink=function(e){var o=$(e.target),t=window.location.origin+window.location.pathname+"#"+o.parent().attr("id");void 0===navigator.clipboard?Snackbar.show({text:"An error occurred while copying the heading link to the clipboard",pos:"top-right",showAction:!1,customClass:"box-general box-warning",duration:"3500",backgroundColor:"#FFEBEB",textColor:"#151515"}):navigator.clipboard.writeText(t).then((function(){Snackbar.show({text:"Heading link copied",pos:"top-right",showAction:!1,customClass:"box-general box-info",duration:"2500",backgroundColor:"#EEF3FC",textColor:"#151515"}),o.addClass("copied")})).catch((function(){Snackbar.show({text:"An error occurred while copying the heading link to the clipboard",pos:"top-right",showAction:!1,customClass:"box-general box-warning",duration:"3500",backgroundColor:"#FFEBEB",textColor:"#151515"})}))},copyIconMouseOut=function(e){var o=$(e.target);o.hasClass("copied")&&o.removeClass("copied")};$("#main-content .sp-grid-60 h2, #main-content .sp-grid-100 h2, #main-content .sp-grid-60 h3, #main-content .sp-grid-100 h3").not("div.box-general h2, div.box-general h3, h2:has(a), h3:has(a)").append('<span title="Copy link to heading" class="heading-link-icon icon-chain" onclick="copyHeadingLink(event)" onmouseout="copyIconMouseOut(event)"></span>');
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRoZW1lLmN1c3RvbS5qcyJdLCJuYW1lcyI6WyJsb25nVG9CeXRlQXJyYXkiLCJsb25nIiwiYnl0ZUFycmF5IiwiaW5kZXgiLCJsZW5ndGgiLCJieXRlIiwicGFnZUlkVG9CNjQiLCJtYXAiLCJzIiwiam9pbiIsInBhZ2VJZCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsInBhZGRpbmciLCJnZW5lcmF0ZVRpbnlJZCIsImJ0b2FkSWQiLCJ0aW55U3RyaW5nIiwiY2hhcmFjdGVyIiwiaSIsImNoYXJBdCIsIkNPTkZMVUVOQ0VfUEFHRV9USU5ZSUQiLCJkaXNwbGF5UGFnZVVybElkIiwiYWpheCIsImxhc3RDaGFyIiwiSlNPTiIsInJlc3BvbnNlIiwicGFyc2UiLCJoYXNPd25Qcm9wZXJ0eSIsIkNPTkZJRyIsIkNPTkZMVUVOQ0VfUEFHRV9JRCIsIlByaXNtIiwiTm9ybWFsaXplV2hpdGVzcGFjZSIsInRpbnlTdWZmaXgiLCIkIiwidXJsIiwiSEVMUFNFUlZJQ0VfVVJMSURfRU5EUE9JTlQiLCJzdWNjZXNzIiwicmVzdWx0IiwidGV4dCIsIklkZW50aWZpZXIiLCJFcnJvciIsInJlYWR5Iiwic2V0RXhwb3J0UGRmIiwicGx1Z2lucyIsInNldERlZmF1bHRzIiwidG9nZ2xlUGFnZUxpbmtQYW5lbCIsImFkZENsYXNzIiwiY29weVBhZ2VMaW5rVG9DbGlwIiwibmF2aWdhdG9yIiwiY2xpcGJvYXJkIiwidW5kZWZpbmVkIiwiU25hY2tiYXIiLCJhdHRyIiwiY29uY2F0IiwiQ09ORkxVRU5DRV9TUEFDRV9LRVkiLCJ0b0xvd2VyQ2FzZSIsInBhZ2VUaXRsZSIsInJlcGxhY2UiLCJkb2N1bWVudCIsInNob3dBY3Rpb24iLCJ2ZXJzaW9uU3dpdGNoZXJEYXRhIiwib3BlblBhZ2VMaW5rIiwicGFnZUlEIiwid3JpdGVUZXh0IiwiQkFTRV9VUkwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJ0aW55VXJsIiwidGV4dENvbG9yIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInNob3ciLCJwb3MiLCJjdXN0b21DbGFzcyIsImR1cmF0aW9uIiwiYmFja2dyb3VuZENvbG9yIiwidGhlbiIsImNsb3NlUGFnZUxpbmsiLCJnZXRWZXJzaW9uVGV4dEZyb21WZXJzaW9uSWQiLCJkb2N1bWVudGF0aW9uVmVyc2lvbiIsImdldFZlcnNpb25UZXh0RnJvbUhlbHBTZXJ2aWNlSWQiLCJpdGVtIiwiaGVscFNlcnZpY2VWZXJzaW9uIiwiZmluZCIsInZlcnNpb25UZXh0IiwiSEVMUFNFUlZJQ0VfTElTVEFMVFZFUlNJT05MSU5LU19FTkRQT0lOVCIsInRpbWVvdXQiLCJ0cnlDb3VudCIsInJldHJ5TGltaXQiLCJ0aW55SUQiLCJkYXRhIiwiZXJyb3IiLCJ4aHIiLCJ0ZXh0U3RhdHVzIiwidGhpcyIsInZlcnNpb25MaW5rVXBkYXRlRG9uZSIsIm9wZW5DbG9zZVZlcnNpb25EZGwiLCJpbnNlcnRWZXJzaW9uTGlua3MiLCJ2ZXJzaW9uRGF0YSIsImxpbmtFbGVtIiwiY2xhc3NMaXN0IiwiYWRkIiwiZGF0YUl0ZW0iLCJWZXJzaW9uVXJsSWQiLCJVcmwiLCJlbGVtZW50Iiwic2V0QXR0cmlidXRlIiwidG9BcnJheSIsImZvckVhY2giLCJ0ZXh0Q29udGVudCIsIlhQRVJJRU5DRTEzX01JU1NJTkdfUEFHRVNfVVJMIiwic3BsaXQiLCJwb3AiLCJpbnNlcnRTZWFyY2hWZXJzaW9uTGlua3MiLCJzZWFyY2hRdWVyeVN0cmluZ1BhcnRzIiwic2VhcmNoU2xhc2giLCJzcGFjZUtleSIsImdldERvY1ZlcnNpb24iLCJsaW5rRWxlbUhyZWZBcnJheSIsInNsaWNlIiwiQ09ORkxVRU5DRV9ERVZNT0RFTF9WRVJTSU9OU1dJVENIRVJfV0hJVEVMSVNUIiwiaW5kZXhPZiIsInNlYXJjaCIsInNwbGljZSIsImdldERvY1R5cGUiLCJhcGlFeGFtcGxlcyIsInR1dG9yaWFsIiwib3BlbkNsb3NlRG9jVHlwZURkbCIsInRvZ2dsZUNsYXNzIiwidGVzdCIsInZlcnNpb24iLCJidWlsZERvY0xpbmsiLCJzcGFjZUtleVNsYXNoIiwiZ2V0VmVyc2lvbkxpbmtUaXRsZSIsImRvY1R5cGUiLCJ1c2VEb2NUeXBlSW5MaW5rVGV4dCIsImlzQ3VycmVudCIsIk9CU09MRVRFX1NQQUNFX0tFWV9GT1JNQVRfVkVSU0lPTlMiLCJ2ZXJzaW9uUHJlZml4IiwiYmFzZVVybCIsImNsYXNzQXR0cmlidXRlIiwibG9hZERvY1ZlcnNpb25IZWFkZXJMaXN0IiwidXNlckxvZ2dlZEluIiwiYXZhaWxhYmxlRG9jVmVyc2lvbnMiLCJET0NfUk9PVF9VUkxfU1BBQ0VfS0VZIiwiY3VycmVudERvY1R5cGUiLCJ2ZXJzaW9uSWQiLCJkb2NWZXJzaW9uTGlua3MiLCJORVdFU1RfVU5TVVBQT1JURURfVkVSU0lPTl9JRCIsImxpbmtUZXh0IiwiY3VycmVudERvY1ZlcnNpb24iLCJhdmFpbGFibGVEb2NUeXBlcyIsImRvY1R5cGVMaW5rcyIsIkRPQ1VNRU5UQVRJT05fVkVSU0lPTlMiLCJmaWx0ZXIiLCJERVZfRE9DVU1FTlRBVElPTl9WRVJTSU9OX0lEIiwibG9hZEhlYWRlckxpc3RzIiwib2xkZXJWZXJzaW9uc0xpc3QiLCJvbGRlclZlcnNpb25zQnV0dG9uIiwiaHRtbCIsInRhcmdldCIsIm9uIiwiYnV0dG9uVmVyc2lvbiIsImRldk1vZGVsTGlzdCIsImRldk1vZGVsQnV0dG9uIiwiaXNEZXZNb2RlbFN3aXRjaGVyU3VwcG9ydGVkIiwiY3VycmVudFNwYWNlS2V5IiwiaW5jbHVkZXMiLCJsYWJlbHMiLCJsb2FkRG9jVHlwZUhlYWRlckxpc3QiLCJzZXREZXZNb2RlbFdlYlN0b3JhZ2UiLCJjbG9zZUhlYWRlckRyb3BEb3ducyIsImV2ZW50IiwibG9jYWxTdG9yYWdlIiwia2VudGljb0RvY3VtZW50YXRpb25Nb2RlIiwiY3VycmVudExhYmVscyIsImlzIiwiYnV0dG9uRG9jVHlwZSIsImhhcyIsImNsaWNrIiwiZ2V0UGFnZUxhYmVscyIsIlN0b3JhZ2UiLCJzd2l0Y2hEZXZNb2RlbFN0b3JhZ2UiLCJxdWVyeVN0cmluZ1BhcmFtcyIsImRldk1vZGVsTWFwIiwiaW5pdEFsdERldk1vZGVsTGluayIsImN1cnJlbnRNb2RlbCIsImdldEN1cnJlbnREZXZNb2RlbCIsImdldEl0ZW0iLCJjdXJyZW50bGFiZWxzIiwiYWxsRGV2TW9kZWxQYWdlIiwiYWx0RGV2TW9kZWwiLCJrZW50aWNvVGhlbWVPcGVuU2VhcmNoUmVzdWx0c1BhZ2UiLCJ0cmFuc2xhdGVUb0hlbHBTZXJ2aWNlVmVyc2lvbiIsImRldk1vZGVsUmVsb2FkVXJsIiwidGFyZ2V0TW9kZWwiLCJvcGVuQ2xvc2VEZXZNb2RlbERkbCIsImFsdFBhZ2VJZGVudGlmaWVyIiwibXZjIiwiYWx0RGV2TW9kZWxFbGVtZW50IiwiY3VycmVudE1vZGVsVGV4dCIsImFsdE1vZGVsSG9tZUxpbmsiLCJzZXREZXZGcmFtZXdvcmtCdXR0b25zIiwicHJldmVudERlZmF1bHQiLCJwYXRoTmFtZUFycmF5IiwicGF0aG5hbWUiLCJoYXNoIiwia2VudGljb0RvY3VtZW50YXRpb25GcmFtZXdvcmsiLCJjdXJyZW50TW9kZWxFbGVtZW50IiwiZSIsInNldENvcnJlY3RGcmFtZXdvcmsiLCJjaGVja1VybFBhcmFtZXRlcnMiLCJkZXZNb2RlbFBhcmFtZXRlciIsImFsdFBhZ2VVcmwiLCJIRUxQU0VSVklDRV9MSU5LTUFQUEVSX0VORFBPSU5UIiwiY3NzIiwic2V0RGV2RnJhbWV3b3JrQ2hlY2tib3giLCJwcm9wIiwiYWx0TW9kZWxUZXh0IiwiY29yZUZyYW1ld29ya09uQ2xpY2siLCJzZXREZXZGcmFtZXdvcmtTd2l0Y2hlciIsIm12Y0ZyYW1ld29ya09uQ2xpY2siLCJzaG93RGV2RnJhbWV3b3JrU3dpdGNoZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJrZXlDb2RlIiwiZmlyc3QiLCJyb3VuZCIsImFyZ3VtZW50cyIsInNlYXJjaFF1ZXJ5IiwiVVJMU2VhcmNoUGFyYW1zIiwiZ2V0IiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic2hvd0FsbFJlc3VsdHNDaGVja2JveEVsZW0iLCJxdWVyeVNlbGVjdG9yIiwidXNlRGV2TW9kZWxGaWx0ZXJpbmciLCJTQ1JPTExfV0VCSEVMUCIsIm5hdmlnYXRlVG9TZWFyY2hQYWdlIiwic2V0SG92ZXJUaXRsZXMiLCJzZWxlY3RlZFNlYXJjaExpbmtFbGVtZW50Iiwic2VhcmNoQnV0dG9uIiwic2VhcmNoRHJvcGRvd24iLCJzZWFyY2hJbnB1dCIsImluaXRTaWRlYmFyIiwic2V0Q29udGVudFRvcFBhZGRpbmciLCJzZWFyY2hib3hFbGVtZW50IiwiJHNjcm9sbGFibGVDb250ZW50IiwiaGVhZGVySGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJzY3JvbGxUb3AiLCJhbmltYXRlIiwiTWF0aCIsImN1cnJlbnRJdGVtVG9wIiwiZm9vdGVyV2lkdGgiLCJsZWZ0UG9zaXRpb24iLCJyaWdodFBhZGRpbmciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJjYWxsYmFjayIsImxhc3RIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJ2YWwiLCJuZXdIZWlnaHQiLCJlbG0iLCJvbkVsZW1lbnRIZWlnaHRDaGFuZ2VUaW1lciIsIm9uRWxlbWVudEhlaWdodENoYW5nZSIsInNldEZvb3RlcldpZHRoIiwiY2hlY2tlZCIsImNvZGVDb250ZW50IiwicGFyZW50IiwibmV4dCIsInVuYmluZCIsInRvZ2dsZVNlYXJjaFN1Z2dlc3Rpb25zIiwic2VhcmNoYm94Rm9jdXNlZCIsImlubmVyV2lkdGgiLCJmb2N1cyIsInNob3dIaWRlU2VhcmNoVGlwcyIsImhpZGVGcm9udExheWVyIiwicmVzaXplIiwiZ2V0RWxlbWVudEJ5SWQiLCJ2aWV3V2lkdGgiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRXaWR0aCIsIndpZHRoIiwiY3JlYXRlQ29va2llIiwidmFsdWUiLCJkYXlzIiwiZG9tYWluIiwiZGF0ZSIsImdldFRpbWUiLCJleHBpcmVzIiwicnVuIiwiaGlkZUNvb2tpZUNvbnNlbnRCYW5uZXIiLCJjb29raWVWYWx1ZSIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJzZXRDb29raWVMZXZlbCIsIm5hbWUiLCJib2R5IiwibGV2ZWwiLCJleHBhbmRDb250cm9sVGV4dCIsImNvbnNlbnRXaXRoQ29va2llVXNhZ2UiLCJnZXRQYWdlSWRJZkVkaXRpbmdBbGxvd2VkIiwiZGF0YUxheWVyIiwicHVzaCIsIm9wZW5MaW5rIiwibmV3VGFiIiwiY29weUhlYWRpbmdMaW5rIiwib3BlbiIsImNsaWNrZWRJY29uIiwidHJpbSIsImNoaWxkcmVuIiwiaGlkZSIsInNob3dGcm9udExheWVyIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwiY29weUhlYWRpbmdMaW5rSWNvbiIsInNldFRpbWUiLCJ0b1VUQ1N0cmluZyIsImNvb2tpZSIsImVyYXNlQ29va2llIiwiY29va2llRW5hYmxlZCIsImNvbnNlbnQiLCJmdW5jdGlvbmFsaXR5X3N0b3JhZ2UiLCJwZXJzb25hbGl6YXRpb25fc3RvcmFnZSIsImFuYWx5dGljc19zdG9yYWdlIiwiYWRfc3RvcmFnZSIsInNlY3VyaXR5X3N0b3JhZ2UiLCJhbmNob3JMaW5rIiwib3JpZ2luIiwiY2F0Y2giLCJjb3B5SWNvbk1vdXNlT3V0Iiwibm90IiwiYXBwZW5kIl0sIm1hcHBpbmdzIjoiQUFTQSxJQUFJQSxnQkFBa0IsU0FBeUJDLEdBRTNDLElBREEsSUFBSUMsRUFBYyxDQUFBLEVBQUcsRUFBRyxFQUFJLEdBQ2xCQyxFQUFXQSxFQUFBQSxFQUFRRCxFQUFVRSxPQUFRRCxJQUFXLENBQ3hELElBQUlFLEVBQWMsSUFBUEosRUFDWEMsRUFBWUMsR0FBY0UsRUFDMUJKLEdBQVFBLEVBQU9JLEdBQVEsR0FDekIsQ0FDQSxPQUFPSCxDQUNYLEVBS0lJLFlBQ0lOLFNBQ0tPLEdBRUcsT0FBT0MsS0FFVkMsZ0JBRUVDLEdBQ2RILElBQUFJLE9BQUFDLGNBTllMLEtBQUksU0FBVUMsR0FTM0IsT0FBQUEsRUFBQSxFQUNBLElBQ0FDLEtBQUEsS0FFUUksUUFBTyxLQUFPLEdBUHRCLEVBc0JRQyxlQUFhLFNBQVVDLEdBS3ZCLElBcEJKLElBZ0JRQyxHQUFV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QUFJLGdFQUFnRUMsT0FQN0QiLCJmaWxlIjoidGhlbWUuY3VzdG9tLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09RVhQRVJJTUVOVEFMPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuLy8gUGFnZSBUaW55SUQgR2VuZXJhdG9yIC0gcHJvZ3JhbW1hdGljYWxseSBnZW5lcmF0ZXMgcGFnZSBpZGVudGlmaWVyc1xyXG4vLyBDdXJyZW50bHkgb25seSB1c2VkIHdoZW4gcmV0cmlldmluZyBwYWdlIEhlbHBTZXJ2aWNlIGlkZW50aWZpZXJzIHZpYSAnR2V0IEhlbHBTZXJ2aWNlIElEJ1xyXG4vLyBBY2Nlc3NpYmxlIGZyb20gQ09ORklHLkNPTkZMVUVOQ0VfUEFHRV9USU5ZSURcclxuLy8gaHR0cHM6Ly9jb25mbHVlbmNlLmF0bGFzc2lhbi5jb20vY29uZmtiL2hvdy10by1wcm9ncmFtbWF0aWNhbGx5LWdlbmVyYXRlLXRoZS10aW55LWxpbmstb2YtYS1jb25mbHVlbmNlLXBhZ2UtOTU2NzEzNDMyLmh0bWxcclxuLy8gVGhlIGxvbmcgdG8gYnl0ZSBhcnJheSBjb252ZXJzaW9uIGlzIHRha2VuIGZyb20gdGhpcyBzb3VyY2U6XHJcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzg0ODIzMDkvY29udmVydGluZy1qYXZhc2NyaXB0LWludGVnZXItdG8tYnl0ZS1hcnJheS1hbmQtYmFja1xyXG5cclxuLy8gQ29udmVydHMgdGhlIHBhZ2UgaWQgdG8gYSBieXRlIGFycmF5IGZvciBmdXJ0aGVyIGVuY29kaW5nXHJcbnZhciBsb25nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiBsb25nVG9CeXRlQXJyYXkobG9uZykge1xyXG4gICAgdmFyIGJ5dGVBcnJheSA9IFswLCAwLCAwLCAwXTtcclxuICAgIGZvciAoIHZhciBpbmRleCA9IDA7IGluZGV4IDwgYnl0ZUFycmF5Lmxlbmd0aDsgaW5kZXggKysgKSB7XHJcbiAgICAgIHZhciBieXRlID0gbG9uZyAmIDB4ZmY7XHJcbiAgICAgIGJ5dGVBcnJheSBbIGluZGV4IF0gPSBieXRlO1xyXG4gICAgICBsb25nID0gKGxvbmcgLSBieXRlKSAvIDI1NiA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYnl0ZUFycmF5O1xyXG59O1xyXG5cclxuXHJcbi8vIEVuY29kZXMgcHJvdmlkZWQgcGFnZSBpZCBpbiBCYXNlLTY0XHJcbnZhciBwYWdlSWRUb0I2NCA9IGZ1bmN0aW9uIHBhZ2VJZFRvQjY0KHBhZ2VJZCkge1xyXG4gICAgcmV0dXJuIGJ0b2EoXHJcbiAgICAgICAgbG9uZ1RvQnl0ZUFycmF5KHBhZ2VJZClcclxuICAgICAgICAgICAgLm1hcChTdHJpbmcuZnJvbUNoYXJDb2RlKVxyXG4gICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc1swXTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmpvaW4oXCJcIilcclxuICAgICAgKVxyXG4gICAgICAucmVwbGFjZSgvPS9nLFwiXCIpO1xyXG59O1xyXG5cclxuXHJcbi8vIEdlbmVyYXRlcyBhIENvbmZsdWVuY2UgcGFnZSBpZGVudGlmaWVyIGZyb20gdGhlIHByb3ZpZGVkIEItNjQgZW5jb2RlZCBwYWdlIGlkXHJcbi8vIFRha2VuIGRpcmVjdGx5IGZyb20gQ29uZmx1ZW5jZSBTZXJ2ZXIgNy4yIHNvdXJjZSBjb2RlXHJcbi8vIGNvbS5hdGxhc3NpYW4uY29uZmx1ZW5jZS5wYWdlcy5UaW55SWRcclxudmFyIGdlbmVyYXRlVGlueUlkID0gZnVuY3Rpb24gZ2VuZXJhdGVUaW55SWQoYnRvYWRJZCkge1xyXG4gICAgdmFyIHBhZGRpbmcgPSB0cnVlO1xyXG4gICAgdmFyIHRpbnlTdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgIGZvciAodmFyIGkgPSBidG9hZElkLmxlbmd0aCAtIDE7IGkgPj0gMCA7IGktLSkge1xyXG5cclxuICAgICAgICB2YXIgY2hhcmFjdGVyID0gYnRvYWRJZC5jaGFyQXQoaSk7XHJcblxyXG4gICAgICAgIGlmIChjaGFyYWN0ZXIgPT09ICc9JyB8fCBjaGFyYWN0ZXIgPT0gJ1xcbicpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICBpZiAocGFkZGluZyAmJiBjaGFyYWN0ZXIgPT09ICdBJylcclxuICAgICAgICAgICAgY29udGludWU7XHJcblxyXG4gICAgICAgIHBhZGRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKGNoYXJhY3RlciA9PT0gJy8nKSB7XHJcbiAgICAgICAgICAgIHRpbnlTdHJpbmcgPSAnLScgKyB0aW55U3RyaW5nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjaGFyYWN0ZXIgPT09ICcrJykge1xyXG4gICAgICAgICAgICB0aW55U3RyaW5nID0gJ18nICsgdGlueVN0cmluZztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRpbnlTdHJpbmcgPSBjaGFyYWN0ZXIgKyB0aW55U3RyaW5nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGlueVN0cmluZy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdmFyIGxhc3RDaGFyID0gdGlueVN0cmluZy5jaGFyQXQodGlueVN0cmluZy5sZW5ndGggLSAxKTtcclxuXHJcbiAgICAgICAgLy8gQ09ORi05Mjk5IHNvbWUgZW1haWwgY2xpZW50cyBkb24ndCBsaWtlIFVSTHMgdGhhdCBlbmQgd2l0aCBhIHB1bmN0YXRpb25cclxuICAgICAgICBpZiAobGFzdENoYXIgPT09ICctJyB8fCBsYXN0Q2hhciA9PT0gJ18nKVxyXG4gICAgICAgICAgICB0aW55U3RyaW5nICs9ICcvJztcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGlueVN0cmluZztcclxufTtcclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PUVORCBFWFBFUklNRU5UQUw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcblxyXG4vLyBEeW5hbWljYWxseSBjb21wdXRlZCBwcm9wZXJ0aWVzXHJcbi8qKiBUaGUgQ29uZmx1ZW5jZSAnVGlueUlkJyBvZiB0aGUgY3VycmVudCBwYWdlICovXHJcbkNPTkZJRy5DT05GTFVFTkNFX1BBR0VfVElOWUlEID0gZ2VuZXJhdGVUaW55SWQocGFnZUlkVG9CNjQoQ09ORklHLkNPTkZMVUVOQ0VfUEFHRV9JRCkpO1xyXG5cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gcGFnZSBVcmwgSUQgcmV0cmlldmVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxudmFyIGRpc3BsYXlQYWdlVXJsSWQgPSBmdW5jdGlvbiBkaXNwbGF5UGFnZVVybElkKHBhZ2VJZCkge1xyXG4gICAgLy8gVXNlIGNvbXB1dGVkIFRpbnlJRFxyXG4gICAgdmFyIHRpbnlTdWZmaXggPSBDT05GSUcuQ09ORkxVRU5DRV9QQUdFX1RJTllJRDtcclxuICAgIGlmICh0aW55U3VmZml4KSB7XHJcbiAgICAgICAgLy8gdmFyIGFycmF5ID0gdGlueVN1ZmZpeC5zcGxpdChcIi9cIik7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiBDT05GSUcuSEVMUFNFUlZJQ0VfVVJMSURfRU5EUE9JTlQgKyB0aW55U3VmZml4LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuaGFzT3duUHJvcGVydHkoXCJJZGVudGlmaWVyXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNwYWdlVXJsSWRcIikudGV4dChcIiBIZWxwIFNlcnZpY2UgSUQ6IFwiICsgcmVzcG9uc2UuSWRlbnRpZmllciArIFwiIChUaW55SUQ6IFwiICsgdGlueVN1ZmZpeCArIFwiKVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjcGFnZVVybElkXCIpLnRleHQoXCIgSGVscCBTZXJ2aWNlIElEOiBcIiArIHJlc3BvbnNlLkVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGltZW91dDogODAwXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAkKFwiI3BhZ2VVcmxJZFwiKS50ZXh0KFwiRXJyb3Igd2hlbiBnZW5lcmF0aW5nIHRoZSBwYWdlIHRpbnkgSUQuIFNlZSB0aGUgY29uc29sZSBmb3IgZGV0YWlscy5cIik7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBQUklTTSBXSElURVNQQUNFIE5PUk1BTElaQVRJT04gQ09ORklHID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuUHJpc20ucGx1Z2lucy5Ob3JtYWxpemVXaGl0ZXNwYWNlLnNldERlZmF1bHRzKHtcclxuICAgICdyZW1vdmUtdHJhaWxpbmcnOiB0cnVlLFxyXG4gICAgJ3JlbW92ZS1pbmRlbnQnOiB0cnVlLFxyXG4gICAgJ2xlZnQtdHJpbSc6IHRydWUsXHJcbiAgICAncmlnaHQtdHJpbSc6IHRydWUsXHJcbiAgICAvLyBEb2VzIG5vdCBwcmVzZXJ2ZSBjb21tZW50IGhpZ2hsaWdodCBvbiBuZXh0IGxpbmVcclxuICAgIC8vICdicmVhay1saW5lcyc6IDgwLFxyXG4gICAgJ3JlbW92ZS1pbml0aWFsLWxpbmUtZmVlZCc6IGZhbHNlLFxyXG4gICAgJ3RhYnMtdG8tc3BhY2VzJzogNFxyXG59KTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gUERGIEVYUE9SVCAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG52YXIgc2V0RXhwb3J0UGRmID0gZnVuY3Rpb24gZXhwb3J0UGRmKCkge1xyXG4gICAgdmFyIHBhZ2VUaXRsZSA9ICQoJ2JvZHknKS5hdHRyKCdkYXRhLXBhZ2V0aXRsZScpO1xyXG4gICAgJChcIiNleHBvcnQtcGRmXCIpLmF0dHIoJ2hyZWYnLCBgLi4vcGRmLyR7Q09ORklHLkNPTkZMVUVOQ0VfU1BBQ0VfS0VZLnRvTG93ZXJDYXNlKCl9LyR7cGFnZVRpdGxlLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvIC9nLFwiLVwiKX0ucGRmYCk7XHJcbn07XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShzZXRFeHBvcnRQZGYpO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBQQUdFIFRJTlkgTElOS1MgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxuLy8gR2V0cyB0aGUgcGFnZSB0aW55IGxpbmsgVVJMIHVzaW5nIFJFU1QgYW5kIHNob3dzIHRoZSBwYWdlIGxpbmsgcGFuZWxcclxudmFyIG9wZW5QYWdlTGluayA9IGZ1bmN0aW9uIG9wZW5QYWdlTGluayhwYWdlSUQpIHtcclxuICAgIGlmIChDT05GSUcuQ09ORkxVRU5DRV9QQUdFX1RJTllJRCkge1xyXG4gICAgICAgIHRvZ2dsZVBhZ2VMaW5rUGFuZWwoQ09ORklHLkJBU0VfVVJMICsgJy94LycgKyBDT05GSUcuQ09ORkxVRU5DRV9QQUdFX1RJTllJRCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRvZ2dsZVBhZ2VMaW5rUGFuZWwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgfVxyXG59O1xyXG5cclxudmFyIHRvZ2dsZVBhZ2VMaW5rUGFuZWwgPSBmdW5jdGlvbiB0b2dnbGVQYWdlTGlua1BhbmVsKHRpbnlVcmwpIHtcclxuICAgICQoXCIjcGFnZS1saW5rLXRleHRib3hcIikuYXR0cihcInZhbHVlXCIsIHRpbnlVcmwpO1xyXG4gICAgaWYgKCQoXCIjcGFnZS1saW5rLXBhbmVsXCIpLmhhc0NsYXNzKFwic2hvd1wiKSkge1xyXG4gICAgICAgICQoXCIjcGFnZS1saW5rLXBhbmVsXCIpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgICQoXCIjcGFnZS1saW5rLXBhbmVsXCIpLmFkZENsYXNzKFwic2hvd1wiKTtcclxuICAgIH1cclxufTtcclxuXHJcbi8vIEF0dGVtcHRzIHRvIGNvcHkgdGhlIHBhZ2UgbGluayB2YWx1ZSB0byB0aGUgY2xpcGJvYXJkXHJcbnZhciBjb3B5UGFnZUxpbmtUb0NsaXAgPSBmdW5jdGlvbiBjb3B5UGFnZUxpbmtUb0NsaXAoKSB7XHJcblx0aWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0U25hY2tiYXIuc2hvdyh7dGV4dDogXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBjb3B5aW5nIHRoZSBwYWdlIGxpbmsgdG8gdGhlIGNsaXBib2FyZFwiLCBwb3M6ICd0b3AtcmlnaHQnLCBzaG93QWN0aW9uOiBmYWxzZSwgY3VzdG9tQ2xhc3M6ICdib3gtZ2VuZXJhbCBib3gtd2FybmluZycsIGR1cmF0aW9uOiAnMzUwMCcsIGJhY2tncm91bmRDb2xvcjogJyNGRkVCRUInLCB0ZXh0Q29sb3I6JyMxNTE1MTUnIH0pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCgkKFwiI3BhZ2UtbGluay10ZXh0Ym94XCIpLmF0dHIoXCJ2YWx1ZVwiKSlcclxuXHRcdFx0LnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdFNuYWNrYmFyLnNob3coe3RleHQ6IFwiUGFnZSBsaW5rIGNvcGllZFwiLCBwb3M6ICd0b3AtcmlnaHQnLCBzaG93QWN0aW9uOiBmYWxzZSwgY3VzdG9tQ2xhc3M6ICdib3gtZ2VuZXJhbCBib3gtaW5mbycsIGR1cmF0aW9uOiAnMjUwMCcsIGJhY2tncm91bmRDb2xvcjogJyNFRUYzRkMnLCB0ZXh0Q29sb3I6JyMxNTE1MTUnIH0pO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgU25hY2tiYXIuc2hvdyh7dGV4dDogXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBjb3B5aW5nIHRoZSBwYWdlIGxpbmsgdG8gdGhlIGNsaXBib2FyZFwiLCBwb3M6ICd0b3AtcmlnaHQnLCBzaG93QWN0aW9uOiBmYWxzZSwgY3VzdG9tQ2xhc3M6ICdib3gtZ2VuZXJhbCBib3gtd2FybmluZycsIGR1cmF0aW9uOiAnMzUwMCcsIGJhY2tncm91bmRDb2xvcjogJyNGRkVCRUInLCB0ZXh0Q29sb3I6JyMxNTE1MTUnIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHR9XHJcbn07XHJcblxyXG4vLyBDbG9zZXMgdGhlIHBhZ2UgbGluayBwYW5lbFxyXG5jb25zdCBjbG9zZVBhZ2VMaW5rID0gKCkgPT4gICQoXCIjcGFnZS1saW5rLXBhbmVsXCIpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09IEhFQURFUiBTUEFDRSBTV0lUQ0hFUiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vLyBDb252ZXJ0cyB0aGUgdmVyc2lvbiBudW1iZXIgdG8gdGhlIGFwcHJvcHJpYXRlIHZlcnNpb24gdGV4dFxyXG5jb25zdCBnZXRWZXJzaW9uVGV4dEZyb21WZXJzaW9uSWQgPSAoZG9jdW1lbnRhdGlvblZlcnNpb24pID0+XHJcbiAgICBET0NVTUVOVEFUSU9OX1ZFUlNJT05TLmZpbmQoKGl0ZW0pID0+IGl0ZW0udmVyc2lvbklkID09IGRvY3VtZW50YXRpb25WZXJzaW9uKS52ZXJzaW9uVGV4dDtcclxuXHJcblxyXG4vLyBUcmFuc2xhdGVzIHRoZSBJRCB1c2VkIGJ5IHRoZSBkb2N1bWVudGF0aW9uIGhlbHAgc2VydmljZSB0byBLZW50aWNvIHZlcnNpb24gdGV4dFxyXG5jb25zdCBnZXRWZXJzaW9uVGV4dEZyb21IZWxwU2VydmljZUlkID0gKGhlbHBTZXJ2aWNlVmVyc2lvbikgPT5cclxuICAgIERPQ1VNRU5UQVRJT05fVkVSU0lPTlMuZmluZCgoaXRlbSkgPT4gaXRlbS5oZWxwU2VydmljZVZlcnNpb24gPT0gaGVscFNlcnZpY2VWZXJzaW9uKS52ZXJzaW9uVGV4dDtcclxuXHJcblxyXG52YXIgdmVyc2lvblN3aXRjaGVyRGF0YTtcclxuLyoqIEF0dGVtcHRzIHRvIGxvYWQgdmVyc2lvbiBsaW5rIGRhdGEgZnJvbSB0aGUga2VudGljby5jb20gaGVscCBzZXJ2aWNlXHJcbiAgICBUaGUgZnVuY3Rpb24gaXMgdHJpZ2dlcmVkIG9uIGRvY3VtZW50IGxvYWQgaW4gaW5jbHVkZS1ib2R5ZW5kc2NyaXB0cy52bSAtXHJcbiAgICB3aGVyZSB3ZSBjYW4gY29uZGl0aW9uYWxseSBpbmNsdWRlIGl0IGR1ZSB0byBzY3JvbGwgdmlld3BvcnQgY29udGV4dHVhbCB2YXJpYWJsZXNcclxuICAgIEBwYXJhbSB7c3RyaW5nfSB0aW55SUQgLSB0aGUgc2hvcnQgaWRlbnRpZmllciBvZiB0aGUgdGFyZ2V0IENvbmZsdWVuY2UgcGFnZSAqL1xyXG52YXIgbG9hZFZlcnNpb25MaW5rRGF0YSA9IGZ1bmN0aW9uIGxvYWRWZXJzaW9uTGlua0RhdGEodGlueUlEKSB7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICB1cmw6IENPTkZJRy5IRUxQU0VSVklDRV9MSVNUQUxUVkVSU0lPTkxJTktTX0VORFBPSU5UICsgdGlueUlELFxyXG4gICAgICAgIHRpbWVvdXQ6IDIwMDAsXHJcbiAgICAgICAgdHJ5Q291bnQgOiAwLFxyXG4gICAgICAgIHJldHJ5TGltaXQgOiAzLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIHZlcnNpb24gc3dpdGNoZXIgZGF0YSB0byBhIHZhcmlhYmxlLiBVc2VkIGluICdpbnNlcnRWZXJzaW9uTGlua3MoKScgY2FsbGVkIGZyb20gJ2luY2x1ZGUtc3BhY2Utc3dpdGNoZXIudm0nLlxyXG4gICAgICAgICAgICB2ZXJzaW9uU3dpdGNoZXJEYXRhID0gZGF0YTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIEFkZGVkIHJldHJ5IGxvZ2ljIGluIGNhc2UgdGhlIHJldHJpZXZhbCBmYWlscy4gSW5zcGlyYXRpb246XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTAwMjQ0Njkvd2hhdHMtdGhlLWJlc3Qtd2F5LXRvLXJldHJ5LWFuLWFqYXgtcmVxdWVzdC1vbi1mYWlsdXJlLXVzaW5nLWpxdWVyeVxyXG4gICAgICAgIGVycm9yIDogZnVuY3Rpb24gKHhociwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24gKSB7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0U3RhdHVzID09IFwidGltZW91dFwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyeUNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50cnlDb3VudCA8PSB0aGlzLnJldHJ5TGltaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3RyeSBhZ2FpblxyXG4gICAgICAgICAgICAgICAgICAgICQuYWpheCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcblxyXG52YXIgdmVyc2lvbkxpbmtVcGRhdGVEb25lID0gZmFsc2U7XHJcblxyXG4vLyBSZXBsYWNlcyB0aGUgZGVmYXVsdCBzcGFjZSByb290IHZlcnNpb24gbGlua3Mgd2l0aCBzcGVjaWZpYyBwYWdlIGxpbmtzXHJcbnZhciBpbnNlcnRWZXJzaW9uTGlua3MgPSBmdW5jdGlvbiBpbnNlcnRWZXJzaW9uTGlua3ModmVyc2lvbkRhdGEpIHtcclxuICAgIGlmICh2ZXJzaW9uRGF0YSA9PT0gdW5kZWZpbmVkKVxyXG4gICAge1xyXG4gICAgICAgIG9wZW5DbG9zZVZlcnNpb25EZGwoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHZlcnNpb25MaW5rVXBkYXRlRG9uZSlcclxuICAgIHtcclxuICAgICAgICBvcGVuQ2xvc2VWZXJzaW9uRGRsKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZlcnNpb25EYXRhLmZvckVhY2goZnVuY3Rpb24gKGRhdGFJdGVtKSB7XHJcbiAgICB2YXIgbGlua0VsZW0gPSAkKFwiLmpzLW1lbnVEZGwtdmVyc2lvbiBhOmNvbnRhaW5zKFwiICsgZ2V0VmVyc2lvblRleHRGcm9tSGVscFNlcnZpY2VJZChkYXRhSXRlbS5WZXJzaW9uVXJsSWQpICsgXCIpXCIpO1xyXG4gICAgICAgIGlmIChsaW5rRWxlbSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxpbmtFbGVtLmF0dHIoXCJocmVmXCIsIGRhdGFJdGVtLlVybCk7XHJcbiAgICAgICAgICAgIGxpbmtFbGVtLmFkZENsYXNzKFwiIHBvcHVsYXRlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKFwiLmpzLW1lbnVEZGwtdmVyc2lvbiBhXCIpLnRvQXJyYXkoKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KXtcclxuXHRcdGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1bGF0ZWRcIikpXHJcblx0XHR7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImVtcHR5XCIpO1xyXG5cclxuICAgICAgICAgICAgLy8gU3BlY2lhbCBjYXNlIDEgLSB0aGUgWHBlcmllbmNlIDEzIGRvY3MgbGluayB0byBhIHNwZWNpYWwgcGFnZSBpbnN0ZWFkIG9mIHRoZSBIb21lIHJvb3QgZm9yIHBhZ2VzIHRoYXQgZG8gbm90IGhhdmUgYSBkaXJlY3QgZXF1aXZhbGVudFxyXG5cdFx0XHRpZiAoZWxlbWVudC50ZXh0Q29udGVudCA9PT0gXCJYcGVyaWVuY2UgMTNcIikge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlIHF1ZXJ5IHN0cmluZyBwYXJhbWV0ZXIgY29udGFpbnMgdGhlIGxhc3QgVVJMIHNlZ21lbnQgKHBhZ2UgdGl0bGUpLiBQcm9jZXNzZWQgYnkgamF2YXNjcmlwdCBpbmNsdWRlZCBkaXJlY3RseSBvbiB0aGUgXCJNaXNzaW5nIGRvY3VtZW50YXRpb24gcGFnZXNcIiBwYWdlLlxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIENPTkZJRy5YUEVSSUVOQ0UxM19NSVNTSU5HX1BBR0VTX1VSTCArIFwiP3JlZj1cIiArICQobG9jYXRpb24pLmF0dHIoXCJocmVmXCIpLnNwbGl0KCcvJykucG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIlRoZSBjdXJyZW50IHBhZ2UgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGUgWHBlcmllbmNlIDEzIGRvY3VtZW50YXRpb24uIFxcclxcbllvdSB3aWxsIGJlIHJlZGlyZWN0ZWQgdG8gYSBnZW5lcmFsIGd1aWRhbmNlIHBhZ2UuXCIpO1x0XHRcdFx0XHJcblx0XHRcdC8vIFNwZWNpYWwgY2FzZSAyIC0gdGhlIFhQIGRvY3MgbGluayB0byBhIHNwZWNpYWwgcGFnZSBpbnN0ZWFkIG9mIHRoZSBIb21lIHJvb3QgZm9yIHBhZ2VzIHRoYXQgZG8gbm90IGhhdmUgYSBkaXJlY3QgZXF1aXZhbGVudFxyXG5cdFx0XHR9IGVsc2UgaWYgKGVsZW1lbnQudGV4dENvbnRlbnQgPT09IFwiWHBlcmllbmNlIGJ5IEtlbnRpY29cIikge1xyXG5cdFx0XHRcdC8vIFRoZSBxdWVyeSBzdHJpbmcgcGFyYW1ldGVyIGNvbnRhaW5zIHRoZSBsYXN0IFVSTCBzZWdtZW50IChwYWdlIHRpdGxlKS4gUHJvY2Vzc2VkIGJ5IGphdmFzY3JpcHQgaW5jbHVkZWQgZGlyZWN0bHkgb24gdGhlIFwiTWlzc2luZyBkb2N1bWVudGF0aW9uIHBhZ2VzXCIgcGFnZS5cclxuXHRcdFx0XHRlbGVtZW50LnNldEF0dHJpYnV0ZShcImhyZWZcIiwgQ09ORklHLlhQX01JU1NJTkdfUEFHRVNfVVJMICsgXCI/cmVmPVwiICsgJChsb2NhdGlvbikuYXR0cihcImhyZWZcIikuc3BsaXQoJy8nKS5wb3AoKSk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIFwiVGhlIGN1cnJlbnQgcGFnZSBpcyBub3QgYXZhaWxhYmxlIGluIHRoZSBYcGVyaWVuY2UgYnkgS2VudGljbyBkb2N1bWVudGF0aW9uLiBcXHJcXG5Zb3Ugd2lsbCBiZSByZWRpcmVjdGVkIHRvIGEgZ2VuZXJhbCBndWlkYW5jZSBwYWdlLlwiKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgXCJUaGUgY3VycmVudCBwYWdlIGlzIG5vdCBhdmFpbGFibGUgZm9yIHRoaXMgZG9jdW1lbnRhdGlvbiB2ZXJzaW9uLiBcXHJcXG5Zb3Ugd2lsbCBiZSByZWRpcmVjdGVkIHRvIHRoZSBob21lIHBhZ2UgZm9yIHRoaXMgdmVyc2lvbi5cIik7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuICAgIH0pO1xyXG5cclxuICAgIHZlcnNpb25MaW5rVXBkYXRlRG9uZSA9IHRydWU7XHJcblxyXG4gICAgb3BlbkNsb3NlVmVyc2lvbkRkbCgpO1xyXG59O1xyXG5cclxuXHJcblxyXG4vLyBSZXBsYWNlcyB0aGUgZGVmYXVsdCBzcGFjZSByb290IHZlcnNpb24gbGlua3Mgd2l0aCBzZWFyY2ggcGFnZSBsaW5rcywgaW5jbHVkaW5nIHRoZSBjdXJyZW50IHBhcmFtZXRlcnNcclxudmFyIGluc2VydFNlYXJjaFZlcnNpb25MaW5rcyA9IGZ1bmN0aW9uIGluc2VydFNlYXJjaFZlcnNpb25MaW5rcygpIHtcclxuICAgIGlmICghdmVyc2lvbkxpbmtVcGRhdGVEb25lKSB7XHJcbiAgICAgICAgdmFyIHZlcnNpb25MaW5rRWxlbXMgPSAkKFwiLmpzLW1lbnVEZGwtdmVyc2lvbiBhXCIpO1xyXG4gICAgICAgIHZlcnNpb25MaW5rRWxlbXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrcyB3aGV0aGVyIHRoZSBsaW5rZWQgdmVyc2lvbiBzdXBwb3J0cyB0aGUgZGV2IG1vZGVsIHN3aXRjaGVyXHJcbiAgICAgICAgICAgIC8vIElmIGl0IGRvZXMgbm90LCByZW1vdmVzIGxhYmVsIGZpbHRlcmluZyBvZiBzZWFyY2ggcmVzdWx0c1xyXG4gICAgICAgICAgICB2YXIgbGlua0VsZW1IcmVmQXJyYXkgPSB0aGlzLmhyZWYuc3BsaXQoXCIvXCIpO1xyXG4gICAgICAgICAgICB2YXIgc3BhY2VLZXkgPSBnZXREb2NWZXJzaW9uKGxpbmtFbGVtSHJlZkFycmF5W2xpbmtFbGVtSHJlZkFycmF5Lmxlbmd0aCAtIDFdKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZHMgYSBzbGFzaCBzZXBhcmF0b3IgaWYgdGhlIGxpbmsgZG9lcyBub3QgYWxyZWFkeSBlbmQgaW4gYSBzbGFzaFxyXG4gICAgICAgICAgICB2YXIgc2VhcmNoU2xhc2ggPSAoKHRoaXMuaHJlZi5zbGljZSgtMSkgIT09IFwiL1wiKSA/IFwiL1wiIDogXCJcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAoQ09ORklHLkNPTkZMVUVOQ0VfREVWTU9ERUxfVkVSU0lPTlNXSVRDSEVSX1dISVRFTElTVC5pbmRleE9mKHNwYWNlS2V5KSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBLZWVwcyB0aGUgZnVsbCBxdWVyeSBzdHJpbmcgaWYgdGhlIGxpbmtlZCB2ZXJzaW9uIHN1cHBvcnRzIHRoZSBkZXYgbW9kZWwgc3dpdGNoZXJcclxuICAgICAgICAgICAgICAgIHRoaXMuaHJlZiA9IHRoaXMuaHJlZiArIHNlYXJjaFNsYXNoICsgXCJzZWFyY2hcIiArIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBHZXRzIHRoZSBxdWVyeSBzdHJpbmcgcGFyYW1ldGVycyB1c2VkIGJ5IHRoZSBjdXJyZW50IHNlYXJjaCByZXN1bHRzIHBhZ2VcclxuICAgICAgICAgICAgICAgIHZhciBzZWFyY2hRdWVyeVN0cmluZ1BhcnRzID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zcGxpdChcIiZcIik7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gc2VhcmNoUXVlcnlTdHJpbmdQYXJ0cy5sZW5ndGg7IGktLSA+IDA7KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlcyB0aGUgbGFiZWwgZmlsdGVyaW5nIHBhcmFtZXRlclxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2hRdWVyeVN0cmluZ1BhcnRzW2ldLmluZGV4T2YoXCJsPVwiKSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFF1ZXJ5U3RyaW5nUGFydHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmhyZWYgPSB0aGlzLmhyZWYgKyBzZWFyY2hTbGFzaCArIFwic2VhcmNoXCIgKyBzZWFyY2hRdWVyeVN0cmluZ1BhcnRzLmpvaW4oXCImXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmVyc2lvbkxpbmtVcGRhdGVEb25lID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuQ2xvc2VWZXJzaW9uRGRsKCk7XHJcbn07XHJcblxyXG5cclxuLy8gRGlzcGxheXMvaGlkZXMgdGhlIGRvY3VtZW50YXRpb24gdHlwZSBzZWxlY3RvciBkcm9wLWRvd24gbGlzdFxyXG52YXIgb3BlbkNsb3NlRG9jVHlwZURkbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIuanMtbWVudURkbC1kb2NUeXBlXCIpLnRvZ2dsZUNsYXNzKFwic2hvd1wiKTtcclxuICAgICQoXCIuanMtbWVudURkbEJ0bi1kb2NUeXBlXCIpLnRvZ2dsZUNsYXNzKFwib3BlbmVkXCIpO1xyXG59O1xyXG5cclxuLy8gRGlzcGxheXMvaGlkZXMgdGhlIGRvY3VtZW50YXRpb24gdmVyc2lvbiBzZWxlY3RvciBkcm9wLWRvd24gbGlzdFxyXG52YXIgb3BlbkNsb3NlVmVyc2lvbkRkbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIuanMtbWVudURkbC12ZXJzaW9uXCIpLnRvZ2dsZUNsYXNzKFwic2hvd1wiKTtcclxuICAgICQoXCIuanMtbWVudURkbEJ0bi12ZXJzaW9uXCIpLnRvZ2dsZUNsYXNzKFwib3BlbmVkXCIpO1xyXG59O1xyXG5cclxuXHJcbi8vIFJldHVybnMgdGhlIGRvY3VtZW50YXRpb24gdHlwZSBmb3IgYSBzcGVjaWZpZWQgc3BhY2Uga2V5XHJcbnZhciBnZXREb2NUeXBlID0gZnVuY3Rpb24gKHNwYWNlS2V5KSB7XHJcbiAgICB2YXIgYXBpRXhhbXBsZXMgPSAvYXBpL2k7XHJcbiAgICB2YXIgdHV0b3JpYWwgPSAvdHV0b3JpYWwvaTtcclxuICAgIGlmIChhcGlFeGFtcGxlcy50ZXN0KHNwYWNlS2V5KSkge1xyXG4gICAgICAgIHJldHVybiBcIkFQSSBFeGFtcGxlc1wiO1xyXG4gICAgfVxyXG4gICAgaWYgKHR1dG9yaWFsLnRlc3Qoc3BhY2VLZXkpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiVHV0b3JpYWxcIjtcclxuICAgIH1cclxuICAgIHJldHVybiBcIkRvY3VtZW50YXRpb25cIjtcclxufTtcclxuXHJcblxyXG4vLyBSZXR1cm5zIHRoZSBkb2N1bWVudGF0aW9uIHZlcnNpb24gZm9yIGEgc3BlY2lmaWVkIHNwYWNlIGtleVxyXG52YXIgZ2V0RG9jVmVyc2lvbiA9IGZ1bmN0aW9uIChzcGFjZUtleSkge1xyXG5cdHN3aXRjaCAoc3BhY2VLZXkpIHtcclxuXHRcdC8vIEV4Y2VwdGlvbnMgZm9yIHNwYWNlcyB3aXRob3V0IGEgbnVtYmVyIGluIHRoZSBzcGFjZSBrZXkgYW5kIGZvciBcIjEyc3BcIlxyXG5cdFx0Y2FzZSBcIksxMlNQXCI6XHJcblx0XHRjYXNlIFwiQVBJMTJTUFwiOlxyXG5cdFx0Y2FzZSBcIksxMlNQVHV0b3JpYWxcIjpcclxuXHRcdFx0cmV0dXJuIFwiMTJzcFwiO1xyXG5cdFx0Y2FzZSBcIlhQXCI6XHJcblx0XHRjYXNlIFwiVHV0b3JpYWxcIjpcclxuXHRcdGNhc2UgXCJBcGlcIjpcclxuXHRcdFx0cmV0dXJuIFwieHBcIjtcclxuXHRcdGRlZmF1bHQ6XHJcblx0XHRcdC8vIFJldHVybnMgdGhlIG51bWJlciBmcm9tIHRoZSBzcGFjZSBrZXkgZm9yIFwic3RhbmRhcmRcIiBjYXNlc1xyXG5cdFx0XHRyZXR1cm4gc3BhY2VLZXkucmVwbGFjZSgvW14wLTldL2csICcnKTtcclxuXHR9XHRcclxufTtcclxuXHJcblxyXG4vLyBDb252ZXJ0cyB0aGUgdmVyc2lvbiBudW1iZXIgdG8gdGhlIGFwcHJvcHJpYXRlIHRvb2x0aXAgKHRpdGxlKSBmb3IgdGhlIHZlcnNpb24gbGlua1xyXG52YXIgZ2V0VmVyc2lvbkxpbmtUaXRsZSA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7XHJcbiAgICBzd2l0Y2ggKHZlcnNpb24pIHtcclxuICAgICAgICBjYXNlIFwiMTJzcFwiOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJLZW50aWNvIDEyIFNlcnZpY2UgUGFja1wiO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBnZXRWZXJzaW9uVGV4dEZyb21WZXJzaW9uSWQodmVyc2lvbik7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuLy8gQnVpbGRzIGxpbmtzIHRvIHRoZSBkb2N1bWVudGF0aW9uIHNwYWNlIHJvb3QgZm9yIGEgc3BlY2lmaWVkIGRvY3VtZW50YXRpb24gdHlwZSBhbmQgdmVyc2lvblxyXG52YXIgYnVpbGREb2NMaW5rID0gZnVuY3Rpb24gYnVpbGREb2NMaW5rKHZlcnNpb24sIGRvY1R5cGUsIHVzZURvY1R5cGVJbkxpbmtUZXh0LCBpc0N1cnJlbnQpIHtcclxuICAgIHZhciBzcGFjZUtleTtcclxuICAgIHZhciBzcGFjZUtleVNsYXNoID0gXCIvXCI7XHJcblx0XHJcblx0Ly8gUGF0dGVybiBmb3IgWHBlcmllbmNlIDEzIG9yIG5ld2VyIGRvY3NcclxuICAgIGlmIChDT05GSUcuT0JTT0xFVEVfU1BBQ0VfS0VZX0ZPUk1BVF9WRVJTSU9OUy5pbmRleE9mKHZlcnNpb24pID09PSAtMSkge1xyXG5cdFx0Ly8gVGhlIFhQIGRvY3MgZG8gbm90IGhhdmUgYSBudW1iZXIgcHJlZml4IGluIHRoZWlyIHNwYWNlIGtleXNcclxuXHRcdHZhciB2ZXJzaW9uUHJlZml4ID0gKHZlcnNpb24gPT09IFwieHBcIikgPyBcIlwiIDogdmVyc2lvbjtcclxuXHRcdFxyXG4gICAgICAgIHN3aXRjaCAoZG9jVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiVHV0b3JpYWxcIjpcclxuICAgICAgICAgICAgICAgIHNwYWNlS2V5ID0gdmVyc2lvblByZWZpeCArIFwidHV0b3JpYWxcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiQVBJIEV4YW1wbGVzXCI6XHJcbiAgICAgICAgICAgICAgICBzcGFjZUtleSA9IHZlcnNpb25QcmVmaXggKyBcImFwaVwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBzcGFjZUtleSA9IHZlcnNpb247XHJcbiAgICAgICAgfVx0XHRcclxuXHRcdC8vIFJlbW92ZXMgdGhlIHNwYWNlIGtleSBmcm9tIHRoZSBsaW5rIGZvciB0aGUgdmVyc2lvbiAodXNlcyB0aGUgYmFzZSBVUkwgd2l0aG91dCBhIGtleSBpbiB0aGUgcGF0aClcclxuXHRcdGlmIChzcGFjZUtleSA9PT0gQ09ORklHLkRPQ19ST09UX1VSTF9TUEFDRV9LRVkpIHtcclxuXHRcdFx0c3BhY2VLZXkgPSBcIlwiO1xyXG5cdFx0XHRzcGFjZUtleVNsYXNoID0gXCJcIjtcclxuXHRcdH1cclxuXHQvLyBQYXR0ZXJuIGZvciBvbGRlciBzcGFjZXMgd2l0aCBhIHZlcnNpb24gbnVtYmVyIHN1ZmZpeCBpbiB0aGUgc3BhY2Uga2V5XHRcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc3dpdGNoIChkb2NUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJUdXRvcmlhbFwiOlxyXG4gICAgICAgICAgICAgICAgc3BhY2VLZXkgPSBcImtcIiArIHZlcnNpb24gKyBcInR1dG9yaWFsXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkFQSSBFeGFtcGxlc1wiOlxyXG4gICAgICAgICAgICAgICAgc3BhY2VLZXkgPSBcImFwaVwiICsgdmVyc2lvbjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgc3BhY2VLZXkgPSBcImtcIiArIHZlcnNpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cdFx0XHJcbiAgICB2YXIgYmFzZVVybCA9ICQoJ1tuYW1lPVwiYWpzLWJhc2UtdXJsXCJdJykuYXR0cignY29udGVudCcpO1xyXG4gICAgdmFyIGxpbmtUZXh0ID0gdXNlRG9jVHlwZUluTGlua1RleHQgPyBkb2NUeXBlIDogZ2V0VmVyc2lvblRleHRGcm9tVmVyc2lvbklkKHZlcnNpb24pO1xyXG4gICAgdmFyIGxpbmtUaXRsZSA9ICcgdGl0bGU9XCInICsgKHVzZURvY1R5cGVJbkxpbmtUZXh0ID8gZG9jVHlwZSA6IGdldFZlcnNpb25MaW5rVGl0bGUodmVyc2lvbikpICsgJ1wiJztcclxuXHJcbiAgICB2YXIgY2xhc3NBdHRyaWJ1dGUgPSAnY2xhc3M9XCInICsgKGlzQ3VycmVudCA/ICcgY3VycmVudCcgOiAnJykgKyAnXCInO1xyXG5cclxuICAgIHJldHVybiAnPGxpPjxhIGhyZWY9XCInICsgc3BhY2VLZXlTbGFzaCArIHNwYWNlS2V5ICsgJ1wiJyArIGNsYXNzQXR0cmlidXRlICsgbGlua1RpdGxlICsgJz4nICsgbGlua1RleHQgKyAnPC9hPjwvbGk+JztcclxufTtcclxuXHJcblxyXG52YXIgbG9hZERvY1ZlcnNpb25IZWFkZXJMaXN0ID0gZnVuY3Rpb24gbG9hZERvY1ZlcnNpb25IZWFkZXJMaXN0KGN1cnJlbnREb2NUeXBlLCBjdXJyZW50RG9jVmVyc2lvbikge1xyXG4gICAgdmFyIHVzZXJMb2dnZWRJbiA9ICQoJ1tuYW1lPVwiY29uZmx1ZW5jZS11c2VyLWxvZ2dlZC1pblwiXScpLmF0dHIoJ2NvbnRlbnQnKTtcclxuXHJcbiAgICAvLyBGaWx0ZXJzIG91dCB1bmF2YWlsYWJsZSBhbmQgdW5wdWJsaXNoZWQgdmVyc2lvbnNcclxuICAgIHZhciBhdmFpbGFibGVEb2NWZXJzaW9ucyA9IERPQ1VNRU5UQVRJT05fVkVSU0lPTlMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBObyBBUEkgZXhhbXBsZXMgZm9yIDguMiBvciBvbGRlclxyXG4gICAgICAgIHJldHVybiAoKGN1cnJlbnREb2NUeXBlICE9PSBcIkFQSSBFeGFtcGxlc1wiKSB8fCAoaXRlbS52ZXJzaW9uSWQgIT09IFwiOFwiICYmIGl0ZW0udmVyc2lvbklkICE9PSBcIjgxXCIgJiYgaXRlbS52ZXJzaW9uSWQgIT09IFwiODJcIikpICYmXHJcbiAgICAgICAgICAgICAgICAvLyBIaWRlcyB0aGUgZGV2ZWxvcG1lbnQgdmVyc2lvbiBmb3IgcHVibGljIHVzZXJzXHJcbiAgICAgICAgICAgICAgICgodXNlckxvZ2dlZEluID09PSBcInRydWVcIikgfHwgKGl0ZW0udmVyc2lvbklkICE9PSBDT05GSUcuREVWX0RPQ1VNRU5UQVRJT05fVkVSU0lPTl9JRCkpICYmXHJcbiAgICAgICAgICAgICAgICAvLyBIaWRlcyB2ZXJzaW9uIDEyLCB3aGljaCBpcyByZWRpcmVjdGVkIHRvIDEyU1BcclxuICAgICAgICAgICAgICAgKGl0ZW0udmVyc2lvbklkICE9PSBcIjEyXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIGRvY1ZlcnNpb25MaW5rcyA9IFwiXCI7XHJcblxyXG4gICAgYXZhaWxhYmxlRG9jVmVyc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIC8vIEhpZGVzIG9sZGVyIGRvY3VtZW50YXRpb24gdmVyc2lvbnMgYmVoaW5kIHRoZSAnQWxsIHZlcnNpb25zJyBleHBhbmRhYmxlXHJcbiAgICAgICAgaWYgKGl0ZW0udmVyc2lvbklkID09IENPTkZJRy5ORVdFU1RfVU5TVVBQT1JURURfVkVSU0lPTl9JRCkge1xyXG4gICAgICAgICAgICBkb2NWZXJzaW9uTGlua3MgKz0gJzxsaSBjbGFzcz1cImpzLXVuc3VwcG9ydGVkLXZlcnNpb25zXCI+JyArXHJcbiAgICAgICAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cImhlYWRlci1kZGwtYnV0dG9uLW5lc3RlZCBqcy11bnN1cHBvcnRlZC12ZXJzaW9ucy1idXR0b25cIj4nICtcclxuICAgICAgICAgICAgICAgICdBbGwgdmVyc2lvbnMnICtcclxuICAgICAgICAgICAgICAgICc8L2J1dHRvbj4nICtcclxuICAgICAgICAgICAgICAgICc8dWwgY2xhc3M9XCJtZW51LWRkbC1jb250ZW50IG5lc3RlZC1saXN0IGRvY1ZlcnNpb24ganMtdW5zdXBwb3J0ZWQtdmVyc2lvbnMtbGlzdFwiPic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb2NWZXJzaW9uTGlua3MgKz0gYnVpbGREb2NMaW5rKGl0ZW0udmVyc2lvbklkLCBjdXJyZW50RG9jVHlwZSwgZmFsc2UsIGl0ZW0udmVyc2lvbklkID09IGN1cnJlbnREb2NWZXJzaW9uKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRvY1ZlcnNpb25MaW5rcyArPSAnPC91bD48L2xpPic7XHJcblxyXG4gICAgJCgnLmpzLW1lbnVEZGxCdG4tdmVyc2lvbicpLmh0bWwoZ2V0VmVyc2lvblRleHRGcm9tVmVyc2lvbklkKGN1cnJlbnREb2NWZXJzaW9uKSk7XHJcbiAgICAkKCcuanMtbWVudURkbC12ZXJzaW9uJykuaHRtbChkb2NWZXJzaW9uTGlua3MpO1xyXG59O1xyXG5cclxuXHJcbi8vIFJlZ2lzdGVycyBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSB1bnN1cHBvcnRlZCB2ZXJzaW9ucyBsaXN0XHJcbiQoZG9jdW1lbnQpLm9uKCdjbGljaycsIFwiLmpzLXVuc3VwcG9ydGVkLXZlcnNpb25zLWJ1dHRvblwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAkKCcuanMtdW5zdXBwb3J0ZWQtdmVyc2lvbnMtbGlzdCcpLnRvZ2dsZUNsYXNzKCdzaG93Jyk7XHJcbiAgICAkKCcuanMtdW5zdXBwb3J0ZWQtdmVyc2lvbnMtbGlzdCcpLnRvZ2dsZUNsYXNzKCdvcGVuZWQnKTtcclxufSk7XHJcblxyXG5cclxudmFyIGxvYWREb2NUeXBlSGVhZGVyTGlzdCA9IGZ1bmN0aW9uIGxvYWREb2NUeXBlSGVhZGVyTGlzdChjdXJyZW50RG9jVmVyc2lvbiwgY3VycmVudERvY1R5cGUpIHtcclxuICAgIHZhciBhdmFpbGFibGVEb2NUeXBlcyA9IFtcIkRvY3VtZW50YXRpb25cIiwgXCJUdXRvcmlhbFwiLCBcIkFQSSBFeGFtcGxlc1wiXTtcclxuICAgIC8vIEZpbHRlcnMgb3V0IHRoZSBBUEkgRXhhbXBsZXMgZG9jdW1lbnRhdGlvbiB0eXBlIGlmIHRoZSBjdXJyZW50IHZlcnNpb24gaXMgOC4yIG9yIG9sZGVyXHJcbiAgICBhdmFpbGFibGVEb2NUeXBlcyA9IGF2YWlsYWJsZURvY1R5cGVzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIHJldHVybiAoY3VycmVudERvY1ZlcnNpb24gIT09IFwiOFwiICYmIGN1cnJlbnREb2NWZXJzaW9uICE9PSBcIjgxXCIgJiYgY3VycmVudERvY1ZlcnNpb24gIT09IFwiODJcIikgfHwgKGl0ZW0gIT09IFwiQVBJIEV4YW1wbGVzXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIGRvY1R5cGVMaW5rcyA9IFwiXCI7XHJcbiAgICBhdmFpbGFibGVEb2NUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgZG9jVHlwZUxpbmtzICs9IGJ1aWxkRG9jTGluayhjdXJyZW50RG9jVmVyc2lvbiwgaXRlbSwgdHJ1ZSwgaXRlbSA9PSBjdXJyZW50RG9jVHlwZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuanMtbWVudURkbEJ0bi1kb2NUeXBlJykuaHRtbChjdXJyZW50RG9jVHlwZSk7XHJcbiAgICAkKCcuanMtbWVudURkbC1kb2NUeXBlJykuaHRtbChkb2NUeXBlTGlua3MpO1xyXG59O1xyXG5cclxuXHJcbi8vIEFkZHMgdGhlIG9wdGlvbnMgdG8gdGhlIGRvY3VtZW50YXRpb24gdHlwZSBhbmQgdmVyc2lvbiBkcm9wLWRvd24gbGlzdHNcclxudmFyIGxvYWRIZWFkZXJMaXN0cyA9IGZ1bmN0aW9uIGxvYWRIZWFkZXJMaXN0cygpIHtcclxuICAgIHZhciBjdXJyZW50RG9jVmVyc2lvbiA9IGdldERvY1ZlcnNpb24oQ09ORklHLkNPTkZMVUVOQ0VfU1BBQ0VfS0VZKTtcclxuICAgIHZhciBjdXJyZW50RG9jVHlwZSA9IGdldERvY1R5cGUoQ09ORklHLkNPTkZMVUVOQ0VfU1BBQ0VfS0VZKTtcclxuXHJcbiAgICBsb2FkRG9jVHlwZUhlYWRlckxpc3QoY3VycmVudERvY1ZlcnNpb24sIGN1cnJlbnREb2NUeXBlKTtcclxuICAgIGxvYWREb2NWZXJzaW9uSGVhZGVyTGlzdChjdXJyZW50RG9jVHlwZSwgY3VycmVudERvY1ZlcnNpb24pO1xyXG59O1xyXG5cclxuXHJcbi8vIENsb3NlcyB0aGUgZG9jdW1lbnRhdGlvbiB0eXBlIGFuZCB2ZXJzaW9uIGRyb3AtZG93biBsaXN0cyBpZiB0aGUgY2xpZW50IGNsaWNrcyBlbHNld2hlcmVcclxudmFyIGNsb3NlSGVhZGVyRHJvcERvd25zID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICB2YXIgYnV0dG9uRG9jVHlwZSA9ICQoXCIuanMtbWVudURkbEJ0bi1kb2NUeXBlXCIpO1xyXG4gICAgdmFyIGJ1dHRvblZlcnNpb24gPSAkKFwiLmpzLW1lbnVEZGxCdG4tdmVyc2lvblwiKTtcclxuICAgIHZhciBvbGRlclZlcnNpb25zQnV0dG9uID0gJChcIi5qcy11bnN1cHBvcnRlZC12ZXJzaW9ucy1idXR0b25cIik7XHJcbiAgICB2YXIgb2xkZXJWZXJzaW9uc0xpc3QgPSAkKFwiLmpzLXVuc3VwcG9ydGVkLXZlcnNpb25zLWxpc3RcIik7XHJcbiAgICB2YXIgZGV2TW9kZWxCdXR0b24gPSAkKFwiLmpzLW1lbnVEZGxCdG4tZGV2TW9kZWxcIik7XHJcbiAgICB2YXIgZGV2TW9kZWxMaXN0ID0gJChcIi5qcy1tZW51RGRsLWRldk1vZGVsXCIpO1xyXG5cclxuICAgIGlmIChvbGRlclZlcnNpb25zQnV0dG9uLmlzKGV2ZW50LnRhcmdldCkpXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghYnV0dG9uRG9jVHlwZS5pcyhldmVudC50YXJnZXQpICYmIChidXR0b25Eb2NUeXBlLmhhcyhldmVudC50YXJnZXQpLmxlbmd0aCA9PT0gMCkpIHtcclxuICAgICAgICAkKFwiLmpzLW1lbnVEZGwtZG9jVHlwZVwiKS5yZW1vdmVDbGFzcyhcInNob3dcIik7XHJcbiAgICAgICAgYnV0dG9uRG9jVHlwZS5yZW1vdmVDbGFzcyhcIm9wZW5lZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWJ1dHRvblZlcnNpb24uaXMoZXZlbnQudGFyZ2V0KSAmJiAoYnV0dG9uVmVyc2lvbi5oYXMoZXZlbnQudGFyZ2V0KS5sZW5ndGggPT09IDApKSB7XHJcbiAgICAgICAgJChcIi5qcy1tZW51RGRsLXZlcnNpb25cIikucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xyXG4gICAgICAgIGJ1dHRvblZlcnNpb24ucmVtb3ZlQ2xhc3MoXCJvcGVuZWRcIik7XHJcbiAgICAgICAgb2xkZXJWZXJzaW9uc0xpc3QucmVtb3ZlQ2xhc3MoXCJvcGVuZWRcIik7XHJcbiAgICAgICAgb2xkZXJWZXJzaW9uc0xpc3QucmVtb3ZlQ2xhc3MoXCJzaG93XCIpOyAgICBcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWRldk1vZGVsQnV0dG9uLmlzKGV2ZW50LnRhcmdldCkgJiYgKGRldk1vZGVsTGlzdC5oYXMoZXZlbnQudGFyZ2V0KS5sZW5ndGggPT09IDApKSB7XHJcbiAgICAgICAgZGV2TW9kZWxMaXN0LnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICBkZXZNb2RlbEJ1dHRvbi5yZW1vdmVDbGFzcyhcIm9wZW5lZFwiKTtcclxuICAgIH1cclxufTtcclxuXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShsb2FkSGVhZGVyTGlzdHMpO1xyXG4kKGRvY3VtZW50KS5jbGljayhjbG9zZUhlYWRlckRyb3BEb3ducyk7XHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09IEhFQURFUiBEZXZNb2RlbCBTd2l0Y2hlciA9PT09PT09PT09PT09PT09PT09PT09PT1cclxudmFyIGlzRGV2TW9kZWxTd2l0Y2hlclN1cHBvcnRlZCA9IGZ1bmN0aW9uIGlzRGV2TW9kZWxTd2l0Y2hlclN1cHBvcnRlZCgpIHtcclxuICAgIHZhciBjdXJyZW50U3BhY2VLZXkgPSBDT05GSUcuQ09ORkxVRU5DRV9TUEFDRV9LRVk7XHJcblxyXG4gICAgLy8gT25seSBzdXBwb3J0ZWQgYnkgd2hpdGVsaXN0ZWQgZG9jdW1lbnRhdGlvbiB2ZXJzaW9ucyAtIENPTkZJRy5DT05GTFVFTkNFX0RFVk1PREVMX1ZFUlNJT05TV0lUQ0hFUl9XSElURUxJU1RcclxuICAgIGlmICghY3VycmVudFNwYWNlS2V5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJhcGlcIikgJiYgQ09ORklHLkNPTkZMVUVOQ0VfREVWTU9ERUxfVkVSU0lPTlNXSVRDSEVSX1dISVRFTElTVC5pbmRleE9mKGdldERvY1ZlcnNpb24oY3VycmVudFNwYWNlS2V5KSkgPj0gMCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxufTtcclxuXHJcblxyXG52YXIgZ2V0UGFnZUxhYmVscyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBsYWJlbHMgPSAkKCdbbmFtZT1cImNvbmZsdWVuY2UtcGFnZS1sYWJlbHNcIl0nKS5hdHRyKCdjb250ZW50Jyk7XHJcbiAgICBsYWJlbHMgPSBsYWJlbHMuc2xpY2UoMSwgLTEpO1xyXG4gICAgbGFiZWxzID0gbGFiZWxzLnNwbGl0KFwiLCBcIik7XHJcblxyXG4gICAgcmV0dXJuIGxhYmVscztcclxufTtcclxuXHJcblxyXG52YXIgc2V0RGV2TW9kZWxXZWJTdG9yYWdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKGlzRGV2TW9kZWxTd2l0Y2hlclN1cHBvcnRlZCgpICYmIHR5cGVvZiAoU3RvcmFnZSkgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICB2YXIgY3VycmVudExhYmVscyA9IGdldFBhZ2VMYWJlbHMoKTtcclxuXHJcbiAgICAgICAgLy8gU2V0cyBNVkMgbW9kZSBmb3IgcGFnZXMgY29udGFpbmluZyB0aGUgJ212YycgbGFiZWxcclxuICAgICAgICBpZiAoY3VycmVudExhYmVscy5pbmRleE9mKFwibXZjXCIpID49IDApIHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmtlbnRpY29Eb2N1bWVudGF0aW9uTW9kZSA9IFwibXZjXCI7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2V0cyBQRSBtb2RlIGZvciBwYWdlcyBjb250YWluaW5nIHRoZSAncGUnIGxhYmVsXHJcbiAgICAgICAgaWYgKGN1cnJlbnRMYWJlbHMuaW5kZXhPZihcInBlXCIpID49IDApIHtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmtlbnRpY29Eb2N1bWVudGF0aW9uTW9kZSA9IFwicGVcIjtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2tzIGZvciB0aGUgJ2Rldk1vZGVsJyBxdWVyeSBzdHJpbmcgcGFyYW1ldGVyLCB3aGljaCBjYW4gZm9yY2UgdGhlIGRldiBtb2RlbCBmb3IgaHlicmlkIHBhZ2VzXHJcbiAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nUGFyYW1zID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcclxuICAgICAgICBpZiAocXVlcnlTdHJpbmdQYXJhbXMuaW5kZXhPZihcImRldk1vZGVsPW12Y1wiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5rZW50aWNvRG9jdW1lbnRhdGlvbk1vZGUgPSBcIm12Y1wiO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChxdWVyeVN0cmluZ1BhcmFtcy5pbmRleE9mKFwiZGV2TW9kZWw9cGVcIikgPj0gMCkge1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uua2VudGljb0RvY3VtZW50YXRpb25Nb2RlID0gXCJwZVwiO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEZWZhdWx0cyB0byBNVkMgaWYgbm8gd2ViIHN0b3JhZ2UgdmFsdWUgaXMgc2V0XHJcbiAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2Uua2VudGljb0RvY3VtZW50YXRpb25Nb2RlIHx8IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwia2VudGljb0RvY3VtZW50YXRpb25Nb2RlXCIpID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5rZW50aWNvRG9jdW1lbnRhdGlvbk1vZGUgPSBcIm12Y1wiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIERvZXMgbm90aGluZyBpZiB3ZWIgc3RvcmFnZSBpcyBkaXNhYmxlZCwgZW5kcG9pbnRzIGF1dG9tYXRpY2FsbHkgZGVmYXVsdCB0byBNVkNcclxufTtcclxuXHJcblxyXG52YXIgZ2V0Q3VycmVudERldk1vZGVsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGN1cnJlbnRsYWJlbHMgPSBnZXRQYWdlTGFiZWxzKCk7XHJcblxyXG4gICAgaWYgKGN1cnJlbnRsYWJlbHMuaW5kZXhPZihcIm12Y1wiKSA+PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIFwibXZjXCI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGN1cnJlbnRsYWJlbHMuaW5kZXhPZihcInBlXCIpID49IDApIHtcclxuICAgICAgICByZXR1cm4gXCJwZVwiO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENoZWNrcyBmb3IgdGhlICdkZXZNb2RlbCcgcXVlcnkgc3RyaW5nIHBhcmFtZXRlciwgd2hpY2ggY2FuIGZvcmNlIHRoZSBkZXYgbW9kZWwgZm9yIGh5YnJpZCBwYWdlc1xyXG4gICAgdmFyIHF1ZXJ5U3RyaW5nUGFyYW1zID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcclxuXHJcbiAgICBpZiAocXVlcnlTdHJpbmdQYXJhbXMuaW5kZXhPZihcImRldk1vZGVsPW12Y1wiKSA+PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiYWxsfG12Y1wiO1xyXG4gICAgfVxyXG4gICAgaWYgKHF1ZXJ5U3RyaW5nUGFyYW1zLmluZGV4T2YoXCJkZXZNb2RlbD1wZVwiKSA+PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiYWxsfHBlXCI7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2tzIHRoZSBwZXJzaXN0aW5nIGxvY2FsIHN0b3JhZ2UgZm9yIGh5YnJpZCBwYWdlcyAoTVZDICsgUEUpXHJcbiAgICBpZiAodHlwZW9mIChTdG9yYWdlKSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBsb2NhbFN0b3JhZ2Uua2VudGljb0RvY3VtZW50YXRpb25Nb2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiYWxsfFwiICsgbG9jYWxTdG9yYWdlLmtlbnRpY29Eb2N1bWVudGF0aW9uTW9kZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBEZWZhdWx0cyB0byBNVkMgaWYgbG9jYWwgc3RvcmFnZSBpcyBlbXB0eSBvciBkaXNhYmxlZFxyXG4gICAgcmV0dXJuIFwiYWxsfG12Y1wiO1xyXG59O1xyXG5cclxuXHJcbi8vIFRyYW5zbGF0ZXMgdGhlIHRyaW1tZWQgc3BhY2Uga2V5IHZlcnNpb24gdG8gdGhlIElEIHVzZWQgYnkgdGhlIGRvY3VtZW50YXRpb24gaGVscCBzZXJ2aWNlXHJcbnZhciB0cmFuc2xhdGVUb0hlbHBTZXJ2aWNlVmVyc2lvbiA9IGZ1bmN0aW9uICh2ZXJzaW9uKSB7XHJcbiAgICByZXR1cm4gRE9DVU1FTlRBVElPTl9WRVJTSU9OUy5maW5kKChpdGVtKSA9PiBpdGVtLnZlcnNpb25JZCA9PSB2ZXJzaW9uKS5oZWxwU2VydmljZVZlcnNpb247XHJcbn07XHJcblxyXG5cclxuLy8gU3dpdGNoZXMgdGhlIGRldiBtb2RlbCBpbiB0aGUgd2ViIHN0b3JhZ2VcclxuLy8gRG9lcyBOT1QgcmVkaXJlY3QgKHRoaXMgaXMgYSBoZWxwZXIgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGJlZm9yZSBhIHJlZGlyZWN0L3JlZnJlc2gvbGluaylcclxudmFyIHN3aXRjaERldk1vZGVsU3RvcmFnZSA9IGZ1bmN0aW9uICh0YXJnZXRNb2RlbCkge1xyXG4gICAgaWYgKHR5cGVvZiAoU3RvcmFnZSkgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uua2VudGljb0RvY3VtZW50YXRpb25Nb2RlID0gdGFyZ2V0TW9kZWw7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBEaXNwbGF5cy9oaWRlcyB0aGUgZG9jdW1lbnRhdGlvbiB0eXBlIHNlbGVjdG9yIGRyb3AtZG93biBsaXN0XHJcbnZhciBvcGVuQ2xvc2VEZXZNb2RlbERkbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIuanMtbWVudURkbC1kZXZNb2RlbFwiKS50b2dnbGVDbGFzcyhcInNob3dcIik7XHJcbiAgICAkKFwiLmpzLW1lbnVEZGxCdG4tZGV2TW9kZWxcIikudG9nZ2xlQ2xhc3MoXCJvcGVuZWRcIik7XHJcbn07XHJcblxyXG52YXIgZGV2TW9kZWxNYXAgPSB7XHJcbiAgICBtdmM6ICdNVkMnLFxyXG4gICAgcGU6ICdQb3J0YWwgRW5naW5lJyxcclxufTtcclxuXHJcblxyXG52YXIgaW5pdEFsdERldk1vZGVsTGluayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIEVuZHMgdGhlIGZ1bmN0aW9uIGZvciBDb25mbHVlbmNlIHNwYWNlcyB0aGF0IGRvIG5vdCBzdXBwb3J0IHRoZSBkZXYgbW9kZWwgc3dpdGNoZXJcclxuICAgIGlmICghaXNEZXZNb2RlbFN3aXRjaGVyU3VwcG9ydGVkKCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGN1cnJlbnRNb2RlbCA9IGdldEN1cnJlbnREZXZNb2RlbCgpO1xyXG5cclxuICAgIC8vIENoZWNrcyB3aGV0aGVyIHRoZSBwYWdlIGlzIGF2YWlsYWJsZSBmb3IgYWxsIGRldiBtb2RlbHMgYW5kIGFkanVzdHMgdGhlIGN1cnJlbnRNb2RlbCB2YWx1ZSBpZiB0aGF0IGlzIHRoZSBjYXNlXHJcbiAgICB2YXIgYWxsRGV2TW9kZWxQYWdlID0gZmFsc2U7XHJcbiAgICBpZiAoY3VycmVudE1vZGVsLmluZGV4T2YoXCJhbGx8XCIpID09PSAwKSB7XHJcbiAgICAgICAgYWxsRGV2TW9kZWxQYWdlID0gdHJ1ZTtcclxuICAgICAgICBjdXJyZW50TW9kZWwgPSBjdXJyZW50TW9kZWwuc3BsaXQoXCJ8XCIpWzFdO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBhbHREZXZNb2RlbCA9IChjdXJyZW50TW9kZWwgPT0gXCJtdmNcIikgPyBcInBlXCIgOiBcIm12Y1wiO1xyXG5cclxuICAgIC8vIEdldHMgdGhlIGFjdGl2ZSBkZXYgbW9kZWwgZWxlbWVudCBhbmQgYWRkcyB0aGUgJ2FjdGl2ZScgQ1NTIGNsYXNzXHJcbiAgICAkKFwiLmpzLVwiICsgY3VycmVudE1vZGVsICsgXCItbW9kZWwtbGlua1wiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxuXHJcbiAgICAvLyBHZXRzIHRoZSBub24tYWN0aXZlIGRldiBtb2RlbCBlbGVtZW50XHJcbiAgICB2YXIgYWx0RGV2TW9kZWxFbGVtZW50ID0gJChcIi5qcy1cIiArIGFsdERldk1vZGVsICsgXCItbW9kZWwtbGlua1wiKTtcclxuXHJcbiAgICAvLyBFbmRzIHRoZSBmdW5jdGlvbiBpZiB0aGUgZWxlbWVudCBpcyBub3QgcHJlc2VudCBvbiB0aGUgcGFnZSBeXlxyXG4gICAgaWYgKCFhbHREZXZNb2RlbEVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgJCgnLmpzLW1lbnVEZGxCdG4tZGV2TW9kZWwnKS5odG1sKGRldk1vZGVsTWFwW2N1cnJlbnRNb2RlbF0pO1xyXG5cclxuICAgIC8vIEZvciBcImFsbCBkZXYgbW9kZWxcIiBwYWdlcywgYWRqdXN0cyB0aGUgYWx0ZXJuYXRpdmUgbGluayB0byByZWZyZXNoIHRoZSBzYW1lIHBhZ2UgYW5kIHN3aXRjaGVzIHRoZSBkZXYgbW9kZWxcclxuICAgIGlmIChhbGxEZXZNb2RlbFBhZ2UpIHtcclxuICAgICAgICBhbHREZXZNb2RlbEVsZW1lbnQub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaERldk1vZGVsU3RvcmFnZShhbHREZXZNb2RlbCk7XHJcbiAgICAgICAgICAgIC8vIFNwZWNpYWwgcGFnZSByZWxvYWQgaWYgc3dpdGNoaW5nIG9uIHRoZSBzZWFyY2ggcmVzdWx0cyBwYWdlXHJcbiAgICAgICAgICAgIHZhciBwYXRoTmFtZUFycmF5ID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KFwiL1wiKTtcclxuICAgICAgICAgICAgaWYgKHBhdGhOYW1lQXJyYXlbcGF0aE5hbWVBcnJheS5sZW5ndGggLSAxXSA9PSBcInNlYXJjaFwiKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZW9wZW5zIHRoZSBzZWFyY2ggcmVzdWx0cyBwYWdlIHdpdGggdGhlIHN3aXRjaGVkIGRldiBtb2RlbFxyXG4gICAgICAgICAgICAgICAga2VudGljb1RoZW1lT3BlblNlYXJjaFJlc3VsdHNQYWdlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmVzIHRoZSBmcmFnbWVudCBmcm9tIHRoZSBwYWdlIFVSTCAoaXQgY2FuIG90aGVyd2lzZSBwcmV2ZW50IGEgZnVsbCBwYWdlIHJlbG9hZCBpZiBwcmVzZW50KVxyXG4gICAgICAgICAgICAgICAgdmFyIGRldk1vZGVsUmVsb2FkVXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSh3aW5kb3cubG9jYXRpb24uaGFzaCwgXCJcIik7XHJcbiAgICAgICAgICAgICAgICBkZXZNb2RlbFJlbG9hZFVybCA9IGRldk1vZGVsUmVsb2FkVXJsLnJlcGxhY2UoXCIjXCIsIFwiXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZXMgdGhlID9kZXZNb2RlbCBxdWVyeSBzdHJpbmcgcGFyYW1ldGVyIHdoaWNoIHdvdWxkIGludGVyZmVyZSB3aXRoIHRoZSBzd2l0Y2ggb24gYWxsX21vZGVsIHBhZ2VzXHJcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBUaGUgY3VycmVudCBiYXNpYyBpbXBsZW1lbnRhdGlvbiBhbHNvIHJlbW92ZXMgYWxsIHBhcmFtZXRlcnMgYWZ0ZXIgJ2Rldk1vZGVsJ1xyXG4gICAgICAgICAgICAgICAgZGV2TW9kZWxSZWxvYWRVcmwgPSBkZXZNb2RlbFJlbG9hZFVybC5zcGxpdChcIj9kZXZNb2RlbFwiKVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZWxvYWRzIHRoZSBwYWdlXHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGRldk1vZGVsUmVsb2FkVXJsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGN1cnJlbnRNb2RlbEVsZW1lbnQub24oXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgb3BlbkNsb3NlRGV2TW9kZWxEZGwoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvciBwYWdlcyBhdmFpbGFibGUgaW4gYSBzcGVjaWZpYyBkZXYgbW9kZWwsIGF0dGVtcHRzIHRvIGdldCB0aGUgaWRlbnRpZmllciBvZiB0aGUgYWx0ZXJuYXRpdmUgcGFnZVxyXG4gICAgdmFyIGFsdFBhZ2VJZGVudGlmaWVyID0gJChcIiNkZXYtbW9kZWwtYWx0XCIpLmF0dHIoXCJkYXRhLWRldm1vZGVsLWFsdFwiKTtcclxuXHJcbiAgICAvLyBCcmFuY2hlcyBiZWhhdmlvciBkZXBlbmRpbmcgb24gdGhlIGV4aXN0ZW5jZSBvZiBhIHBhZ2UgaW4gdGhlIGFsdGVybmF0aXZlIGRldiBtb2RlbFxyXG4gICAgaWYgKGFsdFBhZ2VJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIGN1cnJlbnREb2NWZXJzaW9uID0gZ2V0RG9jVmVyc2lvbihDT05GSUcuQ09ORkxVRU5DRV9TUEFDRV9LRVkpO1xyXG4gICAgICAgIHZhciBoZWxwU2VydmljZVZlcnNpb24gPSB0cmFuc2xhdGVUb0hlbHBTZXJ2aWNlVmVyc2lvbihjdXJyZW50RG9jVmVyc2lvbik7XHJcblxyXG4gICAgICAgIHZhciBhbHRQYWdlVXJsID0gQ09ORklHLkhFTFBTRVJWSUNFX0xJTktNQVBQRVJfRU5EUE9JTlQgKyBoZWxwU2VydmljZVZlcnNpb24gKyBcIiZsaW5rPVwiICsgYWx0UGFnZUlkZW50aWZpZXI7XHJcblxyXG4gICAgICAgIC8vIEFkZHMgXCJsaW5rXCIgZnVuY3Rpb25hbGl0eSB3aGVuIHRoZSBhbHRlcm5hdGl2ZSBkZXYgbW9kZWwgZWxlbWVudCBpcyBjbGlja2VkXHJcbiAgICAgICAgYWx0RGV2TW9kZWxFbGVtZW50Lm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBTd2l0Y2hlcyB0aGUgZGV2IG1vZGVsIChmb3IgY2FzZXMgd2hlcmUgdGhlIGFsdGVybmF0aXZlIHRhcmdldCBpcyBhbiBcImFsbCBkZXYgbW9kZWxcIiBwYWdlKVxyXG4gICAgICAgICAgICBzd2l0Y2hEZXZNb2RlbFN0b3JhZ2UoYWx0RGV2TW9kZWwpO1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGFsdFBhZ2VVcmw7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIFZpc3VhbGx5IGRpc2FibGVzIHRoZSBkZXYgbW9kZWwgc3dpdGNoZXJcclxuICAgICAgICAkKFwiLmpzLW1lbnVEZGxCdG4tZGV2TW9kZWxcIikucHJvcChcImRpc2FibGVkXCIsIHRydWUpLnByb3AoXCJ0aXRsZVwiLCBcIlwiKTtcclxuXHJcbiAgICAgICAgLy8gRGlzcGxheXMgYSBtZXNzYWdlIGluZm9ybWluZyB0aGF0IHRoZSBwYWdlIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhlIG90aGVyIGRldiBtb2RlbFxyXG4gICAgICAgIHZhciBjdXJyZW50TW9kZWxUZXh0ID0gKGN1cnJlbnRNb2RlbCA9PSBcIm12Y1wiKSA/IFwiTVZDXCIgOiBcIlBvcnRhbCBFbmdpbmVcIjtcclxuICAgICAgICB2YXIgYWx0TW9kZWxUZXh0ID0gKGFsdERldk1vZGVsID09IFwibXZjXCIpID8gXCJNVkNcIiA6IFwiUG9ydGFsIEVuZ2luZVwiO1xyXG4gICAgICAgIHZhciBhbHRNb2RlbEhvbWVVcmwgPSAkKCcjYWpzLWNvbnRleHQtcGF0aCcpLmF0dHIoJ2NvbnRlbnQnKSArIFwiL1wiICsgQ09ORklHLkNPTkZMVUVOQ0VfU1BBQ0VfS0VZLnRvTG93ZXJDYXNlKCkgKyBcIj9kZXZNb2RlbD1cIiArIGFsdERldk1vZGVsO1xyXG4gICAgICAgIHZhciBhbHRNb2RlbEhvbWVMaW5rID0gJzxhIGlkPVwiYWx0LW1vZGVsLWhvbWUtbGlua1wiIGhyZWY9XCInICsgYWx0TW9kZWxIb21lVXJsICsgJ1wiJyArICc+JyArIGFsdE1vZGVsVGV4dCArICcgSG9tZSBwYWdlPC9hPic7XHJcbiAgICAgICAgJChcIi5qcy1kZXYtbW9kZWwtdW5hdmFpbGFibGUtdGV4dFwiKS5odG1sKFwiPHA+VGhpcyBwYWdlIGlzIG9ubHkgYXZhaWxhYmxlIGZvciB0aGUgXCIgKyBjdXJyZW50TW9kZWxUZXh0ICsgXCIgZGV2ZWxvcG1lbnQgbW9kZWwuPGJyIC8+WW91IGNhbiBzd2l0Y2ggdG8gdGhlIFwiICsgYWx0TW9kZWxIb21lTGluayArIFwiLjwvcD5cIik7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuJChkb2N1bWVudCkucmVhZHkoc2V0RGV2TW9kZWxXZWJTdG9yYWdlKTtcclxuJChkb2N1bWVudCkucmVhZHkoaW5pdEFsdERldk1vZGVsTGluayk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT0gWDEzIENvcmUvTVZDIGRldiBmcmFtZXdvcmsgc3dpdGNoZXIgPT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG52YXIgc2V0RGV2RnJhbWV3b3JrQnV0dG9ucyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIuanMtZGV2LW1vZGVsLXN3aXRjaC1jb3JlXCIpLmNsaWNrKGZ1bmN0aW9uKCl7IGNvcmVGcmFtZXdvcmtPbkNsaWNrKCk7IH0pO1xyXG4gICAgJChcIi5qcy1kZXYtbW9kZWwtc3dpdGNoLW12Y1wiKS5jbGljayhmdW5jdGlvbigpeyBtdmNGcmFtZXdvcmtPbkNsaWNrKCk7IH0pO1xyXG4gICAgJChcIi5qcy1kZXYtbW9kZWwtc3dpdGNoLWluZGljYXRvclwiKS5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5rZW50aWNvRG9jdW1lbnRhdGlvbkZyYW1ld29yayA9PT0gXCJjb3JlXCIpIHtcclxuICAgICAgICAgICAgbXZjRnJhbWV3b3JrT25DbGljaygpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29yZUZyYW1ld29ya09uQ2xpY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgICQoXCIuanMtZGV2LW1vZGVsLXN3aXRjaC1tdmMsIC5qcy1kZXYtbW9kZWwtc3dpdGNoLWNvcmUgXCIpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHsgXHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgIC8vIHVzZXIgaGFzIHByZXNzZWQgc3BhY2VcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAzMil7XHJcbiAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2Uua2VudGljb0RvY3VtZW50YXRpb25GcmFtZXdvcmsgPT09IFwiY29yZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBtdmNGcmFtZXdvcmtPbkNsaWNrKClcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvcmVGcmFtZXdvcmtPbkNsaWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxudmFyIHNldERldkZyYW1ld29ya0NoZWNrYm94ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5rZW50aWNvRG9jdW1lbnRhdGlvbkZyYW1ld29yayA9PT0gXCJtdmNcIikge1xyXG4gICAgICAgICQoXCIuanMtZGV2LW1vZGVsLXN3aXRjaC1tdmNcIikuYXR0cihcImNoZWNrZWRcIiwgdHJ1ZSk7XHJcbiAgICAgICAgJChcIi5qcy1kZXYtbW9kZWwtc3dpdGNoXCIpLmFkZENsYXNzKFwiaXMtZGV2LW1vZGVsLW12Y1wiKS5yZW1vdmVDbGFzcyhcImlzLWRldi1tb2RlbC1jb3JlXCIpXHJcbiAgICB9IGVsc2UgaWYgKGxvY2FsU3RvcmFnZS5rZW50aWNvRG9jdW1lbnRhdGlvbkZyYW1ld29yayA9PT0gXCJjb3JlXCIpIHtcclxuICAgICAgICAkKFwiLmpzLWRldi1tb2RlbC1zd2l0Y2gtY29yZVwiKS5hdHRyKFwiY2hlY2tlZFwiLCB0cnVlKTtcclxuICAgICAgICAkKFwiLmpzLWRldi1tb2RlbC1zd2l0Y2hcIikuYWRkQ2xhc3MoXCJpcy1kZXYtbW9kZWwtY29yZVwiKS5yZW1vdmVDbGFzcyhcImlzLWRldi1tb2RlbC1tdmNcIilcclxuICAgIH1cclxufVxyXG5cclxudmFyIHNldENvcnJlY3RGcmFtZXdvcmsgPSBmdW5jdGlvbiAoY2hlY2tVcmxQYXJhbWV0ZXJzID0gZmFsc2UpIHtcclxuICAgIC8vIFNldHMgTVZDIGFzIHRoZSBkZWZhdWx0IGZyYW1ld29yayBpZiBmcmFtZXdvcmsgaXMgbm90IHNldFxyXG4gICAgaWYgKCFsb2NhbFN0b3JhZ2Uua2VudGljb0RvY3VtZW50YXRpb25GcmFtZXdvcmsgfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJrZW50aWNvRG9jdW1lbnRhdGlvbkZyYW1ld29ya1wiKSA9PT0gbnVsbCkge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZS5rZW50aWNvRG9jdW1lbnRhdGlvbkZyYW1ld29yayA9IFwibXZjXCI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIEZvcmNlcyBhIGZyYW1ld29yayBmcm9tIHRoZSBVUkwgcGFyYW1ldGVyIGlmIGF2YWlsYWJsZVxyXG4gICAgaWYoY2hlY2tVcmxQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuICAgICAgICBsZXQgZGV2TW9kZWxQYXJhbWV0ZXIgPSB1cmxQYXJhbXMuZ2V0KFwiZGV2bW9kZWxcIik7XHJcbiAgICAgICAgaWYoZGV2TW9kZWxQYXJhbWV0ZXIgPT09IFwibXZjXCIgfHwgZGV2TW9kZWxQYXJhbWV0ZXIgPT09IFwiY29yZVwiKSB7XHJcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5rZW50aWNvRG9jdW1lbnRhdGlvbkZyYW1ld29yayA9IGRldk1vZGVsUGFyYW1ldGVyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU2V0cyB0aGUgdmlzaWJpbGl0eSBvZiBjb25kaXRpb25hbCBjb250ZW50IGJsb2Nrc1xyXG4gICAgaWYgKGxvY2FsU3RvcmFnZS5rZW50aWNvRG9jdW1lbnRhdGlvbkZyYW1ld29yayA9PT0gXCJtdmNcIikge1xyXG4gICAgICAgICQoXCIuZGV2LW1vZGVsLWNvcmVcIikuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgJChcIi5kZXYtbW9kZWwtbXZjXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcclxuICAgIH1cclxuICAgIGlmIChsb2NhbFN0b3JhZ2Uua2VudGljb0RvY3VtZW50YXRpb25GcmFtZXdvcmsgPT09IFwiY29yZVwiKSB7XHJcbiAgICAgICAgJChcIi5kZXYtbW9kZWwtbXZjXCIpLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAgICQoXCIuZGV2LW1vZGVsLWNvcmVcIikuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBzZXREZXZGcmFtZXdvcmtDaGVja2JveCgpO1xyXG59XHJcblxyXG52YXIgc2V0SG92ZXJUaXRsZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgdGV4dD1cIlN3aXRjaCB0aGUgZGlzcGxheWVkIGRldmVsb3BtZW50IG1vZGVsIGluIHRoZSBzd2l0Y2hlciB1bmRlciB0aGUgcGFnZSBoZWFkaW5nXCI7XHJcbiAgICAkKFwiLmRldi1tb2RlbC1jb3JlIC5jb2RlQ29udGVudFwiKS5hdHRyKFwidGl0bGVcIiwgdGV4dCk7XHJcbiAgICAkKFwiLmRldi1tb2RlbC1tdmMgLmNvZGVDb250ZW50XCIpLmF0dHIoXCJ0aXRsZVwiLCB0ZXh0KTtcclxufVxyXG5cclxudmFyIGNvcmVGcmFtZXdvcmtPbkNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgbG9jYWxTdG9yYWdlLmtlbnRpY29Eb2N1bWVudGF0aW9uRnJhbWV3b3JrID0gXCJjb3JlXCI7XHJcbiAgICBzZXRDb3JyZWN0RnJhbWV3b3JrKCk7XHJcbn1cclxuXHJcbnZhciBtdmNGcmFtZXdvcmtPbkNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgbG9jYWxTdG9yYWdlLmtlbnRpY29Eb2N1bWVudGF0aW9uRnJhbWV3b3JrID0gXCJtdmNcIjtcclxuICAgIHNldENvcnJlY3RGcmFtZXdvcmsoKTtcclxufVxyXG5cclxudmFyIHNob3dEZXZGcmFtZXdvcmtTd2l0Y2hlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICQoXCIuanMtZGV2LW1vZGVsLXN3aXRjaFwiKS5yZW1vdmVDbGFzcyhcImlzLWhpZGRlblwiKTtcclxufVxyXG5cclxudmFyIHNldERldkZyYW1ld29ya1N3aXRjaGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gQ2hlY2tzIHRoYXQgY29uZGl0aW9uYWwgY29udGVudCBpcyBwcmVzZW50IG9uIHRoZSBjdXJyZW50IHBhZ2VcclxuICAgIGlmKCgkKFwiLmRldi1tb2RlbC1jb3JlXCIpLmxlbmd0aCArICQoXCIuZGV2LW1vZGVsLW12Y1wiKS5sZW5ndGgpID4gMCkge1xyXG4gICAgICAgIHNldENvcnJlY3RGcmFtZXdvcmsodHJ1ZSk7XHJcbiAgICAgICAgc2V0RGV2RnJhbWV3b3JrQnV0dG9ucygpO1xyXG4gICAgICAgIHNldERldkZyYW1ld29ya0NoZWNrYm94KCk7XHJcbiAgICAgICAgc2hvd0RldkZyYW1ld29ya1N3aXRjaGVyKCk7XHJcbiAgICAgICAgc2V0SG92ZXJUaXRsZXMoKTtcclxuICAgIH1cclxufVxyXG5cclxuJChkb2N1bWVudCkucmVhZHkoc2V0RGV2RnJhbWV3b3JrU3dpdGNoZXIpO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBTQ1JPTExJTkcgQURKVVNUTUVOVFMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5cclxudmFyIGluaXRTaWRlYmFyID0gZnVuY3Rpb24gaW5pdFNpZGViYXIoKSB7XHJcbiAgICAvLyBTaWRlYmFyIHBhZ2UgbGlua3MgYXJlIHJlbmRlcmVkXHJcbiAgICBpZiAoJCgnLmh0LW5hdi1wYWdlLWxpbmsnKS5maXJzdCgpICE9PSBudWxsKSB7XHJcbiAgICAgICAgLy8gQ3VycmVudCBwYWdlIGxpbmsgZXhpc3RzXHJcbiAgICAgICAgLy8gRG9lcyBub3Qgb2NjdXIgb24gaG9tZXBhZ2VzXHJcbiAgICAgICAgaWYgKCQoJy5odC1uYXYtcGFnZS1saW5rLmN1cnJlbnQnKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdmFyICRzY3JvbGxhYmxlQ29udGVudCA9ICQoXCJkaXYuaHQtc2lkZWJhci1jb250ZW50XCIpO1xyXG4gICAgICAgICAgICB2YXIgaGVhZGVySGVpZ2h0ID0gJCgnI2h0LWhlYWRlcmJhcicpLm91dGVySGVpZ2h0KHRydWUpO1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudEl0ZW1Ub3AgPSAkKCcuaHQtbmF2LXBhZ2UtbGluay5jdXJyZW50JylbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG5cclxuICAgICAgICAgICAgaWYgKCQoJ2Rpdi5odC1zaWRlYmFyLWNvbnRlbnQnKVswXS5zY3JvbGxUb3AgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICRzY3JvbGxhYmxlQ29udGVudC5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IE1hdGgucm91bmQoY3VycmVudEl0ZW1Ub3AgLSBoZWFkZXJIZWlnaHQgLSAkc2Nyb2xsYWJsZUNvbnRlbnQub3V0ZXJIZWlnaHQoKSAvIDIuNSlcclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBPbmNlIHNjcm9sbGVkLCBhZGQgQ1NTIGFuaW1hdGlvbiBjbGFzc1xyXG4gICAgICAgICAgICAkKCcjaHQtc2lkZWJhcicpLmFkZENsYXNzKCdhbmltYXRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShpbml0U2lkZWJhcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5cclxud2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShpbml0U2lkZWJhcik7XHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBDVVNUT00gU0VBUkNIIElNUExFTUVOVEFUSU9OID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8vIFByZXBhcmVzIGEgc2VhcmNoIHJlcXVlc3QgYW5kIHJlZGlyZWN0cyB0byB0aGUgZnVsbCBzZWFyY2ggcmVzdWx0cyBwYWdlXHJcbnZhciBrZW50aWNvVGhlbWVPcGVuU2VhcmNoUmVzdWx0c1BhZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VhcmNoUXVlcnkgPSAkKCcuc2VhcmNoLWlucHV0JykudmFsKCk7XHJcblxyXG4gICAgLy8gRXNjYXBlcyBmb3JiaWRkZW4gY2hhcmFjdGVyc1xyXG4gICAgc2VhcmNoUXVlcnkgPSBlbmNvZGVVUklDb21wb25lbnQoc2VhcmNoUXVlcnkpO1xyXG5cclxuICAgIC8vIFNldHMgdGhlIG1heCBudW1iZXIgb2Ygc2VhcmNoIHJlc3VsdHMgcGVyIHBhZ2UgdG8gMTBcclxuICAgIHNlYXJjaFF1ZXJ5ID0gc2VhcmNoUXVlcnkgKyAnJm1heD0xMCc7XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIGxhYmVsIGZpbHRlcmluZyBiYXNlZCBvbiB0aGUgY3VycmVudCBkZXYgbW9kZWwgaXMgYWxsb3dlZFxyXG4gICAgLy8gVHJ1ZSBieSBkZWZhdWx0LCBmYWxzZSBpZiB0aGUgJ1Nob3cgcmVzdWx0cyBmb3IgYWxsIGRldiBtb2RlbHMnIGNoZWNrYm94IGV4aXN0cyAob24gdGhlIHNlYXJjaCByZXN1bHRzIHBhZ2UpIGFuZCBpcyBzZWxlY3RlZFxyXG4gICAgdmFyIHNob3dBbGxSZXN1bHRzQ2hlY2tib3hFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjaGVjay1zaG93LWFsbC1zZWFyY2gtcmVzdWx0c1wiKTtcclxuICAgIHZhciB1c2VEZXZNb2RlbEZpbHRlcmluZyA9ICEoc2hvd0FsbFJlc3VsdHNDaGVja2JveEVsZW0gJiYgc2hvd0FsbFJlc3VsdHNDaGVja2JveEVsZW0uY2hlY2tlZCk7XHJcblxyXG4gICAgLy8gQ2FsbHMgdGhlIFZpZXdQb3J0IHNlYXJjaCByZXN1bHRzIG5hdmlnYXRpb24gZnVuY3Rpb25cclxuICAgIGlmICh3aW5kb3cuU0NST0xMX1dFQkhFTFAgJiYgd2luZG93LlNDUk9MTF9XRUJIRUxQLnNlYXJjaCkge1xyXG4gICAgICAgIHdpbmRvdy5TQ1JPTExfV0VCSEVMUC5zZWFyY2gubmF2aWdhdGVUb1NlYXJjaFBhZ2Uoc2VhcmNoUXVlcnksIHVzZURldk1vZGVsRmlsdGVyaW5nKTtcclxuXHJcbiAgICAgICAgLy8gQ2xvc2VzIHRoZSBzZWFyY2ggc3VnZ2VzdGlvbnMgZHJvcC1kb3duXHJcbiAgICAgICAgdmFyIHNlYXJjaElucHV0RWxlbWVudGlucHV0ID0gJCgnI2h0LXNlYXJjaCcpO1xyXG4gICAgICAgIHNlYXJjaElucHV0RWxlbWVudGlucHV0LmZpbmQoJy5odC1zZWFyY2gtZHJvcGRvd24nKS5yZW1vdmVDbGFzcygnb3BlbicpO1xyXG4gICAgICAgIC8vIFJlbW92ZXMgdGhlIGhvdmVyIGNsYXNzIGZyb20gaXRlbXMgc2VsZWN0ZWQgaW4gdGhlIHNlYXJjaCBkcm9wLWRvd25cclxuICAgICAgICB2YXIgc2VsZWN0ZWRTZWFyY2hMaW5rRWxlbWVudCA9ICQoXCIuaHQtc2VhcmNoLWRyb3Bkb3duIGEuaG92ZXJcIik7XHJcbiAgICAgICAgc2VsZWN0ZWRTZWFyY2hMaW5rRWxlbWVudC5yZW1vdmVDbGFzcyhcImhvdmVyXCIpO1xyXG4gICAgICAgICQoZG9jdW1lbnQpLnVuYmluZCgna2V5ZG93bicpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gU0VBUkNIIEJPWCBTVUdHRVNUSU9OUyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4vLyBUb2dnbGVzIHRoZSBzZWFyY2ggc3VnZ2VzdGlvbiBkcm9wLWRvd24gbGlzdCBvbiBjbGlja1xyXG52YXIgdG9nZ2xlU2VhcmNoU3VnZ2VzdGlvbnMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIHZhciBzZWFyY2hJbnB1dCA9ICQoXCJpbnB1dC5zZWFyY2gtaW5wdXRcIik7XHJcbiAgICB2YXIgc2VhcmNoRHJvcGRvd24gPSAkKFwiLmh0LXNlYXJjaC1kcm9wZG93blwiKTtcclxuICAgIHZhciBzZWFyY2hCdXR0b24gPSAkKFwiI3NlYXJjaEJ1dHRvblwiKTtcclxuICAgIHZhciBzZWxlY3RlZFNlYXJjaExpbmtFbGVtZW50ID0gJChcIi5odC1zZWFyY2gtZHJvcGRvd24gYS5ob3ZlclwiKTtcclxuXHJcbiAgICAvLyBSZW1vdmVzIHRoZSBcIm9wZW5cIiBjbGFzcyBpZiB0aGUgdXNlciBjbGlja2VkIG91dHNpZGUgdGhlIHNlYXJjaCBkcm9wLWRvd24gb3IgZm9ybSBpbnB1dFxyXG4gICAgaWYgKCghc2VhcmNoSW5wdXQuaXMoZXZlbnQudGFyZ2V0KSAmJiBzZWFyY2hJbnB1dC5oYXMoZXZlbnQudGFyZ2V0KS5sZW5ndGggPT09IDApICYmXHJcbiAgICAgICAgKCFzZWFyY2hEcm9wZG93bi5pcyhldmVudC50YXJnZXQpICYmIHNlYXJjaERyb3Bkb3duLmhhcyhldmVudC50YXJnZXQpLmxlbmd0aCA9PT0gMClcclxuICAgICkge1xyXG4gICAgICAgIHNlYXJjaERyb3Bkb3duLnJlbW92ZUNsYXNzKFwib3BlblwiKTtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlcyB0aGUgaG92ZXIgY2xhc3MgZnJvbSBpdGVtcyBzZWxlY3RlZCBpbiB0aGUgc2VhcmNoIGRyb3AtZG93blxyXG4gICAgICAgIHNlbGVjdGVkU2VhcmNoTGlua0VsZW1lbnQucmVtb3ZlQ2xhc3MoXCJob3ZlclwiKTtcclxuXHJcbiAgICAgICAgLy8gQ29sbGFwc2VzIHRoZSBzbWFsbCBzZWFyY2ggYm94IG9uIHNtYWxsZXIgc2NyZWVuc1xyXG4gICAgICAgIGlmICgoIXNlYXJjaEJ1dHRvbi5pcyhldmVudC50YXJnZXQpICYmIHNlYXJjaEJ1dHRvbi5oYXMoZXZlbnQudGFyZ2V0KS5sZW5ndGggPT09IDApICYmIHdpbmRvdy5pbm5lcldpZHRoIDw9IDgwMCAmJiB3aW5kb3cuaW5uZXJXaWR0aCA+IDQ5OSkge1xyXG4gICAgICAgICAgICBzZWFyY2hJbnB1dC5yZW1vdmVDbGFzcyhcInNob3dcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKCQoXCIuaHQtc2VhcmNoLWRyb3Bkb3duIGxpLnNlYXJjaC1rZXlcIikubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHNlYXJjaERyb3Bkb3duLmFkZENsYXNzKFwib3BlblwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG4kKGRvY3VtZW50KS5jbGljayh0b2dnbGVTZWFyY2hTdWdnZXN0aW9ucyk7XHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBCSUcgU0VBUkNIIEFSRUEgKEhPTUUgKyBTRUFSQ0ggUEFHRVMpID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8vIEluY3JlYXNlcyB0aGUgdG9wIHBhZGRpbmcgb2YgdGhlIG1haW4gcGFnZSBjb250ZW50IGlmIHRoZSBiaWcgc2VhcmNoIGFyZWEgaXMgcHJlc2VudFxyXG52YXIgc2V0Q29udGVudFRvcFBhZGRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VhcmNoYm94RWxlbWVudCA9ICQoXCIuc2VhcmNoYm94LWFyZWEtYmVoaW5kXCIpLmZpcnN0KCk7XHJcbiAgICBpZiAoc2VhcmNoYm94RWxlbWVudC5sZW5ndGgpIHtcclxuICAgICAgICAkKFwiLmh0LWNvbnRlbnRcIikuZmlyc3QoKS5jc3MoXCJwYWRkaW5nLXRvcFwiLCBzZWFyY2hib3hFbGVtZW50Lm91dGVySGVpZ2h0KHRydWUpICsgXCJweFwiKTtcclxuICAgIH1cclxufTtcclxuXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShzZXRDb250ZW50VG9wUGFkZGluZyk7XHJcbiQod2luZG93KS5yZXNpemUoc2V0Q29udGVudFRvcFBhZGRpbmcpO1xyXG5cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gRk9PVEVSID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8vIFNldHMgdGhlIGZvb3RlciB3aWR0aCBhbmQgcG9zaXRpb24gYmFzZWQgb24gdGhlIG1haW4gcGFnZSBjb250ZW50IHNlY3Rpb25cclxudmFyIHNldEZvb3RlcldpZHRoID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciB2aWV3V2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XHJcbiAgICAvLyB2YXIgZm9vdGVyV2lkdGggPSAkKFwiLmh0LWNvbnRlbnRcIikud2lkdGgoKTtcclxuICAgIHZhciBmb290ZXJXaWR0aCA9ICQoXCIjaHQtd3JhcC1jb250YWluZXJcIikud2lkdGgoKTtcclxuICAgIHZhciBsZWZ0UG9zaXRpb24gPSAkKFwiI2h0LXdyYXAtY29udGFpbmVyXCIpLm9mZnNldCgpLmxlZnQ7XHJcbiAgICB2YXIgcmlnaHRQYWRkaW5nID0gdmlld1dpZHRoIC0gZm9vdGVyV2lkdGggLSBsZWZ0UG9zaXRpb247XHJcblxyXG4gICAgJChcIiNodC1mb290ZXJcIikuY3NzKHtcclxuICAgICAgICBcInJpZ2h0XCI6IC1yaWdodFBhZGRpbmcsXHJcbiAgICAgICAgXCJwYWRkaW5nLXJpZ2h0XCI6IHJpZ2h0UGFkZGluZyxcclxuICAgICAgICBcImxlZnRcIjogLWxlZnRQb3NpdGlvbixcclxuICAgICAgICBcInBhZGRpbmctbGVmdFwiOiBsZWZ0UG9zaXRpb25cclxuICAgIH0pO1xyXG59O1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoc2V0Rm9vdGVyV2lkdGgpO1xyXG4kKHdpbmRvdykucmVzaXplKHNldEZvb3RlcldpZHRoKTtcclxuXHJcbi8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE0OTAxMTUwXHJcbi8vIC8vIENoZWNrcyBlbGVtZW50IGhlaWdodCBjaGFuZ2VcclxuZnVuY3Rpb24gb25FbGVtZW50SGVpZ2h0Q2hhbmdlKGVsbSwgY2FsbGJhY2spIHtcclxuICAgIHZhciBsYXN0SGVpZ2h0ID0gZWxtLmNsaWVudEhlaWdodCwgbmV3SGVpZ2h0O1xyXG4gICAgKGZ1bmN0aW9uIHJ1bigpIHtcclxuICAgICAgICBuZXdIZWlnaHQgPSBlbG0uY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgIGlmIChsYXN0SGVpZ2h0ICE9IG5ld0hlaWdodClcclxuICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICBsYXN0SGVpZ2h0ID0gbmV3SGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAoZWxtLm9uRWxlbWVudEhlaWdodENoYW5nZVRpbWVyKVxyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoZWxtLm9uRWxlbWVudEhlaWdodENoYW5nZVRpbWVyKTtcclxuXHJcbiAgICAgICAgZWxtLm9uRWxlbWVudEhlaWdodENoYW5nZVRpbWVyID0gc2V0VGltZW91dChydW4sIDIwMCk7XHJcbiAgICB9KSgpO1xyXG59XHJcblxyXG5vbkVsZW1lbnRIZWlnaHRDaGFuZ2UoZG9jdW1lbnQuYm9keSwgc2V0Rm9vdGVyV2lkdGgpO1xyXG5cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ09ERSBCTE9DS1MgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4vLyBUb2dnbGVzIGNvZGUgYmxvY2sgY29udGVudFxyXG4kKFwic3Bhbi5leHBhbmQtY29udHJvbFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgY29kZUNvbnRlbnQgPSAkKHRoaXMpLnBhcmVudCgpLm5leHQoKTtcclxuICAgIHZhciBleHBhbmRDb250cm9sVGV4dCA9ICQodGhpcykuZmluZChcInNwYW4uZXhwYW5kLWNvbnRyb2wtdGV4dFwiKTtcclxuXHJcbiAgICBpZiAoY29kZUNvbnRlbnQuaGFzQ2xhc3MoXCJjb2xsYXBzZVwiKSkge1xyXG4gICAgICAgIGNvZGVDb250ZW50LnJlbW92ZUNsYXNzKFwiY29sbGFwc2VcIik7XHJcbiAgICAgICAgZXhwYW5kQ29udHJvbFRleHQudGV4dChcIkNvbGxhcHNlIHNvdXJjZVwiKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvZGVDb250ZW50LmFkZENsYXNzKFwiY29sbGFwc2VcIik7XHJcbiAgICAgICAgZXhwYW5kQ29udHJvbFRleHQudGV4dChcIkV4cGFuZCBzb3VyY2VcIik7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuXHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIHRoZSB1c2VyIGlzIHNpZ25lZC1pbiBhbmQgaXNuJ3QgdHlwaW5nIGluIHRoZSBzZWFyY2ggYm94LlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSB0aGUgQ29uZmx1ZW5jZSBJRCBvZiB0aGUgY3VycmVudCBwYWdlIG9yIDBcclxuICovXHJcbnZhciBnZXRQYWdlSWRJZkVkaXRpbmdBbGxvd2VkID0gZnVuY3Rpb24gZ2V0UGFnZUlkSWZFZGl0aW5nQWxsb3dlZCgpIHtcclxuXHJcbiAgICB2YXIgbGVuZ3RoID0gJChcIiNzcC12aWV3cG9ydC1jb250cm9sLW9wZW5lclwiKS5sZW5ndGg7XHJcbiAgICB2YXIgc2VhcmNoYm94Rm9jdXNlZCA9ICQoXCIuc2VhcmNoLWlucHV0XCIpLmlzKFwiOmZvY3VzXCIpO1xyXG5cclxuICAgIGlmIChsZW5ndGggIT0gMCAmJiAhc2VhcmNoYm94Rm9jdXNlZClcclxuICAgIHtcclxuICAgICAgICB2YXIgcGFnZUlkID0gJChcImJvZHlcIikuYXR0cihcInBhZ2VpZFwiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHBhZ2VJZCA/IHBhZ2VJZCA6IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIDA7XHJcbn07XHJcblxyXG5cclxuLyoqXHJcbiAqICBPcGVucyBhIGxpbmsgaW4gdGhlIHNhbWUvbmV3IHRhYiBiYXNlZCBvbiB0aGUgcGFyYW1ldGVyc1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVGhlIFVSTCB0byBvcGVuXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gbmV3VGFiIC0gU3BlY2lmaWVzIHdoZXRoZXIgdG8gb3BlbiB0aGUgVVJMIGluIGEgbmV3IHRhYlxyXG4gKi9cclxuIGZ1bmN0aW9uIG9wZW5MaW5rKHVybCwgbmV3VGFiKSB7XHJcbiAgICBpZiAobmV3VGFiKSB7XHJcbiAgICAgICAgdmFyIHdpbiA9IHdpbmRvdy5vcGVuKHVybCwgXCJfYmxhbmtcIik7XHJcbiAgICAgICAgd2luLmZvY3VzKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHdpbmRvdy5vcGVuKHVybCwgXCJfc2VsZlwiKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT0gRU1QVFkgPHA+ID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbi8vIEhpZGVzIHBhcmFncmFwaHMgY29udGFpbmluZyBvbmx5IHdoaXRlc3BhY2VcclxuJCgncCcpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCQodGhpcykudGV4dCgpLnRyaW0oKSA9PSAnJyAmJiAkKHRoaXMpLmNoaWxkcmVuKCkubGVuZ3RoID09IDApIHtcclxuICAgICAgICAkKHRoaXMpLmhpZGUoKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBTSE9XIFNFQVJDSCBUSVBTID09PT09PT09PT09PT09PT09PT09PT1cclxudmFyIHNob3dIaWRlU2VhcmNoVGlwcyA9IGZ1bmN0aW9uIHNob3dIaWRlU2VhcmNoVGlwcygpIHtcclxuICAgIGlmICgkKFwiI3NlYXJjaC10aXBzXCIpLmhhc0NsYXNzKFwic2hvd1wiKSkge1xyXG4gICAgICAgIGhpZGVGcm9udExheWVyKCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBzaG93RnJvbnRMYXllcigpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcbnZhciBzaG93RnJvbnRMYXllciA9IGZ1bmN0aW9uIHNob3dGcm9udExheWVyKCkge1xyXG4gICAgJChcIiNzZWFyY2gtdGlwc1wiKS5hZGRDbGFzcyhcInNob3dcIik7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXRpcHMtbWFzaycpLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXRpcHMnKS5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG59O1xyXG5cclxuXHJcbnZhciBoaWRlRnJvbnRMYXllciA9IGZ1bmN0aW9uIGhpZGVGcm9udExheWVyKCkge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC10aXBzLW1hc2snKS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLXRpcHMnKS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XHJcbiAgICAkKFwiI3NlYXJjaC10aXBzXCIpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxufTtcclxuXHJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gQ29va2llIEJhbm5lciA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG52YXIgY3JlYXRlQ29va2llID0gZnVuY3Rpb24gY3JlYXRlQ29va2llKG5hbWUsIHZhbHVlLCBkYXlzLCBkb21haW4pIHtcclxuICAgIHZhciBkb21haW4gPSBcIjsgZG9tYWluPVwiICsgZG9tYWluO1xyXG4gICAgdmFyIGV4cGlyZXM7XHJcblxyXG4gICAgaWYgKGRheXMpIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgKGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XHJcbiAgICAgICAgZXhwaXJlcyA9IFwiOyBleHBpcmVzPVwiICsgZGF0ZS50b1VUQ1N0cmluZygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBleHBpcmVzID0gXCJcIjtcclxuICAgIGRvY3VtZW50LmNvb2tpZSA9IG5hbWUgKyBcIj1cIiArIHZhbHVlICsgZXhwaXJlcyArIFwiOyBwYXRoPS9cIiArIGRvbWFpbjtcclxufTtcclxuXHJcblxyXG52YXIgZXJhc2VDb29raWUgPSBmdW5jdGlvbiBlcmFzZUNvb2tpZShuYW1lKSB7XHJcbiAgICBjcmVhdGVDb29raWUobmFtZSwgXCJcIiwgLTEsIFwiXCIpO1xyXG59O1xyXG5cclxuXHJcbi8vIFNldHMgdGhlIHNoYXJlZCBjb29raWUgYW5kIGhpZGVzIHRoZSBjb29raWUgYmFubmVyXHJcbnZhciBjb25zZW50V2l0aENvb2tpZVVzYWdlID0gZnVuY3Rpb24gY29uc2VudFdpdGhDb29raWVVc2FnZSgpIHtcclxuICAgICQoXCIjY29va2llLWJhbm5lclwiKS5hZGRDbGFzcyhcImhpZGRlblwiKTtcclxuICAgIC8vIFVzZSBkb21haW4gXCIueHBlcmllbmNlLmlvXCIgdG8gc2hhcmUgdGhlIGNvb2tpZSB3aXRoIHhwZXJpZW5jZS5pbyBhbmQgYWxsIHN1YmRvbWFpbnNcclxuICAgIGNyZWF0ZUNvb2tpZShcInhwZXJpZW5jZS5jb29raWVsZXZlbHNlbGVjdGlvblwiLCB0cnVlLCAzNjUsIFwiLnhwZXJpZW5jZS5pb1wiKTtcclxufTtcclxuXHJcblxyXG52YXIgaGlkZUNvb2tpZUNvbnNlbnRCYW5uZXIgPSBmdW5jdGlvbiBoaWRlQ29va2llQ29uc2VudEJhbm5lcigpIHtcclxuICAgIHZhciBjb29raWVWYWx1ZSA9IGRvY3VtZW50LmNvb2tpZS5yZXBsYWNlKC8oPzooPzpefC4qO1xccyopeHBlcmllbmNlLmNvb2tpZWxldmVsc2VsZWN0aW9uXFxzKlxcPVxccyooW147XSopLiokKXxeLiokLywgXCIkMVwiKTtcclxuICAgIGlmIChjb29raWVWYWx1ZSB8fCAhbmF2aWdhdG9yLmNvb2tpZUVuYWJsZWQpIHtcclxuICAgICAgICAkKFwiI2Nvb2tpZS1iYW5uZXJcIikuYWRkQ2xhc3MoXCJoaWRkZW5cIik7XHJcbiAgICB9XHJcbn07XHJcblxyXG4vLyBTZXRzIHRoZSBwYXNzZWQgY29va2llIGxldmVsIHRvIHRoZSBzaGFyZWQgY29va2llIGFuZCB1cGRhdGVzIHRoZSBjb25zZW50IHRvIEdBL0dUTSAoY2FsbGVkIGZyb20gdGhlIGNvb2tpZSBiYW5uZXIgYWZ0ZXIgY2xpY2tpbmcgYSBidXR0b24pXHJcbnZhciBzZXRDb29raWVMZXZlbCA9IGZ1bmN0aW9uIHNldENvb2tpZUxldmVsKGxldmVsKSB7XHJcbiAgICB2YXIgbGV2ZWwgPSBsZXZlbDtcclxuXHJcbiAgICBpZiAobGV2ZWwgPT09IFwibWFya2V0aW5nXCIpIHsgLy8gU2hvdWxkbid0IGJlIG5lZWRlZFxyXG4gICAgICAgIGxldmVsID0gNDtcclxuICAgIH0gZWxzZSBpZiAobGV2ZWwgPT09IFwiYW5hbHl0aWNhbFwiKSB7XHJcbiAgICAgICAgbGV2ZWwgPSAzO1xyXG4gICAgfSBlbHNlIGlmIChsZXZlbCA9PT0gXCJwcmVmZXJlbmNlXCIpIHsgLy8gU2hvdWxkbid0IGJlIG5lZWRlZFxyXG4gICAgICAgIGxldmVsID0gMjtcclxuICAgIH0gZWxzZSB7IC8vID09PSBcIm5lY2Vzc2FyeVwiXHJcbiAgICAgICAgbGV2ZWwgPSAxO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNlbnRXaXRoQ29va2llVXNhZ2UoKTtcclxuICAgIC8vIFVzZSBkb21haW4gXCIueHBlcmllbmNlLmlvXCIgdG8gc2hhcmUgdGhlIGNvb2tpZSB3aXRoIHhwZXJpZW5jZS5pbyBhbmQgYWxsIHN1YmRvbWFpbnNcclxuICAgIGNyZWF0ZUNvb2tpZShcInhwZXJpZW5jZS5jb29raWVjb25zZW50bGV2ZWxcIiwgbGV2ZWwsIDM2NSwgXCIueHBlcmllbmNlLmlvXCIpO1xyXG5cclxuICAgIC8vIFNlbmQgJ2NvbnNlbnQudXBkYXRlJ1xyXG4gICAgaWYgKGxldmVsID09PSAxKSB7XHJcbiAgICAgICAgd2luZG93LmRhdGFMYXllciA9IHdpbmRvdy5kYXRhTGF5ZXIgfHwgW107XHJcbiAgICAgICAgd2luZG93LmRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgJ2V2ZW50JzogJ2NvbnNlbnQudXBkYXRlJyxcclxuICAgICAgICAgICAgJ2NvbnNlbnQnOiB7XHJcbiAgICAgICAgICAgICdmdW5jdGlvbmFsaXR5X3N0b3JhZ2UnOiAnZ3JhbnRlZCcsXHJcbiAgICAgICAgICAgICdwZXJzb25hbGl6YXRpb25fc3RvcmFnZSc6ICdkZW5pZWQnLFxyXG4gICAgICAgICAgICAnYW5hbHl0aWNzX3N0b3JhZ2UnOiAnZGVuaWVkJyxcclxuICAgICAgICAgICAgJ2FkX3N0b3JhZ2UnOiAnZGVuaWVkJyxcclxuICAgICAgICAgICAgJ3NlY3VyaXR5X3N0b3JhZ2UnOiAnZGVuaWVkJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYgKGxldmVsID09PSAzKSB7XHJcbiAgICAgICAgd2luZG93LmRhdGFMYXllciA9IHdpbmRvdy5kYXRhTGF5ZXIgfHwgW107XHJcbiAgICAgICAgd2luZG93LmRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgJ2V2ZW50JzogJ2NvbnNlbnQudXBkYXRlJyxcclxuICAgICAgICAgICAgJ2NvbnNlbnQnOiB7XHJcbiAgICAgICAgICAgICdmdW5jdGlvbmFsaXR5X3N0b3JhZ2UnOiAnZ3JhbnRlZCcsXHJcbiAgICAgICAgICAgICdwZXJzb25hbGl6YXRpb25fc3RvcmFnZSc6ICdncmFudGVkJyxcclxuICAgICAgICAgICAgJ2FuYWx5dGljc19zdG9yYWdlJzogJ2dyYW50ZWQnLFxyXG4gICAgICAgICAgICAnYWRfc3RvcmFnZSc6ICdkZW5pZWQnLFxyXG4gICAgICAgICAgICAnc2VjdXJpdHlfc3RvcmFnZSc6ICdkZW5pZWQnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn07XHJcblxyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICBoaWRlQ29va2llQ29uc2VudEJhbm5lcigpO1xyXG59KTtcclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEhlYWRpbmcgYW5jaG9yIGxpbmsgY2xpcGJvYXJkID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuXHJcbnZhciBjb3B5SGVhZGluZ0xpbmsgPSBmdW5jdGlvbiBjb3B5SGVhZGluZ0xpbmsoZSkge1xyXG5cdHZhciBjbGlja2VkSWNvbiA9ICQoZS50YXJnZXQpO1xyXG5cdFxyXG5cdC8vIEJ1aWxkcyB0aGUgaGVhZGluZyBhbmNob3IgbGlua1xyXG5cdHZhciBhbmNob3JMaW5rID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSArICcjJyArIGNsaWNrZWRJY29uLnBhcmVudCgpLmF0dHIoJ2lkJyk7XHJcblx0XHJcblx0aWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0U25hY2tiYXIuc2hvdyh7dGV4dDogJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIGNvcHlpbmcgdGhlIGhlYWRpbmcgbGluayB0byB0aGUgY2xpcGJvYXJkJywgcG9zOiAndG9wLXJpZ2h0Jywgc2hvd0FjdGlvbjogZmFsc2UsIGN1c3RvbUNsYXNzOiAnYm94LWdlbmVyYWwgYm94LXdhcm5pbmcnLCBkdXJhdGlvbjogJzM1MDAnLCBiYWNrZ3JvdW5kQ29sb3I6ICcjRkZFQkVCJywgdGV4dENvbG9yOicjMTUxNTE1JyB9KTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0bmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoYW5jaG9yTGluaylcclxuXHRcdFx0LnRoZW4oKCkgPT4ge1x0XHRcdFx0XHJcblx0XHRcdFx0U25hY2tiYXIuc2hvdyh7dGV4dDogJ0hlYWRpbmcgbGluayBjb3BpZWQnLCBwb3M6ICd0b3AtcmlnaHQnLCBzaG93QWN0aW9uOiBmYWxzZSwgY3VzdG9tQ2xhc3M6ICdib3gtZ2VuZXJhbCBib3gtaW5mbycsIGR1cmF0aW9uOiAnMjUwMCcsIGJhY2tncm91bmRDb2xvcjogJyNFRUYzRkMnLCB0ZXh0Q29sb3I6JyMxNTE1MTUnIH0pO1xyXG4gICAgICAgICAgICAgICAgY2xpY2tlZEljb24uYWRkQ2xhc3MoJ2NvcGllZCcpO1xyXG4gICAgICAgICAgICB9KVxyXG5cdFx0XHQuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgU25hY2tiYXIuc2hvdyh7dGV4dDogJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIGNvcHlpbmcgdGhlIGhlYWRpbmcgbGluayB0byB0aGUgY2xpcGJvYXJkJywgcG9zOiAndG9wLXJpZ2h0Jywgc2hvd0FjdGlvbjogZmFsc2UsIGN1c3RvbUNsYXNzOiAnYm94LWdlbmVyYWwgYm94LXdhcm5pbmcnLCBkdXJhdGlvbjogJzM1MDAnLCBiYWNrZ3JvdW5kQ29sb3I6ICcjRkZFQkVCJywgdGV4dENvbG9yOicjMTUxNTE1JyB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblx0fVxyXG59O1xyXG5cclxuLy8gUmVzZXRzIHRoZSBjb3B5IGljb24gb24gbW91c2VvdXRcclxudmFyIGNvcHlJY29uTW91c2VPdXQgPSBmdW5jdGlvbiBjb3B5SWNvbk1vdXNlT3V0KGUpIHtcclxuXHR2YXIgY2xpY2tlZEljb24gPSAkKGUudGFyZ2V0KTtcclxuXHRpZiAoY2xpY2tlZEljb24uaGFzQ2xhc3MoJ2NvcGllZCcpKSB7XHRcclxuICAgICAgICBjbGlja2VkSWNvbi5yZW1vdmVDbGFzcygnY29waWVkJyk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4oZnVuY3Rpb24oKSB7XHJcblx0dmFyIGNvcHlIZWFkaW5nTGlua0ljb24gPSAnPHNwYW4gdGl0bGU9XCJDb3B5IGxpbmsgdG8gaGVhZGluZ1wiIGNsYXNzPVwiaGVhZGluZy1saW5rLWljb24gaWNvbi1jaGFpblwiIG9uY2xpY2s9XCJjb3B5SGVhZGluZ0xpbmsoZXZlbnQpXCIgb25tb3VzZW91dD1cImNvcHlJY29uTW91c2VPdXQoZXZlbnQpXCI+PC9zcGFuPic7XHJcblx0XHJcblx0Ly8gU2VsZWN0b3IgZm9yIGgyIGFuZCBoMyBoZWFkaW5ncyBpbiBzdGFuZGFyZCBDb25mbHVlbmNlIGNvbnRlbnQgKG5vIHNlY3Rpb24sIGZ1bGwtd2lkdGggc2VjdGlvbiwgYW5kIDIvMyBzZWN0aW9uIGNvbnRlbnQpXHJcblx0dmFyIGhlYWRpbmdFbGVtZW50cyA9ICcjbWFpbi1jb250ZW50IC5zcC1ncmlkLTYwIGgyLCAjbWFpbi1jb250ZW50IC5zcC1ncmlkLTEwMCBoMiwgI21haW4tY29udGVudCAuc3AtZ3JpZC02MCBoMywgI21haW4tY29udGVudCAuc3AtZ3JpZC0xMDAgaDMnO1xyXG5cdFxyXG5cdC8vIEZpbHRlcnMgb3V0IGhlYWRpbmdzIGluIGJveCBtYWNyb3MgYW5kIGhlYWRpbmdzIGNvbnRhaW5pbmcgbGlua3NcclxuXHQvLyBBcHBlbmRzIHRoZSBcIkNvcHkgaGVhZGluZyBsaW5rXCIgaWNvbiB0byB0aGUgaGVhZGluZyBjb250ZW50XHJcblx0JChoZWFkaW5nRWxlbWVudHMpLm5vdCgnZGl2LmJveC1nZW5lcmFsIGgyLCBkaXYuYm94LWdlbmVyYWwgaDMsIGgyOmhhcyhhKSwgaDM6aGFzKGEpJykuYXBwZW5kKGNvcHlIZWFkaW5nTGlua0ljb24pO1xyXG59KSgpOyAiXX0=
