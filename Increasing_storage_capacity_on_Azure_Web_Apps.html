<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Increasing storage capacity on Azure Web Apps - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="Kentico_11_Documentation_Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68881681"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico_11_Documentation_Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Running_Kentico_on_Microsoft_Azure.html">Running Kentico on Microsoft Azure</a></li>
                                                                                     <li><a href="Running_Kentico_in_Azure_Web_Apps.html">Running Kentico in Azure Web Apps</a></li>
                                                            </ul>
</div>            <h1 id="src-68881681"> <span>Increasing storage capacity on Azure Web Apps</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
        $page.content
<p   
>By default on Azure Web Apps, all files are stored in the file system with the application, including the media files. However, the capacity of the storage space is limited &ndash; the Basic plan has 10 GB storage available, see <a  class="external-link" href="https://docs.microsoft.com/en-us/azure/azure-subscription-service-limits#websites-limits">Websites Limits</a> for details. When you exceed the capacity, for example by uploading large media files, you have the following options:</p>
<ul class=" "><li class=" "><p   
>Raise the web hosting plan.</p>
</li><li class=" "><p   
>Configure your system to use Azure Blob Storage and store the media files there.</p>
</li></ul>    <h4 id="src-68881681_IncreasingstoragecapacityonAzureWebApps-ConfiguringAzureWebAppstouseAzureBlobStorage" class="heading "><span>Configuring Azure Web Apps to use Azure Blob Storage</span></h4>
<p   
>If you want to connect your Web App service to the Azure Blob Storage and store files there, you have two possibilities depending on the amount of files you want to store there:</p>
<ul class=" "><li class=" "><p   
><a   href="#src-68881681_IncreasingstoragecapacityonAzureWebApps-StoringonlyspecificmedialibrariesonAzureBlobStorage">Store only specific media libraries on Azure Blob Storage</a> <strong class=" ">(recommended)</strong>.</p>
<ul class=" "><li class=" "><p   
>When you run out of space, map some of your media libraries to the Blob storage without needing to change anything else.</p>
</li></ul></li><li class=" "><p   
><a   href="#src-68881681_IncreasingstoragecapacityonAzureWebApps-StoringallfilesonAzureBlobStorage">Store all files on Azure Blob Storage</a>.<br/></p>
<ul class=" "><li class=" "><p   
>This includes for example media files, locally stored search indexes and web analytics log files. With this approach, you need to enable processing of local search tasks using a scheduled task and remap the web analytics log storage folder.</p>
</li><li class=" "><p   
>Choose this option only if you are sure you need to have your project configured this way. For example if you need to have all media files stored in one place.</p>
</li></ul></li></ul>    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Azure CDN</strong></p>
<p   
><a   href="Configuring_Azure_CDN.html">Azure CDN</a> can only be enabled for files stored in the Azure Blob Storage.</p>
        </div>
    </div>
    <div  class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-68881681_IncreasingstoragecapacityonAzureWebApps-StoringonlyspecificmedialibrariesonAzureBlobStorage">Storing only specific media libraries on Azure Blob Storage</a></p>
</li><li class=" "><p   
><a   href="#src-68881681_IncreasingstoragecapacityonAzureWebApps-StoringallfilesonAzureBlobStorage">Storing all files on Azure Blob Storage</a></p>
</li></ul><p   
></p>
        </div>
    </div>
    <h3 id="src-68881681_IncreasingstoragecapacityonAzureWebApps-StoringonlyspecificmedialibrariesonAzureBlobStorage" class="heading "><span>Storing only specific media libraries on Azure Blob Storage</span></h3>
<ol class=" "><li class=" "><p   
>Proceed according to <a   href="Configuring_Azure_storage.html#src-68882093_ConfiguringAzurestorage-ConfiguringKenticotostoreonlymediafilesonAzurestorage">Configuring Kentico to store only media files on Azure storage</a>.</p>
</li><li class=" "><p   
>Re-deploy your project to the Azure Web Apps.</p>
</li></ol><p   
><strong class=" ">Notes</strong>:</p>
<ul class=" "><li class=" "><p   
>Links to the media files will be different for files in the file system and files located on the Blob Storage.</p>
</li><li class=" "><p   
>Everything else apart from the media library files will be stored on the Web App server file system.</p>
</li></ul>    <h3 id="src-68881681_IncreasingstoragecapacityonAzureWebApps-StoringallfilesonAzureBlobStorage" class="heading "><span>Storing all files on Azure Blob Storage</span></h3>
<ol class=" "><li class=" "><p   
>Open the <a  class="external-link" href="https://portal.azure.com/">Azure management portal</a>, select <strong class=" ">Storage</strong> and create a new Azure Blob Storage.</p>
</li><li class=" "><p   
>Add keys to the web.config file according to <a   href="Configuring_Azure_storage.html#src-68882093_ConfiguringAzurestorage-ConfiguringKenticotomapitsfilesystemtoAzurestorage">Configuring Kentico to map its file system to Azure storage</a>.</p>
</li><li class=" "><p   
>If you use <a   href="Using_locally_stored_search_indexes.html">local search indexes</a>, configure processing of local search tasks using the scheduler:<br/></p>
<ol class=" "><li class=" "><p   
>Add the following key to the <i class=" ">appSettings</i> section of your web.config file:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">key</code><code class="plain">=</code><code class="string">"CMSProcessSearchTasksByScheduler"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"true"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
</li><li class=" "><p   
>Make sure that the <strong class=" ">Execute local search tasks</strong> scheduled task is enabled and set to a reasonable value (for example one hour).</p>
</li></ol></li><li class=" "><p   
>Re-deploy your project to the Azure Web Apps.</p>
</li></ol><p   
>From now on, the system uses the Azure Blob Storage to store new media files, local search indexes and web analytics logs.</p>
<p   
><strong class=" ">Notes</strong>:</p>
<ul class=" "><li class=" "><p   
>Already <strong class=" ">existing media library files</strong> are stored in the file system. No action is needed, however, if you wish, you can move them to the Blob Storage as well. This would require re-saving of the links to the media library files from content (<strong class=" ">Pages</strong> application).</p>
</li><li class=" "><p   
>By default, <strong class=" ">web analytics logs</strong> are also stored on the Blob Storage. The Web analytics module writes and processes logs every minute, which can cause latency problems on the Blob Storage. We strongly recommend that you map the folder which stores Web analytics data to the file system of the Web App server. See <a   href="Mapping_the_Web_analytics_storage_folder_to_the_server_file_system.html">Mapping the Web analytics storage folder to the server file system</a> for instructions.</p>
</li></ul>        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
