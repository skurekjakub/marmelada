<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Providing smart search on MVC sites - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="Kentico_11_Documentation_Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68880528"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico_11_Documentation_Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Developing_websites.html">Developing websites</a></li>
                                                                                                         <li class="shortcut"><a href="Developing_sites_using_ASP.NET_MVC.html">Developing sites using ASP.NET MVC</a></li>
                                                                                     <li><a href="Developing_MVC_applications.html">Developing MVC applications</a></li>
                                                            </ul>
</div>            <h1 id="src-68880528"> <span>Providing smart search on MVC sites</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
        $page.content
<p   
>Add search features onto your MVC site to allow visitors to search through <a   href="Working_with_pages.html">pages</a>, <a   href="Products.html">products</a> or other data. The system provides an index-based search engine (smart search). See the <a   href="Setting_up_search_on_your_website.html">Setting up search on your website</a> chapter to learn more.</p>
<p   
>To set up smart search on your MVC site:</p>
<ol class=" "><li class=" "><p   
><a   href="Configuring_web_farm_servers.html#src-68881978_Configuringwebfarmservers-Configuringwebfarmsautomatically">Configure automatic Web farm mode</a> in Kentico.</p>
</li><li class=" "><p   
><a   href="Enabling_search_indexing.html">Enable smart search indexing</a>.</p>
</li><li class=" "><p   
>Create search indexes &ndash; you can use either <a   href="Using_Azure_Search.html">Azure Search indexes</a> or <a   href="Using_locally_stored_search_indexes.html">locally stored indexes</a>. Assign the indexes to your site and define their exact content.</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>If you want the system to process search indexing tasks at a regular interval, you need to use the Scheduler Windows service , since the standard scheduler does not run reliably when using a separate MVC application. See <a   href="Processing_scheduled_tasks_when_developing_MVC_applications.html#src-68880518_ProcessingscheduledtaskswhendevelopingMVCapplications-Example-RegularlyprocessingsearchindexingtasksonMVCsites">Processing scheduled tasks when developing MVC applications</a> for more information.<br/></p>
        </div>
    </div>
</li></ol><p   
>With the <strong class=" ">Web farm</strong> service enabled and the related web farm servers showing the <i class=" ">Healthy</i> status, search indexes on MVC applications are updated automatically.</p>
<p   
>When your indexes are ready, you need to create a suitable search interface. The implementation depends on the type of search indexes that you use (Azure Search or locally stored). See the sections below for more information.<br/></p>
    <div  class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p   
><a   href="Starting_with_MVC_development.html">Starting with MVC development</a></p>
</li><li class=" "><p   
><a   href="Installing_Kentico_integration_packages.html">Installing Kentico integration packages</a></p>
</li></ul>        </div>
    </div>
    <h3 id="src-68880528_ProvidingsmartsearchonMVCsites-UsingAzureSearch" class="heading "><span>Using Azure Search</span></h3>
<p   
>To build an MVC search interface for <a   href="Using_Azure_Search.html">Azure Search</a> indexes:</p>
<ul class=" "><li class=" "><p   
>Interact with your Azure Search indexes using the <a  class="external-link" href="https://docs.microsoft.com/en-us/azure/search/search-howto-dotnet-sdk">Azure Search .NET SDK</a> (provided via the <strong class=" ">Microsoft.Azure.Search</strong> <a  class="external-link" href="https://www.nuget.org/packages/Microsoft.Azure.Search">NuGet package</a>).</p>
</li><li class=" "><p   
>Create controllers and views according to your search requirements (to collect search input, display search results, provide filters, etc.).</p>
</li></ul><p   
>For more detailed information, see <a   href="Integrating_Azure_Search_into_pages.html">Integrating Azure Search into pages</a>. The example describes how to create a web part for a non-MVC Kentico site, but you can use the same general approach in your MVC application&#39;s controllers and views.</p>
    <h3 id="src-68880528_ProvidingsmartsearchonMVCsites-Usinglocallystoredsearchindexes" class="heading "><span>Using locally stored search indexes</span></h3>
<p   
>To build an MVC search interface for <a   href="Using_locally_stored_search_indexes.html">locally stored search indexes</a>:</p>
<ol class=" "><li class=" "><p   
>Install the <strong class=" ">Kentico.Search </strong><a   href="Installing_Kentico_integration_packages.html">integration package</a> into your MVC project.</p>
</li><li class=" "><p   
>Initialize the <strong class=" ">SearchService</strong> from the integration package with the indexes you want to search.</p>
</li><li class=" "><p   
>Call the service&#39;s <strong class=" ">Search</strong> method to execute the search.</p>
</li></ol><p   
><img  class="wysiwyg-unknown-macro"  src="images/plugins/servlet/confluence/placeholder/unknown-macro.png" alt="images/plugins/servlet/confluence/placeholder/unknown-macro.png"   />
    <br/></p>
<p   
>The <i class=" ">Search</i> method returns a set of results of the <strong class=" ">SearchResult</strong> class.</p>
<p   
>In the search result&#39;s <strong class=" ">Items</strong> property, you can find the <strong class=" ">Fields</strong> and <strong class=" ">Data</strong> properties. The <i class=" ">Fields </i>property contains fields available for all full-text search result items (such as the title or image). The <i class=" ">Data </i>property is of an abstract <i class=" ">BaseInfo </i>class. Its run-time type contains all type specific properties. For example:</p>
<ul class=" "><li class=" "><p   
>If the search indexes users, the run-time type of a search result item&#39;s <i class=" ">Data </i>property is of the <i class=" ">UserInfo </i>class.</p>
</li><li class=" "><p   
>If the search indexes pages, the run-time type of a search result item&#39;s <i class=" ">Data </i>property is of the <i class=" ">TreeNode </i>class. If you <a   href="Generating_classes_for_Kentico_objects.html">generated classes for your page types</a>, the run-time type is of the generated class.</p>
</li><li class=" "><p   
>If the search indexes pages representing products, the run-time type of a search result item&#39;s <i class=" ">Data </i>property is of the <i class=" ">SKUTreeNode </i>class.</p>
</li></ul><p   
>With the <i class=" ">Data </i>property, you can access any object-specific property.</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Currently, the <i class=" ">Kentico.Search</i> integration package supports all types of <a   href="Creating_local_search_indexes.html">local search indexes</a> except for <a   href="Creating_custom_smart_search_indexes.html">custom indexes</a>.</p>
        </div>
    </div>
    <h4 id="src-68880528_safe-id-UHJvdmlkaW5nc21hcnRzZWFyY2hvbk1WQ3NpdGVzLUV4YW1wbGXigJNQcm92aWRpbmdzZWFyY2hvbk1WQ3NpdGVz" class="heading "><span>Example &ndash; Providing search on MVC sites</span></h4>
<p   
>The following search example uses an index that indexes pages (<i class=" ">TreeNode</i> objects) and products (<i class=" ">SKUTreeNode</i> objects). The example does not use pagination when displaying search result items.</p>
<p   
></p>
    <div  class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Tip</strong>: To view the full code of a functional example directly in Visual Studio, download the <a  class="external-link" href="https://github.com/Kentico/Mvc">Kentico MVC solution</a> from GitHub and inspect the <strong class=" ">LearningKit</strong> project. You can also run the Learning Kit website after connecting the project to a Kentico database.</p>
        </div>
    </div>
<p   
></p>
<ol class=" "><li class=" "><p   
>Install the <strong class=" ">Kentico.Search</strong> <a   href="Installing_Kentico_integration_packages.html">integration package</a> into your MVC project.</p>
</li><li class=" "><p   
>Create a new model for working with search queries and search result items.<img  class="wysiwyg-unknown-macro"  src="images/plugins/servlet/confluence/placeholder/unknown-macro.png" alt="images/plugins/servlet/confluence/placeholder/unknown-macro.png"   />
</p>
</li><li class=" "><p   
>Create a new model for the search result item (<i class=" ">SearchResultItemModel</i> in the example).</p>
</li><li class=" "><p   
>Create a controller with a controller action for displaying the results.<img  class="wysiwyg-unknown-macro"  src="images/plugins/servlet/confluence/placeholder/unknown-macro.png" alt="images/plugins/servlet/confluence/placeholder/unknown-macro.png"   />
<img  class="wysiwyg-unknown-macro"  src="images/plugins/servlet/confluence/placeholder/unknown-macro.png" alt="images/plugins/servlet/confluence/placeholder/unknown-macro.png"   />
</p>
</li><li class=" "><p   
>Provide a search field in one of your views. For example:<img  class="wysiwyg-unknown-macro"  src="images/plugins/servlet/confluence/placeholder/unknown-macro.png" alt="images/plugins/servlet/confluence/placeholder/unknown-macro.png"   />
</p>
</li><li class=" "><p   
>Provide a view that displays search result items.<img  class="wysiwyg-unknown-macro"  src="images/plugins/servlet/confluence/placeholder/unknown-macro.png" alt="images/plugins/servlet/confluence/placeholder/unknown-macro.png"   />
</p>
</li></ol><p   
>Your visitors can now search on your website with the created search field. The system displays the results based on the indexes specified in the MVC application.</p>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
