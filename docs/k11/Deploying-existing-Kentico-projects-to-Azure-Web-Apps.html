<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Deploying existing Kentico projects to Azure Web Apps - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68881689"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Running-Kentico-on-Microsoft-Azure.html">Running Kentico on Microsoft Azure</a></li>
                                                                                     <li><a href="Running-Kentico-in-Azure-Web-Apps.html">Running Kentico in Azure Web Apps</a></li>
                                                            </ul>
</div>            <h1 id="src-68881689"> <span>Deploying existing Kentico projects to Azure Web Apps</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<p   
>If you already have a Kentico website or web application project hosted on a traditional web server or prepared for deployment, you can decide to move your project to Azure Web Apps.</p>
<p   
>This scenario expects that you have a Kentico website or web application project installed in a local file system, connected to a standard Microsoft SQL database. If you want to move your project to Azure Web Apps, you need to:</p>
<ol class=" "><li class=" "><p   
>  <a   href="#src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-Part1-DeployingthedatabasetoAzure">Deploy your database to Azure SQL</a> (if you want to have the whole project on Azure, otherwise it is not necessary)</p>
</li><li class=" "><p   
>  <a   href="#src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-Part2-CreatingAzureWebAppsfromVisualStudio">Create a new Azure Web Apps application</a>.</p>
</li><li class=" "><p   
>  <a   href="#src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-Part3-DeployingprojectstoAzureWebApps">Deploy the project files through Visual Studio</a>. Alternatively, you can also   <a   href="Setting-up-Kentico-in-Azure-Web-Apps#src-68881682_SettingupKenticoinAzureWebApps-UploadingKenticotoAzureWebAppsoverFTP">deploy your project over FTP</a>.</p>
</li></ol><p   
>However, please read the <strong class=" ">Possible issues</strong> section first and adjust your project according to the recommendations.</p>
    <h3 id="src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-Possibleissues" class="heading "><span>Possible issues</span></h3>
<p   
>The following issues present problems which you should be aware of during the process of deploying an existing project to an Azure Web Apps project. Please assess whether they apply to your project and adjust your project according to the recommendations.</p>
<ul class=" "><li class=" "><p   
>If you have set up a <strong class=" ">web farm</strong> in your project, the system may contain unnecessary web farm servers in the database. Therefore, we recommend that you delete the old web farm servers in the UI to ensure that a licensing error does not occur. And configure the web farms to generate web farm servers automatically.</p>
</li><li class=" "><p   
>If you are deploying a <strong class=" ">web application</strong> project and you <strong class=" ">store virtual objects</strong> (form layouts, page layouts, transformations, etc.) in the file system (when the <strong class=" ">System -&gt; Virtual objects -&gt; Store all virtual objects in file system</strong> option is enabled), the virtual objects may not be deployed together with the project. Either move the objects back to the database or include the object files in the project (as described in   <a   href="Deployment-mode-for-virtual-objects#src-68881741_Deploymentmodeforvirtualobjects-Deploymentmodeonwebapplicationprojects">Deployment mode on web application projects</a>) before deploying your project to the Azure platform. Kentico web site projects do not require any actions in this regard.</p>
</li><li class=" "><p   
>Your <strong class=" ">database</strong> may contain custom database objects that are not supported on Azure SQL. Because of this limitation of the Azure platform, you might not be able to migrate your database to Azure SQL without modifications. You might encounter issues when deploying your database to Azure if you have somehow customized your database (stored procedures, indexes, access to tables) or if you have developed custom modules.</p>
</li></ul>    <div  class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
>  <a   href="#src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-Possibleissues">Possible issues</a></p>
</li><li class=" "><p   
>  <a   href="#src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-Part1-DeployingthedatabasetoAzure">Part 1 - Deploying the database to Azure</a></p>
</li><li class=" "><p   
>  <a   href="#src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-Part2-CreatingAzureWebAppsfromVisualStudio">Part 2 - Creating Azure Web Apps from Visual Studio</a></p>
</li><li class=" "><p   
>  <a   href="#src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-Part3-DeployingprojectstoAzureWebApps">Part 3 - Deploying projects to Azure Web Apps</a></p>
</li><li class=" "><p   
>  <a   href="#src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-IncreasingstoragecapacityonAzureWebApps">Increasing storage capacity on Azure Web Apps</a></p>
</li><li class=" "><p   
>  <a   href="#src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-ConfiguringwebfarmsforAzureWebApps">Configuring web farms for Azure Web Apps</a></p>
</li></ul><p   
></p>
        </div>
    </div>
    <h3 id="src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-Part1-DeployingthedatabasetoAzure" class="heading "><span>Part 1 - Deploying the database to Azure</span></h3>
<p   
>You can host your project in Azure Web Apps and keep your database in a standard Microsoft SQL server. However, we recommend that you also move your database to Azure, as hosting your database on Azure ensures the best performance.</p>
<p   
>To learn how to deploy on-premise databases to Azure SQL Database, see the <a  class="external-link" href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-cloud-migrate">SQL Server database migration to SQL Database in the cloud</a> article.</p>
<p   
>For example, you can use the following steps to deploy your database using the <i class=" ">Deploy Database to Microsoft Azure Database</i> wizard in SQL Server Management Studio:</p>
<ol class=" "><li class=" "><p   
>  <a   href="Preparing-the-Azure-cloud-environment#src-68881718_PreparingtheAzurecloudenvironment-CreatingaMicrosoftAzureSQLServerandadatabase">Create an Azure SQL Database Server</a> and configure its firewall to accept your IP address.</p>
</li><li class=" "><p   
>Deploy your SQL server according to the instructions in the <a  class="external-link" href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-cloud-migrate">SQL Server database migration to SQL Database in the cloud</a> article.</p>
</li><li class=" "><p   
>Change the connection string in the <strong class=" ">web.config</strong> file of your Kentico project to connect to the deployed Azure SQL database. You can use the following template:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">connectionStrings</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">	&lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"CMSConnectionString"</code><code class="plain"> </code><code class="color1">connectionString</code><code class="plain">=</code><code class="string">"Server=DATABASE_SERVER.database.windows.net;Database=DATABASE_NAME;User ID=DB_SERVER_USER_NAME;Password=DB_SERVER_PASSWORD;Trusted_Connection=False;Encrypt=True;Connection Timeout=120"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">&lt;/</code><code class="keyword">connectionStrings</code><code class="plain">&gt;</code></div>
</div>
    </div>
<p   
>Replace the upper-case placeholder words with your own data.</p>
</li></ol><p   
>You have deployed your database to the Azure SQL database. Proceed with creating a new Azure Web Apps service.</p>
    <h3 id="src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-Part2-CreatingAzureWebAppsfromVisualStudio" class="heading "><span>Part 2 - Creating Azure Web Apps from Visual Studio</span></h3>
<p   
>Before you can deploy your project, you need to create a new Azure Web Apps service. You can do this from the <a  class="external-link" href="https://portal.azure.com">Microsoft Azure management portal</a> or directly from Visual Studio:</p>
<ol class=" "><li class=" "><p   
>Open your Kentico project in Visual Studio.</p>
</li><li class=" "><p   
>Open the <strong class=" ">Server Explorer</strong> tab (or Database Explorer tab in Express editions of Visual Studio).</p>
</li><li class=" "><p   
>Expand the <strong class=" ">Azure</strong> section, right-click <strong class=" ">App Service</strong>, and select <strong class=" ">Create New App Service...</strong>.<br/></p>
<ul class=" "><li class=" "><p   
>A <strong class=" ">Create App Service</strong> window opens.</p>
</li></ul></li><li class=" "><p   
>On the <strong class=" ">Hosting</strong> tab:</p>
<ol class=" "><li class=" "><p   
>Type the web app name (URL).</p>
</li><li class=" "><p   
>Select the Azure subscription under which the Web App will be created.</p>
</li><li class=" "><p   
>Select an existing Resource Group or create a new one.</p>
</li><li class=" "><p   
>Select an existing <a  class="external-link" href="https://azure.microsoft.com/en-us/pricing/details/app-service/plans">App Service plan</a> or create a new one.<br/></p>
<img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/68881689/DeployFromVS2015-Hosting.png" alt="images/download/attachments/68881689/DeployFromVS2015-Hosting.png" width="500"  />
        <br/><span class="caption">Creating an Azure App Service application in Visual Studio</span>
    </li></ol></li><li class=" "><p   
>Switch to the <strong class=" ">Services</strong> tab and create a new SQL Database for the application:</p>
<ol class=" "><li class=" "><p   
>Select an existing or create a new SQL server.</p>
</li><li class=" "><p   
>Provide administrative credentials for the server.</p>
</li><li class=" "><p   
>Specify a name for the application&#39;s database.</p>
</li><li class=" "><p   
>Set <strong class=" ">Connection String Name</strong> to <i class=" ">CMSConnectionString</i>.<br/><i class=" "><img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/68881689/DeployFromVS2015-Services.png" alt="images/download/attachments/68881689/DeployFromVS2015-Services.png" width="500" height="238" />
</i></p>
</li></ol></li><li class=" "><p   
>Click <strong class=" ">Create</strong>.</p>
</li><li class=" "><p   
>Right-click the newly created web app and select <strong class=" ">View settings</strong>.</p>
</li><li class=" "><p   
>Modify the connection string to connect to your database deployed to an Azure SQL server (change the name of the database to correspond to the deployed database).</p>
</li></ol><p   
>You can view the newly created web app in the <a  class="external-link" href="https://portal.azure.com/">Azure management portal</a> under Web Apps. You can now deploy your project to Azure Web Apps.</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Automatically created Azure SQL Database</strong></p>
<p   
>Note that creating a Web App from Visual Studio also creates a new Azure SQL Database on the specified server. If you already have a database on Azure, you will not need this automatically created database. Therefore, you should delete this database to avoid additional costs:</p>
<ol class=" "><li class=" "><p   
>Open the <a  class="external-link" href="https://portal.azure.com/">Azure management portal</a>.</p>
</li><li class=" "><p   
>Select <strong class=" ">SQL Databases</strong>.</p>
</li><li class=" "><p   
>Select the automatically created database. The name should correspond to the name of the newly created Web App with a &#39;<i class=" ">_db&#39;</i> suffix.</p>
</li><li class=" "><p   
>Click <strong class=" ">Delete</strong>.</p>
</li></ol>        </div>
    </div>
    <h3 id="src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-Part3-DeployingprojectstoAzureWebApps" class="heading "><span>Part 3 - Deploying projects to Azure Web Apps</span></h3>
<p   
>The process for deploying Kentico projects is similar for both web site and web application installations.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Including files in web application projects</strong></p>
<p   
>If you are deploying a <i class=" ">web application</i> project, do not forget to include added files to the project. For example media library files added through the user interface.</p>
<p   
>To add files to a project, enable the <strong class=" ">Show All Files</strong> option in the Solution Explorer menu, locate the file, right-click the file and select <strong class=" ">Include in project</strong>. This ensures that the files are deployed along with the project.</p>
        </div>
    </div>
<ol class=" "><li class=" "><p   
>Open your Kentico project in Visual Studio.</p>
</li><li class=" "><p   
>Open the web.config file and make sure that the <i class=" ">sessionState</i> mode is set to <strong class=" ">InProc</strong>.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">sessionState</code><code class="plain"> </code><code class="color1">mode</code><code class="plain">=</code><code class="string">"InProc"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
<p   
>Use <i class=" ">InProc</i> mode if you plan to use one instance of the Web App service. If you want to scale your web app to more instances, you will need to configure the session state differently. See   <a   href="Storing-cache-and-session-state-data-in-Azure-environment">Storing cache and session state data in Azure environment</a>.<br/><br/></p>
</li><li class=" "><p   
>Right-click the project (<strong class=" ">CMSApp</strong> or <strong class=" ">CMS</strong>) in the Solution Explorer and select <strong class=" ">Publish...</strong> (or <strong class=" ">Publish Web App</strong>).</p>
</li><li class=" "><p   
>Select <strong class=" ">Microsoft Azure App Service</strong>.</p>
</li><li class=" "><p   
>Select the previously created web app in the drop-down list.</p>
</li><li class=" "><p   
>Click <strong class=" ">OK</strong>. The system downloads the publish profile.</p>
</li><li class=" "><p   
>Leave the settings as they are.</p>
</li><li class=" "><p   
>Click <strong class=" ">Publish</strong>.</p>
</li></ol><p   
>The system deploys your project to the Azure Web App service. Check that the project is correctly connected to the database (the database installation dialog does not appear) and add a new license for your domain in the Licenses application.</p>
<p   
>After that, proceed to performing the following final configurations</p>
<ul class=" "><li class=" "><p   
>  <a   href="Adjusting-the-web-hosting-plan-mode-on-Azure-Web-Apps">Adjust the web hosting plan mode</a> on your web app.</p>
</li><li class=" "><p   
>Configure the tier of your Azure SQL database according to our   <a   href="Recommendations-on-using-Azure-SQL-Database-tiers">recommendations</a>.</p>
</li></ul><p   
>After that, your Kentico project is ready to run in Azure Web Apps.</p>
    <h3 id="src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-IncreasingstoragecapacityonAzureWebApps" class="heading "><span>Increasing storage capacity on Azure Web Apps</span></h3>
<p   
>By default on Azure Web Apps, all files are stored in the file system with the application, including the media files. The capacity of the storage space is limited &ndash; the Basic plan has 10 GB storage available, see <a  class="external-link" href="https://docs.microsoft.com/en-us/azure/azure-subscription-service-limits">Websites Limits</a> for details. When you exceed the capacity, for example by uploading large media files, you have the following options:</p>
<ul class=" "><li class=" "><p   
>Raise the web hosting plan&#39;s pricing tier to Standard, which has 50 GB of storage.</p>
</li><li class=" "><p   
>Configure your system to use Azure Blob Storage and store the media files there.</p>
</li></ul><p   
>See   <a   href="Increasing-storage-capacity-on-Azure-Web-Apps">Increasing storage capacity on Azure Web Apps</a> for instructions.</p>
    <h3 id="src-68881689_DeployingexistingKenticoprojectstoAzureWebApps-ConfiguringwebfarmsforAzureWebApps" class="heading "><span>Configuring web farms for Azure Web Apps</span></h3>
<p   
>If you plan to increase the number of instances associated with your Web App service (on the <strong class=" ">Scale out (App Service plan)</strong> tab), you need to configure web farms in your project to dynamically create and delete web farm servers. See   <a   href="Enabling-web-farms-on-Azure-Web-Apps">Enabling web farms on Windows Azure Web Apps</a> for instructions.</p>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
