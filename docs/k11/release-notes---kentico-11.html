<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Release notes - Kentico 11 - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260" elementpageid="68879271">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68879271"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                            </ul>
</div>            <h1 id="src-68879271"> <span>Release notes - Kentico 11</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
    <div class="sp-grid-section"><div class="sp-grid-cell sp-grid-60"><h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Kentico 11.0 (released December 11, 2017)</span></h3><h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>System requirement changes</span></h3><ul class=" "><li class=" "><p>The minimum required version of Microsoft .NET Framework is now <strong class=" ">4.6</strong> (also added support for .NET 4.7).</p>
</li><li class=" "><p>Removed support for Visual Studio 2012 and Visual Studio 2013 development environments.</p>
</li><li class=" "><p>Development in Visual Studio 2017 is now officially supported.</p>
</li><li class=" "><p>Added support for Microsoft SQL Server 2017.</p>
</li><li class=" "><p>Kentico 11 requires the <a class="external-link" href="https://github.com/dotnet/roslyn">.NET Compiler Platform ("Roslyn")</a> compiler to run. Installations of Kentico 10 or newer contain the <a class="external-link" href="https://www.nuget.org/packages/Microsoft.CodeDom.Providers.DotNetCompilerPlatform/">required packages</a> by default.</p>
</li><li class=" "><p><a href="upgrading-to-kentico-11">Upgrades to Kentico 11</a> must be performed on a machine with a working Internet connection.</p>
</li></ul><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="upgrading-to-kentico-11">Upgrading to Kentico 11</a></p>
</li><li class=" "><p><a href="server-and-hosting-requirements">Server and hosting requirements</a></p>
</li></ul>        </div>
    </div></div></div>
    
    
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>New features</span></h3>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Platform</span></h4>
<ul class=" "><li class="confluence-link "><p>Data protection – Added new functionality that helps website owners <a href="gdpr-compliance">comply with the General Data Protection Regulation (GDPR)</a> and other personal data regulations.<br></p>
<ul class=" "><li class="confluence-link "><p>You can now define <a href="working-with-consents">Consents</a> in the <i class=" ">Data protection</i> application, and add them to pages, forms, web parts and custom components.</p>
</li><li class="confluence-link "><p>New API and guidelines for implementing functionality that allows users to <a href="implementing-personal-data-collection">collect</a> and <a href="implementing-personal-data-erasure">erase</a> personal data stored in the system.</p>
</li></ul></li><li class="confluence-link "><p>Search – Added functionality for storing and maintaining Kentico content within Azure Search indexes. <a class="external-link" href="https://docs.microsoft.com/en-us/azure/search/search-what-is-azure-search">Azure Search</a> is a cloud-based search solution with a wide range of features, including advanced support for <a class="external-link" href="https://docs.microsoft.com/en-us/azure/search/search-faceted-navigation">faceted navigation</a>. See the <a href="using-azure-search">Using Azure Search</a> chapter to learn more.</p>
</li><li class="confluence-link "><p>Search – Improved text extraction performance when using the <a href="searching-attachment-files">attachment search</a> for <i class=" ">xlsx</i> files.</p>
</li><li class="confluence-link "><p>Macros – Added the option to define macro signature identities and assign them to users. The identities replace the user name in macro signatures and are evaluated during permission checks. By using shared identities, you can transfer valid macro expressions between Kentico instances that have different sets of users. See <a href="working-with-macro-signatures">Working with macro signatures</a>.<br></p>
</li><li class="confluence-link "><p>Macros – When <a href="importing-a-site-or-objects">importing object or site packages</a>, the system now offers the option to re-sign all macros contained within the package using the identity of a selected user.</p>
</li><li class="confluence-link "><p>Multi-factor authentication – The multi-factor authentication functionality was improved and standardized to work with passcodes generated by any authenticator application using the <a class="external-link" href="https://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm">Time-based One-time Password Algorithm</a> (TOTP). The original Kentico Authenticator mobile application is no longer supported. See <a href="configuring-multi-factor-authentication">Configuring multi-factor authentication</a>.<br></p>
</li><li class="confluence-link "><p>Continuous integration – The system now fully supports logging of <a href="content-staging">staging tasks</a> for all types of page operations performed when <a href="restoring-continuous-integration-files-to-the-database">restoring continuous integration data</a>. Staging is now the recommended approach for deploying content and data to production sites from environments using continuous integration.</p>
</li><li class="confluence-link "><p>Continuous integration – When <a href="excluding-objects-from-continuous-integration">excluding individual objects</a> from continuous integration, it is now possible to create rules that apply to all object types (with lower priority than rules for specific object types).</p>
</li><li class="confluence-link "><p>Continuous integration – Added support for migration scripts that allow synchronizing of database changes not otherwise managed by continuous integration (indexes, functions, etc.). See <a href="synchronizing-database-changes-not-managed-by-continuous-integration">Synchronizing database changes not managed by continuous integration</a>.</p>
</li><li class="confluence-link "><p>Continuous integration – Added support for <a href="managing-chat-rooms">Chat room</a> objects. See <a href="object-types-supported-by-continuous-integration">Object types supported by continuous integration</a>.</p>
</li><li class="confluence-link "><p>Continuous integration – The character encoding of files generated in the <i class=" ">CIRepository</i> folder can now be configured using the <i class=" ">CMSCIEncoding</i> web.config key (the key was also added for the previous version in hotfix 10.0.11).</p>
</li><li class="confluence-link "><p>Form controls – <a href="developing-form-controls">Form controls</a> can now be implemented as control classes within an assembly. The previous approach of using a web user control (<i class=" ">.ascx</i> file) within the Kentico web project remains available.</p>
</li><li class="confluence-link "><p>Form controls – Developers can now customize the functionality of <a href="inheriting-from-existing-form-controls">inherited form controls</a> by assigning an extender class.</p>
</li><li class="confluence-link "><p>Settings – Global administrators can now assign the <i class=" ">Configure settings</i> <a href="configuring-permissions">permission</a> for the <i class=" ">CMS</i> module to roles. The permission allows users to access the <i class=" ">Settings</i> application and configure setting values for the current site (with the exception of certain security-sensitive settings).</p>
</li><li class="confluence-link "><p>Modules – <a href="reference---managing-ui-elements">UI elements</a> that define applications for custom modules can now be configured to allow access only for users with the <i class=" ">Global administrator</i> <a href="user-management">privilege level</a>. The new option can be set separately from the flag that determines whether an application is global (available without a running site). When upgrading to Kentico 11, any custom UI elements that represent global applications are automatically configured to also require the <i class=" ">Global administrator</i> privilege level.</p>
</li><li class="confluence-link "><p>Modules – Added new options that allow developers to customize how the system creates <a href="creating-installation-packages-for-modules">installation packages for custom modules</a>:</p>
<ul class=" "><li class="confluence-link "><p>New <i class=" ">ModulePackagingEvents.BuildNuSpecManifest</i> <a href="reference---global-system-events">global event</a> that allows customization of the <i class=" ">.nuspec</i> metadata for module NuGet packages.</p>
</li><li class="confluence-link "><p>Better support for customizing the export/import data of module packages. The <i class=" ">EventArgs</i> parameter of handlers for global events from the <i class=" ">ImportExportEvents</i> class now provides the <i class=" ">Settings.IsInstallableModule</i> property, which indicates whether an export or import operation is part of the creation or installation of a module package.</p>
</li></ul></li><li class="confluence-link "><p>Email queue – Users with sufficient <a href="configuring-permissions">permissions</a> for the <i class=" ">Emails</i> module can now access the <i class=" ">Email queue</i> application and resend or delete emails (even without the Global administrator privilege level).</p>
</li><li class="confluence-link "><p>Email debug – The <i class=" ">CMSLogEmails</i> web.config key now enables logging of each email's timestamp, sender, and custom email headers and their encoding in addition to the recipient and sender. See <a href="configuring-smtp-servers#src-68881948_configuringsmtpservers-configuringsmtpservers-debuggingemails">Configuring SMTP servers</a>.</p>
</li><li class="confluence-link "><p>Most required third-party libraries are now integrated into the Kentico web project via NuGet packages. The packages replace directly included assembly files (in the <i class=" ">Lib</i> and <i class=" ">CMS/CMSDependencies</i> folders). The change makes it easier for developers to manage third-party dependencies.</p>
</li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Content management</span></h4>
<ul class=" "><li class=" "><p>Forms – Added a new form control for creating HTML5 input fields. See <a href="working-with-html5-form-inputs">Working with HTML5 form inputs</a>.</p>
</li><li class=" "><p>CSS stylesheets – Users with <a href="configuring-design-permissions">sufficient permissions</a> for the <i class=" ">Design</i> module can now view and edit <a href="designing-websites-using-css">CSS stylesheets</a>, even without the Global administrator privilege level.</p>
</li><li class=" "><p>SharePoint integration – Added support for Microsoft SharePoint 2016 servers to <a href="integrating-sharepoint">SharePoint connections</a>.</p>
</li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>On-line marketing</span></h4>
<ul class=" "><li class="confluence-link "><p>Email marketing – New way of composing marketing emails via the <i class=" ">Email builder</i>. See <a href="composing-marketing-emails">Composing marketing emails</a>.</p>
</li><li class="confluence-link "><p>Email marketing – New report insights for email feeds in the <i class=" ">Email marketing </i>application. See <a href="viewing-the-email-feed-statistics">Viewing the email feed statistics</a>.</p>
</li><li class="confluence-link "><p>Email marketing – The HTML markup of marketing emails can now be inspected when previewing emails in the <i class=" ">Email marketing</i> application. See <a href="composing-marketing-emails">Composing marketing emails</a>.</p>
</li><li class="confluence-link "><p>Email marketing – Added support for CSS inlining to email templates. See <a href="preparing-email-templates">Preparing email templates</a>.</p>
</li><li class="confluence-link "><p>    <span style="color: #3f3e3c;">
Email marketing – New <i class=" ">{%ViewInBrowserUrl%}</i> macro generating a link that allows users to view marketing emails in their browsers. See <a href="preparing-email-templates">Preparing email templates</a>.    </span>
</p>
</li><li class="confluence-link "><p>Email marketing – New report insights for sent marketing emails in the <i class=" ">Email marketing </i>application, which show more information about contacts who     <span style="color: #3f3e3c;">
opened the emails, clicked at least one link in the emails, or unsubscribed from the emails. See <a href="viewing-the-email-report-insights">Viewing the email report insights</a>.    </span>
</p>
</li><li class="confluence-link "><p>    <span style="color: #3f3e3c;">
Email marketing – You can now specify a plain text version of an email when creating or editing emails in the <i class=" ">Email marketing</i> application. See <a href="composing-marketing-emails">Composing marketing emails</a>.    </span>
</p>
</li><li class="confluence-link "><p>    <span style="color: #3f3e3c;">
Campaigns – New <i class=" ">Contact demographics</i> page accessible from a campaign's <i class=" ">Reports</i> tab displaying a detailed breakdown of contacts, including location, fitting persona, gender, and age, converted via the selected action and traffic source. See <a href="scheduling-and-evaluating-campaigns#src-68882513_schedulingandevaluatingcampaigns-viewingconvertedcontactdemographics">Scheduling and evaluating campaigns</a>.    </span>
</p>
</li><li class="confluence-link "><p>Contact management – New <i class=" ">Contact activity details </i>section on a contact's <a href="working-with-contacts#src-68882365_workingwithcontacts-viewingcontactprofile">contact profile page</a> which displays the contact's journey length and the date of their last performed activity.</p>
</li><li class="confluence-link "><p>Contact management – Administrators can now select a color for highlighting activity types when editing or adding activity types on the <i class=" ">Configuration -&gt; Activity types</i> tab so that the important activity types are easy to spot in a list of activities.    <span style="color: #3f3e3c;">
<br>    </span>
</p>
</li><li class="confluence-link "><p>Personas – New <i class=" ">Report </i>tab in the <i class=" ">Personas </i>application, which displays how many contacts have been fitting the defined personas over time and also how many contacts have not been fitting any personas. See <a href="viewing-contacts-assigned-to-personas#src-68882388_viewingcontactsassignedtopersonas-viewingthereportofcontactsfittingpersonas">Viewing the report of contacts fitting personas</a>.</p>
</li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>E-commerce</span></h4>
<ul class=" "><li class="confluence-link "><p>Products – Extended the options for organizing and classifying products – store managers can now assign <a href="managing-brands-and-manufacturers">Brands</a> and <a href="managing-product-collections">Collections</a> (in addition to manufacturers and suppliers).</p>
</li><li class="confluence-link "><p>Discounts – <a href="working-with-catalog-discounts">Catalog discounts</a>, <a href="working-with-buy-x-get-y-discounts">Buy X Get Y discounts</a> and <a href="working-with-product-coupons">Product coupons</a> can now be applied to products based on sets of included or excluded <a href="configuring-product-structure">Product tree sections</a>, <a href="managing-brands-and-manufacturers">Brands</a> and <a href="managing-product-collections">Collections</a>.</p>
</li><li class="confluence-link "><p>Taxes – You can now configure the E-commerce solution to store and process product prices with or without tax included. Based on the configuration, the system automatically adjusts how taxes are displayed on the website and the calculation of taxes during checkout. See <a href="configuring-taxes">Configuring taxes</a>.</p>
</li><li class="confluence-link "><p><a href="working-with-gift-cards">Gift cards</a> – Store managers can now create gift cards, which allow customers to reduce the final price of their orders by a fixed value. Customers enter a gift card's coupon code during checkout, and the system then subtracts the card's value from the overall final price. If the gift card value is greater than the order's price, the remaining amount is saved for the given coupon code and can be redeemed in future orders.</p>
</li><li class="confluence-link "><p><a href="working-with-product-coupons">Product coupons</a> – The product coupon functionality was overhauled and improved. You can now define or generate multiple codes for each product coupon and set the maximum number of uses for each code. Product coupons can be configured to apply to entire product departments and brands, or limited only for certain types of customers.</p>
</li><li class="confluence-link "><p>Coupon codes – Customers can now enter multiple coupon codes during checkout to receive discounts or redeem gift cards. See <a href="working-with-coupon-codes">Working with coupon codes</a>.</p>
</li><li class="confluence-link "><p>Payment methods – Added support for payment methods that utilize delayed capture of funds – initial payments only place a hold on the transaction amount, and the store's administrators later capture funds manually when <a href="orders">editing orders</a>. The default payment gateways for <a href="configuring-paypal">PayPal</a> and <a href="configuring-authorize.net">Authorize.Net</a> can now be configured to use delayed capture transactions. The API for creating <a href="creating-a-custom-payment-gateway">custom payment gateways</a> was revised and now provides better support for implementing delayed capture payments.</p>
</li><li class="confluence-link "><p>Price rounding – Added a new setting for configuring how the system rounds price values when calculating taxes or discounts, converting currencies, etc. The <i class=" ">Price rounding</i> setting is available in the <i class=" ">Store configuration</i> or <i class=" ">Multistore configuration</i> application under <i class=" ">Store settings -&gt; General</i>. The rounding functionality can also be <a href="customizing-price-rounding">customized by developers</a>.</p>
</li><li class="confluence-link "><p>Google Analytics integration – New functionality that helps get the data of products and purchases in a format suitable for logging via Google Analytics. See <a href="integrating-google-analytics-enhanced-ecommerce">Integrating Google Analytics Enhanced Ecommerce</a>.</p>
</li><li class="confluence-link "><p>Customization – The customization model for the E-commerce solution was improved and extended. To learn about the new customization options and best practices, see <a href="e-commerce-customization-model">E-commerce customization model</a>.</p>
</li></ul>    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Fixed issues (major)</span></h3>
<ul class=" "><li class=" "><p>The <i class=" ">ChangeOrder</i>, <i class=" ">Sort</i>, <i class=" ">BulkInsert</i>, <i class=" ">BulkUpdate</i> and <i class=" ">BulkDelete</i> <a href="reference---global-system-events">system events</a> are now available among the events of specific object types: <i class=" ">&lt;name&gt;Info.TYPEINFO.Events</i>.</p>
</li><li class="confluence-link "><p>When using classes <a href="generating-classes-for-kentico-objects">generated</a> for a page type on sites with content in multiple cultures, retrieving of <a href="advanced-content-modeling">related pages</a> assigned into fields of the <i class=" ">Pages</i> type did not work correctly. Related pages were incorrectly retrieved in the preferred culture selected by the current user (stored in the <i class=" ">CMSPreferredCulture</i> cookie). Now related pages are loaded according to the culture of the base page. Additionally, developers can now use the <a href="working-with-pages-in-the-api">DocumentQuery</a> API to parametrize the retrieval within the <i class=" ">get</i> accessor of the corresponding property in the generated class (for the pages returned by the internally called <i class=" ">GetRelatedDocuments</i> method).</p>
</li></ul>    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Additionally, all bugs fixed within the Kentico 10 hotfixes are included in version 11. See the <a class="external-link" href="http://devnet.kentico.com/download/hotfixes">Bugtracker on DevNet</a> for a full list (click<strong class=" "> Fixed Bugs</strong>).</p>
        </div>
    </div>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Breaking changes (functionality, data structure, API)</span></h3>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Platform</span></h4>
<ul class=" "><li class=" "><p>The <i class=" ">Kentico Authenticator</i> mobile application used for multi-factor authentication is no longer supported.<i class=" "> </i>After upgrading, all users who have multi-factor authentication enabled need to initialize a different authenticator application (the system displays a new secret key during each user's first sign-in). See <a href="configuring-multi-factor-authentication">Configuring multi-factor authentication</a>.</p>
</li><li class=" "><p>The <i class=" ">Kentico.Libraries.Dependencies</i> NuGet package will not be released for Kentico 11. Instead, the integration packages that provide the Kentico API (e.g. <i class=" ">Kentico.Libraries</i>) now directly have dependencies on other NuGet packages that provide the required third-party libraries.</p>
</li><li class=" "><p>The <i class=" ">Kentico.Libraries.Tests</i> NuGet package used to create <a href="writing-automated-tests">automated tests</a> now requires <a class="external-link" href="https://www.nuget.org/packages/NUnit/">NUnit 3.6.1</a> (the dependency was updated from version 3.2).</p>
</li><li class=" "><p>The <a class="external-link" href="http://www.ajaxcontroltoolkit.net/">ASP.NET AJAX Control Toolkit</a> used by the Kentico project was updated to version 17.1.1.<br></p>
<ul class=" "><li class=" "><p>Any occurrences of the <i class=" ">ajaxToolkit:ToolkitScriptManager</i> control in custom code need to be replaced by the <i class=" ">asp:ScriptManager</i> control.</p>
</li><li class=" "><p>The system no longer links the default AJAX Control Toolkit CSS styles onto website pages. If your site uses the default styles to set the appearance of the <i class=" ">Tabs layout</i> web part or any custom components that use AJAX Control Toolkit controls, you need to replace the styles in your own stylesheets.</p>
</li><li class=" "><p>For detailed information, see the <a class="external-link" href="https://github.com/DevExpress/AjaxControlToolkit/wiki/Upgrading-from-v7.x-and-below">Upgrading from v7.x and below</a> article.</p>
</li></ul></li><li class=" "><p>The jQuery library used by the Kentico administration interface was updated to version 2.2.4 (may affect scripts used in the interface of custom modules).</p>
</li><li class=" "><p>The default character encoding used when generating XML files in the continuous integration repository was changed to UTF-8. If necessary, you can change the encoding back to UTF-16 using the <i class=" ">CMSCIEncoding</i> web.config key.<br></p>
</li><li class=" "><p>The <i class=" ">~/CMSPages/scheduler.aspx</i> system page was removed from the web project. The <a href="configuring-scheduled-task-execution">automatic scheduler</a> now uses the <i class=" ">~/CMSPages/Scheduler.ashx</i> route instead (registered and handled by code in the <i class=" ">CMS.Scheduler.dll</i> assembly).</p>
</li><li class=" "><p>Functionality related to filtering of URL query string parameters was removed (including the <i class=" ">CMSCheckParameters</i> and <i class=" ">CMSReportCheckParameters</i> web.config keys, and <i class=" ">CMS/parameters.config</i> file). If necessary, use <a class="external-link" href="https://www.iis.net/configreference/system.webserver/security/requestfiltering">Request Filtering</a> on the IIS level or custom code (for example <a href="reference---global-system-events#src-68882268_referenceglobalsystemevents-requestevents">RequestEvents handlers</a>).</p>
</li><li class=" "><p>The <i class=" ">bootstrap-additional.css</i> and <i class=" ">bootstrap-additional.less</i> stylesheet files in the <i class=" ">CMS\App_Themes\Default</i> folder were removed and their content merged into the <i class=" ">bootstrap.css/.less</i> files. Any customizations made in the removed files need to be manually transferred to <i class=" ">bootstrap.css/.less.</i></p>
</li><li class=" "><p>The <i class=" ">CMS.DataProviderSQL.dll</i> assembly was merged into <i class=" ">CMS.DataEngine.dll</i> and <i class=" ">CMS.FileSystemStorage.dll</i> was merged into <i class=" ">CMS.IO.dll</i> . Any manually added references to the old assemblies from custom projects need to be removed (add a reference to <i class=" ">CMS.DataEngine.dll</i> or<i class=" "> CMS.IO.dll</i> if necessary). The merge does not change the <i class=" ">CMS.DataProviderSQL</i> and <i class=" ">CMS.FileSystemStorage</i> namespaces or the related API.</p>
</li><li class=" "><p>The <i class=" ">Numeric up/down</i> <a href="developing-form-controls">form control</a> no longer supports the option to load values using a web service. The related properties (<i class=" ">ServiceDownPath</i>, <i class=" ">ServiceDownMethod</i>, etc.) were removed from the form control.</p>
</li><li class=" "><p>The <i class=" ">Security code</i> <a href="developing-form-controls">form control</a> is now implemented by a class within the <i class=" ">CMS.FormEngine.Web.UI</i> assembly. The original <i class=" ">~/CMSFormControls/Captcha/SecurityCode.ascx</i> user control file was removed. If your project contains custom web forms or user controls that use the original <i class=" ">SecurityCode.ascx</i> file, you need to remove the related <i class=" ">@ Register</i> directives after upgrading to Kentico 11.</p>
</li><li class=" "><p>The <i class=" ">classname</i>, <i class=" ">postforumid</i> and <i class=" ">postforumgroupid</i> fields in <a href="creating-local-search-indexes">search indexes</a> of the <i class=" ">Forums</i> type were renamed to <i class=" ">_classname</i>, <i class=" ">_postforumid</i> and <i class=" ">_postforumgroupid</i> respectively. When upgrading existing projects, you need to adjust any filtering options or search conditions using the given fields.</p>
</li><li class=" "><p>The content field of <a href="creating-custom-smart-search-indexes">custom smart search indexes</a> was renamed from <i class=" ">_customcointent</i> to <i class=" ">_customcontent</i>.</p>
</li><li class=" "><p>It is no longer possible to disable the <a href="cross-site-request-forgery-%28csrf_xsrf%29">CSRF token security mechanism</a> for specific pages by setting the <i class=" ">CsrfProtectionDisabledOnPage</i> key in the <i class=" ">Page.Items</i> property within page code (Page.Items["CsrfProtectionDisabledOnPage"] = true).</p>
</li><li class=" "><p>The <i class=" ">Cookie law consent</i> web part was renamed to <i class=" ">Cookie law and tracking consent</i>. The <i class=" ">Preview cookie level</i> property was removed from both <i class=" ">Cookie law and tracking consent</i> and <i class=" ">Simple cookie law consent</i> – use the live site to test the web part's functionality.</p>
</li><li class=" "><p>The <i class=" ">Default user cookie level</i> property was removed from the <i class=" ">Cookie law and tracking consent</i> and <i class=" ">Simple cookie law consent</i> web parts. The <i class=" ">CMSDefaultCookieLevel</i> web.config key was also removed. The default cookie level can be now set for each site in the <i class=" ">Settings</i> application in the <i class=" ">System</i> category.<br></p>
</li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Content management</span></h4>
<ul class=" "><li class=" "><p>The <i class=" ">~\App_Data\CMSModules\DeviceProfiles\devices.xml</i> file is now obsolete and the <i class=" ">Devices</i> selector previously available when editing <a href="creating-device-profiles">device profiles</a> in the <i class=" ">Device profiles</i> application was removed.</p>
</li><li class=" "><p>51Degrees device detection was removed from the system by default. If you wish to use advanced device detection, you need to <a href="configuring-51degrees-device-detection">integrate 51Degrees</a> through NuGet packages.</p>
<ul class=" "><li class=" "><p>The <i class=" ">CMSEnable51D</i> web.config key was removed and is now obsolete.</p>
</li><li class=" "><p>The <i class=" ">Current device is mobile</i> and <i class=" ">Current device max screen size is in range </i><a href="creating-macro-rules">macro rules</a> were removed. If you need to replace them, integrate 51Degrees and create your own custom rules.</p>
</li></ul></li><li class=" "><p>The <i class=" ">CurrentDevice </i><a href="device-macros">macro object</a> no longer directly provides device parameters as properties. Instead, you need to access the properties in the <i class=" ">CurrentDevice.Data["&lt;property&gt;"]</i> format. If you want to continue using the original <i class=" ">CurrentDevice</i> property macros, you need to <a href="configuring-51degrees-device-detection">integrate 51Degrees</a> through NuGet packages and create a custom <i class=" ">CurrentDevice</i> class.</p>
</li><li class=" "><p>The system no longer supports the Flash format (it is not possible to insert Flash files <a href="inserting-media-content-using-the-editor">using the editor</a>). When an audio or video file is inserted into a page, the system now renders appropriate HTML5 markup (see <a href="configuring-media-libraries">Configuring media libraries</a>).</p>
</li><li class=" "><p>The following web parts were removed: <i class=" ">WMP Video</i>, <i class=" ">Quick time</i>, <i class=" ">Flash </i>(together with the <i class=" ">Flash</i> widget), <i class=" ">Search engine results highlighter</i> and <i class=" ">Search accelerator (for IE8 and higher)</i>.</p>
</li><li class=" "><p>The <i class=" ">~/CMSModules/Content/CMSPages/MultiFileUploader.ashx</i> and <i class=" ">~/CMSModules/MediaLibrary/CMSPages/MultiFileUploader.ashx</i> files were removed from the web project. The same URLs are now handled by routes registered in the <i class=" ">CMS.DocumentEngine.Web.UI.dll</i> and <i class=" ">CMS.MediaLibrary.Web.UI.dll</i> assemblies.</p>
</li><li class=" "><p>The <i class=" ">CustomTableForm</i> control no longer checks for a <i class=" ">Read</i> permission when editing custom table records. If you have any custom functionality that uses this control and wish to check for permissions when editing custom table records, you need to manually add the permission check to the page or component that contains the control.</p>
</li><li class=" "><p>The XML files defining web part and widget system properties were moved from the <i class=" ">~/App_Data/CMSModules/PortalEngine/Properties</i> folder into the <i class=" ">CMS.PortalEngine.dll</i> assembly. Customization of these properties is now only possible in the administration interface (edit individual objects on the <i class=" ">System properties</i> tab in the Web parts or Widgets application).<br></p>
</li><li class=" "><p>The <i class=" ">Web part zone</i> web part no longer provides any of the properties from the <i class=" ">Always visible settings</i> category. Use custom CSS instead if you wish to display the web part zone content at a fixed location.</p>
</li><li class=" "><p>The system no longer assigns browser version CSS classes to the body element of all pages (see <a href="designing-websites-using-css#src-68880757_safe-id-rgvzawduaw5nd2vic2l0zxn1c2luz0ntuy1ccm93c2vyyw5kbgfuz3vhz2xigjfzcgvjawzpy3n0ewxlcw">Browser and language-specific styles</a>). Additionally, the assigned browser type CSS classes may be different than in previous versions (the <i class=" ">HttpBrowserCapabilities</i> class of the .NET Framework is now used for browser detection).</p>
</li></ul>    <h5 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Translation services</span></h5>
<ul class=" "><li class=" "><p>The authentication process for the Microsoft translator service changed, as the service moved from Microsoft DataMarket to Microsoft Azure. For more information about configuring the translation service provided by Microsoft, see <a href="machine-translation---microsoft-translator">Machine translation - Microsoft Translator</a>.</p>
</li><li class=" "><p>The option to set the priority of translation submissions for the <a href="human-translation-services---translations.com">Translations.com</a> service is no longer supported.</p>
</li><li class=" "><p>The data format used for the <a class="external-link" href="http://Translations.com">Translations.com</a> service was changed. When upgrading sites with an already set up translation project using the <a class="external-link" href="http://Translations.com">Translations.com</a> service, you need to contact a <a class="external-link" href="http://Translations.com">Translations.com</a> representative and inform them about the upgrade to Kentico 11. <a class="external-link" href="http://Translations.com">Translations.com</a> will update the configuration of your Project Director.</p>
</li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>REST service</span></h4>
<ul class=" "><li class=" "><p>The system generates <a href="authenticating-rest-requests">authentication hash</a> values differently for REST URLs containing a virtual directory. Any REST requests with an old authentication hash and a virtual directory in the URL become invalid – you need to generate new authentication hashes in the <i class=" ">Settings</i> application.</p>
</li><li class=" "><p>The REST service now processes decimal and double values in the en-US culture (with the period character as the decimal separator). If you send REST requests containing decimal values in other culture formats (e.g. with a comma as the decimal separator), you need to update your request source to use the en-US format. Otherwise the system may process the values into different numbers than expected.</p>
</li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>On-line marketing</span></h4>
<ul class=" "><li class=" "><p>The system no longer stores IP addresses for logged activities. As a result, it is no longer possible to specify <a href="managing-contact-scores#src-68882349_managingcontactscores-assigningscorepointsbasedonactivities">activity scoring rules</a> based on the IP address of the contact who performed the activity.</p>
</li><li class=" "><p>The obsolete <i class=" ">~/CMSPages/WebAnalyticsService.asmx</i> web service endpoint was removed. If you need to perform custom logging of <a href="web-analytics">web analytics</a>, use the <i class=" ">~/cmsapi/webanalytics</i> route instead. The original <i class=" ">LogSearch</i> and <i class=" ">LogHits</i> methods of the endpoint also need to be replaced by the <i class=" ">LogSearchHit</i> and <i class=" ">LogHit</i> methods respectively, for example: <i class=" ">~/cmsapi/webanalytics/logsearchhit</i></p>
</li></ul>    <h5 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Email marketing</span></h5>
<ul class=" "><li class=" "><p>    <span style="color: #3f3e3c;">
Kentico 11 sites have a maximum limit on the number of created email feeds    </span>
, based on the used <a class="external-link" href="https://www.kentico.com/purchase/configure-your-license">License Edition</a> (5 newsletters for Kentico CMS Base, 10 newsletters for Kentico CMS Ultimate, unlimited newsletters and email campaigns for Kentico EMS). See the <a href="email-marketing">Email marketing</a> page for detailed information.</p>
</li><li class=" "><p>    <span style="color: #3f3e3c;">
Kentico 11 sites have a maximum limit on the number of marketable recipients for each email feed    </span>
, based on the used <a class="external-link" href="https://www.kentico.com/purchase/configure-your-license">License Edition</a> (500 for Kentico CMS Base, 5000 for Kentico CMS Ultimate, unlimited for Kentico EMS).</p>
</li><li class=" "><p>The possibility to create page-based (dynamic) newsletters was removed from the system. Existing page-based newsletters are unaffected when upgrading to Kentico 11, but are no longer supported.</p>
</li><li class=" "><p>The <i class=" ">ActivationLink, ActivationUrl, Email, FirstName, LastName, UnsubscribeFromCampaign,</i> and <i class=" ">UnsubscribeFromAllCampaigns</i> email marketing macro expressions were removed. Their equivalents are now exposed via the <i class=" ">Recipient, Email,</i> and <i class=" ">EmailFeed</i> objects. See <a href="reference---email-marketing-macro-expressions">Reference - Email marketing macro expressions</a>.</p>
</li><li class=" "><p>Email marketing <a href="preparing-email-templates">templates</a> can no longer be edited using a WYSIWYG editor. Instead, the interface provides a more suitable HTML code editor (also allows designers to insert <a href="preparing-email-widgets">email widgets</a>).</p>
</li><li class=" "><p>The <i class=" ">Newsletter archive</i> web part was removed.</p>
</li><li class=" "><p>The option to set default and additional templates for <a href="email-marketing">email feeds</a> was removed. Each email feed now has assigned templates without distinction between default and additional templates.</p>
</li><li class=" "><p>It is no longer possible to configure links tracked in marketing emails to use case-sensitive URL paths (the <i class=" ">CMSLinkTrackerKeepUrlCase</i> web.config key was removed). Two same URL paths (in a case-insensitive manner) are now always represented by an identical tracking link.</p>
</li><li class=" "><p>The <i class=" ">Newsletter</i> <a href="personalizing-the-editor-toolbars-and-buttons">editor toolbar set</a> was removed. Instead, use the new email builder and email widgets to <a href="composing-marketing-emails">compose</a> the content of marketing emails.</p>
</li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>E-commerce</span></h4>
<ul class=" "><li class=" "><p>Kentico 11 sites have a maximum limit on the number of enabled products (SKUs), based on the used <a class="external-link" href="https://www.kentico.com/purchase/configure-your-license">License Edition</a>. Initially, the limit is 100 for <i class=" ">Kentico CMS Base</i>, 500 for <i class=" ">Kentico CMS Ultimate</i>, and unlimited for <i class=" ">Kentico EMS</i>. After evaluating feedback from partners and clients, Kentico has decided to release <a class="external-link" href="https://devnet.kentico.com/download/hotfixes">hotfix 11.0.15</a>, which increases the limits (500 for <i class=" ">Kentico CMS Base</i>, unlimited for <i class=" ">Kentico CMS Ultimate</i> and <i class=" ">Kentico EMS</i>). See the <a href="products">Products</a> page for detailed information.</p>
</li><li class=" "><p>All e-commerce fields that store prices or other monetary values now use the decimal data type, with a precision of 18 total digits and 9 decimal places. The changes affect objects such as products, shopping carts, orders, payments, discounts, shipping costs, taxes, currency exchange rates, etc.</p>
</li><li class=" "><p><a href="orders">Orders</a> in Kentico 11 use a different data structure and calculation model than in previous versions. As a result, the system does not fully support upgrading or import of existing orders – the final price totals of the orders remain the same, but you may notice inconsistencies when viewing the details of upgraded orders or the values of specific columns in the <i class=" ">COM_Order</i> or <i class=" ">COM_OrderItem</i> database tables (item prices, various subtotals, discounts, etc.). If you need to keep archives of existing orders with full details, we recommend exporting the order data to an external system or file.</p>
</li><li class=" "><p>Kentico no longer provides any functionality for collecting and tracking donations. The <i class=" ">Donation</i> product representation was removed for SKUs, along with all related web parts (Donate, Donations), and reports. When upgrading to Kentico 11, any existing Donation products are converted to Standard products. See <a href="collecting-donations">Collecting donations</a> to learn about the current recommendations for managing donations.</p>
</li><li class=" "><p>The system no longer allows users to input prices with more decimal places than allowed by the site's <a href="configuring-currencies">main currency</a>. This should no longer be necessary as a workaround for tax calculations – the system can now be <a href="configuring-taxes">configured</a> to store and process price values that already include tax.</p>
</li><li class=" "><p>The supported signatures of transformation methods for getting product prices and other related values were changed. Most of the methods can now only be called without parameters. For detailed information, see <a href="reference---transformation-methods">Reference - Transformation methods</a> (<i class=" ">ASCX</i> transformations) and <a href="reference---macro-methods">Reference - Macro methods</a> (<i class=" ">Text / XML</i> transformations). The related <i class=" ">Display price including catalog discounts</i> and <i class=" ">Display price including taxes</i> settings were removed.</p>
</li><li class=" "><p>The final price of purchases is now stored in the new <i class=" ">GrandTotal</i> field of shopping cart and order objects instead of the <i class=" ">TotalPrice</i> field. Unlike the <i class=" ">TotalPrice</i> field, the <i class=" ">GrandTotal</i> includes reductions from <a href="working-with-gift-cards">gift cards</a>. The change affects both the API and macro expressions. When upgrading sites, we recommend replacing occurrences of the <i class=" ">TotalPrice</i> field with <i class=" ">GrandTotal</i> in macros (for example in invoices and order notification email templates) and in custom code.</p>
</li><li class=" "><p>Shopping cart item objects no longer provide the <i class=" ">UnitPriceAfterDiscount, UnitPriceAfterDiscountInMainCurrency, UnitTotalPrice</i> and <i class=" ">UnitTotalPriceInMainCurrency</i> properties. The change affects both the API and macro expressions. When upgrading sites, replace occurrences in macros with the <i class=" ">UnitPrice</i> (the price of a single item, including catalog discounts) or <i class=" ">TotalPrice</i> (the unit price multiplied by the number of items) properties, for example: <i class=" ">{% ShoppingCartItem.UnitPrice %}</i></p>
</li><li class=" "><p>The <i class=" ">Shopping cart totals</i> web part no longer supports the following options for its <i class=" ">Total to display</i> property:<br></p>
<ul class=" "><li class=" "><p><i class=" ">Products excl. tax total</i></p>
</li><li class=" "><p><i class=" ">Products tax total</i></p>
</li><li class=" "><p><i class=" ">Shipping excl. tax total</i></p>
</li><li class=" "><p><i class=" ">Shipping tax total</i></p>
</li><li class=" "><p><i class=" ">Buy X Get Y and Order discounts total</i></p>
</li><li class=" "><p><i class=" ">Buy X Get Y and Order discounts summary</i></p>
</li><li class=" "><p><i class=" ">Discounts total</i></p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Taxes are now included in the <i class=" ">Products total</i> and <i class=" ">Shipping total</i> values according to the site's <i class=" ">Prices include tax</i> <a href="settings---e-commerce">setting</a>. After upgrading to Kentico 11, any instances of the <i class=" ">Shopping cart totals</i> web part using the removed <i class=" ">Total to display</i> values will not display any content and need to be re-configured to one of the valid options or removed.</p>
        </div>
    </div>
</li></ul></li><li class=" "><p class="auto-cursor-target">The system now performs all shopping cart calculations in the currency selected for the given shopping cart. Macros for accessing shopping cart and shopping cart item values (or order and order item values) in the site's main currency are no longer available, for example: <i class=" ">{% ECommerceContext.CurrentShoppingCart.TotalShippingInMainCurrency %}</i>. Instead, you need to work in the shopping cart's currency and use the corresponding properties without the <i class=" ">InMainCurrency</i> suffix.</p>
</li><li class=" "><p>The <i class=" ">IsProductInShoppingCart</i> macro method of shopping cart objects was removed.</p>
</li><li class=" "><p>Kentico 11 introduces many changes that affect the processing of product prices. To ensure that prices are calculated and displayed correctly, always use the appropriate macro methods or ASCX transformation methods rather than directly accessing values from price columns or properties (such as <i class=" ">SKUPrice</i>).</p>
</li><li class=" "><p>When <a href="orders">editing orders</a> in the administration interface, the system no longer recalculates the unit prices of existing order items (for example based on the current <a href="working-with-catalog-discounts">catalog</a> or <a href="working-with-volume-discounts">volume discounts</a>). Any required changes of unit prices in existing orders need to be done manually by store administrators.</p>
</li><li class=" "><p><a href="configuring-currencies">Currencies</a> that have an empty value in their <i class=" ">Decimal places</i> property now allow 2 decimal places by default (in Kentico 10 or older, an empty value did not allow any decimal places).<br></p>
</li></ul>    <h5 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Discounts</span></h5>
<ul class=" "><li class=" "><p><a href="working-with-volume-discounts">Volume discounts</a> now require a <i class=" ">Minimum quantity</i> of at least 2 (it is no longer possible to create volume discounts for 1 item). After upgrading to Kentico 11, any volume discounts with a minimum quantity of 1 do not apply.</p>
</li><li class=" "><p>The <i class=" ">TotalDiscount</i> property of shopping cart item objects no longer includes discounts that affect the price of individual product units (<a href="working-with-catalog-discounts">catalog</a> and <a href="working-with-volume-discounts">volume discounts</a>), but only applied <a href="working-with-buy-x-get-y-discounts">Buy X Get Y discounts</a> and <a href="working-with-product-coupons">product coupons</a>. The change affects both the API and macro expressions.</p>
</li><li class=" "><p>The <i class=" ">ShoppingCartCouponCode</i> and <i class=" ">HasUsableCoupon</i> properties of shopping cart objects, and the <i class=" ">OrderCouponCode</i> property of order objects were removed. The change affects both the API and macro expressions. If you used these properties to display coupon codes on your site's pages, we recommend displaying the related discounts instead as described in <a href="displaying-shopping-cart-details-on-pages">Displaying shopping cart details on pages</a>.<br></p>
</li><li class=" "><p>The <i class=" ">Discount coupon</i> web part was renamed to <i class=" ">Coupon codes</i> (Display name only) and now requires a transformation to display the applied coupon codes. When upgrading sites that contain the web part, you need to prepare a suitable transformation for your site's design, configure each instance of the web part, and assign the transformation. See <a href="working-with-coupon-codes">Working with coupon codes</a>.</p>
</li><li class=" "><p>If a store manager changes an existing order in the <i class=" ">Orders</i> application, the recalculation evaluates the validity of discounts using the date and time when the order was created, not the current time.</p>
</li><li class=" "><p>The following breaking changes affect <a href="configuring-discount-rules">order discount macro rules</a>:<br></p>
<ul class=" "><li class=" "><p>    <span style="color: #262524;">
The default    <span style="color: #262524;">
     <span style="color: #262524;">
<i class=" ">Shopping cart contains product</i> and <i class=" ">Shopping cart contains products</i> macro rules    </span>
     </span>
were removed. Use the new <i class=" ">    <span style="color: #262524;">
Order contains product    </span>
s</i> rule instead.    </span>
</p>
</li><li class=" "><p>    <span style="color: #262524;">
The default <i class=" ">Total weight of order is under</i> macro rule was updated to use a different macro condition. When upgrading websites to Kentico 11, you need to re-save any existing conditions using the rule.<br>    </span>
</p>
</li><li class=" "><p>The <i class=" ">ShoppingCart</i> object is no longer available when writing conditions of custom order discount macro rules. Instead, the macro context directly provides properties related to the shopping cart or order calculation, such as <i class=" ">Currency</i>, <i class=" ">Customer</i>, <i class=" ">PaymentOption</i>, <i class=" ">ShippingOption</i>, <i class=" ">GrandTotal</i>, etc.<br></p>
</li><li class=" "><p>See <a href="configuring-discount-rules">Configuring discount rules</a> and <a href="adding-a-discount-rule-with-a-custom-method">Adding a discount rule with a custom method</a> for more information.<br></p>
</li></ul></li><li class=" "><p>The following breaking changes affect <a href="working-with-product-coupons">Product coupons</a>:</p>
<ul class=" "><li class=" "><p>Global product coupons are no longer supported (i.e. product coupons must always be related to a specific site).</p>
</li><li class=" "><p>The <i class=" ">Product coupons</i> application and the related objects now require the <i class=" ">Read discounts</i> and <i class=" ">Modify discounts</i> permissions for the <i class=" ">E-commerce</i> module instead of the <i class=" ">Read data</i> and <i class=" ">Modify data</i> permissions.</p>
</li><li class=" "><p>The system now applies product coupon discounts to individual shopping cart or order items, rather than the shopping cart or order as a whole (affects related properties in macros and the API).<br></p>
</li><li class=" "><p>The <i class=" ">DiscountCoupon</i> macro object is no longer available in the context of <a href="configuring-invoices">invoices</a> or <a href="configuring-e-commerce-email-notifications">e-commerce email templates</a>. After upgrading, invoice configurations and email templates need to be updated. If you wish to display detailed information about applied product coupons, use the <i class=" ">DiscountSummary</i> object available for individual <i class=" ">ContentTable</i> items.</p>
</li><li class=" "><p>When upgrading to Kentico 11, existing product coupon data is transferred, but without global product coupons and coupons assigned to products using the <i class=" ">All products except for these</i> option. See <a href="upgrading-to-kentico-11">Upgrading to Kentico 11</a> for details.</p>
</li></ul></li><li class=" "><p>The following breaking changes affect <a href="working-with-buy-x-get-y-discounts">Buy X Get Y discounts</a>:</p>
<ul class=" "><li class=" "><p>The system now applies Buy X Get Y discounts to individual shopping cart or order items, rather than the shopping cart or order as a whole (affects related properties in macros and the API).</p>
</li><li class=" "><p>The <i class=" ">OrderRelatedDiscountSummaryItems</i> macro collection is no longer available in the context of <a href="configuring-invoices">invoices</a> or <a href="configuring-e-commerce-email-notifications">e-commerce email templates</a> . After upgrading, invoice configurations and email templates need to be updated. If you wish to display detailed information about applied Buy X Get Y discounts, use the <i class=" ">DiscountSummary</i> object available for individual <i class=" ">ContentTable</i> items.</p>
</li><li class=" "><p>Buy X Get Y discounts can no longer be displayed on pages using the <i class=" ">Shopping cart totals</i> web part. Instead, see the recommendations in <a href="displaying-shopping-cart-details-on-pages">Displaying shopping cart details on pages</a>.</p>
</li></ul></li><li class=" "><p>The following breaking changes affect <a href="working-with-order-discounts">Order discounts</a>:</p>
<ul class=" "><li class=" "><p>Order discounts are now always percentage-based (i.e. flat value order discounts are no longer supported, use <a href="working-with-gift-cards">gift cards</a> for this purpose).</p>
</li><li class=" "><p>When upgrading to Kentico 11, the system converts all flat order discounts to percentage-based and disables them.</p>
</li><li class=" "><p>When calculating the price of shopping carts and orders, the system now applies order discounts after other types of discounts, but before adding shipping costs and taxes.</p>
</li><li class=" "><p>Details of individual order discounts applied to the current shopping cart can no longer be displayed on pages using the <i class=" ">Shopping cart totals</i> web part. Instead, see the recommendations in <a href="displaying-shopping-cart-details-on-pages">Displaying shopping cart details on pages</a>.</p>
</li></ul></li></ul>    <h5 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Taxes</span></h5>
<ul class=" "><li class=" "><p><a href="products">Products</a>, <a href="departments">departments</a>, and <a href="configuring-shipping-options">shipping options</a> can now only have one <a href="configuring-taxes">tax class</a> assigned. After upgrading to Kentico 11, only one of the taxes remains assigned for objects that originally had multiple taxes.</p>
</li><li class=" "><p>The system no longer stores or displays tax values separately for individual items in shopping carts and orders (only the total overall tax). After upgrading, you may need to update any custom transformations applied to <i class=" ">ContentTable</i> data in <a href="configuring-invoices">invoices</a> or <a href="configuring-e-commerce-email-notifications">e-commerce email templates</a>.</p>
</li><li class=" "><p>The <i class=" ">ContentTaxesTable</i> and <i class=" ">ShippingTaxesTable</i> macro objects are no longer available in the context of <a href="configuring-invoices">invoices</a> or <a href="configuring-e-commerce-email-notifications">e-commerce email templates</a>. After upgrading, invoice configurations and email templates need to be updated to use the new <i class=" ">TaxSummary</i> object instead. If using custom transformations to display the tax items, you need to update the transformation code to use <i class=" ">Name</i> and <i class=" ">Value</i> properties instead of the original <i class=" ">TaxClassDisplayName</i> and <i class=" ">TaxSummary.</i></p>
</li></ul>    <h5 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Payment methods</span></h5>
<ul class=" "><li class=" "><p>The functionality of the default PayPal payment provider was modified. The changes introduce different requirements, configuration steps and settings. Follow the instructions in <a href="configuring-paypal">Configuring PayPal</a> to set up the payment provider in Kentico 11.</p>
</li><li class=" "><p>The functionality of the default Authorize.Net payment provider was modified. The changes introduce different requirements, limitations and configurations steps. Follow the instructions in <a href="configuring-authorize.net">Configuring Authorize.NET</a> to set up the payment provider in Kentico 11.</p>
</li><li class=" "><p>Due to changes in the custom payment gateway API, any custom payment gateways need to be rewritten for Kentico 11. See <a href="creating-a-custom-payment-gateway">Creating a custom payment gateway</a>.</p>
</li><li class=" "><p>The provider classes of the default payment gateways were moved to the <i class=" ">CMS.Ecommerce</i> assembly and namespace. When upgrading, any <a href="configuring-payment-methods">payment methods</a> using the original class locations are automatically updated.</p>
<ul class=" "><li class=" "><p><a href="configuring-paypal">PayPal</a>: CMS.Ecommerce.CMSPayPalProvider</p>
</li><li class=" "><p><a href="configuring-authorize.net">Authorize.Net</a>: CMS.Ecommerce.CMSAuthorizeNetProvider</p>
</li><li class=" "><p><a href="configuring-customer-credit">Customer credit</a>: CMS.Ecommerce.CMSCreditPaymentProvider</p>
</li></ul></li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Social &amp; Community</span></h4>
<ul class=" "><li class=" "><p>The <i class=" ">Site name</i> and <i class=" ">Event scope</i> properties of the <i class=" ">Event management</i> <a href="working-with-widget-dashboards">dashboard widget</a> were removed. The widget now displays all events from the current site by default.</p>
</li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Database</span></h4>
    <h5 $stringutils.tolowercase(${idattribute})="" class="heading "><span>General</span></h5>
<ul class=" "><li class=" "><p>The following columns were removed from the <i class=" ">CMS_User</i> database table due to the changes in <a href="configuring-multi-factor-authentication">multi-factor authentication</a>:</p>
<ul class=" "><li class=" "><p><i class=" ">UserTokenID</i></p>
</li><li class=" "><p><i class=" ">UserTokenIteration</i></p>
</li></ul></li><li class=" "><p>The following columns were removed from the <i class=" ">CMS_UserSettings</i> database table:</p>
<ul class=" "><li class=" "><p><i class=" ">UserDataComUser</i></p>
</li><li class=" "><p><i class=" ">UserDataComPassword</i></p>
</li></ul></li><li class=" "><p>The following columns were removed from the <i class=" ">CMS_Email</i> database table:</p>
<ul class=" "><li class=" "><p><i class=" ">EmailSetName</i></p>
</li><li class=" "><p><i class=" ">EmailSetRelatedID</i></p>
</li></ul></li><li class=" "><p>The obsolete <i class=" ">CMS_InlineControl</i> database table was completely removed.</p>
</li></ul>    <h5 $stringutils.tolowercase(${idattribute})="" class="heading "><span>E-commerce</span></h5>
<ul class=" "><li class=" "><p>The following database columns were removed:</p>
<ul class=" "><li class=" "><p><i class=" ">COM_SKU</i> table</p>
<ul class=" "><li class=" "><p><i class=" ">SKUPrivateDonation</i></p>
</li><li class=" "><p><i class=" ">SKUMinPrice</i></p>
</li><li class=" "><p><i class=" ">SKUMaxPrice</i></p>
</li></ul></li><li class=" "><p><i class=" ">COM_Order</i> table</p>
<ul class=" "><li class=" "><p><i class=" ">OrderCouponCode</i> (renamed to <i class=" ">OrderCouponCodes</i> – orders can now have multiple coupon codes applied)</p>
</li><li class=" "><p><i class=" ">OrderDiscountCouponID</i></p>
</li><li class=" "><p><i class=" ">OrderExchangeRate</i></p>
</li><li class=" "><p><i class=" ">OrderShippingTaxes</i> (shipping taxes are now included within the data of the new <i class=" ">OrderTaxSummary</i> column)</p>
</li><li class=" "><p><i class=" ">OrderTotalDiscountInMainCurrency</i></p>
</li><li class=" "><p><i class=" ">OrderTotalShippingInMainCurrency</i></p>
</li><li class=" "><p><i class=" ">OrderTotalTaxInMainCurrency</i></p>
</li></ul></li><li class=" "><p><i class=" ">COM_OrderItem</i> table</p>
<ul class=" "><li class=" "><p><i class=" ">OrderItemIsPrivate</i></p>
</li><li class=" "><p><i class=" "><i class=" ">OrderItemPrice</i></i></p>
</li><li class=" "><p><i class=" ">OrderItemSKU<br></i></p>
</li><li class=" "><p><i class=" ">OrderItemUnitTotalTaxInMainCurrency</i></p>
</li><li class=" "><p><i class=" ">OrderItemUnitTotalDiscountInMainCurrency</i></p>
</li></ul></li><li class=" "><p><i class=" ">COM_ShoppingCart</i> table</p>
<ul class=" "><li class=" "><p><i class=" ">ShoppingCartCouponCode</i> (coupon codes of shopping carts are now stored separately in the <i class=" ">COM_ShoppingCartCouponCode</i> table)</p>
</li></ul></li><li class=" "><p><i class=" ">COM_ShoppingCartSKU</i> table</p>
<ul class=" "><li class=" "><p><i class=" ">CartItemIsPrivate</i></p>
</li><li class=" "><p><i class=" ">CartItemPrice<br></i></p>
</li></ul></li></ul></li><li class=" "><p>The following database tables were removed, because <a href="products">products</a>, <a href="departments">departments</a> and <a href="configuring-shipping-options">shipping options</a> now only allow a single tax class:</p>
<ul class=" "><li class=" "><p><i class=" ">COM_SKUTaxClasses</i> – the assigned tax class is now stored in the <i class=" ">COM_SKU </i>table in the <i class=" ">SKUTaxClassID</i> column (new column)</p>
</li><li class=" "><p><i class=" ">COM_DepartmentTaxClass</i> – the assigned tax class is now stored in the <i class=" ">COM_Department</i> table in the <i class=" ">DepartmentDefaultTaxClassID</i> column (existing, previously unused column)</p>
</li><li class=" "><p><i class=" ">COM_ShippingOptionTaxClass</i> – the assigned tax class is now stored in the <i class=" ">COM_ShippingOption</i> table in the <i class=" ">ShippingOptionTaxClassID</i> column (new column)</p>
</li></ul></li><li class=" "><p>The <i class=" ">COM_DiscountCoupon</i> and <i class=" ">COM_SKUDiscountCoupon</i> database tables were removed. Data related to <a href="working-with-product-coupons">Product coupons</a> is now stored in the <i class=" ">COM_MultiBuyDiscount</i>, <i class=" ">COM_MultiBuyCouponCode, COM_MultiBuyDiscountSKU</i> and <i class=" ">COM_MultiBuyDiscountDepartment</i> tables, together with the data of <a href="working-with-buy-x-get-y-discounts">Buy X Get Y discounts</a>. Product coupon records in the <i class=" ">COM_MultiBuyDiscount</i> table can be identified by the value of the <i class=" ">MultiBuyDiscountIsProductCoupon</i> column, which is set to 1 (true).</p>
</li></ul>    <h5 $stringutils.tolowercase(${idattribute})="" class="heading "><span>On-line marketing</span></h5>
<ul class=" "><li class=" "><p>The following columns were removed from the <i class=" ">Newsletter_EmailTemplate</i> database table and replaced by the new <i class=" ">TemplateCode</i> column:</p>
<ul class=" "><li class=" "><p><i class=" ">TemplateBody</i></p>
</li><li class=" "><p><i class=" ">TemplateStylesheetText</i></p>
</li><li class=" "><p><i class=" ">TemplateHeader</i></p>
</li><li class=" "><p><i class=" ">TemplateFooter</i></p>
</li></ul></li><li class=" "><p>The <i class=" ">NewsletterTemplateID</i> column was removed from the <i class=" ">Newsletter_Newsletter</i> database table. Email feeds no longer have a default email template.</p>
</li><li class=" "><p>The <i class=" ">IssueShowInNewsletterArchive</i> column was removed from the <i class=" ">Newsletter_NewsletterIssue</i> database table.</p>
</li><li class=" "><p>The <i class=" ">ActivityIPAddress</i> column was removed from the <i class=" ">OM_Activity</i> database table.</p>
</li></ul>    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>API</span></h3>
    <div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Search the <a class="external-link" href="http://devnet.kentico.com/documentation/api-changes/kentico-11">API changes</a> page on DevNet to find all possible breaking changes in the API.</p>
        </div>
    </div>
<ul class=" "><li class=" "><p>The <i class=" ">UserName</i> property of the <i class=" ">EvaluationContext</i> class in the macro engine API no longer provides a reliable identifier of the macro's author (the value is empty for macro expressions signed by a user with an assigned macro signature identity). When implementing security conditions for <a href="registering-custom-macro-methods">custom macro methods</a> or <a href="adding-custom-macro-fields">fields</a>, always check the <i class=" ">User</i> property of <i class=" ">EvaluationContext</i> instead. The <i class=" ">User</i> property contains a <i class=" ">UserInfo</i> object representing the correct user for both types of macro signatures (user name and macro signature identity).</p>
</li><li class=" "><p>The default <i class=" ">InfoProvider</i> classes no longer contain virtual <i class=" ">GetInfoInternal, SetInfoInternal</i> and <i class=" ">DeleteInfoInternal</i> methods. For any <a href="customizing-providers">custom providers</a> inheriting from a default <i class=" ">InfoProvider</i> class that contain overrides of these methods, override the following methods instead:</p>
<ul class=" "><li class=" "><p><i class=" ">GetInfoById</i> (and/or <i class=" ">GetInfoByCodeName, GetInfoByGuid)</i></p>
</li><li class=" "><p><i class=" ">SetInfo</i></p>
</li><li class=" "><p><i class=" ">DeleteInfo</i></p>
</li></ul></li><li class=" "><p>The behavior of the <i class=" ">Columns</i> parameter method was changed for the DocumentQuery API. When retrieving pages with the <i class=" ">Columns</i> query parameter, the system automatically adds <i class=" ">ClassName</i> to the list of retrieved columns. See <a href="working-with-pages-in-the-api">Working with pages in the API</a>.</p>
</li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>E-commerce</span></h4>
<ul class=" "><li class=" "><p>The type of members in the e-commerce API that represent prices and other monetary values was changed from <i class=" ">double</i> to <a class="external-link" href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/decimal">decimal</a> (affects object properties, method parameters and return types, etc.).</p>
</li><li class=" "><p>The overall customization model was changed for many types of e-commerce functionality. Instead of inheriting from provider classes and overriding methods, you now need to create and register custom implementations of appropriate interfaces. See <a href="e-commerce-customization-model">E-commerce customization model</a> to learn more.</p>
</li><li class=" "><p>If you perform shopping cart calculations in your custom code, you now need to explicitly call the <i class=" ">ShoppingCartInfo.Evaluate()</i> method. The <i class=" ">Evaluate()</i> method must also be called after setting <i class=" ">ShoppingCartInfo</i> properties that affect the calculation results to ensure that all values are up to date. The <i class=" ">InvalidateCalculations()</i> method of <i class=" ">ShoppingCartInfo</i> was removed.</p>
</li><li class=" "><p>The API for implementing custom payment gateways was revised (without backward compatibility). Any custom payment gateways need to be rewritten for Kentico 11. See <a href="creating-a-custom-payment-gateway">Creating a custom payment gateway</a>.</p>
</li><li class=" "><p>The following Info and InfoProvider classes were removed, because <a href="products">products</a>, <a href="departments">departments</a> and <a href="configuring-shipping-options">shipping options</a> now only allow a single tax class:<br></p>
<ul class=" "><li class=" "><p><i class=" ">SKUTaxClassInfo</i> and <i class=" ">SKUTaxClassInfoProvider</i></p>
</li><li class=" "><p><i class=" ">DepartmentTaxClassInfo</i> and <i class=" ">DepartmentTaxClassInfoProvider</i></p>
</li><li class=" "><p><i class=" ">ShippingOptionTaxClassInfo</i> and <i class=" ">ShippingOptionTaxClassInfoProvider</i></p>
</li></ul></li><li class=" "><p>The Info and InfoProvider classes originally used by <a href="working-with-product-coupons">product coupons</a> were removed (<i class=" ">DiscountCouponInfo, DiscountCouponInfoProvider, SKUDiscountCouponInfo</i>, <i class=" ">SKUDiscountCouponInfoProvider</i>). Use the <i class=" ">MultiBuyDiscount</i> Infos and InfoProviders instead. See the <a href="http://localhost:8090/display/API11/Discounts">Discount API examples</a>.</p>
</li><li class=" "><p>The API used to customize the evaluation or application of <a href="working-with-buy-x-get-y-discounts">Buy X Get Y discounts</a> was changed:</p>
<ul class=" "><li class=" "><p>Custom classes that inherit from <i class=" ">MultiBuyDiscountsEvaluator</i> now need to be registered as the implementation of the <i class=" ">IMultiBuyDiscountsEvaluator</i> interface using the <i class=" ">RegisterImplementation</i> assembly attribute (instead of registration within a custom inherited <i class=" ">MultiBuyDiscountInfoProvider </i>). Additionally, the signatures of the base class's virtual methods were changed to match the new e-commerce API.</p>
</li><li class=" "><p>Inheriting from the <i class=" ">MultiBuyDiscountsApplicator</i> class is no longer possible. For advanced custom scenarios related to discount application, we recommend creating a separate step (<i class=" ">IShoppingCartCalculator</i> implementation) in the overall shopping cart calculation process. See <a href="customizing-the-shopping-cart-calculation">Customizing the shopping cart calculation</a>.</p>
</li></ul></li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>On-line marketing</span></h4>
<ul class=" "><li class=" "><p>When creating a new <i class=" ">IssueInfo</i> object, you need to set its <i class=" ">IssueDisplayName</i> property before it is saved to the database, i.e., before calling the <i class=" ">SetIssueInfo</i> method.</p>
</li></ul>        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>