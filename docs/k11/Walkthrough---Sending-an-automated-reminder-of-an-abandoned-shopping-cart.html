<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Walkthrough - Sending an automated reminder of an abandoned shopping cart - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68882553"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="On-line-marketing-features.html">On-line marketing features</a></li>
                                                                                                         <li class="shortcut"><a href="Configuring-and-customizing-your-on-line-marketing-features.html">Configuring and customizing your on-line marketing features</a></li>
                                                                                     <li><a href="Configuring-marketing-automation.html">Configuring marketing automation</a></li>
                                                            </ul>
</div>            <h1 id="src-68882553"> <span>Walkthrough - Sending an automated reminder of an abandoned shopping cart</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<div class="section-left"><p>This chapter provides a step-by-step example that you can follow to create a new <a href="marketing-automation">marketing automation</a> process from start to end. In this walkthrough, the goal is to send an automated email when a <a href="customers">customer</a> leaves the website with the <a href="checkout-process">shopping cart</a> that contains products. This scenario presumes the situation when a customer considers purchasing some products but then changes their mind, and the store administrators want to remind the customer of the products.</p><p>In such scenario, customers can be:</p><ul class=" "><li class=" "><p>Registered – the customer has a <a href="user-management">user</a> and a <a href="contact-management">contact</a> assigned.</p>
</li><li class=" "><p>Anonymous with a known email address – the customer has a contact with an email assigned.</p>
</li><li class=" "><p>Anonymous without a known email address.</p>
</li></ul><p>The abandoned cart reminder works with the first two groups – registered customers and anonymous customers whose email address the system knows. You cannot reach customers whose email the system does not know.</p><p>The walkthrough consists of the following steps:</p><div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>You need to <a href="settings---on-line-marketing">enable on-line marketing features</a> to be able to work with this feature.</p>
        </div>
    </div><ol class=" "><li class=" "><p><a href="#src-68882553_walkthroughsendinganautomatedreminderofanabandonedshoppingcart-settingupafterhowmanyhoursshoppingcartsareconsideredasabandoned">Setting up after how many hours shopping carts are considered as abandoned.</a></p>
</li><li class=" "><p><a href="#src-68882553_walkthroughsendinganautomatedreminderofanabandonedshoppingcart-creatingascheduledtaskformarkingshoppingcartsasabandoned">Creating a scheduled task for marking shopping carts as abandoned.</a></p>
</li><li class=" "><p><a href="#src-68882553_walkthroughsendinganautomatedreminderofanabandonedshoppingcart-creatingamarketingautomationprocessforsendingabandonedshoppingcartreminders">Creating a marketing automation process for sending abandoned shopping cart reminders.</a></p>
</li></ol><div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>See the complete example at work on the <a href="installing-the-e-commerce-sample-sites">sample <i class=" ">Dancing Goat</i> site</a>.</p>
        </div>
    </div><h3 id="src-68882553_WalkthroughSendinganautomatedreminderofanabandonedshoppingcart-Settingafterhowmanyhoursshoppingcartsareconsideredasabandoned" class="heading "><span>Setting after how many hours shopping carts are considered as abandoned</span></h3><p>As with most of the e-commerce settings, you can adjust the time after the shopping carts are considered as abandoned for <a href="choosing-site-or-global-e-commerce-configuration">the current site or globally for all your sites running on the Kentico instance</a>. If you run more sites on your instance and all sites should use the same number of hours, use global settings; otherwise, we recommend that you choose site settings.</p><div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>If you are not sure about these settings, see <a href="choosing-site-or-global-e-commerce-configuration">Choosing site or global e-commerce configuration</a> to learn more information about types of e-commerce settings.</p>
        </div>
    </div><ol class=" "><li class=" "><p>Open the <strong class=" ">Store configuration</strong> application (if you want to specify the setting for the current site) or the <strong class=" ">Multistore configuratio</strong><strong class=" ">n</strong> application (if you want to specify the setting globally).</p>
</li><li class=" "><p>In the <strong class=" ">Shopping cart </strong>category of the <strong class=" ">Store settings -&gt; General</strong> tab, enter the following properties to the <strong class=" ">Mark shopping cart as abandoned after (hours)</strong> field:<br></p>
<ul class=" "><li class=" "><p>Clear the <i class=" ">Inherit from global settings</i> option (only if you work in the <strong class=" ">Store configuration</strong> application).</p>
</li><li class=" "><p>Type the desired number of hours after which shopping carts should be considered as abandoned to the text box, for example <i class=" ">15</i>.</p>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li></ol><p>The system updates the settings and scheduled tasks working with this setting use the specified number of hours.</p></div>



    
    
    

    

    <div class="section-right"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882553_walkthroughsendinganautomatedreminderofanabandonedshoppingcart-settingafterhowmanyhoursshoppingcartsareconsideredasabandoned">Setting after how many hours shopping carts are considered as abandoned</a></p>
</li><li class=" "><p><a href="#src-68882553_walkthroughsendinganautomatedreminderofanabandonedshoppingcart-creatingascheduledtaskformarkingshoppingcartsasabandoned">Creating a scheduled task for marking shopping carts as abandoned</a></p>
</li><li class=" "><p><a href="#src-68882553_walkthroughsendinganautomatedreminderofanabandonedshoppingcart-creatingamarketingautomationprocessforsendingabandonedshoppingcartreminders">Creating a marketing automation process for sending abandoned shopping cart reminders</a></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882553_walkthroughsendinganautomatedreminderofanabandonedshoppingcart-setpropertiesoftheprocess">Set properties of the process</a></p>
</li><li class=" "><p><a href="#src-68882553_walkthroughsendinganautomatedreminderofanabandonedshoppingcart-designtheprocess">Design the process</a></p>
</li></ul></li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="checkout-process">Checkout process</a></p>
</li><li class=" "><p><a href="customizing-marking-shopping-carts-as-abandoned">Customizing marking shopping carts as abandoned</a></p>
</li></ul>        </div>
    </div></div>
    
<p></p>
    <div class="confbox admonition admonition-info">
                    <p class="title">Kentico EMS required</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Features described on this page require the <strong class=" ">Kentico EMS</strong> license.</p>
        </div>
    </div>
<p></p>
    <h3 id="src-68882553_WalkthroughSendinganautomatedreminderofanabandonedshoppingcart-Creatingascheduledtaskformarkingshoppingcartsasabandoned" class="heading "><span>Creating a scheduled task for marking shopping carts as abandoned</span></h3>
<p>To set up sending of automated reminders about abandoned shopping carts, you need to create a scheduled task that selects and marks abandoned shopping carts.</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Scheduled tasks </strong>application.</p>
</li><li class=" "><p>Switch to the desired site.<br><br><img class="confluence-embedded-image confluence-content-image-border" src="images/download/attachments/68882553/switching_to_site.png" alt="images/download/attachments/68882553/switching_to_site.png" width="309" height="250">
        <br><span class="caption">Switching to a site</span>
    </p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>You cannot create the task as global. If you do so, the task will not have any effect.</p>
        </div>
    </div>
</li><li class=" "><p>Click <strong class=" ">New task</strong>.</p>
</li><li class=" "><p>Enter the following properties:<br></p>
<ul class=" "><li class=" "><p><strong class=" ">Task display name</strong>: Mark shopping cart as abandoned</p>
</li><li class=" "><p><strong class=" ">Task provider</strong>:</p>
<ul class=" "><li class=" "><p><i class=" ">Assembly name</i>: CMS.Ecommerce</p>
</li><li class=" "><p><i class=" ">Class</i>: CMS.Ecommerce.MarkCartAbandoned</p>
</li></ul></li><li class=" "><p><strong class=" ">Task enabled</strong>: Yes (selected)</p>
</li></ul></li><li class=" "><p>Enter the <a href="reference---scheduled-task-properties">other properties</a> according to your needs.</p>
</li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li></ol><p>The system now marks abandoned shopping carts in the set recurrence.</p>
    <h3 id="src-68882553_WalkthroughSendinganautomatedreminderofanabandonedshoppingcart-Creatingamarketingautomationprocessforsendingabandonedshoppingcartreminders" class="heading "><span>Creating a marketing automation process for sending abandoned shopping cart reminders</span></h3>
<p>To send the reminders, create a marketing automation process.</p>
    <h4 id="src-68882553_WalkthroughSendinganautomatedreminderofanabandonedshoppingcart-Setpropertiesoftheprocess" class="heading "><span>Set properties of the process</span></h4>
<p>First, you need to create a process and specify its properties.</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Marketing automation</strong> application.</p>
</li><li class=" "><p>Click <strong class=" ">New process</strong>.</p>
</li><li class=" "><p>Enter the following properties:<br></p>
<ul class=" "><li class=" "><p><strong class=" ">Display name:</strong> Abandoned shopping cart</p>
</li><li class=" "><p><strong class=" ">Code name</strong>: <i class=" ">leave blank</i><i class=" "><br></i></p>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>After saving, enter the following properties:<br></p>
<ul class=" "><li class=" "><p><strong class=" ">Enabled</strong>: Yes (selected)</p>
</li><li class=" "><p><strong class=" ">Start the process</strong>: If the same process is not running concurrently</p>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>Switch to the <strong class=" ">Triggers</strong> tab.</p>
</li><li class=" "><p>Click <strong class=" ">New trigger</strong>.</p>
</li><li class=" "><p>Enter the following properties:<br></p>
<ul class=" "><li class=" "><p><strong class=" ">Display name</strong>: Shopping cart marked as abandoned</p>
</li><li class=" "><p><strong class=" ">Type</strong>: Contact performed an activity</p>
</li><li class=" "><p><strong class=" ">Activity type</strong>: Shopping cart abandoned</p>
</li><li class=" "><p><strong class=" ">Additional conditions</strong>: <i class=" ">leave blank</i><i class=" "><br></i></p>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li></ol><p>The process is now created without any process steps.</p>
    <h4 id="src-68882553_WalkthroughSendinganautomatedreminderofanabandonedshoppingcart-Designtheprocess" class="heading "><span>Design the process</span></h4>
<p>Second, create the needed process steps. The configuration steps follow the previous steps.</p>
<ol class=" "><li class=" "><p>Switch to the <strong class=" ">Steps </strong>tab.</p>
</li><li class=" "><p>Place the <strong class=" ">Send transactional email </strong>step onto the grid on the line between the <strong class=" ">Start</strong> and <strong class=" ">Finished</strong> steps.</p>
</li><li class=" "><p>Edit the step by clicking the pencil icon next to its name.</p>
</li><li class=" "><p>Enter the following properties:<br></p>
<ul class=" "><li class=" "><p><strong class=" ">From</strong>: <i class=" ">enter your email address, e.g. admin@localhost.local</i></p>
</li><li class=" "><p><strong class=" ">To</strong>: {% Contact.ContactEmail %}</p>
</li><li class=" "><p><strong class=" ">Based on</strong>: HTML formatted text</p>
<ul class=" "><li class=" "><p>Alternatively, if you have an email template prepared, you can select <i class=" ">Email template</i> and then the specific template.</p>
</li></ul></li><li class=" "><p><strong class=" ">Subject</strong>: A Coffee Reminder!</p>
</li><li class=" "><p><strong class=" ">Body</strong>: <i class=" ">type the body of the email. Use macros to generate content and links for the specific contact, for example:</i></p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Macro example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Macro example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">{%</code></div>
<div class="line"><code class="comments">// Gets the site object on which the "Shopping cart abandoned" activity occurred</code></div>
<div class="line"><code class="plain">site = System.GetObject(</code><code class="string">"cms.site"</code><code class="plain">, ActivitySiteID);</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="comments">// Returns the URL of the shopping cart page with the restored content of the abandoned shopping cart</code></div>
<div class="line"><code class="string">"http://"</code><code class="plain"> + site.SiteDomainName + ShoppingCartURL(site.SiteName, ActivityValue) </code></div>
<div class="line"><code class="plain">%}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">{% </code><code class="comments">// Gets a list of the items (products) in the abandoned shopping carts and displays them using the specified transformation</code></div>
<div class="line"><code class="plain">ShoppingCartProducts(ActivityValue).ApplyTransformation(</code><code class="string">"DancingGoat.Transformations.AbandonedCartProducts"</code><code class="plain">)|(encode)</code><code class="keyword">false</code><code class="plain"> %}</code></div>
</div>
    </div>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>The <strong class=" ">ActivityValue</strong> in the macros stores the abandoned shopping cart's identifier (GUID), and ensures that the new cart contains the products from the abandoned cart. The <strong class=" ">ActivitySiteID</strong> stores the identifier of the site where the activity occurred.</p>
<p>For more information, see:</p>
<ul class=" "><li class=" "><p><a href="reference---macro-methods">Reference - Macro methods</a></p>
</li><li class=" "><p><a href="using-transformations-in-macro-expressions">Using transformations in macro expressions</a></p>
</li></ul>        </div>
    </div>
<p><i class=" "><i class=" "><img class="confluence-embedded-image confluence-content-image-border" src="images/download/attachments/68882553/entering_send_email_step_properties.png" alt="images/download/attachments/68882553/entering_send_email_step_properties.png" width="500">
</i><br></i></p>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>Close the step.<br><br></p>
<img class="confluence-embedded-image confluence-content-image-border" src="images/download/attachments/68882553/send_email_step_added.png" alt="images/download/attachments/68882553/send_email_step_added.png" width="500">
        <br><span class="caption">The Send email step added</span>
    </li></ol><p>The marketing automation process is now completed. The system automatically sends an email after the specified number of days based on the specified HTML text (or an email template) to every customer who puts products in the shopping cart and then leaves.</p>
    <div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Designing more complicated processes</strong></p>
<p>If you want to design a more complex process, see <a href="walkthrough---creating-a-marketing-automation-process">another walkthrough</a> describing in more detail all steps of creating a marketing automation process.</p>
        </div>
    </div>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>