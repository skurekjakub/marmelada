<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Working with consents - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260" elementpageid="76844000">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=76844000"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Configuring-Kentico.html">Configuring Kentico</a></li>
                                                                                     <li><a href="GDPR-compliance.html">GDPR compliance</a></li>
                                                            </ul>
</div>            <h1 id="src-76844000"> <span>Working with consents</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<div class="sp-grid-section"><div class="sp-grid-cell sp-grid-60"><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-60"><p>In Kentico, consents are records used to inform website visitors about the means of collecting and manipulating their personal data by the system, site administrators, marketers and anyone else who has access to said data, including third-parties to whom this data is forwarded.</p><p>You can use consents to comply with the requirements of the <a href="gdpr-compliance">GDPR</a> and other personal data regulations.</p><p>Whenever any personal data of a visitor is obtained, it is necessary to have a consent agreement from the visitor to legally process this data. This includes <a href="working-with-contacts">tracking of contacts</a> and their <a href="tracking-contact-activities">activities</a> on the live site. Every consent agreement of a visitor is directly connected to a corresponding <a href="working-with-contacts">contact</a>. Deleting contacts from the system therefore also causes deletion of the contact's consent agreements.</p><div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Definition of consent</strong></p>
<p>"'Consent'<i class=" "> </i>of the data subject means any freely given, specific, informed and unambiguous indication of the data subject's wishes by which he or she, by a statement or by a clear affirmative action, signifies agreement to the processing of personal data relating to him or her."</p>
<p>(Source: <a class="external-link" href="http://eur-lex.europa.eu/legal-content/EN/TXT/HTML/?uri=CELEX:32016R0679#d1e1489-1-1">GDPR Article 4</a>, Paragraph 11)</p>
        </div>
    </div><p>This page describes how to define consents, and give visitors options to give various types of consent agreements.</p><div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Tip</strong>: To learn which types of GDPR compliance scenarios you can resolve using consents, see the following blog post: <a class="external-link" href="https://www.kentico.com/blog/gdpr-building-consents-and-privacy-notices">GDPR – Building Consents and Privacy Notices</a>. The post also provides tips on writing consent texts and real-world examples.</p>
        </div>
    </div><h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Creating consents</span></h3><ol class=" "><li class=" "><p>Open the <strong class=" ">Data protection</strong> application and switch to the <strong class=" ">Consents</strong> tab.</p>
</li><li class=" "><p>Click <strong class=" ">New consent</strong>.</p>
</li><li class=" "><p>Type a <strong class=" ">Display name</strong> and click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>On the <strong class=" ">Consent text</strong> tab, use the provided text areas to compose the content of the consent:<br></p>
<ul class=" "><li class=" "><p><strong class=" ">Short text</strong> – a brief explanation of the consent's content for public users. The short text is shown to visitors when presenting an option to give consent agreements.</p>
</li><li class=" "><p><strong class=" ">Full text</strong> – contains the full content of the consent. The full text content can be made available to everyone upon request, preferably through a dedicated privacy policy page.</p>
</li></ul></li><li class=" "><p>When you are finished with the work, click <strong class=" ">Save</strong> (or <strong class=" ">Save this language version</strong> if multiple cultures are assigned to the current site).</p>
</li><li class=" "><p>(If multiple website cultures are present) Switch between cultures using the <strong class=" ">Language of consent</strong> selector and write the consent texts in the given languages. The selector lists all cultures available for the current site.<br><img class="confluence-embedded-image" src="images/download/attachments/76844000/consent_language.png" alt="images/download/attachments/76844000/consent_language.png" width="500">
    </p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Handling of untranslated consents</strong></p>
<p>If a consent is not available for the culture selected by a visitor, the website's default culture is used instead.</p>
        </div>
    </div>
</li></ol><div class="sp-grid-section"></div><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-76844000_workingwithconsents-creatingconsents">Creating consents</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-settinguptrackingconsent">Setting up tracking consent</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-addingconsentstoon-lineforms">Adding consents to on-line forms</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-addingconsentstonewslettersubscriptions">Adding consents to newsletter subscriptions</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-addingconsentstouserregistration">Adding consents to user registration</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-displayingconsentsonthelivesite">Displaying consents on the live site</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-allowingvisitorstorevokeconsentagreements">Allowing visitors to revoke consent agreements</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-viewingarchivedconsents">Viewing archived consents</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-creatingmacroconditionsbasedongivenconsents">Creating macro conditions based on given consents</a></p>
</li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="gdpr-compliance">GDPR compliance</a></p>
</li><li class=" "><p><a href="adding-cookie-law-consent-to-web-pages">Adding cookie law consent to web pages</a></p>
</li><li class=" "><p><a href="revoking-consent-agreements">Revoking consent agreements</a></p>
</li><li class=" "><p><a href="working-with-consents-on-mvc-sites">Working with consents on MVC sites</a></p>
</li></ul>        </div>
    </div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-76844000_workingwithconsents-creatingconsents">Creating consents</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-settinguptrackingconsent">Setting up tracking consent</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-addingconsentstoon-lineforms">Adding consents to on-line forms</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-addingconsentstonewslettersubscriptions">Adding consents to newsletter subscriptions</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-addingconsentstouserregistration">Adding consents to user registration</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-displayingconsentsonthelivesite">Displaying consents on the live site</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-allowingvisitorstorevokeconsentagreements">Allowing visitors to revoke consent agreements</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-viewingarchivedconsents">Viewing archived consents</a></p>
</li><li class=" "><p><a href="#src-76844000_workingwithconsents-creatingmacroconditionsbasedongivenconsents">Creating macro conditions based on given consents</a></p>
</li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="gdpr-compliance">GDPR compliance</a></p>
</li><li class=" "><p><a href="adding-cookie-law-consent-to-web-pages">Adding cookie law consent to web pages</a></p>
</li><li class=" "><p><a href="revoking-consent-agreements">Revoking consent agreements</a></p>
</li><li class=" "><p><a href="working-with-consents-on-mvc-sites">Working with consents on MVC sites</a></p>
</li></ul>        </div>
    </div></div></div><div class="sp-grid-section"></div>


    

    
    
    
    
<p></p>
    <div class="confbox admonition admonition-info">
                    <p class="title">Kentico EMS required</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Features described on this page require the <strong class=" ">Kentico EMS</strong> license.</p>
        </div>
    </div>
<p></p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Setting up tracking consent</span></h3>
<p>When creating a consent for the <a href="working-with-contacts">tracking of contacts</a> and <a href="tracking-contact-activities">activities</a>, you also need to provide a way for visitors to adjust their allowed <a href="cookie-levels">cookie level</a>. The system only performs the tracking for visitors whose cookie level is <strong class=" ">Visitor</strong> or higher (i.e. <strong class=" ">All cookies</strong> in the configuration of cookie law web parts).</p>
    <div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Prerequisites</strong></p>
<p><strong class=" ">On-line marketing</strong> must be enabled to allow contact creation:</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Settings</strong> application.</p>
</li><li class=" "><p>Navigate to the <strong class=" ">On-line marketing</strong> category in the settings tree.</p>
</li><li class=" "><p>Select the <strong class=" ">Enable on-line marketing</strong> check box.</p>
</li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li></ol>        </div>
    </div>
<p>To ensure that visitors are not tracked until they give the tracking consent, you need to set the <strong class=" ">default cookie level</strong> for your website:</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Settings</strong> application.</p>
</li><li class=" "><p>Navigate to the <strong class=" ">System</strong> category in the settings tree.</p>
</li><li class=" "><p>Set the value of the <strong class=" ">Default cookie level</strong> setting to <i class=" ">System</i> or <i class=" ">Essential</i>.</p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>With the <strong class=" ">System</strong> cookie level, basic functionality such as authentication and language selection will not work for visitors by default.</p>
<p>If possible, we recommend setting the level to <strong class=" ">Essential</strong> (or higher if you are not legally required to obtain tracking consent). However, you may need to verify that the <i class=" ">Essential</i> cookies are compliant with any applicable legal requirements and regulations.</p>
        </div>
    </div>
</li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li></ol><p>To allow visitors to give or revoke agreements with the tracking consent:</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Pages</strong> application.</p>
</li><li class=" "><p><a href="using-and-configuring-web-parts">Add</a> the <strong class=" ">Cookie law and tracking consent</strong> web part to a suitable location on your website (we recommend the main <a href="creating-portal-engine-master-pages">master page</a> that defines the shared content of all pages).</p>
</li><li class=" "><p>Select an appropriate consent via the web part's <strong class=" ">Tracking consent</strong> property (in the <strong class=" ">On-line marketing</strong> category).</p>
</li><li class=" "><p>Configure the web part in a way that allows visitors to enable <i class=" ">All cookies</i>.</p>
</li><li class=" "><p>Click <strong class=" ">Save &amp; Close</strong>.</p>
</li></ol><p>Now when a visitor arrives on your website, the system does not track them as a contact until they give their consent via the <i class=" ">Cookie law and tracking consent</i> web part. For visitors whose cookie level is lower than <i class=" ">Visitor</i> (i.e. <i class=" ">No cookies</i> or <i class=" ">Only essential cookies</i> in the web part configuration), the web part additionally displays the <i class=" ">Short text</i> of the selected tracking consent.</p>
<p>When a visitor changes their allowed cookie level, the web part automatically manages agreements for the assigned tracking consent:</p>
<ul class=" "><li class=" "><p>When a visitor raises their cookie level to <i class=" ">All cookies</i>, a consent agreement is created for the new contact.</p>
</li><li class=" "><p>If a visitor lowers their cookie level, the corresponding tracking consent agreement is revoked.</p>
</li></ul><p>The following is a sample configuration of the <strong class=" ">Cookie law and tracking consent</strong> web part. You can modify the properties and use this as a basis for your own setup.</p>
<ul class=" "><li class=" "><p><strong class=" ">Levels</strong> category:<br></p>
<ul class=" "><li class=" "><p><strong class=" ">Compare current cookie level to</strong>: All cookies</p>
</li></ul></li><li class=" "><p><strong class=" ">Below level behavior</strong> category:</p>
<ul class=" "><li class=" "><p><strong class=" ">If level is below, display</strong>: Enabled<br><strong class=" "></strong></p>
</li><li class=" "><p><strong class=" ">Text</strong>:<strong class=" "> </strong>Only system cookies are currently stored. Tracking of activities and analytics features are disabled.</p>
</li><li class=" "><p><strong class=" ">Show deny button</strong>: Disabled</p>
</li><li class=" "><p><strong class=" ">Show allow specific button</strong>: Disabled</p>
</li><li class=" "><p><strong class=" ">Show allow all button</strong>: Enabled</p>
</li></ul></li><li class=" "><p><strong class=" ">Exact level behavior</strong> category:<br></p>
<ul class=" "><li class=" "><p><strong class=" ">If level matches, display</strong>: Enabled</p>
</li><li class=" "><p><strong class=" ">Text</strong>: The website now stores cookies on your computer, tracks activity, creates personalized content and processes analytics. You can find more information on our privacy page.</p>
</li><li class=" "><p><strong class=" ">Show deny button</strong>: Disabled</p>
</li><li class=" "><p><strong class=" ">Show allow specific button</strong>: Disabled</p>
</li><li class=" "><p><strong class=" ">Show allow all button</strong>: Disabled</p>
</li></ul></li><li class=" "><p><strong class=" ">Above level behavior</strong> category:<br></p>
<ul class=" "><li class=" "><p><strong class=" ">If level is above, display</strong>: Disabled</p>
</li></ul></li><li class=" "><p><strong class=" ">Consent buttons</strong> category:<br></p>
<ul class=" "><li class=" "><p><strong class=" ">Allow all button text</strong>: I agree</p>
</li></ul></li><li class=" "><p><strong class=" ">On-line marketing</strong> category:</p>
<ul class=" "><li class=" "><p><strong class=" ">Tracking consent</strong>: <i class=" ">Select the consent to which you want visitors to give consent</i></p>
</li><li class=" "><p><strong class=" ">Consent reference markup</strong>: <i class=" ">Add any HTML content that you wish to render after the short text of the selected consent. For example, can be used to display a pop-up window or a link to a page with the full text version of the consent.<br></i></p>
</li></ul></li></ul>    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Message visibility for administrators</strong></p>
<p>All users who access the Kentico administration interface automatically have all cookies enabled and stored in their browser. As a result, you might not see the <i class=" ">Cookie law and tracking consent</i> message if you view the live site after adding the web part.</p>
<p>To check whether your configuration of the cookie web part is correct, open the website in a different browser or computer, or use a separate anonymous/private/incognito window of your current browser.</p>
        </div>
    </div>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Adding consents to on-line forms</span></h3>
<p>To collect consent agreements regarding the processing of personal data submitted by visitors through <a href="forms">on-line forms</a>, utilize the <strong class=" ">Consent agreement</strong> form control.</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Forms</strong> application and edit (<img class="confluence-embedded-image confluence-thumbnail" src="images/download/thumbnails/68879208/edit.png" alt="images/download/thumbnails/68879208/edit.png" height="13">
) the form to which you want to add the option to give consent.</p>
</li><li class=" "><p>Switch to the <strong class=" ">Fields</strong> tab.</p>
</li><li class=" "><p>Click <strong class=" ">New field</strong> and set the following properties:</p>
<ul class=" "><li class=" "><p><strong class=" ">Field name</strong>: Consent</p>
</li><li class=" "><p><strong class=" ">Data type</strong>: Unique identifier (GUID)</p>
</li><li class=" "><p><strong class=" ">Form control</strong>: Consent agreement</p>
</li><li class=" "><p><strong class=" ">Editing control settings -&gt; Consent</strong>: <i class=" ">Select the desired consent<br></i></p>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>Move the consent field to the appropriate location within the form.</p>
</li><li class=" "><p>If you use a custom form layout, switch to the <strong class=" ">Layout</strong> tab and <a href="defining-custom-form-layout">edit the form layout</a> to display the consent field.</p>
</li></ol><p>The consent field in the resulting form displays a check box, followed by the <i class=" ">Short text</i> of the given consent. When a visitor selects the consent checkbox and submits the form, the system automatically creates a corresponding consent agreement for the given contact.</p>
<p><img class="confluence-embedded-image confluence-content-image-border" src="images/download/attachments/76844000/consent_agreement_form.png" alt="images/download/attachments/76844000/consent_agreement_form.png" width="500">
        <br><span class="caption">Consent agreement field displayed in a form</span>
    </p>
    <div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Note</strong>: The system does not support consent fields that are required. If you enable the <strong class=" ">Required</strong> property for consent fields, the validation will always fail (the system sets the field's value only after the form is submitted).</p>
        </div>
    </div>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Adding consents to newsletter subscriptions</span></h3>
<p>To collect consent agreements from visitors who subscribe to<a href="creating-newsletters"> newsletters</a>, utilize the <strong class=" ">Custom subscription form</strong> web part and an <a href="creating-alternative-forms">alternative form</a> with a field using the <strong class=" ">Consent agreement</strong> form control.</p>
    <div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>To ensure that the consent agreements are recorded correctly for each subscriber, make sure that <strong class=" ">Newsletter - Subscriber</strong> class is <a href="mapping-fields-to-contact-attributes">configured to map</a> the subscription form's <strong class=" ">Email address</strong> field to the email address contact attribute.</p>
        </div>
    </div>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Modules</strong> application.</p>
</li><li class=" "><p>Edit (<img class="confluence-embedded-image confluence-thumbnail" src="images/download/thumbnails/68879208/edit.png" alt="images/download/thumbnails/68879208/edit.png" height="13">
) the <strong class=" ">Email marketing</strong> module.</p>
</li><li class=" "><p>Select the <strong class=" ">Classes</strong> tab and edit the <strong class=" ">    <span style="color: #262524;">
Newsletter - Subscriber    </span>
</strong> (newsletter.subscriber)<strong class=" "> </strong>class.</p>
</li><li class=" "><p>Open the <strong class=" ">Alternative forms</strong> tab.</p>
</li><li class=" "><p>Edit the alternative form that you use for subscriptions on your website.</p>
</li><li class=" "><p>Switch to the <strong class=" ">Fields </strong>tab.</p>
</li><li class=" "><p>Add a <strong class=" ">New field</strong> using the <i class=" ">Consent agreement</i> form control. See <a href="#src-76844000_workingwithconsents-addingconsentstoon-lineforms">Adding consents to on-line forms</a> for details.</p>
</li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>If you use a custom form layout, switch to the <strong class=" ">Layout</strong> tab and edit the form layout to display the consent field.</p>
</li></ol><p>Make sure that pages containing your newsletter subscription form use the <strong class=" ">Custom subscription form</strong> web part with the correct alternative form.</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Pages</strong> application and select the appropriate page.</p>
</li><li class=" "><p>Switch to the <strong class=" ">Design</strong> tab and <a href="using-and-configuring-web-parts">place</a> the <strong class=" ">Custom subscription form</strong> web part.</p>
<ul class=" "><li class=" "><p>Select the correct <strong class=" ">Alternative form</strong>.</p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>To allow signed in users to give consent agreements, you need to disable the <strong class=" ">One-click subscription for signed in users</strong> property of the <strong class=" ">Custom subscription form</strong> web part.</p>
        </div>
    </div>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save &amp; Close</strong>.</p>
</li></ol><p>The consent field in the resulting form displays a check box, followed by the <i class=" ">Short text</i> of the given consent. When a visitor selects the consent checkbox and submits the subscription form, the system automatically creates a corresponding consent agreement for the given contact.</p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Adding consents to user registration</span></h3>
<p>To collect consent agreements from visitors who register as new users, utilize the <strong class=" ">Custom registration form</strong> web part and an <a href="creating-alternative-forms">alternative form</a> with a field using the <strong class=" ">Consent agreement</strong> form control.</p>
    <div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>To ensure that the consent agreements are recorded correctly for each visitor, make sure that:</p>
<ul class=" "><li class=" "><p>Your registration form contains an <strong class=" ">Email address</strong> field</p>
</li><li class=" "><p>The <strong class=" ">User</strong> class is <a href="mapping-fields-to-contact-attributes">configured to map</a> the given email address field to the email address contact attribute</p>
</li></ul>        </div>
    </div>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Modules</strong> application.</p>
</li><li class=" "><p>Edit (<img class="confluence-embedded-image confluence-thumbnail" src="images/download/thumbnails/68879208/edit.png" alt="images/download/thumbnails/68879208/edit.png" height="13">
) the <strong class=" ">Membership</strong> module.</p>
</li><li class=" "><p>Select the <strong class=" ">Classes</strong> tab and edit the <strong class=" ">User</strong> (cms.user) class.</p>
</li><li class=" "><p>Open the <strong class=" ">Alternative forms</strong> tab.</p>
</li><li class=" "><p>Edit the alternative form that you use for registration on your website.</p>
</li><li class=" "><p>Switch to the <strong class=" ">Fields </strong>tab.</p>
</li><li class=" "><p>Add a <strong class=" ">New field</strong> using the <i class=" ">Consent agreement</i> form control. See <a href="#src-76844000_workingwithconsents-addingconsentstoon-lineforms">Adding consents to on-line forms</a> for details.</p>
</li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>If you use a custom form layout, switch to the <strong class=" ">Layout</strong> tab and edit the form layout to display the consent field.</p>
</li></ol><p>Make sure that your site's registration page contains the <strong class=" ">Custom registration form</strong> web part with the correct alternative form. For more information about custom registration forms in general, see <a href="using-the-registration-form-and-custom-registration-form-web-parts">Using the Custom registration form web part.</a></p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Pages</strong> application and select your registration page.</p>
</li><li class=" "><p>Switch to the <strong class=" ">Design</strong> tab and <a href="using-and-configuring-web-parts">place</a> the <strong class=" ">Custom registration form</strong> web part.<br></p>
<ul class=" "><li class=" "><p>Select the correct <strong class=" ">Alternative form</strong>.</p>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save &amp; Close</strong>.</p>
</li></ol><p>The consent field in the resulting form displays a check box, followed by the <i class=" ">Short text</i> of the given consent. When a visitor fills in the registration form and selects the consent checkbox, the system automatically creates a corresponding consent agreement for the given contact.</p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Displaying consents on the live site</span></h3>
<p>To display the short and full text of consents on the live site, for example on your website's privacy policy page, first get the consent object using the <i class=" ">GlobalObjects.Consents.&lt;ConsentCodeName&gt;</i> macro (use the indexer macro format <i class=" ">GlobalObjects.Consents["&lt;ConsentCodeName&gt;"]</i> if the code name contains any special characters, like a hyphen). Then call the consent object's <i class=" ">GetConsentText()</i> macro method, which returns a <i class=" ">ConsentText</i> object providing consent text values in its <i class=" ">ShortText</i> and <i class=" ">FullText</i> properties.</p>
<p>By default, the <i class=" ">GetConsentText()</i> macro method returns consent texts in the culture selected by the current visitor. To get a specific culture version of the consent text, add the <i class=" ">cultureCode</i> parameter: <i class=" ">GetConsentText(string cultureCode)</i><br></p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Pages</strong> application.</p>
</li><li class=" "><p>Navigate to a page where you want to add the consent text.</p>
</li><li class=" "><p><a href="using-and-configuring-web-parts">Add</a> a <strong class=" ">Static text</strong> web part to the page.</p>
</li><li class=" "><p class="confluence-link">In the web part's configuration, enter HTML content with the required macros into the <strong class=" ">Text</strong> property (under the <strong class=" ">Content</strong> category).</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;h3&gt;{% GlobalObjects.Consents[</code><code class="string">"DancingGoatMachineRentalForm"</code><code class="plain">].ConsentDisplayName %}&lt;/h3&gt;</code></div>
<div class="line"><code class="plain">&lt;p&gt;{% GlobalObjects.Consents[</code><code class="string">"DancingGoatMachineRentalForm"</code><code class="plain">].GetConsentText().ShortText %}&lt;/p&gt;</code></div>
<div class="line"><code class="plain">&lt;p&gt;{% GlobalObjects.Consents[</code><code class="string">"DancingGoatMachineRentalForm"</code><code class="plain">].GetConsentText().FullText %}&lt;/p&gt;</code></div>
</div>
    </div>
</li><li class=" "><p>Click <strong class=" ">Save &amp; Close</strong>.</p>
</li></ol>    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Allowing visitors to revoke consent agreements</span></h3>
<p>Kentico does not provide any ready-to-use components for revoking consent agreements. Each website has its own <a href="personal-data-in-kentico">personal data</a> processing requirements and its own unique set of consents, so your developers need to create custom components for this purpose.</p>
<p>See <a href="revoking-consent-agreements">Revoking consent agreements</a> for details.</p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Viewing archived consents</span></h3>
<p>When a visitor gives a consent agreement, it is based on the exact text of the consent at the given time. However, consent texts may change at a later time.</p>
<p>To keep track of the exact consent versions for which visitors have given agreements, the system performs automatic consent archiving. When a consent with at least one agreement is modified and saved, an archived version of the original consent text is created. Every archived consent is represented by a unique hash string, and consists of all language versions created for the given consent.</p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Modifying consents</strong></p>
<p>When making major changes to consent texts, the best practice is to create new consents rather than modifying existing consents.</p>
        </div>
    </div>
<p>To see the archived versions of a specific consent and all of its language version:</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Data protection</strong> application.</p>
</li><li class=" "><p>Switch to the <strong class=" ">Consents</strong> tab.</p>
</li><li class=" "><p>Edit (<img class="confluence-embedded-image confluence-thumbnail" src="images/download/thumbnails/68879208/edit.png" alt="images/download/thumbnails/68879208/edit.png" height="13">
) the given consent.</p>
</li><li class=" "><p>Switch to the <strong class=" ">Consent archive</strong> tab.</p>
</li></ol><p>The tab displays all archived versions of the selected consent for which at least one visitor has given an agreement. You can view (<img class="confluence-embedded-image confluence-thumbnail" src="images/download/thumbnails/68879208/open_live_site.png" alt="images/download/thumbnails/68879208/open_live_site.png" height="13">
) the short and full text of the consent language versions.</p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Creating macro conditions based on given consents</span></h3>
<p>You can use the <i class=" ">AgreedWithConsent</i> <a href="on-line-marketing-macros">macro method</a> and the <i class=" ">Contact has agreed with consent</i> <a href="building-conditions-using-macro-rules">macro rule</a> to check if a contact has given an agreement with a specified consent. You can use them in the following ways:</p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>The <i class=" ">AgreedWithConsent</i> macro method resolves to false even if called for a contact object that does not exist. This is important, because if a visitor does not accept the tracking consent, the system does not create a contact associated with this visitor (i.e. <i class=" ">OnlineMarketingContext.CurrentContact</i> is null).</p>
        </div>
    </div>
<ul class=" "><li class=" "><p>On the live site, you can use the macro to build conditional content based on the current contact's consents. For example, to display different text to visitors who have given an agreement with a consent:</p>
<ol class=" "><li class=" "><p><a href="using-and-configuring-web-parts">Add</a> a <strong class=" ">Static text</strong> web part to a page.</p>
</li><li class=" "><p class="confluence-link">Enter the following code into the <strong class=" ">Text</strong> property under the <strong class=" ">Content</strong> category.</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">{% </code><code class="keyword">if</code><code class="plain"> (OnlineMarketingContext.CurrentContact.AgreedWithConsent(</code><code class="string">"ConsentCodeName"</code><code class="plain">)) {</code><code class="string">"Thank you for accepting the consent."</code><code class="plain">} </code><code class="keyword">else</code><code class="plain"> {</code><code class="string">"Please accept the consent."</code><code class="plain">} %}</code></div>
</div>
    </div>
</li></ol></li><li class=" "><p>On the live site, you can use the macro to adjust the properties of web parts. For example, to show a web part only to those visitors who have given an agreement with a consent:</p>
<ol class=" "><li class=" "><p><a href="using-and-configuring-web-parts">Modify</a> an existing web part.</p>
</li><li class=" "><p>Expand the <strong class=" ">Visibility</strong> category. Click the <i class=" ">Edit value</i> icon (<img class="confluence-embedded-image confluence-thumbnail" src="images/download/thumbnails/68879208/edit_value.png" alt="images/download/thumbnails/68879208/edit_value.png" height="13">
) next to the <strong class=" ">Visible</strong> check box to enter a macro condition.</p>
</li><li class=" "><p>Enter the following code into the editor:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">{% OnlineMarketingContext.CurrentContact.AgreedWithConsent(</code><code class="string">"ConsentCodeName"</code><code class="plain">) %}</code></div>
</div>
    </div>
</li></ol></li><li class=" "><p>In on-line marketing modules such as <a href="personas">personas</a>, <a href="scoring-contacts">contact scoring</a>, <a href="marketing-automation">marketing automation</a> and <a href="segmenting-contacts-into-contact-groups">contact groups</a> you can use the macro rule to create rules and segment visitors. For example, to create a contact group which contains users who have given an agreement with a consent:</p>
<ol class=" "><li class=" "><p><a href="segmenting-contacts-into-contact-groups">Set up</a> a condition-based contact group.</p>
</li><li class=" "><p>Click <strong class=" ">Edit</strong> next to the <strong class=" ">Macro condition</strong> field to open the <strong class=" ">Rule designer</strong> interface.</p>
</li><li class=" "><p>Use the <i class=" ">Contact has agreed with consent</i> rule and select the desired consent.</p>
</li></ol></li></ul>        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>