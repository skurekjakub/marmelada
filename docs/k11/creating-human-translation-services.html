<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Creating human translation services - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260" elementpageid="68882113">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68882113"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Custom-development.html">Custom development</a></li>
                                                                                                         <li class="shortcut"><a href="Miscellaneous-custom-development-tasks.html">Miscellaneous custom development tasks</a></li>
                                                                                     <li><a href="Developing-custom-translation-services.html">Developing custom translation services</a></li>
                                                            </ul>
</div>            <h1 id="src-68882113"> <span>Creating human translation services</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<div class="sp-grid-section"><div class="sp-grid-cell sp-grid-60"><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-60"><p>To develop a custom human translation service, you need to define a class that inherits from <strong class=" ">AbstractHumanTranslationService</strong> (found in the <strong class=" ">CMS.TranslationServices</strong> namespace).</p><p>The service class must override and implement the following abstract methods:</p><div class="tablewrap">
        <table class="confluenceTable">
        <thead class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Method</p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>IsAvailable</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Checks whether the service is appropriately configured and ready to be used. For example, you can confirm that valid connection credentials are specified for the service in the website settings or check whether there is sufficient credit to perform translations.</p>
<p>When translating pages, users can only choose the service if the <i class=" ">IsAvailable</i> method returns a <i class=" ">true</i> value.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>IsSourceLanguageSupported</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Checks whether the service supports translation from a specific language.</p>
<p>The system calls this method before creating new translation submissions for the service. Users can only create submissions if the <i class=" ">IsSourceLanguageSupported</i> method of the selected service returns a true value for the source language.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>IsTargetLanguageSupported</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Checks whether the service supports translation to a specific language.</p>
<p>The system calls this method before creating new translation submissions for the service. Users can only create submissions if the <i class=" ">IsTargetLanguageSupported</i> method of the selected service returns a true value for the target language.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>CreateSubmission</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Delivers the translation assignment to the translators. Called when creating new translation submissions for the service or resubmitting existing ones.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>CancelSubmission</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Executed when a user cancels a translation submission in the <strong class=" ">Translations</strong> application.</p>
<p>Depending on the type of the service, you can delete the submission's physical file, call the appropriate service API or otherwise inform the translators that the submission has been canceled.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>DownloadCompletedTranslations</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Retrieves translated content from the service and imports it into the submission tickets.</p>
<p>The system automatically calls this method when updating the status of translation submissions, which can be triggered by:</p>
<ul class=" "><li class=" "><p>Users clicking <strong class=" ">Update statuses</strong> in the <strong class=" ">Translations</strong> application<strong class=" "><br></strong></p>
</li><li class=" "><p>Execution of the <strong class=" ">Translation retrieval</strong> scheduled task<br><br></p>
</li></ul>            </td>
        </tr>
</tbody>        </table>
            </div><div class="sp-grid-section"></div><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882113_creatinghumantranslationservices-defininghumanserviceclasses">Defining human service classes</a></p>
</li><li class=" "><p><a href="#src-68882113_creatinghumantranslationservices-registeringhumantranslationservices">Registering human translation services</a></p>
</li><li class=" "><p><a href="#src-68882113_creatinghumantranslationservices-addingcustomsettingsfortranslationservices">Adding custom settings for translation services</a></p>
</li><li class=" "><p><a href="#src-68882113_creatinghumantranslationservices-result">Result</a></p>
</li></ul><p></p>
        </div>
    </div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882113_creatinghumantranslationservices-defininghumanserviceclasses">Defining human service classes</a></p>
</li><li class=" "><p><a href="#src-68882113_creatinghumantranslationservices-registeringhumantranslationservices">Registering human translation services</a></p>
</li><li class=" "><p><a href="#src-68882113_creatinghumantranslationservices-addingcustomsettingsfortranslationservices">Adding custom settings for translation services</a></p>
</li><li class=" "><p><a href="#src-68882113_creatinghumantranslationservices-result">Result</a></p>
</li></ul><p></p>
        </div>
    </div></div></div><div class="sp-grid-section"></div>

    
    
<p></p>
    <div class="confbox admonition admonition-info">
                    <p class="title">Kentico EMS required</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Features described on this page require the <strong class=" ">Kentico EMS</strong> license.</p>
        </div>
    </div>
<p></p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Defining human service classes</span></h3>
<p>This example shows the implementation of a translation service that saves translation submissions into zip packages and exports them into a designated folder. It also provides a way to automatically load completed translations from an import folder. This sample service is a simplified version of the default Manual translation service.</p>
<ol class=" "><li class=" "><p>Open your web project in Visual Studio.</p>
</li><li class=" "><p>Add a new class into the <strong class=" ">App_Code</strong> folder (or <strong class=" ">Old_App_Code</strong> on web application installations). For example, name the class <strong class=" ">SampleTS.cs</strong>.</p>
</li><li class=" "><p>Change the class declaration and add references according to the following code:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> System;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> System.Text;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> System.Data;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> System.Collections.Generic;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> System.Collections;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> System.Web;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.TranslationServices;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.DataEngine;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.Helpers;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.IO;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.DataEngine;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Sample human translation service.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> SampleTS : AbstractHumanTranslationService</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">}&nbsp;</code></div>
</div>
    </div>
</li><li class=" "><p>Add the following properties into the class:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Gets the path of the folder to which the service exports translation submissions.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">string</code><code class="plain"> ExportFolder</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">get</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">string</code><code class="plain"> folder = SettingsKeyInfoProvider.GetValue(SiteName + </code><code class="string">".SampleTranslationExportFolder"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">if</code><code class="plain"> (</code><code class="keyword">string</code><code class="plain">.IsNullOrEmpty(folder))</code></div>
<div class="line"><code class="plain">        {</code></div>
<div class="line"><code class="plain">            </code><code class="comments">// Sets a default export folder if the path can't be loaded from the site settings.</code></div>
<div class="line"><code class="plain">            folder = </code><code class="string">"~/App_Data/Translations/Export/"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">return</code><code class="plain"> URLHelper.GetPhysicalPath(folder);</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Gets the path of the folder that the service checks for files containing completed translations.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">string</code><code class="plain"> ImportFolder</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">get</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">string</code><code class="plain"> folder = SettingsKeyInfoProvider.GetValue(SiteName + </code><code class="string">".SampleTranslationImportFolder"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">if</code><code class="plain"> (</code><code class="keyword">string</code><code class="plain">.IsNullOrEmpty(folder))</code></div>
<div class="line"><code class="plain">        {</code></div>
<div class="line"><code class="plain">            </code><code class="comments">// Sets a default import folder if the path can't be loaded from the site settings.</code></div>
<div class="line"><code class="plain">            folder = </code><code class="string">"~/App_Data/Translations/Import/"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">return</code><code class="plain"> URLHelper.GetPhysicalPath(folder);</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">} </code></div>
</div>
    </div>
<p><br>The <strong class=" ">ExportFolder</strong> and <strong class=" ">ImportFolder</strong> properties load the translation folder paths from the website settings. If the setting values are not available, the properties return default folder paths. The <strong class=" ">SiteName</strong> property used to build the setting key names is inherited from the parent class. It gets the code name of the site from which the translation was submitted.<br><br></p>
</li><li class=" "><p>Define the required methods inside the class:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">IsAvailable</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="IsAvailable" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Checks if all conditions required to run the service are fulfilled.</code></div>
<div class="line"><code class="comments">/// The sample service only needs to know the paths for its import and export folders, but it uses default paths if the values are not specified through the settings. </code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">bool</code><code class="plain"> IsAvailable()</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="comments">// Returns a true value to indicate that the service is always available.</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">true</code><code class="plain">;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">IsSourceLanguageSupported</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="IsSourceLanguageSupported" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Checks if the service supports a specific source language.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="comments">/// &lt;param name="langCode"&gt;Culture code of the source language to be checked&lt;/param&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">bool</code><code class="plain"> IsSourceLanguageSupported(</code><code class="keyword">string</code><code class="plain"> langCode)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="comments">// All source languages are supported.</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">true</code><code class="plain">;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">IsTargetLanguageSupported</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="IsTargetLanguageSupported" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Checks if the service supports a specific target language.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="comments">/// &lt;param name="langCode"&gt;Culture code of the target language to be checked&lt;/param&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">bool</code><code class="plain"> IsTargetLanguageSupported(</code><code class="keyword">string</code><code class="plain"> langCode)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="comments">// All target languages are supported.</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">true</code><code class="plain">;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">CreateSubmission</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="CreateSubmission" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Creates a new submission or resubmits it if the submission ticket already exists.</code></div>
<div class="line"><code class="comments">/// Returns an empty string if all operations are successful or the details of the encountered error.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="comments">/// &lt;param name="submission"&gt;Info object representing the translation submission&lt;/param&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">string</code><code class="plain"> CreateSubmission(TranslationSubmissionInfo submission)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">try</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">if</code><code class="plain"> (submission != </code><code class="keyword">null</code><code class="plain">)</code></div>
<div class="line"><code class="plain">        {</code></div>
<div class="line"><code class="plain">            </code><code class="comments">// Gets the path of the zip file containing the submission.</code></div>
<div class="line"><code class="plain">            </code><code class="keyword">string</code><code class="plain"> path = </code><code class="keyword">null</code><code class="plain">;</code></div>
<div class="line"><code class="plain">            </code><code class="keyword">if</code><code class="plain"> (</code><code class="keyword">string</code><code class="plain">.IsNullOrEmpty(submission.SubmissionTicket))</code></div>
<div class="line"><code class="plain">            {</code></div>
<div class="line"><code class="plain">                path = Path.Combine(</code><code class="keyword">this</code><code class="plain">.ExportFolder, ValidationHelper.GetSafeFileName(submission.SubmissionName) + </code><code class="string">".zip"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">                path = FileHelper.GetUniqueFileName(path);</code></div>
<div class="line"><code class="plain">                </code><code class="comments">// Assigns the zip file name as the ticket ID of the new submission.</code></div>
<div class="line"><code class="plain">                submission.SubmissionTicket = Path.GetFileName(path);</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">            </code><code class="keyword">else</code></div>
<div class="line"><code class="plain">            {</code></div>
<div class="line"><code class="plain">                </code><code class="comments">// The resubmit action uses the existing file path stored in the ticket ID.</code></div>
<div class="line"><code class="plain">                path = Path.Combine(</code><code class="keyword">this</code><code class="plain">.ExportFolder, submission.SubmissionTicket);</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">            </code><code class="comments">// Writes the zip file under the specified path. Overwrites the file if it exists.</code></div>
<div class="line"><code class="plain">            DirectoryHelper.EnsureDiskPath(path, </code><code class="keyword">null</code><code class="plain">);</code></div>
<div class="line"><code class="plain">            </code><code class="keyword">using</code><code class="plain"> (FileStream stream = File.Create(path))</code></div>
<div class="line"><code class="plain">            {</code></div>
<div class="line"><code class="plain">                </code><code class="comments">// Creates the zip archive with the translation assignment.</code></div>
<div class="line"><code class="plain">                </code><code class="comments">// The archive contains the source text of the submitted pages in XLIFF format and an HTML instructions file with the details entered for the translation.</code></div>
<div class="line"><code class="plain">                TranslationServiceHelper.WriteSubmissionInZIP(submission, stream);</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">catch</code><code class="plain"> (Exception ex)</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        TranslationServiceHelper.LogEvent(ex);</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">return</code><code class="plain"> ex.Message;</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">null</code><code class="plain">;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">CancelSubmission</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="CancelSubmission" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Cancels the specified submission.</code></div>
<div class="line"><code class="comments">/// Returns an empty string if all operations are successful or the details of the encountered error.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="comments">/// &lt;param name="submission"&gt;Info object representing the canceled submission&lt;/param&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">string</code><code class="plain"> CancelSubmission(TranslationSubmissionInfo submission)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">try</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">if</code><code class="plain"> (submission != </code><code class="keyword">null</code><code class="plain">)</code></div>
<div class="line"><code class="plain">        {</code></div>
<div class="line"><code class="plain">            </code><code class="comments">// Tries to delete the assignment zip file (loads the file name from the submission ticket ID).</code></div>
<div class="line"><code class="plain">            </code><code class="keyword">string</code><code class="plain"> path = Path.Combine(</code><code class="keyword">this</code><code class="plain">.ExportFolder, submission.SubmissionTicket);</code></div>
<div class="line"><code class="plain">            </code><code class="keyword">if</code><code class="plain"> (File.Exists(path))</code></div>
<div class="line"><code class="plain">            {</code></div>
<div class="line"><code class="plain">                File.Delete(path);</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">catch</code><code class="plain"> (Exception ex)</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        TranslationServiceHelper.LogEvent(ex);</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">return</code><code class="plain"> ex.Message;</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">null</code><code class="plain">;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">DownloadCompletedTranslations</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="DownloadCompletedTranslations" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Retrieves completed XLIFF translation files from the service and imports them into the system.</code></div>
<div class="line"><code class="comments">/// Returns an empty string if all operations are successful or the details of the encountered error.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">string</code><code class="plain"> DownloadCompletedTranslations(</code><code class="keyword">string</code><code class="plain"> siteName)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">try</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">if</code><code class="plain"> (Directory.Exists(</code><code class="keyword">this</code><code class="plain">.ImportFolder))</code></div>
<div class="line"><code class="plain">        {</code></div>
<div class="line"><code class="plain">            </code><code class="comments">// Gets all zip files from the import folder.</code></div>
<div class="line"><code class="plain">            </code><code class="keyword">string</code><code class="plain">[] files = Directory.GetFiles(</code><code class="keyword">this</code><code class="plain">.ImportFolder, </code><code class="string">"*.zip"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">            </code><code class="keyword">foreach</code><code class="plain"> (</code><code class="keyword">string</code><code class="plain"> filePath </code><code class="keyword">in</code><code class="plain"> files)</code></div>
<div class="line"><code class="plain">            {</code></div>
<div class="line"><code class="plain">                </code><code class="keyword">string</code><code class="plain"> file = Path.GetFileName(filePath);</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">                </code><code class="comments">// Gets all translation submissions matching the zip file name.</code></div>
<div class="line"><code class="plain">                DataSet ds = TranslationSubmissionInfoProvider.GetSubmissions(</code><code class="string">"SubmissionTicket = '"</code><code class="plain"> + SqlHelper.EscapeQuotes(file) + </code><code class="string">"'"</code><code class="plain">, </code><code class="keyword">null</code><code class="plain">);</code></div>
<div class="line"><code class="plain">                </code><code class="keyword">if</code><code class="plain"> (!DataHelper.DataSourceIsEmpty(ds))</code></div>
<div class="line"><code class="plain">                {</code></div>
<div class="line"><code class="plain">                    </code><code class="keyword">foreach</code><code class="plain"> (DataRow dr </code><code class="keyword">in</code><code class="plain"> ds.Tables[0].Rows)</code></div>
<div class="line"><code class="plain">                    {</code></div>
<div class="line"><code class="plain">                        TranslationSubmissionInfo submission = </code><code class="keyword">new</code><code class="plain"> TranslationSubmissionInfo(dr);</code></div>
<div class="line"><code class="plain">                        </code><code class="comments">// Only imports content for submissions in the 'Waiting for translation' status.</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">                        </code><code class="keyword">if</code><code class="plain"> (submission.SubmissionStatus == TranslationStatusEnum.WaitingForTranslation)</code></div>
<div class="line"><code class="plain">                        {</code></div>
<div class="line"><code class="plain">                            </code><code class="comments">// Gets the zip name from the submission ticket.</code></div>
<div class="line"><code class="plain">                            </code><code class="keyword">string</code><code class="plain"> fileName = submission.SubmissionTicket;</code></div>
<div class="line"><code class="plain">                            </code><code class="keyword">string</code><code class="plain"> path = Path.Combine(</code><code class="keyword">this</code><code class="plain">.ImportFolder, fileName);</code></div>
<div class="line"><code class="plain">                            </code><code class="keyword">if</code><code class="plain"> (File.Exists(path))</code></div>
<div class="line"><code class="plain">                            {</code></div>
<div class="line"><code class="plain">                                </code><code class="comments">// Imports XLIFF file content from the zip package.</code></div>
<div class="line"><code class="plain">                                </code><code class="keyword">string</code><code class="plain"> err = TranslationServiceHelper.ImportXLIFFfromZIP(submission, FileStream.New(path, FileMode.Open));</code></div>
<div class="line"><code class="plain">                                </code><code class="keyword">if</code><code class="plain"> (</code><code class="keyword">string</code><code class="plain">.IsNullOrEmpty(err))</code></div>
<div class="line"><code class="plain">                                {</code></div>
<div class="line"><code class="plain">                                    </code><code class="comments">// Changes the status to 'Translation ready' and saves the submission.</code></div>
<div class="line"><code class="plain">                                    submission.SubmissionStatus = TranslationStatusEnum.TranslationReady;</code></div>
<div class="line"><code class="plain">                                    TranslationSubmissionInfoProvider.SetTranslationSubmissionInfo(submission);</code></div>
<div class="line"><code class="plain">                                }</code></div>
<div class="line"><code class="plain">                                </code><code class="keyword">else</code></div>
<div class="line"><code class="plain">                                {</code></div>
<div class="line"><code class="plain">                                    </code><code class="keyword">return</code><code class="plain"> err;</code></div>
<div class="line"><code class="plain">                                }</code></div>
<div class="line"><code class="plain">                            }</code></div>
<div class="line"><code class="plain">                        }</code></div>
<div class="line"><code class="plain">                    }</code></div>
<div class="line"><code class="plain">                }</code></div>
<div class="line"><code class="plain">            }</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">null</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">catch</code><code class="plain"> (Exception ex)</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        TranslationServiceHelper.LogEvent(ex);</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">return</code><code class="plain"> ex.Message;</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
</li><li class=" "><p>Follow the instructions on the <a href="loading-translation-service-classes-from-app_code">Loading translation service classes from App_Code</a> page to ensure that the application can access the custom class.</p>
</li></ol>    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Registering human translation services</span></h3>
<p>Once you have implemented the class with the required functionality, you need to register the translation service:</p>
<ol class=" "><li class=" "><p>Log in to the Kentico administration interface.</p>
</li><li class=" "><p>Open the <strong class=" ">Translation services</strong> application.</p>
</li><li class=" "><p>Click <strong class=" ">New translation service</strong>.</p>
</li><li class=" "><p>Enter the following values into the service's <a href="reference---translation-service-properties">properties</a>:<br><br></p>
<ul class=" "><li class=" "><p><strong class=" ">Display name</strong>: Sample translation service</p>
</li><li class=" "><p><strong class=" ">Service provider - Assembly name</strong>: (custom classes)</p>
</li><li class=" "><p><strong class=" ">Service provider - Class</strong>: SampleTS</p>
</li><li class=" "><p><strong class=" ">Is machine translation service</strong>: no (not checked)</p>
</li><li class=" "><p><strong class=" ">Service is enabled</strong>: yes (checked)<br><br></p>
</li><li class=" "><p><strong class=" ">Supports submitting instructions</strong>: yes</p>
</li><li class=" "><p><strong class=" ">Supports prioritizing of submissions</strong>: yes</p>
</li><li class=" "><p><strong class=" ">Supports submission deadlines</strong>: yes</p>
</li><li class=" "><p><strong class=" ">Supports manual status update</strong>: yes</p>
</li><li class=" "><p><strong class=" ">Supports canceling submissions</strong>: yes</p>
</li><li class=" "><p><strong class=" ">Translation service parameter:</strong> leave empty<br><br></p>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li></ol><p>The service is now ready to be used.</p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Adding custom settings for translation services</span></h3>
<p>To allow administrators to configure the import and export folder paths of the service, you need to create <a href="adding-custom-website-settings">custom settings</a>:</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Modules</strong> application.</p>
</li><li class=" "><p>Click <strong class=" ">New module</strong>.</p>
</li><li class=" "><p>Type <i class=" ">Custom translation settings</i> as the module's <strong class=" ">Display name</strong>.</p>
</li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>Open the module's <strong class=" ">Settings</strong> tab.</p>
</li><li class=" "><p>Click <strong class=" ">New category</strong> (<img class="confluence-embedded-image" src="images/download/attachments/68879208/new.png" alt="images/download/attachments/68879208/new.png">
):<br><br></p>
<ul class=" "><li class=" "><p><strong class=" ">Display name</strong>: Custom translation service</p>
</li><li class=" "><p><strong class=" ">Code name</strong>: CustomTranslationService<br><br></p>
</li></ul></li><li class=" "><p>Switch to the <strong class=" ">Settings</strong> sub-tab of the category and add a <strong class=" ">New settings group</strong>.<br><br></p>
<ul class=" "><li class=" "><p><strong class=" ">Display name</strong>: Translation paths</p>
</li><li class=" "><p><strong class=" ">Code name</strong>: TranslationPaths<br><br></p>
</li></ul></li><li class=" "><p>Click <strong class=" ">New settings key</strong> under the <i class=" ">Translation paths</i> section and define two setting keys:<br><br></p>
<ul class=" "><li class=" "><p><strong class=" ">Display name</strong>: Translation export folder</p>
</li><li class=" "><p><strong class=" ">Code name</strong>: SampleTranslationExportFolder (matches the name of the key loaded by the <i class=" ">ExportFolder</i> property in the code of the sample service class)</p>
</li><li class=" "><p><strong class=" ">Description</strong>: Sets the path of the folder where the system creates translation submissions. If empty, the ~/App_Data/Translations/Export/ folder is used.</p>
</li><li class=" "><p><strong class=" ">Type</strong>: Text<br><br></p>
</li><li class=" "><p><strong class=" ">Display name</strong>: Translation import folder</p>
</li><li class=" "><p><strong class=" ">Code name</strong>: SampleTranslationImportFolder (matches the name of the key loaded by the <i class=" ">ImportFolder</i> property in the code of the sample service class)</p>
</li><li class=" "><p><strong class=" ">Description</strong>: Sets the path of the folder from which the system loads completed translation packages. If empty, the ~/App_Data/Translations/Import/ folder is used.</p>
</li><li class=" "><p><strong class=" ">Type</strong>: Text<br><br></p>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save</strong> for each key.</p>
</li></ol><p>You can now set the service's folder paths for specific websites in the <strong class=" ">Settings</strong> application, within the <strong class=" ">Custom translation service</strong> category.</p>
<p><img class="confluence-embedded-image confluence-content-image-border" src="images/download/attachments/68882113/Custom_Translation_Settings.png" alt="images/download/attachments/68882113/Custom_Translation_Settings.png" width="500">
        <br><span class="caption">Custom settings for the sample translation service</span>
    </p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Result</span></h3>
<p>When submitting pages for translation, the dialog offers the <i class=" ">Sample translation service</i> as one of the translation options.</p>
<p><strong class=" "><i class=" "><img class="confluence-embedded-image confluence-content-image-border" src="images/download/attachments/68882113/Sample_Human_Service_Pages.png" alt="images/download/attachments/68882113/Sample_Human_Service_Pages.png" width="500">
<br></i></strong></p>
<p>Try translating a page using the custom service:</p>
<ol class=" "><li class=" "><p>Click <strong class=" ">Submit for translation</strong> in the <i class=" ">New culture version</i> dialog.</p>
<ul class=" "><li class=" "><p>The system creates a new submission and adds the translation zip package into the specified export folder.<br><br></p>
</li></ul></li><li class=" "><p>Translate the content and add the modified <i class=" ">.xlf</i> file into a new zip package (with the same name as the export zip file).</p>
<ul class=" "><li class=" "><p>Place the zip package into the import folder.<br><br></p>
</li></ul></li><li class=" "><p>In the Kentico administration interface, open the <strong class=" ">Translations</strong> application and click <strong class=" ">Update statuses</strong>.</p>
<ul class=" "><li class=" "><p>The service imports the translated content and switches the matching submission to the <i class=" ">Translation ready</i> status.<br><br></p>
</li></ul></li><li class=" "><p>Click the <strong class=" ">Process submission</strong> (<img class="confluence-embedded-image" src="images/download/attachments/68879208/start_site.png" alt="images/download/attachments/68879208/start_site.png">
) action of the submission.</p>
<ul class=" "><li class=" "><p>The system transfers the translated content into the corresponding page and changes the submission status to <i class=" ">Translation imported</i>.</p>
</li></ul></li></ol><p>The page is now available in the target language.</p>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>