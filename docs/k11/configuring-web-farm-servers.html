<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Configuring web farm servers - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260" elementpageid="68881978">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68881978"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Configuring-Kentico.html">Configuring Kentico</a></li>
                                                                                                         <li class="shortcut"><a href="Optimizing-website-performance.html">Optimizing website performance</a></li>
                                                                                     <li><a href="Setting-up-web-farms.html">Setting up web farms</a></li>
                                                            </ul>
</div>            <h1 id="src-68881978"> <span>Configuring web farm servers</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<div class="sp-grid-section"><div class="sp-grid-cell sp-grid-60"><p>To utilize web farm synchronization, the system requires that all servers that make up a web farm are registered and configured in the system. To start using the web farm synchronization:</p><ol class=" "><li class=" "><p>Choose a web farm mode:</p>
<ul class=" "><li class=" "><p><a href="#src-68881978_configuringwebfarmservers-configuringwebfarmsautomatically">Automatic web farm</a></p>
</li><li class=" "><p><a href="#src-68881978_configuringwebfarmservers-configuringwebfarmsmanually">Manually configured web farm</a></p>
</li></ul></li><li class="confluence-link "><p><a href="#src-68881978_configuringwebfarmservers-furtherconfigurationsofwebfarmservers">Perform further configurations.</a></p>
</li></ol><p class="confluence-link">You can also perform additional low-level settings for web farm synchronization by adding the keys listed in <a href="reference---web.config-application-keys#src-68882662_referenceweb.configapplicationkeys-webfarmsynchronizationsettings">Web.config file settings</a> into the <strong class=" ">/configuration/appSettings</strong> section of your web.config file.</p><h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Configuring web farms automatically</span></h3><p>For most web farm environments, we recommend the automatic web farm mode. This mode dynamically adds and removes web farm servers from the system.</p><div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>When you are running Kentico on <strong class=" ">Azure</strong>, the automatic web farm mode is enabled by default.</p>
        </div>
    </div><p>To set the automatic mode, we recommend that you first enable the automatic web farm on <strong class=" ">one server</strong> and after that you start adding other servers to the web farm (connect them to the database).</p><ol class=" "><li class=" "><p>Open the <strong class=" ">Settings</strong> application.</p>
</li><li class=" "><p>Select the <strong class=" ">Versioning &amp; Synchronization -&gt; Web farm</strong> category.</p>
</li><li class=" "><p>Select <strong class=" ">Automatic</strong> as the <strong class=" ">Web farm mode</strong>.</p>
</li><li class=" "><p>Click <strong class=" ">Save.</strong></p>
</li></ol><p>Now you can start adding other servers to the web farm (connect the servers to the database). The system will register them automatically.</p><div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Automatic server name format</strong></p>
<p>The system generates the names of automatic web farm servers by combining the machine name and the virtual directory in which the application is running.</p>
<p>If this combination of variables is not unique in your environment (for example if you run your web farm instances on the same machine without virtual directories, e.g. distinguished by port numbers), you need to manually assign unique server names to the web farm servers. To set a web farm server name, see <i class=" ">Step 5</i> in <a href="#src-68881978_configuringwebfarmservers-configuringwebfarmsmanually">Configuring web farms manually</a>.</p>
        </div>
    </div><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68881978_configuringwebfarmservers-configuringwebfarmsautomatically">Configuring web farms automatically</a></p>
</li><li class=" "><p><a href="#src-68881978_configuringwebfarmservers-configuringwebfarmsmanually">Configuring web farms manually</a></p>
</li><li class=" "><p><a href="#src-68881978_configuringwebfarmservers-furtherconfigurationsofwebfarmservers">Further configurations of web farm servers</a></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68881978_configuringwebfarmservers-storingsessionstateonawebfarm">Storing session state on a web farm</a></p>
</li><li class=" "><p><a href="#src-68881978_configuringwebfarmservers-configuringthemachinekeyelementinweb.config">Configuring the machineKey element in web.config</a></p>
</li><li class=" "><p><a href="#src-68881978_configuringwebfarmservers-configuringserversforsynchronizingmacros">Configuring servers for synchronizing macros</a></p>
</li><li class=" "><p><a href="#src-68881978_configuringwebfarmservers-settingupasharedfilestorageforawebfarm">Setting up a shared file storage for a web farm</a></p>
</li><li class=" "><p><a href="#src-68881978_configuringwebfarmservers-configuringscheduledtaskstobeexecutedoneveryserverofawebfarm">Configuring scheduled tasks to be executed on every server of a web farm</a></p>
</li><li class=" "><p><a href="#src-68881978_configuringwebfarmservers-sslinawebfarmenvironment">SSL in a web farm environment</a></p>
</li><li class=" "><p><a href="#src-68881978_configuringwebfarmservers-usingportnumberstoidentifywebfarmservers">Using port numbers to identify web farm servers</a></p>
</li></ul></li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="creating-custom-web-farm-synchronization-tasks">Creating custom web farm synchronization tasks</a></p>
</li></ul>        </div>
    </div></div></div>

    

    


    
    
    
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Configuring web farms manually</span></h3>
<p>If you need to have a complete control over your web farm or you are running a web farm with a static number of web farm servers, which you do not plan to change, configure the web farm servers manually in your system.</p>
<p>First, enable the manual web farm mode.</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Settings</strong> application.</p>
</li><li class=" "><p>Select the <strong class=" ">Versioning &amp; Synchronization -&gt; Web farm</strong> category.</p>
</li><li class=" "><p>Select <strong class=" ">Manual</strong> as the <strong class=" ">Web farm mode</strong>.</p>
</li><li class=" "><p>Click <strong class=" ">Save.</strong></p>
</li></ol><p>Now you must configure the web farm servers in the system.</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Web farm</strong> application.</p>
</li><li class=" "><p>Click <strong class=" ">New server</strong>.</p>
</li><li class=" "><p>Fill in the following fields:<br></p>
<ul class=" "><li class=" "><p><strong class=" ">Server display name</strong> - a descriptive name for the server displayed in the administration interface.<br></p>
</li><li class=" "><p><strong class=" ">Server enabled</strong> - allows you to manually enable or disable web farm synchronization for the particular server.<br><br></p>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save</strong> to register the server.</p>
</li><li class=" "><p>Open the web.config file on the particular server and add the <strong class=" ">CMSWebFarmServerName</strong> key into the <i class=" ">appSettings</i> section:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;add key=</code><code class="string">"CMSWebFarmServerName"</code><code class="plain"> value=</code><code class="string">"ServerCodeName"</code><code class="plain">/&gt;</code></div>
</div>
    </div>
<p>Replace <strong class=" ">ServerCodeName</strong> with the server code name that the system created for the server (or the code name that you manually entered). Every server must contain only one such key with its own name.</p>
    <div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Setting the server name in the web.config file overrides the automatic naming done by the system in the Automatic web farm mode.</p>
        </div>
    </div>
</li></ol><p style="text-align:left;">Repeat the process for every server in your web farm.</p>
<p style="text-align:left;">Keep in mind that if you remove a machine from a web farm, you also need to disable or remove the corresponding server from the system.</p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Further configurations of web farm servers</span></h3>
<p>When you have defined the web farm servers and enabled the web farm, go through the following configurations to ensure that your web farm works correctly.</p>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Storing session state on a web farm</span></h4>
<p>The default session state mode for ASP.NET applications is the <strong class=" ">InProc</strong> mode, which stores session state in the memory of the server. InProc session state mode is not supported on most types of web farms because requests for the same session can be served by different servers. This can cause unexpected behavior and data loss. For example, items stored in a shopping cart can disappear after making another request on the website.</p>
<p>If you are using a load balancer in sticky-session mode, you can use the default InProc mode. However, visitors may still experience session loss when a server in the web farm becomes unavailable.</p>
<p>To configure your web farm to store session state data correctly, use one of the following modes:</p>
<ul class=" "><li class=" "><p>    <span style="color: #2a2a2a;">
<strong class=" ">StateServer</strong> mode - stores session state in a separate process.<br>    </span>
</p>
</li><li class=" "><p>    <span style="color: #2a2a2a;">
    <span style="color: #2a2a2a;">
<strong class=" ">SQLServer</strong> mode - stores session state in an SQL server database.<br>    </span>
    </span>
</p>
</li></ul><p>To use one of these modes, adjust the <i class=" ">&lt;sessionState&gt;</i> element and its attributes in the <strong class=" ">web.config</strong> file. For more information, see the <a class="external-link" href="http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx">Session-State Modes</a> article.</p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>To learn how to configure Azure projects to store session data, see <a href="storing-cache-and-session-state-data-in-azure-environment">Storing cache and session state data in an Azure environment</a>.</p>
        </div>
    </div>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Configuring the machineKey element in web.config</span></h4>
<p>By default, the Internet Information Services (IIS) server uses an automatically generated machineKey to encrypt and validate view state and forms authentication information. If a user tries to access the same session from two servers with different machine keys, the validation fails, and a Message Authentication Code (MAC) view state validation error occurs. To prevent this, the machineKey element needs to be the same across all Kentico instances in the web farm configuration.</p>
    <h5 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Generating a machineKey element</span></h5>
    <div class="confbox admonition admonition-warning">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Never use any websites that will generate a machineKey for you with the click of a button. It is impossible to know whether these keys were created securely or if they are being recorded to a secret database. You should only ever use machineKey configuration elements that you created yourself.</p>
        </div>
    </div>
<p><strong class=" ">For IIS 7 and below</strong>:</p>
<p>Machine keys can be generated in the <strong class=" ">Machine Key</strong> section under ASP.NET in the IIS Manager:</p>
<ol class=" "><li class=" "><p>Select your preferred encryption and decryption methods.</p>
</li><li class=" "><p>Clear the <strong class=" ">Automatically generate at runtime</strong> and <strong class=" ">Generate a unique key for each application</strong> check boxes.</p>
</li><li class=" "><p>Click <strong class=" ">Generate keys</strong><i class=" ">.</i></p>
</li><li class=" "><p>Insert the machineKey element into the &lt;system.web&gt; section in the <strong class=" ">web.config</strong> file of all Kentico instances in your web farm configuration.</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">system</code><code class="plain">.web&gt;</code></div>
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="plain">	&lt;</code><code class="keyword">machineKey</code><code class="plain"> </code><code class="color1">decryption</code><code class="plain">=</code><code class="string">"..."</code><code class="plain"> </code><code class="color1">decryptionKey</code><code class="plain">=</code><code class="string">"..."</code><code class="plain"> </code><code class="color1">validation</code><code class="plain">=</code><code class="string">"..."</code><code class="plain"> </code><code class="color1">validationKey</code><code class="plain">=</code><code class="string">"..."</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="plain">&lt;/</code><code class="keyword">system</code><code class="plain">.web&gt;</code></div>
</div>
    </div>
</li><li class=" "><p>Copy the generated decryption and validation keys into the <strong class=" ">decryptionKey</strong> and <strong class=" ">validationKey</strong> attributes.</p>
    <div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>The <strong class=" ">decryption</strong> and <strong class=" ">validation</strong> attributes need to contain the names of your specified encryption and decryption algorithms. If you left the <strong class=" ">Decryption method</strong> set to <i class=" ">Auto</i> when generating the machine keys in the IIS Manager, enter <i class=" ">AES</i> as the decryption.</p>
        </div>
    </div>
</li></ol><p><strong class=" ">For IIS 8 and above</strong>:</p>
<p>The ability to generate machine keys is not available in the IIS Manager 8 or newer. You can use a PowerShell script to generate the machineKey element according to the instructions in <a class="external-link" href="https://support.microsoft.com/en-us/kb/2915218#bookmark-appendixa">this article from Microsoft</a>. Insert the generated machineKey element into the &lt;system.web&gt; section in the <strong class=" ">web.config</strong> file of all Kentico instances in your web farm configuration.</p>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Configuring servers for synchronizing macros</span></h4>
<p>The system uses signatures to ensure the security of <a href="entering-macro-expressions">macro expressions</a>. Macro signatures contain the user name of the macro's author (or an assigned macro identity) and a hash of the given expression.</p>
<p>The hash function used to create the signatures appends a <a class="external-link" href="http://en.wikipedia.org/wiki/Salt_%28cryptography%29">salt</a> to the input. To ensure that macro expressions work correctly in a web farm environment, you need to configure all servers to use the same hash salt:</p>
<ul class=" "><li class=" "><p>Set the <strong class=" ">CMSHashStringSalt</strong> key in the <i class=" ">appSettings</i> section of the web.config file to the same value on all web farm servers. For example:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;add key=</code><code class="string">"CMSHashStringSalt"</code><code class="plain"> value=</code><code class="string">"e68b9ad6-a461-4707-8e3e-ece73f03dd02"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
</li></ul><p>The best option is to set the hash salt value before you start creating content for your website. Changing the salt causes all current hash values to become invalid. To fix existing macro expressions in the system after changing the hash salt, you need to re-sign the macros. See <a href="working-with-macro-signatures">Working with macro signatures</a> for more information.</p>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Setting up a shared file storage for a web farm</span></h4>
<p>The web farm synchronization mechanism synchronizes files reliably up to the size of 250 MB. Larger files take a long time to synchronize. Even though the synchronization for larger files may work without problems in your environment, we recommend that you configure a <strong class=" ">shared storage</strong> for you web farm in such case.</p>
<p>You can configure the following shared file storages for your web farm:</p>
<ul class=" "><li class=" "><p><a href="configuring-azure-storage">Azure Blob Storage</a></p>
</li><li class=" "><p><a href="configuring-amazon-s3">Amazon S3 storage</a></p>
</li><li class=" "><p>Custom network storage - you need to <a href="configuring-file-system-providers#src-68882092_configuringfilesystemproviders-changingcontentfilepathstoasharedstorage">configure a file system provider</a>.</p>
</li></ul><p>When you configure a shared storage for you web farm, the system automatically recognizes this setup and stops creating synchronization tasks for these files.</p>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Configuring scheduled tasks to be executed on every server of a web farm</span></h4>
<p>If you are using a web farm, <a href="scheduling-tasks">scheduled tasks</a> will be executed randomly by one of the servers. However, scheduled tasks that work with the application file system should be executed by each server in the web farm.</p>
<p>The following scheduled tasks must be <strong class=" ">executed by each server</strong> in a web farm, if you are NOT using a shared file storage (Azure Blob Storage or Amazon S3 storage):</p>
<ul class=" "><li class=" "><p>Execute local <a href="monitoring-search-indexing-tasks">search tasks</a></p>
</li><li class=" "><p>Optimize local search indexes</p>
</li><li class=" "><p>Process <a href="web-analytics">analytics</a> log</p>
</li><li class=" "><p>Delete image editor history</p>
</li><li class=" "><p>Delete old file system cache files</p>
</li><li class=" "><p>Delete old temporary upload files</p>
</li><li class=" "><p>Delete old temporary attachments</p>
</li><li class=" "><p>Clean Azure storage cache</p>
</li></ul><p>The following scheduled task must be executed by each server in a web farm regardless of the used file storage:</p>
<ul class=" "><li class=" "><p>Clean unused memory</p>
</li></ul><p>To configure these tasks to be executed by each server in a web farm, clone the original tasks and configure them to be executed on specific servers:</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Scheduled tasks</strong> application.</p>
</li><li class=" "><p>Edit the scheduled task.</p>
</li><li class=" "><p>Type the <strong class=" ">Server name</strong> according to the name of one of the servers in the web farm and click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>Return to the main page of the <strong class=" ">Scheduled tasks</strong> application.</p>
</li><li class=" "><p>Click <strong class=" ">Other actions</strong> (<strong class=" ">...</strong>) next to the scheduled task and select<strong class=" "> Clone</strong>.</p>
</li><li class=" "><p>Choose a name for the cloned task and click <strong class=" ">Clone</strong>.</p>
</li><li class=" "><p>Edit the cloned scheduled task.</p>
</li><li class=" "><p>Change the <strong class=" ">Server name</strong> to the name of a different server in the web farm and click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>Repeat for each server in your web farm.</p>
</li></ol><p>Perform this procedure for all scheduled tasks listed above.</p>
<p>When creating new scheduled tasks, you can ensure that the task is created for all web farm servers by selecting the     <span style="color: #262524;">
<strong class=" ">Create tasks for all web farm servers</strong>    </span>
check-box.</p>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>SSL in a web farm environment</span></h4>
<p>If you use an SSL offload device or accelerator as part of your web farm and your website is configured to require SSL for the administration interface or on specific pages, you may encounter problems with redirection loops.</p>
<p>For this type of scenario, you need to add some custom code to your website according to the instructions in <a href="ssl-accelerator-support">SSL accelerator support</a>.</p>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Using port numbers to identify web farm servers</span></h4>
<p>If your environment uses unique port numbers to identify web farm servers (for example with a load balancer that internally maps URLs to ports), the system generates certain types of URLs with the internal port number. Such URLs may not be processed correctly, leading to problems with related features (for example <i class=" ">GetResource</i> requests for files).</p>
<p>To resolve these problems, add the following key into the <i class=" ">appSettings</i> section of the web.config file on all servers:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">key</code><code class="plain">=</code><code class="string">"CMSURLPort"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"80"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
<p>The key ensures that the system generates all URLs without the port number (the default HTTP port is used).</p>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>