<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Creating custom UniGrid filters - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68882757"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="References.html">References</a></li>
                                                                                                         <li class="shortcut"><a href="Kentico-Controls.html">Kentico Controls</a></li>
                                                                                                         <li class="shortcut"><a href="UI-controls.html">UI controls</a></li>
                                                                                     <li><a href="UniGrid.html">UniGrid</a></li>
                                                            </ul>
</div>            <h1 id="src-68882757"> <span>Creating custom UniGrid filters</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<div class="section-left"><p>If you need to add custom filtering options to listing pages that utilize a <a href="unigrid">UniGrid</a>, you can develop and assign your own filter controls.</p><div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Note</strong>: We strongly recommend using the default UniGrid filter for standard filtering scenarios. Only implement a custom filter control if the default filter cannot fulfill your requirements. To use the default filter, you only need to configure the <strong class=" ">filter</strong> element under the appropriate <strong class=" ">column</strong> elements in the UniGrid's definition.</p>
<p>For more information about the default UniGrid filter, see <a href="reference---unigrid-definition">Reference - UniGrid definition</a>.</p>
        </div>
    </div><p>To implement a custom UniGrid filter, you need to create a user control (.ascx file) in the Kentico project. We recommend storing your filter controls in one of the following folders:</p><ul class=" "><li class=" "><p><i class=" ">~/CMSModules/&lt;module code name&gt;</i> - if you are developing the filter as part of a <a href="creating-custom-modules">custom module</a>.</p>
</li><li class=" "><p><i class=" ">~/CMSGlobalFiles</i> - general location recommended for files that are not associated with a specific module or site.</p>
</li></ul><p>You can create two main types of custom filter controls for the UniGrid:</p><ul class=" "><li class=" "><p><a href="#src-68882757_creatingcustomunigridfilters-creatingfiltersforspecificcolumns">Filters for specific columns</a></p>
</li><li class=" "><p><a href="#src-68882757_creatingcustomunigridfilters-fullyreplacingthedefaultunigridfilter">Filters that completely replace the default UniGrid filter</a></p>
</li></ul><h3 id="src-68882757_CreatingcustomUniGridfilters-Creatingfiltersforspecificcolumns" class="heading "><span>Creating filters for specific columns</span></h3><p>The default UniGrid filter is a form that consists of multiple filtering fields. Each field typically provides filtering based on a different data column in the UniGrid listing.</p><p>To implement a custom filter control for a specific UniGrid column:</p><ol class=" "><li class=" "><p>Create a user control within the Kentico project.</p>
</li><li class=" "><p>Build the filtering interface by adding elements to the control's markup.</p>
</li><li class=" "><p>Perform the following in the control's code behind:<br></p>
<ul class=" "><li class=" "><p>Make the filter control inherit from the <strong class=" ">CMS.FormEngine.Web.UI.FormEngineUserControl</strong> class.</p>
</li><li class=" "><p>Override the <strong class=" ">Value</strong> property - get and set the value selected within the filter.</p>
</li><li class=" "><p>Override the <strong class=" ">GetWhereCondition()</strong> method - return a string containing an SQL where condition that performs the required filtering (use the <i class=" ">Value</i> property in the condition).</p>
</li><li class=" "><p>Add any other logic required by the filter (for example initialization of filtering options).</p>
</li></ul></li></ol><p>You can then assign the filter to a column in the definition of a UniGrid:</p><ol class=" "><li class=" "><p>Find the <strong class=" ">&lt;column&gt;</strong> (XML) / <strong class=" ">&lt;ug:Column&gt;</strong> (markup) element representing the corresponding column.</p>
</li><li class=" "><p>Add a <strong class=" ">&lt;filter&gt;</strong> element under the column element.</p>
</li><li class=" "><p>Set the filter element's attributes:</p>
<ul class=" "><li class=" "><p><strong class=" ">type</strong>: <i class=" ">custom</i></p>
</li><li class=" "><p><strong class=" ">path</strong>: enter the path to your custom filter's user control file</p>
</li></ul></li></ol><div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">grid</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">	&lt;</code><code class="keyword">columns</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">		&lt;</code><code class="keyword">column</code><code class="plain"> </code><code class="color1">source</code><code class="plain">=</code><code class="string">"SourceColumn"</code><code class="plain"> </code><code class="color1">caption</code><code class="plain">=</code><code class="string">"Column name"</code><code class="plain"> &gt;</code></div>
<div class="line"><code class="plain">			&lt;</code><code class="keyword">filter</code><code class="plain"> </code><code class="color1">type</code><code class="plain">=</code><code class="string">"custom"</code><code class="plain"> </code><code class="color1">path</code><code class="plain">=</code><code class="string">"~/CMSGlobalFiles/CustomFilter.ascx"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">		&lt;/</code><code class="keyword">column</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">		...</code></div>
<div class="line"><code class="plain">	&lt;/</code><code class="keyword">columns</code><code class="plain">&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">	...</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">&lt;/</code><code class="keyword">grid</code><code class="plain">&gt;</code></div>
</div>
    </div><p>The system inserts the custom filter for the given column into the UniGrid's overall filter. The custom filter can be combined with filters defined for other columns (both default and custom).</p><div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Custom filters that inherit from <i class=" ">FormEngineUserControl</i> provide automatic support for the UniGrid filter state management features (storing of the filter state for each user and resetting to the default state).</p>
        </div>
    </div></div>
    


    



    

    
    <div class="section-right"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882757_creatingcustomunigridfilters-creatingfiltersforspecificcolumns">Creating filters for specific columns</a></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882757_creatingcustomunigridfilters-settingparametersforcustomcolumnfilters">Setting parameters for custom column filters</a></p>
</li></ul></li><li class=" "><p><a href="#src-68882757_creatingcustomunigridfilters-fullyreplacingthedefaultunigridfilter">Fully replacing the default UniGrid filter</a></p>
</li><li class=" "><p><a href="#src-68882757_creatingcustomunigridfilters-example-creatingacustomuserfilter">Example - Creating a custom user filter</a></p>
</li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="unigrid">UniGrid</a></p>
</li><li class=" "><p><a href="reference---unigrid-definition">Reference - UniGrid definition</a></p>
</li><li class=" "><p><a href="example---developing-custom-form-controls">Example - Developing custom form controls</a></p>
</li></ul>        </div>
    </div></div>
    
    <h4 id="src-68882757_CreatingcustomUniGridfilters-Settingparametersforcustomcolumnfilters" class="heading "><span>Setting parameters for custom column filters</span></h4>
<p>If your custom filter control has properties that change its behavior, you can set their values directly in the UniGrid definition. This gives your custom filters greater flexibility, since you can use a different filter configuration for every instance of the UniGrid.</p>
<p>To assign values to the properties of custom filters in the UniGrid definition:</p>
<ol class=" "><li class=" "><p>Add a <strong class=" ">&lt;parameters&gt;</strong> (XML) / <strong class=" ">&lt;CustomFilterParameters&gt;</strong> (markup) element under the given <strong class=" ">&lt;filter&gt;</strong> element.</p>
</li><li class=" "><p>Create a child <strong class=" ">&lt;filterparameter&gt;</strong> (XML) / <strong class=" ">&lt;ug:FilterParameter&gt;</strong> (markup) element for every property that you want to set.</p>
</li><li class=" "><p>Set the following attributes for each filter parameter:</p>
<ul class=" "><li class=" "><p><strong class=" ">name</strong> - identifier of the parameter (used when getting the value in the filter's properties).</p>
</li><li class=" "><p><strong class=" ">value</strong> - the value assigned to the filter property. The type of the value attribute is a string, but you can use <i class=" ">ValidationHelper</i> methods to load the value as another type.</p>
</li></ul></li></ol><p>To load UniGrid parameter values in your custom filter, call the <strong class=" ">GetValue</strong> method (inherited from <i class=" ">FormEngineUserControl)</i> within the <i class=" ">get</i> code of your properties. Then use <strong class=" ">CMS.Helpers.ValidationHelper</strong> methods to convert the value to the appropriate type. See the <a href="#src-68882757_creatingcustomunigridfilters-example-creatingacustomuserfilter">Example</a> for additional details.<i class=" "><br></i></p>
<p>The system assigns the values from the UniGrid definition into the filter's properties before displaying the page.</p>
    <h3 id="src-68882757_CreatingcustomUniGridfilters-FullyreplacingthedefaultUniGridfilter" class="heading "><span>Fully replacing the default UniGrid filter</span></h3>
<p>You can create custom filters that completely replace the entire default filter of the UniGrid (for all columns).</p>
<p>To develop the custom filter control:</p>
<ol class=" "><li class=" "><p>Create a user control within the Kentico project.</p>
</li><li class=" "><p>Build the filtering interface by adding elements to the control's markup.</p>
</li><li class=" "><p>Make the filter control's class implement the <strong class=" ">CMS.FormEngine.Web.UI.IFilterControl</strong> interface (use the <strong class=" ">WhereCondition</strong> property to generate the filtering condition).</p>
</li></ol><p>You can then assign the filter to a UniGrid:</p>
<ol class=" "><li class=" "><p>Edit the UniGrid's definition.</p>
</li><li class=" "><p>Find or add the <strong class=" ">&lt;options&gt;</strong> (XML) / <strong class=" ">&lt;GridOptions&gt;</strong> (markup) element.</p>
</li><li class=" "><p>Enter the path to your custom filter's user control file:</p>
<ul class=" "><li class=" "><p>XML: Add a <strong class=" ">&lt;key name="FilterPath"&gt;</strong> element under <strong class=" ">&lt;options&gt;</strong> with the path as the key's value.</p>
</li><li class=" "><p>Markup: Set the path using the <strong class=" ">FilterPath</strong> attribute of the <strong class=" ">&lt;GridOptions&gt;</strong> element.</p>
</li></ul></li></ol><p>The given UniGrid instance now uses your custom filter. Any filter settings for individual columns are ignored.</p>
    <h3 id="src-68882757_CreatingcustomUniGridfilters-Example-Creatingacustomuserfilter" class="heading "><span>Example - Creating a custom user filter</span></h3>
<p>The following example demonstrates how to create a custom filter for a UniGrid displaying user objects. The sample filter is intended for a <i class=" "><strong class=" ">specific column</strong></i> and limits which users are displayed based on their preferred content culture. The filter provides a dynamically loaded list of cultures for selection and can be configured to offer only cultures assigned to the current site or only designated UI cultures.</p>
<p>Start by developing the filter control:</p>
<ol class=" "><li class=" "><p>Open your Kentico project in Visual Studio.</p>
</li><li class=" "><p>Expand the <strong class=" ">~/CMSGlobalFiles</strong> folder (create the folder if it does not exist yet).</p>
</li><li class=" "><p>Create a new web user control named <strong class=" ">UserCultureFilter.ascx</strong>.</p>
</li><li class=" "><p>Add a <strong class=" ">CMSDropDownList</strong> into the control's markup to provide the filtering interface:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;%@ Register namespace="CMS.Base.Web.UI" assembly="CMS.Base.Web.UI" tagPrefix="cms" %&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">&lt;</code><code class="keyword">cms</code><code class="plain">:CMSDropDownList </code><code class="color1">ID</code><code class="plain">=</code><code class="string">"drpCultures"</code><code class="plain"> </code><code class="color1">runat</code><code class="plain">=</code><code class="string">"server"</code><code class="plain"> </code><code class="color1">DataTextField</code><code class="plain">=</code><code class="string">"CultureName"</code><code class="plain"> </code><code class="color1">DataValueField</code><code class="plain">=</code><code class="string">"CultureCode"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
</li><li class=" "><p>Switch to the control's code behind and add the following code:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> System;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> System.Data;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> System.Web.UI.WebControls;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.FormEngine.Web.UI;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.Localization;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.Helpers;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.SiteProvider;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">partial</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> CMSGlobalFiles_UserCultureFilter : FormEngineUserControl</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	</code><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="plain">	</code><code class="comments">/// Gets or sets the value selected within the filter.</code></div>
<div class="line"><code class="plain">	</code><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">public</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">object</code><code class="plain"> Value</code></div>
<div class="line"><code class="plain">	{</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">get</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			</code><code class="keyword">return</code><code class="plain"> drpCultures.SelectedValue;</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">set</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			drpCultures.SelectedValue = ValidationHelper.GetString(value, </code><code class="string">""</code><code class="plain">);</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">	</code><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="plain">	</code><code class="comments">/// Indicates whether the filter only provides cultures that are assigned as content cultures to the current site.</code></div>
<div class="line"><code class="plain">	</code><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">public</code><code class="plain"> </code><code class="keyword">bool</code><code class="plain"> CurrentSiteCulturesOnly     </code></div>
<div class="line"><code class="plain">	{ </code></div>
<div class="line"><code class="plain">		</code><code class="keyword">get</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			</code><code class="comments">// Gets the value from the matching &lt;filterparameter&gt; element in the UniGrid's XML definition</code></div>
<div class="line"><code class="plain">			</code><code class="keyword">object</code><code class="plain"> parameterValue = GetValue(</code><code class="string">"currentsiteculturesonly"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">			</code><code class="keyword">return</code><code class="plain"> ValidationHelper.GetBoolean(parameterValue, </code><code class="keyword">false</code><code class="plain">);</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">set</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			SetValue(</code><code class="string">"currentsiteculturesonly"</code><code class="plain">, value);</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">	</code><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="plain">	</code><code class="comments">/// Indicates whether the filter only provides designated UI cultures.</code></div>
<div class="line"><code class="plain">	</code><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">public</code><code class="plain"> </code><code class="keyword">bool</code><code class="plain"> UICulturesOnly</code></div>
<div class="line"><code class="plain">	{</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">get</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			</code><code class="comments">// Gets the value from the matching &lt;filterparameter&gt; element in the UniGrid's XML definition</code></div>
<div class="line"><code class="plain">			</code><code class="keyword">object</code><code class="plain"> parameterValue = GetValue(</code><code class="string">"uiculturesonly"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">			</code><code class="keyword">return</code><code class="plain"> ValidationHelper.GetBoolean(parameterValue, </code><code class="keyword">false</code><code class="plain">);</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">set</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			SetValue(</code><code class="string">"uiculturesonly"</code><code class="plain">, value);</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">	</code><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="plain">	</code><code class="comments">/// Loads the filtering options during the initialization of the control.</code></div>
<div class="line"><code class="plain">	</code><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">protected</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> OnInit(EventArgs e)    </code></div>
<div class="line"><code class="plain">	{</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">base</code><code class="plain">.OnInit(e);</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">		</code><code class="comments">// Only initializes the culture options on the first page load</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">if</code><code class="plain"> (IsPostBack == </code><code class="keyword">false</code><code class="plain">)</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			</code><code class="comments">// Prepares a where condition for loading cultures based on the filter's parameters</code></div>
<div class="line"><code class="plain">			</code><code class="keyword">string</code><code class="plain"> where = String.Empty;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">			</code><code class="comments">// Adds a condition for loading only cultures assigned to the current site</code></div>
<div class="line"><code class="plain">			</code><code class="keyword">if</code><code class="plain"> (CurrentSiteCulturesOnly)</code></div>
<div class="line"><code class="plain">			{</code></div>
<div class="line"><code class="plain">				where = </code><code class="string">"CultureID IN (SELECT CultureID FROM CMS_SiteCulture WHERE SiteID = "</code><code class="plain"> + SiteContext.CurrentSiteID + </code><code class="string">")"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">			}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">			</code><code class="comments">// Adds a condition for loading only designated UI cultures</code></div>
<div class="line"><code class="plain">			</code><code class="keyword">if</code><code class="plain"> (UICulturesOnly)</code></div>
<div class="line"><code class="plain">			{</code></div>
<div class="line"><code class="plain">				</code><code class="keyword">if</code><code class="plain"> (!where.Equals(String.Empty))</code></div>
<div class="line"><code class="plain">				{</code></div>
<div class="line"><code class="plain">					where += </code><code class="string">" AND "</code><code class="plain">;</code></div>
<div class="line"><code class="plain">				}</code></div>
<div class="line"><code class="plain">				where += </code><code class="string">"CultureIsUICulture = 1"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">			}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">			</code><code class="comments">// Loads the cultures from the Kentico database based on the where condition</code></div>
<div class="line"><code class="plain">			DataSet ds = CultureInfoProvider.GetCultures(where);</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">			</code><code class="comments">// Binds the loaded cultures to the filter's drop-down list</code></div>
<div class="line"><code class="plain">			drpCultures.DataSource = ds;</code></div>
<div class="line"><code class="plain">			drpCultures.DataBind();</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">			</code><code class="comments">// Adds the '(any)' and '(default)' filtering options</code></div>
<div class="line"><code class="plain">			drpCultures.Items.Insert(0, </code><code class="keyword">new</code><code class="plain"> ListItem(</code><code class="string">"(default)"</code><code class="plain">, </code><code class="string">""</code><code class="plain">));</code></div>
<div class="line"><code class="plain">			drpCultures.Items.Insert(0, </code><code class="keyword">new</code><code class="plain"> ListItem(</code><code class="string">"(any)"</code><code class="plain">, </code><code class="string">"_any"</code><code class="plain">));</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">	</code><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="plain">	</code><code class="comments">/// Generates the SQL Where condition used to limit the data displayed in the connected UniGrid.</code></div>
<div class="line"><code class="plain">	</code><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">public</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">string</code><code class="plain"> GetWhereCondition()</code></div>
<div class="line"><code class="plain">	{</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">string</code><code class="plain"> filterCultureCode = Value </code><code class="keyword">as</code><code class="plain"> </code><code class="keyword">string</code><code class="plain">;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">		</code><code class="comments">// Returns an empty condition if the special (any) option is selected in the filter</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">if</code><code class="plain"> (filterCultureCode.Equals(</code><code class="string">"_any"</code><code class="plain">))</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			</code><code class="keyword">return</code><code class="plain"> String.Empty;</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">		</code><code class="comments">// Returns a condition for loading users whose preferred content culture matches the filter's value.</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">return</code><code class="plain"> </code><code class="string">"(PreferredCultureCode = N'"</code><code class="plain"> + Value + </code><code class="string">"')"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
</li></ol><p>The filter control is now ready to be assigned to any UniGrid component that works with user objects (and includes the <i class=" ">PreferredCultureCode</i> column in the loaded data). For example, the following <a href="reference---unigrid-definition">UniGrid definition</a> uses the custom filter for a column, and sets the filter's <i class=" ">CurrentSiteCulturesOnly</i> and <i class=" ">UICulturesOnly</i> parameters.</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;?</code><code class="keyword">xml</code><code class="plain"> </code><code class="color1">version</code><code class="plain">=</code><code class="string">"1.0"</code><code class="plain"> </code><code class="color1">encoding</code><code class="plain">=</code><code class="string">"utf-8"</code><code class="plain">?&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">&lt;</code><code class="keyword">grid</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">	&lt;</code><code class="keyword">objecttype</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"cms.user"</code><code class="plain"> </code><code class="color1">columns</code><code class="plain">=</code><code class="string">"UserID, UserName, PreferredCultureCode"</code><code class="plain"> /&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">	&lt;</code><code class="keyword">columns</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">		&lt;</code><code class="keyword">column</code><code class="plain"> </code><code class="color1">source</code><code class="plain">=</code><code class="string">"UserName"</code><code class="plain"> </code><code class="color1">caption</code><code class="plain">=</code><code class="string">"$general.username$"</code><code class="plain"> </code><code class="color1">wrap</code><code class="plain">=</code><code class="string">"false"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">		&lt;</code><code class="keyword">column</code><code class="plain"> </code><code class="color1">source</code><code class="plain">=</code><code class="string">"PreferredCultureCode"</code><code class="plain"> </code><code class="color1">caption</code><code class="plain">=</code><code class="string">"Preferred culture"</code><code class="plain"> </code><code class="color1">externalsourcename</code><code class="plain">=</code><code class="string">"#culturename"</code><code class="plain"> </code><code class="color1">width</code><code class="plain">=</code><code class="string">"100%"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">			&lt;</code><code class="keyword">filter</code><code class="plain"> </code><code class="color1">type</code><code class="plain">=</code><code class="string">"custom"</code><code class="plain"> </code><code class="color1">path</code><code class="plain">=</code><code class="string">"~/CMSGlobalFiles/UserCultureFilter.ascx"</code><code class="plain"> </code><code class="color1">defaultvalue</code><code class="plain">=</code><code class="string">"_any"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">				&lt;</code><code class="keyword">parameters</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">					&lt;</code><code class="keyword">filterparameter</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"CurrentSiteCulturesOnly"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"true"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">					&lt;</code><code class="keyword">filterparameter</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"UICulturesOnly"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"false"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">				&lt;/</code><code class="keyword">parameters</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">			&lt;/</code><code class="keyword">filter</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">		&lt;/</code><code class="keyword">column</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">	&lt;/</code><code class="keyword">columns</code><code class="plain">&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">	&lt;</code><code class="keyword">options</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">		&lt;</code><code class="keyword">key</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"DisplayFilter"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"true"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">		&lt;</code><code class="keyword">key</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"FilterLimit"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"0"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">	&lt;/</code><code class="keyword">options</code><code class="plain">&gt;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">&lt;/</code><code class="keyword">grid</code><code class="plain">&gt;</code></div>
</div>
    </div>
<p>If you view the output of the UniGrid, you can use the custom filter to control which users are displayed. The filter offers culture options according to the parameters that you configured in the UniGrid definition.</p>
<p><img class="confluence-embedded-image confluence-content-image-border" src="images/download/attachments/68882757/Custom_UniGrid_Filter.png" alt="images/download/attachments/68882757/Custom_UniGrid_Filter.png" width="500">
        <br><span class="caption">UniGrid displaying users with the custom culture filter</span>
    </p>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>