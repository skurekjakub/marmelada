<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Customizing marking shopping carts as abandoned - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260" elementpageid="68881672">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68881672"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="E-commerce-features.html">E-commerce features</a></li>
                                                                                                         <li class="shortcut"><a href="Customizing-and-developing-your-store.html">Customizing and developing your store</a></li>
                                                                                     <li><a href="Shopping-cart-related-customizing.html">Shopping cart-related customizing</a></li>
                                                            </ul>
</div>            <h1 id="src-68881672"> <span>Customizing marking shopping carts as abandoned</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<div class="sp-grid-section"><div class="sp-grid-cell sp-grid-60"><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-60"><p>The Kentico E-commerce Solution marks shopping carts as abandoned with a <a href="scheduling-tasks">scheduled task</a>. The scheduled task creates an <a href="tracking-contact-activities">activity</a> for every abandoned shopping cart. When you then set up a <a href="marketing-automation">marketing automation</a> process, the system sends an email reminder to <a href="customers">customers</a> with an abandoned shopping cart. In the email reminder, there can be, for example, links to the <a href="products">products</a> added to their shopping carts or a link to their shopping cart to continue shopping.</p><div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Abandoned shopping carts do not have any property indicating whether they are abandoned or not. The process is used only to create the abandoned shopping cart activities for marketing automation.</p>
        </div>
    </div><h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>How abandoned shopping cart reminders work</span></h3><p>The scenario presumes the situation when a visitor (potentially a future customer) considers purchasing some products but then changes the mind and leaves. Store administrators then want to remind the visitor of the products. To be able to contact a visitor, the system saves the ID of the visitor's <a href="contact-management">contact</a> to the shopping cart (specifically to the <i class=" ">ShoppingCartContactID</i> column in the <i class=" ">COM_ShoppingCart</i> database table). In this scenario, visitors can be:</p><ul class=" "><li class=" "><p>A registered customer – the customer has a <a href="user-management">user</a> assigned, the user has a contact assigned.</p>
</li><li class=" "><p>An anonymous customer – the visitor has a contact assigned according to their activities. The contact can be:</p>
<ul class=" "><li class=" "><p>With an email address – the email address is known, for example, from a subscribed <a href="email-marketing">newsletter</a>.</p>
</li><li class=" "><p>Without an email address – the visitor did not provide any email address, therefore you cannot reach such visitor.</p>
</li></ul></li></ul><p>In the administration interface, you can set after how many hours shopping carts are considered as abandoned (see <a href="walkthrough---sending-an-automated-reminder-of-an-abandoned-shopping-cart">Walkthrough - Sending an automated reminder of an abandoned shopping cart</a>). Besides that, you can customize the way the system recognizes abandoned shopping carts.</p><div class="sp-grid-section"></div><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68881672_customizingmarkingshoppingcartsasabandoned-howabandonedshoppingcartreminderswork">How abandoned shopping cart reminders work</a></p>
</li><li class=" "><p><a href="#src-68881672_customizingmarkingshoppingcartsasabandoned-customizingevaluationwhetherashoppingcartisabandoned">Customizing evaluation whether a shopping cart is abandoned</a></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68881672_safe-id-q3vzdg9taxppbmdtyxjraw5nc2hvchbpbmdjyxj0c2fzywjhbmrvbmvkluv4yw1wbgxigjndcmvhdgluz2fjdxn0b21ldmfsdwf0aw9ub2zhymfuzg9uzwrzag9wcgluz2nhcnrz">Example – Creating a custom evaluation of abandoned shopping carts</a></p>
</li></ul></li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="walkthrough---sending-an-automated-reminder-of-an-abandoned-shopping-cart">Walkthrough - Sending an automated reminder of an abandoned shopping cart</a></p>
</li><li class=" "><p><a href="scheduling-custom-tasks">Scheduling custom tasks</a></p>
</li><li class=" "><p><a href="checkout-process">Checkout process</a></p>
</li></ul>        </div>
    </div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68881672_customizingmarkingshoppingcartsasabandoned-howabandonedshoppingcartreminderswork">How abandoned shopping cart reminders work</a></p>
</li><li class=" "><p><a href="#src-68881672_customizingmarkingshoppingcartsasabandoned-customizingevaluationwhetherashoppingcartisabandoned">Customizing evaluation whether a shopping cart is abandoned</a></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68881672_safe-id-q3vzdg9taxppbmdtyxjraw5nc2hvchbpbmdjyxj0c2fzywjhbmrvbmvkluv4yw1wbgxigjndcmvhdgluz2fjdxn0b21ldmfsdwf0aw9ub2zhymfuzg9uzwrzag9wcgluz2nhcnrz">Example – Creating a custom evaluation of abandoned shopping carts</a></p>
</li></ul></li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="walkthrough---sending-an-automated-reminder-of-an-abandoned-shopping-cart">Walkthrough - Sending an automated reminder of an abandoned shopping cart</a></p>
</li><li class=" "><p><a href="scheduling-custom-tasks">Scheduling custom tasks</a></p>
</li><li class=" "><p><a href="checkout-process">Checkout process</a></p>
</li></ul>        </div>
    </div></div></div><div class="sp-grid-section"></div>
    
    


    
    
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Customizing evaluation whether a shopping cart is abandoned</span></h3>
<p>You can change the evaluation process when the system decides whether the shopping cart is abandoned.</p>
<p>When the scheduled task starts, the system initializes the <strong class=" ">MarkCartAbandoned</strong> class and triggers the <strong class=" ">Execute</strong> method. The <strong class=" ">Execute</strong> method retrieves all shopping carts fulfilling all of the following conditions:</p>
<ul class=" "><li class=" "><p>The shopping cart is non-empty (i.e., the shopping cart contains at least one product).</p>
</li><li class=" "><p>The content of the shopping cart has not been changed for the time specified by <a href="walkthrough---sending-an-automated-reminder-of-an-abandoned-shopping-cart">the <strong class=" ">Mark shopping cart as abandoned after (hours) </strong>setting</a> (the time is determined according to the <i class=" ">ShoppingCartLastUpdate</i> database column).</p>
</li><li class=" "><p>The shopping cart has not been processed by previous runs of the scheduled task yet.<br></p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>If the shopping cart was changed after it was processed by the scheduled task's previous run (e.g., if the customer opened the shopping cart, changed the products and left again), the shopping cart is then again processed by the scheduled task.</p>
        </div>
    </div>
<p></p>
</li></ul><p>Then you can filter the retrieved shopping carts with the <strong class=" ">FilterAbandonedCarts</strong> method:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">protected</code><code class="plain"> virtual ObjectQuery&lt;ShoppingCartInfo&gt; FilterAbandonedCarts(ObjectQuery&lt;ShoppingCartInfo&gt; abandonedCarts)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> abandonedCarts;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
<p>The <strong class=" ">Execute</strong> method then loops through the filtered shopping carts which are labeled as abandoned with the <strong class=" ">IsShoppingCartAbandoned</strong> method:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">protected</code><code class="plain"> virtual bool IsShoppingCartAbandoned(ShoppingCartInfo cart)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">true</code><code class="plain">;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
<p>The system then creates a <strong class=" ">Shopping cart abandoned</strong> activity for every looped abandoned shopping cart to its contact that ensures sending the reminder email to the contact.</p>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Example – Creating a custom evaluation of abandoned shopping carts</span></h4>
<p>Implement a class inheriting from the <strong class=" ">MarkCartAbandoned</strong> class to provide your custom logic of evaluating abandoned shopping carts.</p>
<ol class=" "><li class=" "><p>Create a new class file in your project in Visual Studio, for example <strong class=" ">CustomAbandonedCartEvaluation.cs</strong>, that inherits from the <strong class=" ">MarkCartAbandoned</strong> class.</p>
</li><li class=" "><p>Add the <strong class=" ">CMS</strong>, <strong class=" ">CMS.Ecommerce</strong> and <strong class=" ">CMS.DataEngine</strong> namespaces to the <i class=" ">using</i> block.</p>
</li><li class=" "><p>Assign the inheritance from the <strong class=" ">MarkCartAbandoned</strong> class to the <strong class=" ">CustomAbandonedCartEvaluation</strong> class:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> CustomAbandonedCartEvaluation : MarkCartAbandoned</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
</li><li class=" "><p>Add the <strong class=" ">RegisterCustomClass</strong> assembly attribute above the class declaration.</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">[assembly: RegisterCustomClass(</code><code class="string">"Custom.CustomMarkCartAbandoned"</code><code class="plain">, typeof(CustomAbandonedCartEvaluation))]</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> CustomAbandonedCartEvaluation : MarkCartAbandoned</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
</li><li class=" "><p>Override the methods you want to change.</p>
<ol class=" "><li class=" "><p>Override the <strong class=" ">FilterAbandonedCarts</strong> method. For example, if you do not want to send reminders to registered customers, you can exclude shopping carts containing user ID using <a href="retrieving-database-data-using-objectquery-api">the ObjectQuery API</a>:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">protected</code><code class="plain"> override ObjectQuery&lt;ShoppingCartInfo&gt; FilterAbandonedCarts(ObjectQuery&lt;ShoppingCartInfo&gt; abandonedCarts)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="comments">// Gets all abandoned carts where the user ID is not specified.</code></div>
<div class="line"><code class="plain">    ObjectQuery&lt;ShoppingCartInfo&gt; filteredCarts = abandonedCarts.WhereNull(</code><code class="string">"ShoppingCartUserID"</code><code class="plain">);</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> filteredCarts;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
</li><li class=" "><p>Override the <strong class=" ">IsShoppingCartAbandoned</strong> method. For example, if you do not want to send reminders when the shopping cart is in euros, you can exclude such shopping carts:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">protected</code><code class="plain"> override bool IsShoppingCartAbandoned(ShoppingCartInfo cart)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="comments">// Checks whether the shopping cart is paid in euros.</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">if</code><code class="plain"> (cart.Currency.CurrencyCode.EqualsCSafe(</code><code class="string">"EUR"</code><code class="plain">))</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">false</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">    </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">true</code><code class="plain">;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>If you use the mentioned example, you need to add the <strong class=" ">CMS.Base</strong> namespace to the <i class=" ">using</i> block.</p>
        </div>
    </div>
</li></ol></li><li class=" "><p><a href="walkthrough---sending-an-automated-reminder-of-an-abandoned-shopping-cart">Create a new scheduled task in the <strong class=" ">Scheduled tasks</strong> application</a> that will use the newly created <i class=" ">CustomAbandonedCartEvaluation</i> class.</p>
</li></ol><p>The system now excludes shopping carts based on your customization.</p>
    <div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Learn more about scheduling custom tasks in <a href="scheduling-custom-tasks">Scheduling custom tasks</a>.</p>
        </div>
    </div>
    <div class="scroll-expand-container collapsed">
        <div class="scroll-expand-control">
            <span class="scroll-expand-control-icon">&nbsp;</span>
            <span class="scroll-expand-control-text">See the complete used source code...</span>
        </div>
        <div class="scroll-expand-content">
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="true" data-firstline="1">
<div class="line"><code class="plain">using System;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">using CMS;</code></div>
<div class="line"><code class="plain">using CMS.Ecommerce;</code></div>
<div class="line"><code class="plain">using CMS.DataEngine;</code></div>
<div class="line"><code class="plain">using CMS.Base;</code></div>
<div class="line"> </div>
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Customizes the process of evaluation abandoned shopping carts.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="plain">[assembly: RegisterCustomClass(</code><code class="string">"Custom.CustomMarkCartAbandoned"</code><code class="plain">, typeof(CustomAbandonedCartEvaluation))]</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> CustomAbandonedCartEvaluation : MarkCartAbandoned</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">protected</code><code class="plain"> override ObjectQuery&lt;ShoppingCartInfo&gt; FilterAbandonedCarts(ObjectQuery&lt;ShoppingCartInfo&gt; abandonedCarts)</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        </code><code class="comments">// Gets all abandoned carts where the user ID is not specified.</code></div>
<div class="line"><code class="plain">        ObjectQuery&lt;ShoppingCartInfo&gt; filteredCarts = abandonedCarts.WhereNull(</code><code class="string">"ShoppingCartUserID"</code><code class="plain">);</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">        </code><code class="keyword">return</code><code class="plain"> filteredCarts;</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">    </code><code class="keyword">protected</code><code class="plain"> override bool IsShoppingCartAbandoned(ShoppingCartInfo cart)</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        </code><code class="comments">// Checks whether the shopping cart is paid in euros.</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">if</code><code class="plain"> (cart.Currency.CurrencyCode.EqualsCSafe(</code><code class="string">"EUR"</code><code class="plain">))</code></div>
<div class="line"><code class="plain">        {</code></div>
<div class="line"><code class="plain">            </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">false</code><code class="plain">;</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">        </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">true</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
        </div>
    </div>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>