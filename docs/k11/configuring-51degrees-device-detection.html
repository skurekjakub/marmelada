<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Configuring 51Degrees device detection - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260" elementpageid="76845149">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=76845149"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Developing-websites.html">Developing websites</a></li>
                                                                                     <li><a href="Developing-websites-for-mobile-devices.html">Developing websites for mobile devices</a></li>
                                                            </ul>
</div>            <h1 id="src-76845149"> <span>Configuring 51Degrees device detection</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<div class="sp-grid-section"><div class="sp-grid-cell sp-grid-60"><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-60"><p>By default, Kentico uses the <i class=" ">HttpBrowserCapabilities</i> class of the .NET Framework to detect properties of the current visitor's device. However, this detection method has limitations and might not be sufficiently accurate for your needs.</p><p>If you want to utilize more accurate device detection and a wider range of device properties, we recommend integrating <a class="external-link" href="https://51degrees.com/">51Degrees</a> device detection.</p><div class="sp-grid-section"></div><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="device-macros">Device macros</a></p>
</li></ul><ul class=" "><li class=" "><p><a class="external-link" href="https://51degrees.com/Resources/Property-Dictionary">51Degrees Property Dictionary</a></p>
</li></ul>        </div>
    </div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="device-macros">Device macros</a></p>
</li></ul><ul class=" "><li class=" "><p><a class="external-link" href="https://51degrees.com/Resources/Property-Dictionary">51Degrees Property Dictionary</a></p>
</li></ul>        </div>
    </div></div></div><div class="sp-grid-section"></div>

    
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Integrating 51Degrees</span></h3>
<ol class=" "><li class=" "><p>Open your Kentico solution in Visual Studio.</p>
</li><li class=" "><p>Right-click the Kentico web project (CMS or CMSApp) in the <strong class=" ">Solution Explorer</strong> and select <strong class=" ">Manage NuGet Packages</strong>.</p>
</li><li class=" "><p>Install the <a class="external-link" href="https://www.nuget.org/packages/51Degrees.mobi-web/">51Degrees.mobi-web</a> NuGet package.</p>
</li><li class=" "><p>Make sure that the <a class="external-link" href="https://51degrees.com/Developers/Documentation/APIs/NET-V32/Web-Apps/Configuration/Image-Optimisation">imageOptimisation</a> and <a class="external-link" href="https://51degrees.com/Developers/Documentation/APIs/NET-V32/Web-Apps/Configuration/Redirect">redirect</a> features are not enabled in the <i class=" ">~/51Degrees.config</i> file.</p>
</li><li class=" "><p>(Optional) <a class="external-link" href="https://51degrees.com/Support/Documentation/NET/Licence-Keys-Automatic-Updates">Register</a> the premium data file by modifying a detection key in the <i class=" ">fiftyOne</i> section of the <i class=" ">~/51Degrees.config</i> file. Modify the path to point to the location of your premium data file.</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">detection</code><code class="plain"> </code><code class="color1">enabled</code><code class="plain">=</code><code class="string">"true"</code><code class="plain"> </code><code class="color1">autoUpdate</code><code class="plain">=</code><code class="string">"true"</code><code class="plain"> </code><code class="color1">binaryFilePath</code><code class="plain">=</code><code class="string">"~/App_Data/51Degrees.dat"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
    <div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Premium Device Data Subscription</strong></p>
<p>You need to purchase a premium license from the <a class="external-link" href="https://51degrees.com/Licencing-Pricing">51Degrees website</a> to gain access to the full list of properties and devices. By default, only properties labeled as <strong class=" ">Lite</strong> in the <a class="external-link" href="https://51degrees.com/Resources/Property-Dictionary">51Degrees Property Dictionary</a> are available.</p>
        </div>
    </div>
</li></ol>    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Customizing CurrentDevice object properties</span></h3>
<p>If you want to use the 51Degrees properties in macros directly as properties of the <i class=" ">CurrentDevice</i> object in the <i class=" ">{% CurrentDevice.IsMobile %}</i> format, rather than the <i class=" ">Data</i> container format <i class=" ">{% CurrentDevice.Data["IsMobile"] %}</i>, you can implement a custom <i class=" ">CurrentDevice</i> instance. The customization also introduces the 51Degrees properties to the macro autocomplete and helps you when entering macros in the administration interface.</p>
<p>Start by preparing a separate project for custom classes in your Kentico solution:</p>
<ol class=" "><li class=" "><p>Open your Kentico solution in Visual Studio.</p>
</li><li class=" "><p>Create a new <i class=" ">Class Library</i> project in the Kentico solution (or reuse an existing custom project).</p>
</li><li class=" "><p>Add references to the required Kentico libraries (DLLs) for the project:<br></p>
<ul class=" "><li class=" "><p>Right-click the project and select <strong class=" ">Add -&gt; Reference</strong>.</p>
</li><li class=" "><p>Select the <strong class=" ">Browse</strong> tab of the <strong class=" ">Reference manager</strong> dialog, click <strong class=" ">Browse</strong> and navigate to the <i class=" "><strong class=" ">Lib</strong> </i>folder of your Kentico web project.</p>
</li><li class=" "><p>Add references to the following libraries (and any others that you use in the custom code):</p>
<ul class=" "><li class=" "><p><i class=" ">CMS.Base.dll</i></p>
</li><li class=" "><p><i class=" ">CMS.Core.dll</i></p>
</li><li class=" "><p><i class=" ">CMS.DeviceProfiles.dll</i></p>
</li><li class=" "><p><i class=" ">CMS.Helpers.dll</i></p>
</li></ul></li></ul></li><li class=" "><p>Reference the custom project from the Kentico web project <i class=" ">(CMSApp</i> or <i class=" ">CMS)</i>.</p>
</li><li class=" "><p>Edit the project's <strong class=" ">AssemblyInfo.cs</strong> file (in the <i class=" ">Properties</i> folder).</p>
</li><li class=" "><p>Add the <i class=" ">AssemblyDiscoverable</i> assembly attribute:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">AssemblyInfo.cs</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="AssemblyInfo.cs" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> CMS;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">[assembly:AssemblyDiscoverable]</code></div>
</div>
    </div>
</li></ol><p>Continue by creating classes that register the required <i class=" ">CurrentDevice</i> properties:</p>
<ol class=" "><li class=" "><p>Create a new class file under the custom project:</p>
<ol class=" "><li class=" "><p>Right-click the project and select <strong class=" ">Add -&gt; Class</strong>.</p>
</li><li class=" "><p>Enter <i class=" ">FiftyOneCurrentDevice.cs</i> as the file name.</p>
</li><li class=" "><p>Click <strong class=" ">Add</strong>.</p>
</li><li class=" "><p>Make the class inherit from <strong class=" ">CurrentDevice</strong> (found in the <i class=" ">CMS.DeviceProfiles</i> namespace).</p>
</li><li class=" "><p>Create wrappers for any <a class="external-link" href="https://51degrees.com/Resources/Property-Dictionary">51Degrees properties</a> that you wish to access in your <i class=" ">CurrentDevice</i> macros:</p>
</li></ol>    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Each wrapper consists of a class property registered by the <strong class=" ">RegisterColumn</strong> attribute. Load the property values from the <strong class=" ">Data</strong> container, which is available in the <i class=" ">CurrentDevice</i> base class. Installing the 51Degrees NuGet package automatically ensures that the corresponding properties are available in the <i class=" ">Data</i> container.</p>
        </div>
    </div>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example - FiftyOneCurrentDevice.cs</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example - FiftyOneCurrentDevice.cs" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> CMS;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.DeviceProfiles;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.Helpers;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> FiftyOneCurrentDevice : CurrentDevice</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    [RegisterColumn]</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">public</code><code class="plain"> </code><code class="keyword">bool</code><code class="plain"> IsMobile =&gt; ValidationHelper.GetBoolean(Data[</code><code class="string">"IsMobile"</code><code class="plain">], </code><code class="keyword">false</code><code class="plain">);</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    [RegisterColumn]</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">public</code><code class="plain"> </code><code class="keyword">string</code><code class="plain"> PlatformName =&gt; ValidationHelper.GetString(Data[</code><code class="string">"PlatformName"</code><code class="plain">], </code><code class="string">""</code><code class="plain">);</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">	...</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
</li><li class=" "><p>Create a new class file named <i class=" ">FiftyOneCurrentDeviceProvider.cs</i>.</p>
<ol class=" "><li class=" "><p>Make the class implement the <strong class=" ">ICurrentDeviceProvider</strong> interface (found in the <i class=" ">CMS.DeviceProfiles</i> namespace).</p>
</li><li class=" "><p>Add the <strong class=" ">GetCurrentDevice()</strong> method and return an instance of your custom class containing <i class=" ">CurrentDevice</i> properties (<i class=" ">FiftyOneCurrentDevice</i> in this example).</p>
</li><li class=" "><p>Register the class as the implementation of the <i class=" ">ICurrentDeviceProvider</i> interface using the <strong class=" ">RegisterImplementation</strong> assembly attribute.</p>
</li></ol>    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example - FiftyOneCurrentProvider.cs</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example - FiftyOneCurrentProvider.cs" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> CMS;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.DeviceProfiles;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">[assembly: RegisterImplementation(</code><code class="keyword">typeof</code><code class="plain">(ICurrentDeviceProvider), </code><code class="keyword">typeof</code><code class="plain">(FiftyOneCurrentDeviceProvider), Lifestyle = CMS.Core.Lifestyle.Transient)]</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> FiftyOneCurrentDeviceProvider : ICurrentDeviceProvider</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">public</code><code class="plain"> CurrentDevice GetCurrentDevice()</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">new</code><code class="plain"> FiftyOneCurrentDevice();</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
</li><li class=" "><p><strong class=" ">Build</strong> the custom project.</p>
</li></ol><p>You can now access the registered properties within the <i class=" ">CurrentDevice</i> macro object.</p>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>