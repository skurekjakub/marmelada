<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Enabling export and staging for the data of classes - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260" elementpageid="68882235">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68882235"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Custom-development.html">Custom development</a></li>
                                                                                                         <li class="shortcut"><a href="Creating-custom-modules.html">Creating custom modules</a></li>
                                                                                     <li><a href="Setting-the-type-information-for-module-classes.html">Setting the type information for module classes</a></li>
                                                            </ul>
</div>            <h1 id="src-68882235"> <span>Enabling export and staging for the data of classes</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<div class="sp-grid-section"><div class="sp-grid-cell sp-grid-60"><p>The <a href="exporting-and-importing-sites">Export - Import</a> and <a href="content-staging">Staging</a> features allow you to transfer objects between Kentico instances. To use these features for the data of custom module classes, you need to set the appropriate <a href="setting-the-type-information-for-module-classes">type information</a> when developing your classes. If you need more information about the basics of module and class development, see the example in <a href="creating-custom-modules">Creating custom modules</a>.</p><h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Enabling export and import support</span></h3><p>To add <a href="exporting-and-importing-sites">export and import</a> support for a custom module class:</p><ol class=" "><li class=" "><p>Open the Kentico solution where you are developing the custom module (in Visual Studio).</p>
</li><li class=" "><p>Edit the <i class=" ">Info</i> class representing your module class.</p>
</li><li class=" "><p>Set the <strong class=" ">ImportExportSettings</strong> property in the <a class="external-link" href="http://msdn.microsoft.com/en-us/library/bb384062.aspx">initializer</a> of the TYPEINFO object. Use a nested initializer to configure the properties of the <i class=" ">ImportExportSettings</i> class:<br></p>
<ul class=" "><li class=" "><p>Set <strong class=" ">IsExportable</strong> to <i class=" ">true.</i></p>
</li><li class=" "><p>Assign a List of <i class=" ">ObjectTreeLocation</i> objects to the <strong class=" ">ObjectTreeLocations</strong> property.</p>
</li><li class=" "><p>Set the other <i class=" ">ImportExportSettings</i> properties according to the type of the class and your requirements. See the <a href="#src-68882235_enablingexportandstagingforthedataofclasses-importexportsettings">ImportExportSettings reference</a> for more information.</p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Each <i class=" ">ObjectTreeLocation</i> object adds the class to a location within the object tree in the export and import wizard used by the Kentico interface.</p>
<p><i class=" ">ObjectTreeLocation</i> objects accept any number of string parameters, each representing a category (level) in the object tree, starting from the <i class=" ">GLOBAL</i> or <i class=" ">SITE</i> system categories. You can either use custom strings, or the default Kentico category constants. The tree item containing the class's objects is added under the last category.</p>
        </div>
    </div>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">ImportExportSettings =</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	IsExportable = </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">	ObjectTreeLocations = </code><code class="keyword">new</code><code class="plain"> List&lt;ObjectTreeLocation&gt;()</code></div>
<div class="line"><code class="plain">	{</code></div>
<div class="line"><code class="plain">		</code><code class="comments">// Adds the custom class into a new category in the Global objects section of the export tree</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">new</code><code class="plain"> ObjectTreeLocation(GLOBAL, </code><code class="string">"Custom"</code><code class="plain">),</code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">},</code></div>
</div>
    </div>
</li></ul></li><li class=" "><p>Save the changes (build the project on web application installations).</p>
</li><li class=" "><p>Create <a href="working-with-resource-strings">resource strings</a> for the text of the class and any custom categories in the object tree of the export interface. Use the following format for the resource string keys:</p>
<ul class=" "><li class=" "><p><i class=" ">ObjectTasks.&lt;object type name with an underscore&gt;</i> - sets the text of the tree item representing the class in the export object tree.</p>
</li><li class=" "><p><i class=" ">ObjectTasks.&lt;category string&gt;</i> - sets the text of the matching custom category in the export object tree.<i class=" "><br></i></p>
</li></ul></li></ol><p>Users can now create export packages containing objects of your custom class (via the <strong class=" ">Sites</strong> application). The packages can be imported on other Kentico instances with the same custom module.</p><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882235_enablingexportandstagingforthedataofclasses-enablingexportandimportsupport">Enabling export and import support</a></p>
</li><li class=" "><p><a href="#src-68882235_enablingexportandstagingforthedataofclasses-enablingstagingsupport">Enabling staging support</a></p>
</li><li class=" "><p><a href="#src-68882235_enablingexportandstagingforthedataofclasses-ensuringobjectidtranslationduringdeployment">Ensuring object ID translation during deployment</a></p>
</li><li class=" "><p><a href="#src-68882235_enablingexportandstagingforthedataofclasses-example-settingupexportandstagingforacustomclass">Example - Setting up export and staging for a custom class</a></p>
</li><li class=" "><p><a href="#src-68882235_enablingexportandstagingforthedataofclasses-references">References</a></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882235_enablingexportandstagingforthedataofclasses-importexportsettings">ImportExportSettings</a></p>
</li><li class=" "><p><a href="#src-68882235_enablingexportandstagingforthedataofclasses-synchronizationsettings">SynchronizationSettings</a></p>
</li><li class=" "><p><a href="#src-68882235_enablingexportandstagingforthedataofclasses-includetoparentenum">IncludeToParentEnum</a></p>
</li></ul></li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="setting-the-type-information-for-module-classes">Setting the type information for module classes</a></p>
</li><li class=" "><p><a href="exporting-and-importing-sites">Exporting and importing sites</a></p>
</li><li class=" "><p><a href="content-staging">Content staging</a></p>
</li><li class=" "><p><a href="reference---objecttypeinfo">Reference - ObjectTypeInfo</a></p>
</li></ul>        </div>
    </div></div></div>
    


    
    
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Enabling staging support</span></h3>
<p>To allow <a href="content-staging">Staging</a> for objects of a custom module class:</p>
<ol class=" "><li class=" "><p>Open the Kentico solution where you are developing the custom module (in Visual Studio).</p>
</li><li class=" "><p>Edit the <i class=" ">Info</i> class representing your module class.</p>
</li><li class=" "><p>Set the <strong class=" ">SynchronizationSettings</strong> property in the <a class="external-link" href="http://msdn.microsoft.com/en-us/library/bb384062.aspx">initializer</a> of the TYPEINFO object. Use a nested initializer to configure the <a href="#src-68882235_enablingexportandstagingforthedataofclasses-synchronizationsettings">properties of the <i class=" ">SynchronizationSettings</i></a> class:</p>
<ul class=" "><li class=" "><p>Set the <strong class=" ">LogSynchronization</strong> property to one of the options from the <strong class=" ">SynchronizationTypeEnum</strong>:</p>
    <div class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col>
                                    <col>
                            </colgroup>
        <thead class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Value</p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>None</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Default value for classes without a parent class. The system does not log staging tasks for objects of the class.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>LogSynchronization</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>The system logs staging tasks when objects of the class are created, updated or deleted.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>TouchParent</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Default value for classes that have a <a href="setting-parent-child-relationships-for-classes">parent class</a>.</p>
<p>When an object of the child class is created, modified or deleted, the system triggers an update of the parent object. The update generates staging tasks according to the type information settings of the parent class.</p>
<p>The <i class=" ">IncludeToSynchronizationParentDataSet</i> property in the type information of the child class allows you to define how the parent class contains the data of child objects.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Default</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Do not set this value (not intended for manual use).</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
</li><li class=" "><p>For classes that have a <a href="setting-parent-child-relationships-for-classes">parent class</a>, set the <strong class=" ">IncludeToSynchronizationParentDataSet</strong> property. The value must be one of the options from the <a href="#src-68882235_enablingexportandstagingforthedataofclasses-includetoparentenum">IncludeToParentEnum</a> (the default value is <i class=" ">Complete</i> for classes that have a parent class set in their type information).</p>
</li><li class=" "><p>Assign a List of <i class=" ">ObjectTreeLocation</i> objects to the <strong class=" ">ObjectTreeLocations</strong> property.</p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>Each <i class=" ">ObjectTreeLocation</i> object adds the class to a location within the object tree on the <strong class=" ">Objects</strong> tab of the <strong class=" ">Staging</strong> application.</p>
<p><i class=" ">ObjectTreeLocation</i> objects accept any number of string parameters, each representing a category (level) in the object tree, starting from the <i class=" ">GLOBAL</i> or <i class=" ">SITE</i> system categories. You can either use custom strings, or the default Kentico category constants. The tree item containing the class's objects is added under the last category.</p>
        </div>
    </div>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">SynchronizationSettings =</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	LogSynchronization = SynchronizationTypeEnum.LogSynchronization,</code></div>
<div class="line"><code class="plain">	ObjectTreeLocations = </code><code class="keyword">new</code><code class="plain"> List&lt;ObjectTreeLocation&gt;()</code></div>
<div class="line"><code class="plain">	{</code></div>
<div class="line"><code class="plain">		</code><code class="comments">// Adds the custom class into a new category in the Global objects section of the staging tree</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">new</code><code class="plain"> ObjectTreeLocation(GLOBAL, </code><code class="string">"Custom"</code><code class="plain">)</code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">},</code></div>
</div>
    </div>
</li></ul></li><li class=" "><p>Save the changes (build the project on web application installations).</p>
</li><li class=" "><p>Create <a href="working-with-resource-strings">resource strings</a> for the text of the class and any custom categories in the object tree of the staging interface. Use the following format for the resource string keys:</p>
<ul class=" "><li class=" "><p><i class=" ">ObjectTasks.&lt;object type name with an underscore&gt;</i> - sets the text of the tree item representing the class in the staging object tree.</p>
</li><li class=" "><p><i class=" ">ObjectTasks.&lt;category string&gt;</i> - sets the text of the matching custom category in the staging object tree.</p>
    <div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Tip</strong>: If you are configuring both staging and export for a custom class, you can reuse resource strings. The object trees in the export and staging interface share the same resource string key format.</p>
        </div>
    </div>
</li></ul></li></ol><p>You can now use staging to synchronize the class's objects to other Kentico instances with the same custom module. The system logs staging tasks whenever one of the class's objects is created, modified or deleted (if staging of object changes is enabled).</p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Ensuring object ID translation during deployment</span></h3>
<p>When transferring the data of custom classes between instances, the IDs of objects can differ between the environments. For example, when you stage an object that contains a field storing another object's ID, the value may not match the ID of the same object on the target server.</p>
<p>Kentico <strong class=" ">automatically</strong> "translates" the ID values for fields that are correctly <a href="adding-references-between-classes">registered as references</a> (dependencies) in the class's <a href="setting-the-type-information-for-module-classes">type information</a>.</p>
<p>If you have a custom field storing IDs that you do not wish to register as a reference, you can set up a custom translation process:</p>
<ol class=" "><li class=" "><p>Register your custom module in the API as described in <a href="initializing-modules-to-run-custom-code">Initializing modules to run custom code</a>.</p>
</li><li class=" "><p>Assign handler methods to the <strong class=" ">ColumnsTranslationEvents</strong> events in the module's initialization code.</p>
</li><li class=" "><p>Define the ID translation logic in the handlers. For more information, see <a href="deploying-objects-with-custom-id-fields">Deploying objects with custom ID fields</a>.</p>
</li></ol>    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Example - Setting up export and staging for a custom class</span></h3>
<p>The following example demonstrates how to enable export and staging for the data records of a custom class.</p>
    <div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>To follow the example, you first need to create the <strong class=" ">Company overview</strong> custom module and the <strong class=" ">Office</strong> class according to the instructions in <a href="creating-custom-modules">Creating custom modules</a>.</p>
        </div>
    </div>
<ol class=" "><li class=" "><p>Open your web project in Visual Studio.</p>
</li><li class=" "><p>Edit <strong class=" "><i class=" ">OfficeInfo.cs</i></strong> (by default in the <i class=" ">~/App_Code/CMSModules/CompanyOverview</i> folder).</p>
</li><li class=" "><p>Add a <strong class=" ">using</strong> statement for the <strong class=" ">System.Collections.Generic</strong> namespace.</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> System.Collections.Generic;</code></div>
</div>
    </div>
</li><li class=" "><p>Navigate to the <strong class=" ">TYPEINFO</strong> field in the class's code.</p>
</li><li class=" "><p>Define the <strong class=" ">ImportExportSettings</strong> and <strong class=" ">SynchronizationSettings</strong> in the initializer of the new <strong class=" ">ObjectTypeInfo</strong> object.</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">static</code><code class="plain"> ObjectTypeInfo TYPEINFO = </code><code class="keyword">new</code><code class="plain"> ObjectTypeInfo(</code><code class="keyword">typeof</code><code class="plain">(OfficeInfoProvider), OBJECT_TYPE, </code><code class="string">"CompanyOverview.Office"</code><code class="plain">, </code><code class="string">"OfficeID"</code><code class="plain">, </code><code class="string">"OfficeLastModified"</code><code class="plain">, </code><code class="string">"OfficeGUID"</code><code class="plain">, </code><code class="string">"OfficeName"</code><code class="plain">, </code><code class="string">"OfficeDisplayName"</code><code class="plain">, </code><code class="keyword">null</code><code class="plain">, </code><code class="keyword">null</code><code class="plain">, </code><code class="keyword">null</code><code class="plain">, </code><code class="keyword">null</code><code class="plain">)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	ModuleName = </code><code class="string">"CompanyOverview"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">	TouchCacheDependencies = </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">	ImportExportSettings =</code></div>
<div class="line"><code class="plain">	{</code></div>
<div class="line"><code class="plain">		IsExportable = </code><code class="keyword">true</code><code class="plain">, </code><code class="comments">// Makes the data of the custom Office class exportable</code></div>
<div class="line"><code class="plain">		AllowSingleExport = </code><code class="keyword">true</code><code class="plain">, </code><code class="comments">// Allows export of single office objects from the office listing page</code></div>
<div class="line"><code class="plain">		ObjectTreeLocations = </code><code class="keyword">new</code><code class="plain"> List&lt;ObjectTreeLocation&gt;()</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			</code><code class="comments">// Creates a new category in the global objects export interface</code></div>
<div class="line"><code class="plain">			</code><code class="keyword">new</code><code class="plain"> ObjectTreeLocation(GLOBAL, </code><code class="string">"CompanyOverview"</code><code class="plain">)</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">	},</code></div>
<div class="line"><code class="plain">	SynchronizationSettings =	</code></div>
<div class="line"><code class="plain">	{</code></div>
<div class="line"><code class="plain">		LogSynchronization = SynchronizationTypeEnum.LogSynchronization, </code><code class="comments">// Enables logging of staging tasks for changes made to Office objects</code></div>
<div class="line"><code class="plain">		ObjectTreeLocations = </code><code class="keyword">new</code><code class="plain"> List&lt;ObjectTreeLocation&gt;()</code></div>
<div class="line"><code class="plain">		{</code></div>
<div class="line"><code class="plain">			</code><code class="comments">// Creates a new category in the 'Global objects' section of the staging object tree</code></div>
<div class="line"><code class="plain">			</code><code class="keyword">new</code><code class="plain"> ObjectTreeLocation(GLOBAL, </code><code class="string">"CompanyOverview"</code><code class="plain">)</code></div>
<div class="line"><code class="plain">		}</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">};</code></div>
</div>
    </div>
</li><li class=" "><p>Save the changes (build the project on web application installations).</p>
</li></ol><p>Create <a href="working-with-resource-strings">resource strings</a> for the text of the new category and class in the object export and staging interface:</p>
<ol class=" "><li class=" "><p>In the Kentico administration interface, open the <strong class=" ">Localization</strong> application.</p>
</li><li class=" "><p>On the <strong class=" ">Resource strings</strong> tab, click <strong class=" ">New string</strong>.</p>
</li><li class=" "><p>Enter the following <strong class=" ">Key</strong>: <i class=" ">ObjectTasks.CompanyOverview</i><i class=" "><br></i></p>
</li><li class=" "><p>Type the following text for the English version of the key: <i class=" ">Company overview</i></p>
</li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>Click <strong class=" ">New string</strong>.</p>
</li><li class=" "><p>Enter the following <strong class=" ">Key</strong>: <i class=" ">ObjectTasks.</i><i class=" "><i class=" ">CompanyOverview_Office</i></i></p>
</li><li class=" "><p>Type the following text for the English version of the key: <i class=" ">Offices</i></p>
</li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li></ol><p>You can now export the data records of the custom Office class and import the packages on other instances that contain the sample <i class=" ">Company overview</i> module. To test the functionality:</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Sites</strong> application.</p>
</li><li class=" "><p>Click <strong class=" ">Export</strong>.</p>
</li><li class=" "><p>Enter a <strong class=" ">File name</strong> for the export package and click <strong class=" ">Next</strong>.</p>
</li></ol><p>You can find the custom <i class=" ">Company overview</i> category in the <i class=" ">Global objects</i> section of the tree. When you click the <i class=" ">Offices</i> object type, you can select office records and continue with the export.</p>
<p><img class="confluence-embedded-image confluence-content-image-border" src="images/download/attachments/68882235/Exporting_custom_class.png" alt="images/download/attachments/68882235/Exporting_custom_class.png" width="500">
        <br><span class="caption">Exporting the data of a custom module class</span>
    </p>
<p>For staging, you can find the <i class=" ">Company overview</i> category in the <i class=" ">Global objects</i> section of the tree on the <strong class=" ">Objects</strong> tab of the <strong class=" ">Staging</strong> application. The system logs staging tasks whenever an office object is created, modified or deleted (if staging of object changes is enabled).</p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>References</span></h3>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>ImportExportSettings</span></h4>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>The reference lists the <strong class=" ">ImportExportSettings</strong> properties that are intended for public use. The class also contains other members, which are used internally or handled automatically by the system. We do not recommend working with any of the undocumented members.</p>
        </div>
    </div>
    <div class="tablewrap">
        <table class="wrapped confluenceTable">
        <thead class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Property</p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Type</p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>AllowSingleExport</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>bool</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Allows export of individual objects of the given class from <a href="unigrid">UniGrid</a> listing pages.</p>
<p>See also: <a href="exporting-single-objects">Exporting single objects</a></p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>IncludeToExportParentDataSet</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>IncludeToParentEnum</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Applies to classes that have a <a href="setting-parent-child-relationships-for-classes">parent class</a>. Determines whether the system automatically includes objects of the class when exporting parent objects.</p>
<p>See <a href="#src-68882235_enablingexportandstagingforthedataofclasses-includetoparentenum">IncludeToParentEnum</a> to learn about the available values. The default value is <i class=" ">Complete</i> for classes that have the <i class=" ">ParentObjectType</i> and <i class=" ">ParentID</i> properties set in their type information.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>IsExportable</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>bool</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Allows export of the class's data.</p>
<p><strong class=" ">Important</strong>: Must be set to <i class=" ">true</i> if you wish to use the import and export features for the class.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>LogExport</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>bool</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>If enabled, the system logs <i class=" ">delete tasks</i> when objects of the given class are deleted. You can include the delete tasks in export packages, and then use them to delete the given objects on other instances during the import.</p>
<p>Logging of export tasks must also be enabled globally (or for individual sites) using the <strong class=" ">Settings -&gt; <a class="external-link" href="http://localhost/Kentico82_1124/CMSModules/Settings/Pages/Categories.aspx">    <span style="color: #262524;">
Versioning &amp; Synchronization    </span>
</a> -&gt; Staging -&gt; Log export tasks</strong> setting.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>LogProgress</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>bool</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Determines whether the import progress log includes a record for objects of the class (for example <i class=" ">"Importing Users"</i>).</p>
<p><i class=" ">True</i> by default.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>ObjectTreeLocations</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>List&lt;ObjectTreeLocation&gt;</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Adds the class to the user interface in the object selection step of the export wizard. Defined as a <i class=" ">List</i> collection of <i class=" ">ObjectTreeLocation</i> objects.</p>
<ul class=" "><li class=" "><p>ObjectTreeLocation objects accept string parameters, each representing a category (level) in the export object tree, starting from the <i class=" ">GLOBAL</i> or <i class=" ">SITE</i> system categories.</p>
</li><li class=" "><p>You can either use custom strings, or the default Kentico category constants. For custom strings, you need to create <a href="working-with-resource-strings">resource strings</a> that set the visible text, with a key in format: <i class=" ">ObjectTasks.&lt;string&gt;</i></p>
</li><li class=" "><p>The tree item containing the class's objects is added under the final category. The name of the item uses a resource string with a key in format: <i class=" ">ObjectTasks.&lt;object type name with an underscore&gt;</i></p>
</li></ul>    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">ObjectTreeLocations = </code><code class="keyword">new</code><code class="plain"> List&lt;ObjectTreeLocation&gt;</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">new</code><code class="plain"> ObjectTreeLocation(GLOBAL, CONFIGURATION, </code><code class="string">"CUSTOM"</code><code class="plain">),</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">new</code><code class="plain"> ObjectTreeLocation(SITE, CONFIGURATION, </code><code class="string">"CUSTOM"</code><code class="plain">)</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>OrderBy</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>string</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>An SQL Order by clause that sets the order of objects in the XML data of export packages. Ensures that all export packages containing the same objects have a consistent order and matching XML data.</p>
<p>If not set, the default order is based on the values of the following column types (depending on what is available for the class):</p>
<ol class=" "><li class=" "><p>GUID column</p>
</li><li class=" "><p>Code name column</p>
</li><li class=" "><p>Combination of all binding columns (only for dedicated <a href="creating-custom-binding-classes">binding classes</a>)</p>
</li><li class=" "><p>ID column</p>
</li><li class=" "><p>Display name column</p>
</li><li class=" "><p>Parent ID column</p>
</li><li class=" "><p>Site ID column</p>
</li><li class=" "><p>Order column</p>
</li></ol>            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>WhereCondition</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>string</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>An SQL Where condition that defines which objects of the class are available for export (in the object selection step of the export process). Allows you to disable export for testing or internal objects. Does not affect the single object export.</p>
<p>Example: <i class=" ">OfficeName NOT LIKE 'internal%'</i></p>
<p>The sample value above excludes all objects whose value in the <i class=" ">OfficeName</i> field starts with the <i class=" ">internal</i> prefix.</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>SynchronizationSettings</span></h4>
    <div class="tablewrap">
        <table class="wrapped confluenceTable">
        <thead class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Property</p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Type</p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>ExcludedStagingColumns</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>IList&lt;string&gt;</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Allows you to specify fields that are not processed when creating or updating objects of the class via staging. Defined as an <i class=" ">IList</i> collection of field names (as a blacklist of fields).</p>
<p>If not set, staging for objects of the given type includes all fields by default.</p>
<p>For classes with excluded fields, staging works in the following way:</p>
<ul class=" "><li class=" "><p>When creating new objects via staging, excluded fields use their default value (often empty or null).</p>
</li><li class=" "><p>When updating existing objects, the current values of excluded fields are preserved.</p>
</li></ul><p><strong class=" ">Note</strong>: The property does NOT limit the actual data of staging tasks, only the create and update operations that take place on the target server.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>IncludeToSynchronizationParentDataSet</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>IncludeToParentEnum</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Applies to classes that have a parent class. Determines whether the <a href="content-staging">staging</a> data of parent objects automatically includes child objects of the given class.</p>
<p>See <a href="#src-68882235_enablingexportandstagingforthedataofclasses-includetoparentenum">IncludeToParentEnum</a> to learn about the available values. The default value is <i class=" ">Complete</i> for classes that have the <i class=" ">ParentObjectType</i> and <i class=" ">ParentID</i> properties set in their type information.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>LogCondition</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p><a class="external-link" href="https://msdn.microsoft.com/en-us/library/bb549151%28v=vs.110%29.aspx">Func&lt;BaseInfo, bool&gt;</a></p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Allows you to specify a condition that determines which objects of the class generate <a href="content-staging">staging</a> tasks.</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">SynchronizationSettings =</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	LogCondition = FilterTestObjects,</code></div>
<div class="line"><code class="plain">	...</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">...</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">private</code><code class="plain"> </code><code class="keyword">static</code><code class="plain"> </code><code class="keyword">bool</code><code class="plain"> FilterTestObjects(BaseInfo classObj)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">var</code><code class="plain"> classInfo = (CustomClassInfo)classObj;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">	</code><code class="comments">// Disables staging for objects whose code name starts with "test_"</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">if</code><code class="plain"> (classInfo.CustomClassName.StartsWithCSafe(</code><code class="string">"test_"</code><code class="plain">))</code></div>
<div class="line"><code class="plain">	{</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">false</code><code class="plain">;</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">	</code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">true</code><code class="plain">;</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>LogSynchronization</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>SynchronizationTypeEnum</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Determines whether the system logs <a href="content-staging">staging</a> tasks for objects of the class. The following <i class=" ">SynchronizationTypeEnum</i> values are available:</p>
<ul class=" "><li class=" "><p><strong class=" ">None</strong> - default value for classes without a parent class. The system does not log staging tasks for objects of the class.</p>
</li><li class=" "><p><strong class=" ">LogSynchronization</strong> - the system logs staging tasks when objects of the class are created, updated or deleted.</p>
</li><li class=" "><p><strong class=" ">TouchParent</strong> - default value for classes that have a parent class. When an object of the child class is created, modified or deleted, the system triggers an update of the parent object. The update generates staging tasks according to the type information settings of the parent class.</p>
</li><li class=" "><p><strong class=" ">Default</strong> - do not set this value (not intended for manual use).</p>
</li></ul>            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>ObjectTreeLocations</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>List&lt;ObjectTreeLocation&gt;</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Adds the class to the object tree on the <strong class=" ">Objects</strong> tab of the <strong class=" ">Staging</strong> application. Defined as a <i class=" ">List</i> collection of <i class=" ">ObjectTreeLocation</i> objects.</p>
<ul class=" "><li class=" "><p>ObjectTreeLocation objects accept string parameters, each representing a category (level) in the staging object tree, starting from the <i class=" ">GLOBAL</i> or <i class=" ">SITE</i> system categories.</p>
</li><li class=" "><p>You can either use custom strings, or the default Kentico category constants. For custom strings, you need to create <a href="working-with-resource-strings">resource strings</a> that set the visible text, with a key in format: <i class=" ">ObjectTasks.&lt;string&gt;</i></p>
</li><li class=" "><p>The tree item containing the class's objects is added as the child of the final category. The name of the item uses a resource string with a key in format: <i class=" ">ObjectTasks.&lt;class code name with an underscore&gt;</i></p>
</li></ul>    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">SynchronizationObjectTreeLocations = </code><code class="keyword">new</code><code class="plain"> List&lt;ObjectTreeLocation&gt;()</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">new</code><code class="plain"> ObjectTreeLocation(GLOBAL, CONFIGURATION, </code><code class="string">"CUSTOM"</code><code class="plain">),</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">new</code><code class="plain"> ObjectTreeLocation(SITE, CONFIGURATION, </code><code class="string">"CUSTOM"</code><code class="plain">)</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>IncludeToParentEnum</span></h4>
<p>The <i class=" ">IncludeToParentEnum</i> has the following possible values:</p>
    <div class="tablewrap">
        <table class="wrapped confluenceTable">
        <thead class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Value</p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>None</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Objects of the <a href="setting-parent-child-relationships-for-classes">child class</a> are not included in the export or staging data of parent objects.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Complete</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>The export or staging data of parent objects includes all existing child objects of the given class.</p>
<p>When importing a parent object without child objects that exist on the target instance, the system automatically <i class=" "><strong class=" ">deletes</strong></i> the child objects missing in the import data.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Incremental</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>The export or staging data of parent objects includes all existing child objects of the given class.</p>
<p>The import process can only add new child objects or update existing ones. The system never deletes child objects on the target instances if they are missing in the import data of the parent object.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Default</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Do not set this value (not intended for manual use).</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>