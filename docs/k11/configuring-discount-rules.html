<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Configuring discount rules - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260" elementpageid="68881610">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68881610"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="E-commerce-features.html">E-commerce features</a></li>
                                                                                     <li><a href="Customizing-and-developing-your-store.html">Customizing and developing your store</a></li>
                                                            </ul>
</div>            <h1 id="src-68881610"> <span>Configuring discount rules</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<div class="sp-grid-section"><div class="sp-grid-cell sp-grid-60"><p>Discount rules are user-friendly representations of <a href="macro-expressions">macro conditions</a> used to limit <a href="working-with-catalog-discounts">catalog discounts</a>, <a href="working-with-order-discounts">order discounts</a>, <a href="working-with-free-shipping-offers">free shipping offers</a>, and <a href="working-with-gift-cards">gift cards</a>. If the system evaluates the condition as true, the respective discount or offer is valid and the system applies it (unless configured otherwise). This page describes how to extend the default conditions. When writing rule conditions, you can either use the available macro syntax or include <a href="adding-a-discount-rule-with-a-custom-method">custom macro methods</a>.</p><p>There are two types of the discount rules:</p><ul class=" "><li class=" "><p>Catalog rules – used by catalog discounts</p>
</li><li class=" "><p>Order rules – used by order discounts, free shipping offers and gift cards</p>
</li></ul><h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Catalog and order rule differences</span></h3><p>The main difference between the rule types is the data available for the conditions.</p><ul class=" "><li class=" "><p>Catalog discounts apply to products. The data available for catalog rules includes product attributes, i.e. the product's <i class=" ">SKUInfo</i> object and its properties, available under the <strong class=" ">SKU</strong> macro property. For example, <i class=" ">SKU.SKUOrder</i>, <i class=" ">SKU.</i><i class=" ">SKUPrice</i>, <i class=" ">SKU.</i><i class=" ">SKUPublicStatus</i>, etc.</p>
</li><li class=" "><p>Order discounts, free shipping offers and gift cards apply to entire orders. The data available for order rules includes values related to the shopping cart or order calculation, such as <i class=" ">Currency</i>, <i class=" ">Customer</i>, <i class=" ">PaymentOption</i>, <i class=" ">ShippingOption</i>, <i class=" ">GrandTotal</i>, etc.</p>
</li></ul><div class="confbox admonition admonition-warning">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Using context objects not related to the product or shopping cart calculation data<br></strong></p>
<p>We strongly recommend NOT using time-related objects such as <i class=" ">CurrentUser</i> or <i class=" ">CurrentPath</i> in your custom discount rules.</p>
<p>These objects may no longer be relevant in the session context at the time of evaluation, causing unexpected application of discounts or offers that use the rule in their condition.</p>
        </div>
    </div><div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Currency of monetary values in order rules<br></strong></p>
<p>For Order rules, all monetary macro properties (<i class=" ">GrandTotal</i>, <i class=" ">OrderDiscount</i>, <i class=" ">Tax</i>, etc.) have values in the currency that the customer selected for the evaluated shopping cart or order.</p>
<p>If you have a store with <a href="configuring-currencies">multiple currencies</a> and are creating an order rule that evaluates a monetary value, you need to adjust the condition code according to the currency (for example using the <i class=" ">Currency.CurrencyCode</i> property).</p>
        </div>
    </div><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68881610_configuringdiscountrules-catalogandorderruledifferences">Catalog and order rule differences</a></p>
</li><li class=" "><p><a href="#src-68881610_configuringdiscountrules-addingdiscountrules">Adding discount rules</a></p>
</li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="working-with-catalog-discounts">Working with catalog discounts</a></p>
</li><li class=" "><p><a href="working-with-order-discounts">Working with order discounts</a></p>
</li><li class=" "><p><a href="working-with-free-shipping-offers">Working with free shipping offers</a></p>
</li><li class=" "><p><a href="working-with-gift-cards">Working with gift cards</a></p>
</li><li class=" "><p><a href="creating-macro-rules">Creating macro rules</a></p>
</li><li class=" "><p><a href="reference---field-editor">Reference - Field editor</a></p>
</li></ul>        </div>
    </div></div></div>

    

    
    
    
    
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Adding discount rules</span></h3>
<p>You can add new discount rules using macro rules directly from the Kentico administration interface:</p>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Store configuration </strong>application if you want to create a discount rule for the current site. Open the <strong class=" ">Multistore configuration</strong> application if you run more sites on the same Kentico instance and want to add the rule for all sites.<br></p>
    <div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>If you are not sure what to choose, see <a href="choosing-site-or-global-e-commerce-configuration">Choosing site or global e-commerce configuration</a>. If you are not sure about specifics of configuring in these applications, see <a href="configuring-e-commerce-settings-for-a-specific-site-or-globally">Configuring e-commerce settings for a specific site or globally</a>.</p>
        </div>
    </div>
</li><li class=" "><p>Select the <strong class=" ">Discount rules -&gt; Catalog rules</strong> tab to manage catalog discount rules. Select the <strong class=" ">Discount rules -&gt; Order rules</strong> tab to manage order discount rules.</p>
</li><li class=" "><p class="auto-cursor-target">Click <strong class=" ">New catalog rule </strong>when on the <strong class=" ">Catalog rules </strong>tab. Click <strong class=" ">New order rule</strong> when on the <strong class=" ">Order rules</strong> tab.</p>
</li><li class=" "><p class="auto-cursor-target">Fill in the discount rule's properties:</p>
    <div class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col>
                                    <col>
                            </colgroup>
        <thead class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="2">
    <p>General</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Display name</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>The name of the discount rule displayed in the administration interface. For example, when editing a discount.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Name</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>The unique identifier of the discount rule object used in the code.</p>
<p>Unless there is a reason to set a particular value, you can leave the default <i class=" ">(automatic)</i> option, and the system generates an appropriate code name automatically.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Description</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>To make the discount rule easier to use and maintain, you can add an explanation about the scenarios for which the rule is intended, etc. The description does not have any functionality; it is just for your better orientation.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Enabled</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Indicates if the discount rule is available to use when editing a discount. If the check box is cleared, the system does not display the rule.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTh" rowspan="1" colspan="2">
    <p>Rule data</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>User text</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>The text displayed in the discount rule designer window.</p>
<p>To add parameters to the text, type their name of a specific parameter enclosed in curly brackets. For example: <i class=" ">{days}</i></p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Condition</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>The macro condition represented by the rule. Define the condition through standard <a href="macro-syntax">macro code</a>. The field provides <a href="entering-macro-expressions">autocomplete support</a>.</p>
<p>Available data:</p>
<ul class=" "><li class=" "><p><strong class=" ">Catalog rules</strong> – access the properties of the evaluated SKU (product) by typing <i class=" ">SKU</i>, a period character, and then pressing CTRL+SPACE. Select properties from the displayed autocomplete menu.</p>
</li><li class=" "><p><strong class=" ">Order rules</strong> – access the data of the evaluated shopping cart or order by pressing CTRL+SPACE. The displayed autocomplete menu offers the most common properties, such as <i class=" ">Currency</i>, <i class=" ">Customer</i>, <i class=" ">PaymentOption</i>, <i class=" ">ShippingOption</i>, <i class=" ">GrandTotal</i>, <i class=" ">TotalItemsWeight</i>, etc. You can access the full shopping cart calculation data via the <i class=" ">Data</i> property, which is primarily intended for evaluating the shopping cart content using the <i class=" ">Data.ContainsProducts</i> method or for use within <a href="adding-a-discount-rule-with-a-custom-method">custom macro methods</a>.</p>
</li></ul><p><img class="confluence-embedded-image confluence-content-image-border" src="images/download/attachments/68881610/available_data_for_catalog_rules.png" alt="images/download/attachments/68881610/available_data_for_catalog_rules.png" width="500">
        <br><span class="caption">Available data for catalog rules</span>
    </p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Required data</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Leave this property empty.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Requires context</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Leave this property empty.</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">More detailed information</strong></p>
<p>To learn more about entering the rule data, see <a href="creating-macro-rules">Creating macro rules</a>.</p>
        </div>
    </div>
</li><li class=" "><p>If your discount rule contains any parameters, switch to the <strong class=" ">Parameters</strong> tab.</p>
<ol class=" "><li class=" "><p>Configure the parameters as any other field in <a href="reference---field-editor">Field editor</a>.<br></p>
<img class="confluence-embedded-image confluence-content-image-border" src="images/download/attachments/68881610/catalog_rule_parameters_tab.png" alt="images/download/attachments/68881610/catalog_rule_parameters_tab.png" width="500">
    </li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li></ol></li></ol><p>The discount rule is now configured and saved. Store managers can use the rule for their discounts and special offers.</p>
    <div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Discount rules using a custom macro method (more advanced)</strong></p>
<p>For more advanced rules and scenarios that cannot be achieved using the default Kentico macros, you can develop a custom macro method and then call that method in your discount rules.</p>
<p>To learn how to create a discount rule that uses a custom macro method, see: <a href="adding-a-discount-rule-with-a-custom-method">Adding a discount rule with a custom method</a></p>
        </div>
    </div>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>