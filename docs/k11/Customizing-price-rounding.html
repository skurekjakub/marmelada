<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Customizing price rounding - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260" elementpageid="72974743">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=72974743"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="E-commerce-features.html">E-commerce features</a></li>
                                                                                     <li><a href="Customizing-and-developing-your-store.html">Customizing and developing your store</a></li>
                                                            </ul>
</div>            <h1 id="src-72974743"> <span>Customizing price rounding</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<div class="sp-grid-cell sp-grid-60"><p>When performing operations with price values (for example calculation of <a href="configuring-taxes">taxes</a> and <a href="discounts">discounts</a>, <a href="configuring-exchange-rates">currency conversions</a>, etc.), the system rounds the result according to the number of decimal places allowed by the <a href="configuring-currencies">configuration of each currency</a>.</p><p>By default, you can configure the type of price rounding via settings:</p><ol class=" "><li class=" "><p>Open the <strong class=" ">Store configuration</strong> or <strong class=" ">Multistore configuration</strong> application.</p>
</li><li class=" "><p>Navigate to the <strong class=" ">Store settings -&gt; General</strong> tab.</p>
</li><li class=" "><p>Select one of the <strong class=" ">Price rounding</strong> options:</p>
<ul class=" "><li class=" "><p><strong class=" ">Mathematical</strong> – standard rounding to the nearest number, with midpoint values rounded up (toward the nearest number that is away from zero).</p>
</li><li class=" "><p><strong class=" ">Truncate</strong> – all values are rounded down (decimal numbers beyond the allowed limit are discarded).</p>
</li><li class=" "><p><strong class=" ">Financial</strong> – standard rounding to the nearest number, with midpoint values rounded toward the nearest even number.</p>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li></ol><p>If the default options do not fulfill the requirements of your store, you need to customize the Kentico rounding functionality.</p></div>


    <div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-72974743_customizingpricerounding-customizingroundingglobally">Customizing rounding globally</a></p>
</li><li class=" "><p><a href="#src-72974743_customizingpricerounding-customizingroundingoftaxvalues">Customizing rounding of tax values</a></p>
</li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="settings---e-commerce">Settings - E-commerce</a></p>
</li><li class=" "><p><a href="configuring-currencies">Configuring currencies</a></p>
</li><li class=" "><p><a href="customizing-tax-calculation">Customizing tax calculation</a></p>
</li></ul>        </div>
    </div></div><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-72974743_customizingpricerounding-customizingroundingglobally">Customizing rounding globally</a></p>
</li><li class=" "><p><a href="#src-72974743_customizingpricerounding-customizingroundingoftaxvalues">Customizing rounding of tax values</a></p>
</li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="settings---e-commerce">Settings - E-commerce</a></p>
</li><li class=" "><p><a href="configuring-currencies">Configuring currencies</a></p>
</li><li class=" "><p><a href="customizing-tax-calculation">Customizing tax calculation</a></p>
</li></ul>        </div>
    </div></div>
    
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Customizing rounding globally</span></h3>
<p>To customize the price rounding used throughout the entire system:</p>
<ol class=" "><li class=" "><p>Open your Kentico project in Visual Studio.</p>
</li><li class=" "><p>Create a new class that implements the <strong class=" ">IRoundingService</strong> interface (found in the <i class=" ">CMS.Ecommerce</i> namespace).</p>
    <div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Class location</strong><br></p>
<p>For production sites, we recommend creating a new assembly (Class library project) in your Kentico solution and including the classes there. Then, add the appropriate references to both the assembly and the main Kentico web project. For more information, see <a href="best-practices-for-customization">Best practices for customization</a>.</p>
        </div>
    </div>
</li><li class=" "><p>Implement the <strong class=" ">Round</strong> method according to your requirements.</p>
</li><li class=" "><p>Create a new class that implements the <strong class=" ">IRoundingServiceFactory</strong> interface (found in the <i class=" ">CMS.Ecommerce</i> namespace).</p>
</li><li class=" "><p>Implement the <strong class=" ">GetRoundingService</strong> method for the factory class.</p>
</li><li class=" "><p>Register your <i class=" ">IRoundingServiceFactory</i> implementation using the <strong class=" ">RegisterImplementation</strong> assembly attribute.</p>
</li></ol><p>The customized rounding affects both price values displayed in product catalogs on the live site (when using appropriate <a href="reference---transformation-methods">transformation methods</a>) and price calculations during the checkout process.</p>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Example – Custom cash rounding</span></h4>
<p>The following example demonstrates how to implement custom <a class="external-link" href="https://en.wikipedia.org/wiki/Cash_rounding">cash rounding</a> of all price values. The example rounds values to the number of decimal places allowed by the <a href="configuring-currencies">configuration of each currency</a>, with the last digit always rounded to the nearest multiple of <strong class=" ">5</strong>.</p>
<p>Prepare a separate project for custom classes in your Kentico solution:</p>
<ol class=" "><li class=" "><p>Open your Kentico solution in Visual Studio.</p>
</li><li class=" "><p>Create a new <i class=" ">Class Library</i> project in the Kentico solution (or reuse an existing custom project).</p>
</li><li class=" "><p>Add references to the required Kentico libraries (DLLs) for the new project:<br></p>
<ol class=" "><li class=" "><p>Right-click the project and select <strong class=" ">Add -&gt; Reference</strong>.</p>
</li><li class=" "><p>Select the <strong class=" ">Browse</strong> tab of the <strong class=" ">Reference manager</strong> dialog, click <strong class=" ">Browse</strong> and navigate to the <i class=" "><strong class=" ">Lib</strong> </i>folder of your Kentico web project.</p>
</li><li class=" "><p>Add references to the following libraries (and any others that you may need in your custom code):</p>
<ul class=" "><li class=" "><p><strong class=" ">CMS.Base.dll</strong></p>
</li><li class=" "><p><strong class=" ">CMS.Core.dll</strong></p>
</li><li class=" "><p><strong class=" ">CMS.DataEngine.dll</strong></p>
</li><li class=" "><p><strong class=" ">CMS.Ecommerce.dll</strong></p>
</li><li class=" "><p><strong class=" ">CMS.Globalization.dll</strong></p>
</li><li class=" "><p><strong class=" ">CMS.Helpers.dll</strong></p>
</li><li class=" "><p><strong class=" ">CMS.Membership.dll</strong></p>
</li></ul></li></ol></li><li class=" "><p>Reference the custom project from the Kentico web project <i class=" ">(CMSApp</i> or <i class=" ">CMS)</i>.</p>
</li><li class=" "><p>Edit the custom project's <strong class=" ">AssemblyInfo.cs</strong> file (in the <i class=" ">Properties</i> folder).</p>
</li><li class=" "><p>Add the <strong class=" ">AssemblyDiscoverable</strong> assembly attribute:<br></p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> CMS;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">[assembly:AssemblyDiscoverable]</code></div>
</div>
    </div>
</li></ol><p></p>
<p>Continue by creating custom implementations of the <strong class=" ">IRoundingService</strong> and <strong class=" ">IRoundingServiceFactory</strong> interfaces:</p>
<ol class=" "><li class=" "><p>Add a new class under the custom project, implementing the <i class=" ">IRoundingService</i> interface.</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> System;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.Ecommerce;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> CustomRoundingService : IRoundingService</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">public</code><code class="plain"> </code><code class="keyword">decimal</code><code class="plain"> Round(</code><code class="keyword">decimal</code><code class="plain"> price, CurrencyInfo currency)</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        </code><code class="comments">// Gets the number of allowed decimal places for the requested currency</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">int</code><code class="plain"> numberOfDecimalPlaces = currency.CurrencyRoundTo;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">        </code><code class="comments">// Prepares a basic multiplier that ensures rounding to the required number of decimal places</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">decimal</code><code class="plain"> multiplier = Convert.ToDecimal(Math.Pow(10, numberOfDecimalPlaces));</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">        </code><code class="comments">// Prepares a "cash rounding" multiplier that ensures rounding to either '5' or '0' for the last decimal place</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">decimal</code><code class="plain"> cashRoundingMultiplier = multiplier / 5m;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">        </code><code class="comments">// Returns the rounded price values</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">return</code><code class="plain"> Math.Round((price * cashRoundingMultiplier), MidpointRounding.AwayFromZero) / cashRoundingMultiplier;</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
</li><li class=" "><p>Add a new class under the custom project, implementing the <i class=" "><i class=" ">IRoundingService</i>Factory</i> interface.<br></p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> CMS;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.Ecommerce;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="comments">// Registers the custom implementation of IRoundingServiceFactory</code></div>
<div class="line"><code class="plain">[assembly: RegisterImplementation(</code><code class="keyword">typeof</code><code class="plain">(IRoundingServiceFactory), </code><code class="keyword">typeof</code><code class="plain">(CustomRoundingServiceFactory))]</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> CustomRoundingServiceFactory : IRoundingServiceFactory </code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="comments">// Provides an instance of the custom rounding service</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">public</code><code class="plain"> IRoundingService GetRoundingService(</code><code class="keyword">int</code><code class="plain"> siteId)</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">		</code><code class="comments">// This basic sample does not parameterize the rounding service based on the current site</code></div>
<div class="line"><code class="plain">		</code><code class="comments">// Use the method's 'siteId' parameter if you need different rounding behavior for each site</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">new</code><code class="plain"> CustomRoundingService();</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
</li><li class=" "><p>Save all changes and <strong class=" ">Build</strong> the custom project.</p>
</li></ol><p class="auto-cursor-target">The registered <strong class=" ">CustomRoundingServiceFactory</strong> class provides an instance of <strong class=" ">CustomRoundingService</strong>. The customized rounding service ensures that all price values are rounded to the required number of decimal places, with the last digit being a multiple of 5.</p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Customizing rounding of tax values</span></h3>
<p>The e-commerce API allows you to customize rounding specifically for tax values, without affecting rounding in other locations.</p>
    <div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Note</strong></p>
<p>The scenario described below is a customization of the default tax calculation functionality. It is not compatible with other custom implementations of the <strong class=" ">ITaxEstimationService</strong> or <strong class=" ">ITaxCalculationService</strong> interface. If you already have such customizations, you need to perform the required rounding of the tax results within the given implementations.</p>
<p>For more details, see: <a href="customizing-tax-calculation">Customizing tax calculation</a></p>
        </div>
    </div>
<ol class=" "><li class=" "><p>Open your Kentico project in Visual Studio.</p>
</li><li class=" "><p>Create a new class that inherits from the <strong class=" ">DefaultTaxEstimationService</strong> class (found in the <i class=" ">CMS.Ecommerce</i> namespace).</p>
</li><li class=" "><p>Override the <strong class=" ">RoundTax</strong> method and implement your required rounding logic.</p>
</li><li class=" "><p>Use the <strong class=" ">RegisterImplementation</strong> assembly attribute to register the custom class as the implementation of the <strong class=" ">ITaxEstimationService</strong> interface.</p>
</li></ol><p>The customization only changes the rounding of calculated tax values, while leaving the remaining tax functionality in its default state. The custom rounding applies both to tax values in checkout process calculations and when displaying tax values on the live site (using the appropriate <a href="reference---transformation-methods">transformation methods</a>).</p>
<p>For all price values other than taxes, rounding is not affected and behaves according to the site's <i class=" ">Price rounding</i> setting (or the custom <a href="#src-72974743_customizingpricerounding-customizingroundingglobally">IRoundingService implementation</a> if one exists).</p>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Example – Rounding tax values up</span></h4>
<p>The following example demonstrates how to customize the system to always round tax values up (even if the rounded fractional number is closer to the lower number). The example rounds values to the number of decimal places allowed by the <a href="configuring-currencies">configuration of each currency</a>.</p>
<ol class=" "><li class=" "><p>Recreate or reuse the custom project from the <a href="#src-72974743_safe-id-q3vzdg9taxppbmdwcmljzxjvdw5kaw5nluv4yw1wbgxigjnddxn0b21jyxnocm91bmrpbmc">global rounding customization example</a>.</p>
</li><li class=" "><p>Create a new class under the custom project, inheriting from the <i class=" ">DefaultTaxEstimationService</i> class.</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> System;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.Ecommerce;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="comments">// Registers the custom implementation of ITaxEstimationService</code></div>
<div class="line"><code class="plain">[assembly: RegisterImplementation(</code><code class="keyword">typeof</code><code class="plain">(ITaxEstimationService), </code><code class="keyword">typeof</code><code class="plain">(CustomTaxRoundingService))]</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> CustomTaxRoundingService : DefaultTaxEstimationService</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="comments">// Constructor that passes instances of required interface implementations to the base DefaultTaxEstimationService constructor</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">public</code><code class="plain"> CustomTaxRoundingService(ICountryStateTaxRateSource rateSource, IRoundingServiceFactory roundingServiceFactory)</code></div>
<div class="line"><code class="plain">        : </code><code class="keyword">base</code><code class="plain">(rateSource, roundingServiceFactory)</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">    </code><code class="keyword">protected</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">decimal</code><code class="plain"> RoundTax(</code><code class="keyword">decimal</code><code class="plain"> price, TaxEstimationParameters parameters)</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">        </code><code class="comments">// Gets the number of allowed decimal places for the requested currency</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">int</code><code class="plain"> numberOfDecimalPlaces = parameters.Currency.CurrencyRoundTo;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">        </code><code class="comments">// Rounds the tax value up to the requested number of decimal places</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">decimal</code><code class="plain"> multiplier = Convert.ToDecimal(Math.Pow(10, numberOfDecimalPlaces));</code></div>
<div class="line"><code class="plain">        </code><code class="keyword">return</code><code class="plain"> Math.Ceiling(price * multiplier) / multiplier;</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
</li><li class=" "><p>Save all changes and <strong class=" ">Build</strong> the custom project.</p>
</li></ol><p>The customization ensures that values are always rounded up for tax calculation results that have more decimal places than allowed by the given currency. Other types of rounding are not affected.</p>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>