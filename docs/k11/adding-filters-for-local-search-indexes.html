<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Adding filters for local search indexes - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260" elementpageid="68882006">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68882006"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Configuring-Kentico.html">Configuring Kentico</a></li>
                                                                                                         <li class="shortcut"><a href="Setting-up-search-on-your-website.html">Setting up search on your website</a></li>
                                                                                     <li><a href="Using-locally-stored-search-indexes.html">Using locally stored search indexes</a></li>
                                                            </ul>
</div>            <h1 id="src-68882006"> <span>Adding filters for local search indexes</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<div class="sp-grid-section"><div class="sp-grid-cell sp-grid-60"><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-60"><p>The <strong class=" ">Smart search filter</strong> <a href="using-and-configuring-web-parts">web part</a> allows users to limit the scope of the data that will be searched (conditional filter), or define the order of the search results. You can connect any number of filters to the following types of search web parts:</p><ul class=" "><li class=" "><p><strong class=" ">Smart search dialog</strong></p>
</li><li class=" "><p><strong class=" ">Smart search dialog with results</strong></p>
</li><li class=" "><p><strong class=" ">Smart search results</strong></p>
</li></ul><div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Note</strong>: The <i class=" ">Smart search filter</i> web part only work with <a href="using-locally-stored-search-indexes">locally stored indexes</a>. When using <a href="using-azure-search">Azure Search indexes</a>, you can create custom components for search filtering. See <a href="integrating-azure-search-into-pages">Integrating Azure Search into pages</a> for more information.</p>
        </div>
    </div><p>The behavior of the smart search filter is primarily defined by the web part properties described below.</p><div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>You can find information about the other properties by clicking the help link in the corner of the web part properties dialog.</p>
        </div>
    </div><div class="sp-grid-section"></div><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882006_addingfiltersforlocalsearchindexes-definingfilteringoptions">Defining filtering options</a></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882006_addingfiltersforlocalsearchindexes-conditionalfilters">Conditional filters</a></p>
</li><li class=" "><p><a href="#src-68882006_addingfiltersforlocalsearchindexes-searchresultorderfilters">Search result order filters</a></p>
</li><li class=" "><p><a href="#src-68882006_addingfiltersforlocalsearchindexes-textboxfiltermode">Text box filter mode</a></p>
</li></ul></li><li class=" "><p><a href="#src-68882006_addingfiltersforlocalsearchindexes-example-loadingfilteringoptionsdynamically">Example - Loading filtering options dynamically</a></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882006_addingfiltersforlocalsearchindexes-loadingfilteringoptionswithnon-stringvalues">Loading filtering options with non-string values</a></p>
</li></ul></li><li class=" "><p><a href="#src-68882006_safe-id-qwrkaw5nzmlsdgvyc2zvcmxvy2fsc2vhcmnoaw5kzxhlcy1gawx0zxjpbmd3axrob3v0c2vhcmnodgv4dchgywnldgvkc2vhcmnokq">Filtering without search text (Faceted search)</a></p>
</li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="smart-search-syntax">Smart search syntax</a></p>
</li></ul>        </div>
    </div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882006_addingfiltersforlocalsearchindexes-definingfilteringoptions">Defining filtering options</a></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882006_addingfiltersforlocalsearchindexes-conditionalfilters">Conditional filters</a></p>
</li><li class=" "><p><a href="#src-68882006_addingfiltersforlocalsearchindexes-searchresultorderfilters">Search result order filters</a></p>
</li><li class=" "><p><a href="#src-68882006_addingfiltersforlocalsearchindexes-textboxfiltermode">Text box filter mode</a></p>
</li></ul></li><li class=" "><p><a href="#src-68882006_addingfiltersforlocalsearchindexes-example-loadingfilteringoptionsdynamically">Example - Loading filtering options dynamically</a></p>
<ul class="toc-indentation "><li class=" "><p><a href="#src-68882006_addingfiltersforlocalsearchindexes-loadingfilteringoptionswithnon-stringvalues">Loading filtering options with non-string values</a></p>
</li></ul></li><li class=" "><p><a href="#src-68882006_safe-id-qwrkaw5nzmlsdgvyc2zvcmxvy2fsc2vhcmnoaw5kzxhlcy1gawx0zxjpbmd3axrob3v0c2vhcmnodgv4dchgywnldgvkc2vhcmnokq">Filtering without search text (Faceted search)</a></p>
</li></ul><p></p>
        </div>
    </div><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="smart-search-syntax">Smart search syntax</a></p>
</li></ul>        </div>
    </div></div></div><div class="sp-grid-section"></div>
    

    
    
    
    <div class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col>
                                    <col>
                            </colgroup>
        <thead class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Property</p>
            </td>
                <td class="confluenceTh" rowspan="1" colspan="1">
    <p>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Search web part ID</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Enter the <strong class=" ">Web part control ID</strong> of the <i class=" ">Smart search dialog</i>, <i class=" ">Smart search dialog with results</i>, or <i class=" ">Smart search results</i> web part that you wish to connect to the filter. The search web part must be on the same page as the filter.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Filter mode</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Sets the user interface type of the filter. Possible choices are:</p>
<ul class=" "><li class=" "><p>Drop-down list</p>
</li><li class=" "><p>Checkboxes</p>
</li><li class=" "><p>Radio buttons</p>
</li><li class=" "><p>Text box</p>
</li></ul>            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Filter auto postback</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Indicates whether the search results automatically refresh (via postback) whenever a user selects a different filtering option. Not applicable when using the <i class=" ">Text box</i> <strong class=" ">Filter mode</strong>.</p>
<p>If you enable auto postback for a search filter, also set the <strong class=" ">Paging mode</strong> property to <i class=" "><strong class=" ">Postback</strong></i> for the related <i class=" ">Smart search dialog with results</i> or <i class=" ">Smart search results</i> web part.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Values</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Determines the available filtering options. See the <strong class=" ">Defining filtering options</strong> section below for details.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Query name</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Allows you to generate the filtering options dynamically based on data in the system. Specify the name of an SQL query that loads the required data (instead of using the <strong class=" ">Values</strong> property). Enter the full code name of the query or <strong class=" ">Select</strong> an existing query.</p>
<p>The query must return the appropriate values depending on the type of the filter. For example, for a standard conditional filter, the query needs to return three columns in the following order: <i class=" ">&lt;index field name&gt;,&lt;value of the field&gt;,&lt;displayed text&gt;</i></p>
<p>For more information, see <a href="#src-68882006_addingfiltersforlocalsearchindexes-example-loadingfilteringoptionsdynamically">Example - Loading filtering options dynamically</a>.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Filter clause</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Sets the logical value for the entire conditional filtering clause generated by the filtering options. Possible choices are:</p>
<ul class=" "><li class=" "><p><strong class=" ">None</strong> – no clause is added and the original logical values set for individual filtering options are used.</p>
</li><li class=" "><p><strong class=" ">Must</strong> – indicates that the conditions of filtering options must be fulfilled.</p>
</li><li class=" "><p><strong class=" ">Must not</strong> – indicates that the conditions of filtering options must not be fulfilled. Conditions are inverted compared to the <i class=" ">Must</i> option.</p>
</li></ul>    <div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Tip</strong>: When using <i class=" ">Checkboxes</i> filtering mode, you can create filters that display search results fulfilling <strong class=" ">at least one</strong> of the selected filtering options:</p>
<ol class=" "><li class=" "><p>Remove any logical clauses (+ or - symbols) from individual filtering options in the <strong class=" ">Values</strong> property.</p>
</li><li class=" "><p>Set the <strong class=" ">Filter clause</strong> to <i class=" ">Must</i>.</p>
</li></ol><p>If you set the <strong class=" ">Filter clause</strong> to <i class=" ">None</i> and add the + symbol to individual option values, the filter displays only search results that fulfill <strong class=" ">all</strong> of the selected filtering options.</p>
        </div>
    </div>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Filter is conditional</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>If true, the filter limits the scope of the objects that are searched (where condition). If false, the filter determines the order in which the search results are displayed (order by condition).</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p>You can find examples of search filters on the sample Corporate Site on the <strong class=" ">Examples -&gt; Web parts -&gt; Full-text search -&gt; Smart search -&gt; Smart search filter</strong> and <strong class=" ">Faceted search</strong> pages.</p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Defining filtering options</span></h3>
<p>The most important part of configuring Smart search filter web parts is the definition of the filtering options offered to users. In most cases, you will set the options through the <strong class=" ">Values</strong> property of the web part. If you wish to use the <strong class=" ">Query name</strong> property to load the options dynamically, the rules described below also apply to the results retrieved by the query.</p>
<p>The format of the filtering options depends on the type of the filter.</p>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Conditional filters</span></h4>
<p>In the case of conditional filters, define one option per line in format:</p>
<p><i class=" "><strong class=" ">Index field name;Value of the field;Displayed text</strong></i></p>
<p>You need to specify the logical meaning of each filtering option by adding the + or - symbol as a prefix:</p>
    <div class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col>
                                    <col>
                            </colgroup>
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
    <p>+</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>The search only returns objects whose value in the field matches the value specified in the second part of the filtering option's definition.</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTh" rowspan="1" colspan="1">
    <p>-</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>The search <strong class=" ">excludes</strong> all results whose value in the field matches the value specified in the second part of the filtering option's definition.</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p>To create filtering options that check the values of multiple index fields, use the following syntax:<br><i class=" "><strong class=" ">(Field1:(Value1) OR Field2:(Value2));;Text</strong></i></p>
<p>If you wish to use the same value for all fields in the condition clause, you can insert the value using the <strong class=" ">{0}</strong> expression:<br><i class=" "><strong class=" ">(Field1{0} OR Field2{0});Value;Text</strong></i></p>
<p>You can also use the OR operator in the value section of filtering options to check whether a field matches one of multiple possible values. Syntax:<br><i class=" "><strong class=" ">Field;Value1 OR Value2 OR Value3;Text</strong></i></p>
    <div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>When entering <strong class=" ">integer</strong>, <strong class=" ">floating-point(double)</strong> or <strong class=" ">decimal</strong> type fields as filter options, you need to specify the type of the value:</p>
<p><i class=" ">+DocumentCreatedByUserID;<strong class=" ">(int)</strong>53;Administrator</i></p>
        </div>
    </div>
<p><strong class=" ">Examples:</strong></p>
<ul class=" "><li class=" "><p>;;All</p>
</li><li class=" "><p>+classname;cms.smartphone;Smartphones</p>
</li><li class=" "><p>+_created;[{%ToSearchDateTime(CurrentDateTime.AddDays(-7))%} TO {%ToSearchDateTime(CurrentDateTime)%}];Past week</p>
</li><li class=" "><p>+_content;product;Results related to products</p>
</li><li class=" "><p>+skudepartmentid;(int)4 OR (int) 6;Products in specific departments</p>
</li><li class=" "><p>+(documenttags{0} OR _content{0});product;Results related to products</p>
</li><li class=" "><p>-(issecurednode:(true) OR requiresssl:((int)1));;Exclude secured pages</p>
</li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Search result order filters</span></h4>
<p>When creating filters that change the order of the results (i.e. the <strong class=" ">Filter is conditional</strong> property is disabled), define options in the following format:</p>
<p><i class=" "><strong class=" ">Index field name;;Displayed text</strong></i></p>
<p>The order is determined according to the values in the specified field.</p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Notes</strong>:</p>
<ul class=" "><li class=" "><p>By default, the order is ascending. To make the order descending, add the DESC keyword after the field name.</p>
</li><li class=" "><p>Use the <i class=" ">##SCORE##</i> macro instead of the field name to order results according to their search relevance (the score order is always descending and cannot be reversed).</p>
</li></ul>        </div>
    </div>
<p><strong class=" ">Examples:</strong></p>
<ul class=" "><li class=" "><p>##SCORE##;;Score</p>
</li><li class=" "><p>documentcreatedwhen;;Creation date</p>
</li><li class=" "><p>SKUPrice DESC;;Price descending</p>
</li></ul>    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Text box filter mode</span></h4>
<p>Text box filters do not offer any selection options, so the <strong class=" ">Values</strong> property instead determines which index fields the system searches when a user enters an expression into the text box. You can specify multiple fields, each one on a new line. Like with standard conditional filters, the + and - symbols determine whether the search returns results that contain the text box value in the given field, or only those that do not.</p>
<p>For example, if a text box filter has <i class=" ">+DocumentTags</i> in the <strong class=" ">Values</strong> definition, visitors can enter the names of <a href="tagging-pages">page tags</a> into the text box and perform a standard search. The filter modifies the retrieved results to contain only pages that are marked by the specified tags.</p>
<p>Use the following syntax to create OR conditions that are fulfilled if the text box value matches at least one of multiple fields: <i class=" "><strong class=" ">(Field1{0} OR Field2{0})</strong></i></p>
<p>For example: <i class=" ">+(DocumentTags{0} OR _content{0})</i></p>
<p>The <strong class=" ">{0}</strong> expression represents the value that users type into the text box filter. The search internally converts the expression to <i class=" ">Field:(value)</i> in the resulting condition.</p>
    <div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Tip</strong>: To create a text box filter that behaves like a regular search box, use +<i class=" ">_content</i> as the only field name.</p>
        </div>
    </div>
<p>You can also use text box filters to determine the order of the search results. In this case, disable the filter web part's <strong class=" ">Filter is conditional</strong> property and leave the <strong class=" ">Values</strong> property empty. Users can then enter the name of the field used for ordering into the text box. This scenario is not recommended for use by regular visitors on the live site.</p>
    <div class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>In order for the filter to work correctly, the index fields used in the option definitions must have the <strong class=" ">Searchable</strong> option enabled in the <strong class=" ">Local</strong> search field configuration of the given object type.</p>
<p>You can also create filtering options for the fields that are marked as <strong class=" ">Content</strong> by using <i class=" ">_content</i> as the field name. Such conditions are fulfilled if the value is found in any of the content fields.</p>
        </div>
    </div>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Example - Loading filtering options dynamically</span></h3>
<p>The examples in this section demonstrate how to create conditional filters with dynamically loaded options. The sample filters are intended for product search results.</p>
<p>The first filter provides checkboxes representing all available product page types. Add a <strong class=" ">Smart search filter</strong> web part to your search results page and configure the following properties:</p>
<ul class=" "><li class=" "><p><strong class=" ">Filter mode</strong>: Checkbox</p>
</li><li class=" "><p><strong class=" ">Query name</strong>: Create a <strong class=" ">New</strong> query with the following code:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">SELECT</code><code class="plain"> </code><code class="string">'classname'</code><code class="plain">, ClassName, ClassDisplayName</code></div>
<div class="line"><code class="keyword">FROM</code><code class="plain"> CMS_Class</code></div>
<div class="line"><code class="keyword">WHERE</code><code class="plain"> ##</code><code class="keyword">WHERE</code><code class="plain">##</code></div>
<div class="line"><code class="keyword">ORDER</code><code class="plain"> </code><code class="keyword">BY</code><code class="plain"> ##ORDERBY##</code></div>
</div>
    </div>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>The ##WHERE## and ##ORDERBY## expressions are placeholders that are replaced by the values of the web part's <strong class=" ">Query WHERE condition</strong> and <strong class=" ">Query ORDER BY clause</strong> properties.</p>
        </div>
    </div>
</li><li class=" "><p><strong class=" ">Query WHERE condition</strong>: ClassIsDocumentType = 1 AND ClassIsProduct = 1</p>
</li><li class=" "><p><strong class=" ">Query ORDER BY clause</strong>: ClassDisplayName</p>
</li><li class=" "><p><strong class=" ">Filter clause</strong>: Must</p>
</li><li class=" "><p><strong class=" ">Filter is conditional</strong>: Yes (selected)</p>
</li></ul><p>The query returns three columns:</p>
<ul class=" "><li class=" "><p><strong class=" ">'classname'</strong> – a static value that is the same for all filtering options. Specifies the name of the search index field whose value the condition checks.</p>
</li><li class=" "><p><strong class=" ">ClassName</strong> – the value of the <i class=" ">ClassName</i> column for records of the <i class=" ">CMS_Class</i> table. Search results must match this value to fulfill the filter's condition when the given option is selected.</p>
</li><li class=" "><p><strong class=" ">ClassDisplayName</strong> – the value of the <i class=" ">ClassDisplayName</i> column for records of the <i class=" ">CMS_Class</i> table. Used for the text captions of the checkboxes in the filter.</p>
</li></ul><p>The following are examples of rows that the query could return:</p>
    <div class="tablewrap">
        <table class="wrapped confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>classname</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>DancingGoat.Coffee</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Coffee</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>classname</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>DancingGoat.Ebook</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>E-book</p>
            </td>
        </tr>
    <tr>
            <td class="confluenceTd" rowspan="1" colspan="1">
    <p>classname</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>DancingGoat.Kettle</p>
            </td>
                <td class="confluenceTd" rowspan="1" colspan="1">
    <p>Kettle</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p>Setting the <strong class=" ">Filter clause</strong> property to <i class=" "><strong class=" ">Must</strong></i> means that the <i class=" ">classname</i> value of search results must match the value of at least one of the selected checkbox options to fulfill the filter's condition.</p>
<p>The web part processes the query result data and internally generates the final search filtering options. The following is an example of a filtering option definition generated by the query:<i class=" "> +classname;DancingGoat.Coffee;Coffee</i></p>
<p>This option appears as a "Coffee" checkbox in the filter. When selected, the filter ensures that the search results only display pages whose value in the <i class=" ">classname</i> field matches <i class=" ">DancingGoat.Coffee</i> (i.e. product pages of the <i class=" ">Coffee</i> page type).</p>
    <h4 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Loading filtering options with non-string values</span></h4>
<p>The second product filter provides a drop-down selector containing all available manufacturers. Add another <strong class=" ">Smart search filter</strong> web part to your search results page with the following properties:</p>
<ul class=" "><li class=" "><p><strong class=" ">Filter mode</strong>: Dropdown list</p>
</li><li class=" "><p><strong class=" ">Query name</strong>: Create a <strong class=" ">New</strong> query with the following code:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">SELECT</code><code class="plain"> </code><code class="string">''</code><code class="plain">, </code><code class="string">''</code><code class="plain">, </code><code class="string">'(Select Manufacturer)'</code><code class="plain"> </code><code class="keyword">as</code><code class="plain"> ManufacturerDisplayName</code></div>
<div class="line"><code class="keyword">UNION</code></div>
<div class="line"><code class="keyword">SELECT</code><code class="plain"> </code><code class="string">'SKUManufacturerID'</code><code class="plain">, </code><code class="string">'(int)'</code><code class="plain"> + </code><code class="color2">CAST</code><code class="plain">(ManufacturerID </code><code class="keyword">AS</code><code class="plain"> </code><code class="keyword">VARCHAR</code><code class="plain">(10)), ManufacturerDisplayName</code></div>
<div class="line"><code class="keyword">FROM</code><code class="plain"> COM_Manufacturer</code></div>
<div class="line"><code class="keyword">WHERE</code><code class="plain"> ##</code><code class="keyword">WHERE</code><code class="plain">##</code></div>
<div class="line"><code class="keyword">ORDER</code><code class="plain"> </code><code class="keyword">BY</code><code class="plain"> ##ORDERBY##</code></div>
</div>
    </div>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>The first SELECT statement in the query prepares a static <i class=" ">(Select Manufacturer)</i> option without any filtering restrictions. The static option is then combined with the dynamically loaded options using a UNION operator.</p>
<p>Like with static filtering options, the data type of values must be specified for <strong class=" ">integer</strong>, <strong class=" ">floating-point(double)</strong> or <strong class=" ">decimal</strong> type fields (such as <i class=" ">SKUManufacturerID</i>). The <i class=" ">'(int)' + CAST(ManufacturerID AS VARCHAR(10))</i> part of the query loads the manufacturer ID values and adds the <i class=" ">(int)</i> prefix. When using SQL Server 2012 or newer, you can call the <a class="external-link" href="https://msdn.microsoft.com/en-us/library/hh231515%28v=sql.110%29.aspx">CONCAT</a> SQL method instead, for example: <i class=" ">CONCAT('(int)', ManufacturerID)</i></p>
        </div>
    </div>
</li><li class=" "><p><strong class=" ">Query WHERE condition</strong>: ManufacturerEnabled = 1</p>
</li><li class=" "><p><strong class=" ">Query ORDER BY clause</strong>: ManufacturerDisplayName</p>
</li><li class=" "><p><strong class=" ">Filter clause</strong>: Must</p>
</li><li class=" "><p><strong class=" ">Filter is conditional</strong>: Yes (selected)</p>
</li></ul><p>The query fills the drop-down filter with a list of all manufacturers in the database and a static <i class=" ">(Select Manufacturer)</i> option. The filter ensures that the search results only display product pages whose manufacturer matches the selected option.</p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Filtering without search text (Faceted search)</span></h3>
<p>You can implement a faceted search based exclusively on filters. Faceted search allows users to get search results simply by selecting filtering options, without the need to enter and submit search text. To achieve this result, <strong class=" ">Configure</strong> the following properties for your <a href="building-a-search-interface-for-local-indexes">search web parts</a>:</p>
<p><strong class=" ">Smart search results</strong> or <strong class=" ">Smart search dialog with results</strong></p>
<ul class=" "><li class=" "><p><strong class=" ">Block field‑only search</strong>: Disabled (unless you wish to force users to use a filtering option that works with standard content fields, i.e. has <i class=" ">_content</i> as the field name)</p>
</li><li class=" "><p><strong class=" ">Search on each page load</strong>: Enabled (ensures that the web part automatically displays results whenever the page is loaded, even without input from a search dialog)</p>
</li><li class=" "><p><strong class=" ">Search text required</strong>: Disabled</p>
</li></ul><p><strong class=" ">Smart search filter</strong></p>
<ul class=" "><li class=" "><p><strong class=" ">Filter auto postback</strong>: Enabled (instantly refreshes the search results after users change the filtering options)</p>
</li></ul>        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>