<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Troubleshooting marketing emails on MVC sites - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68880504"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Developing-websites.html">Developing websites</a></li>
                                                                                                         <li class="shortcut"><a href="Developing-sites-using-ASP.NET-MVC.html">Developing sites using ASP.NET MVC</a></li>
                                                                                                         <li class="shortcut"><a href="Implementing-on-line-marketing-features-on-MVC-sites.html">Implementing on-line marketing features on MVC sites</a></li>
                                                                                     <li><a href="Email-marketing-on-MVC-sites.html">Email marketing on MVC sites</a></li>
                                                            </ul>
</div>            <h1 id="src-68880504"> <span>Troubleshooting marketing emails on MVC sites</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<p   
>This page summarizes common problems that you may encounter when using the Kentico   <a   href="Email-marketing">email marketing</a> features with a website that is presented by a   <a   href="Developing-sites-using-ASP.NET-MVC">separate MVC application</a>.</p>
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
>  <a   href="#src-68880504_TroubleshootingmarketingemailsonMVCsites-UnavailableMVCwebsite">Unavailable MVC website</a></p>
</li><li class=" "><p   
>  <a   href="#src-68880504_TroubleshootingmarketingemailsonMVCsites-IncorrectemailfeedURLs">Incorrect email feed URLs</a></p>
<ul class="toc-indentation "><li class=" "><p   
>  <a   href="#src-68880504_TroubleshootingmarketingemailsonMVCsites-UnsubscriptionpageURL">Unsubscription page URL</a></p>
</li><li class=" "><p   
>  <a   href="#src-68880504_TroubleshootingmarketingemailsonMVCsites-Doubleopt-inapprovalpageURL">Double opt-in approval page URL</a></p>
</li><li class=" "><p   
>  <a   href="#src-68880504_TroubleshootingmarketingemailsonMVCsites-EmailtrackingURLs">Email tracking URLs</a></p>
</li></ul></li></ul><p   
></p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>For general information on marketing email troubleshooting, not specifically related to MVC sites, see:   <a   href="Troubleshooting-marketing-emails">Troubleshooting marketing emails</a></p>
        </div>
    </div>
    <h3 id="src-68880504_TroubleshootingmarketingemailsonMVCsites-UnavailableMVCwebsite" class="heading "><span>Unavailable MVC website</span></h3>
<p   
>Before you send out marketing emails, verify that your MVC website is:</p>
<ul class=" "><li class=" "><p   
><strong class=" ">Running</strong></p>
</li><li class=" "><p   
><strong class=" ">Accessible</strong> publicly and from the Kentico application that you use to manage your email feeds (make sure the connection is not blocked by a firewall, etc.)</p>
</li></ul><p   
>Otherwise, email content and functionality that interacts with the site will not be available, for example, unsubscription links or email tracking features.</p>
<p   
>If the site is not accessible, please contact your system&#39;s administrator.</p>
    <div  class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p   
>  <a   href="Email-marketing">Email marketing</a></p>
</li><li class=" "><p   
>  <a   href="Handling-newsletter-subscriptions-on-MVC-sites">Handling newsletter subscriptions on MVC sites</a></p>
</li><li class=" "><p   
>  <a   href="Tracking-marketing-emails-on-MVC-sites">Tracking marketing emails on MVC sites</a></p>
</li></ul>        </div>
    </div>
    <h3 id="src-68880504_TroubleshootingmarketingemailsonMVCsites-IncorrectemailfeedURLs" class="heading "><span>Incorrect email feed URLs</span></h3>
<p   
>Some of the email marketing features need to interact with your MVC site to work. Problems can occur if the required features are not implemented or registered correctly on your MVC site, or if the related URLs are not configured correctly in Kentico.</p>
<p   
>To ensure that email feed links for MVC sites are correct overall, make sure that your site in Kentico is configured to use   <a   href="Extensionless-and-custom-URLs">extensionless URLs</a> by default:</p>
<ol class=" "><li class=" "><p   
>Open the <strong class=" ">Settings</strong> application.</p>
</li><li class=" "><p   
>Choose your site in the <strong class=" ">Site</strong> selector.</p>
</li><li class=" "><p   
>Navigate to the <strong class=" ">URLs and SEO</strong> settings category.</p>
</li><li class=" "><p   
>Set <strong class=" ">Friendly URL extensions</strong> to an empty value.</p>
</li><li class=" "><p   
>Click <strong class=" ">Save</strong>.</p>
</li></ol>    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>When running a &quot;content only&quot; site (i.e. a site created using the <i class=" ">MVC Blank Site</i> template), the <strong class=" ">Email marketing</strong> application in the Kentico administration interface automatically displays a warning if the related URLs are not accessible for an email feed (on the <strong class=" ">Emails</strong> tab of the email feed and the <strong class=" ">Send</strong> tab of individual emails).</p>
<p   
>To allow the warning to work correctly in scenarios where your MVC site and Kentico administration application run on different domains, make sure that your MVC application has the   <a   href="Handling-newsletter-subscriptions-on-MVC-sites#src-68880505_HandlingnewslettersubscriptionsonMVCsites-Enablingresourcesharing">resource sharing feature enabled</a>.</p>
        </div>
    </div>
    <h4 id="src-68880504_TroubleshootingmarketingemailsonMVCsites-UnsubscriptionpageURL" class="heading "><span>Unsubscription page URL</span></h4>
<p   
>Verify that your MVC site has an email feed unsubscription page implemented according to the instructions in   <a   href="Handling-newsletter-subscriptions-on-MVC-sites#src-68880505_HandlingnewslettersubscriptionsonMVCsites-Settingupunsubscription">Setting up unsubscription.</a></p>
<p   
>Then make sure the unsubscription URL of your email feeds is correctly configured:</p>
<ol class=" "><li class=" "><p   
>Open the <strong class=" ">Email marketing</strong> application in Kentico.</p>
</li><li class=" "><p   
>Edit your email feed and switch to the <strong class=" ">Configuration</strong> tab.</p>
</li><li class=" "><p   
>Set the following properties:<br/></p>
<ul class=" "><li class=" "><p   
><strong class=" ">Base URL</strong> &ndash; must match the <i class=" ">Presentation URL</i> of your MVC site. For example: <i class=" ">http://www.SiteDomain.com</i></p>
</li><li class=" "><p   
><strong class=" ">Unsubscription page URL</strong> &ndash; must match the route of the action that handles unsubscription requests in your MVC application. For example: <i class=" ">/NewsletterSubscription/Unsubscribe</i></p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>If the <i class=" ">Unsubscription page URL</i> value is empty for an email feed, the system uses the URL assigned in the <strong class=" ">Settings -&gt; On-line marketing -&gt; Email marketing -&gt; Unsubscription page URL</strong> setting.</p>
        </div>
    </div>
</li></ul></li><li class=" "><p   
><strong class=" ">Save</strong> the email feed.</p>
</li></ol>    <h4 id="src-68880504_TroubleshootingmarketingemailsonMVCsites-Doubleopt-inapprovalpageURL" class="heading "><span>Double opt-in approval page URL</span></h4>
<p   
>If   <a   href="Enabling-double-opt-in-for-newsletters">double opt-in</a> is enabled for your newsletters, your MVC site must have a subscription confirmation page implemented according to the instructions in   <a   href="Handling-newsletter-subscriptions-on-MVC-sites#src-68880505_HandlingnewslettersubscriptionsonMVCsites-Handlingconfirmationsfordoubleopt-insubscription">Handling confirmations for double opt-in subscription.</a></p>
<p   
>Also, verify that the approval page URL of your newsletters is correctly configured:</p>
<ol class=" "><li class=" "><p   
>Open the <strong class=" ">Email marketing</strong> application in Kentico.</p>
</li><li class=" "><p   
>Edit your newsletter and switch to the <strong class=" ">Configuration</strong> tab.</p>
</li><li class=" "><p   
>Set the following properties:<br/></p>
<ul class=" "><li class=" "><p   
><strong class=" ">Base URL</strong> &ndash; must match the <i class=" ">Presentation URL</i> of your MVC site. For example: <i class=" ">http://www.SiteDomain.com</i></p>
</li><li class=" "><p   
><strong class=" ">Approval page URL</strong> &ndash; must match the route of the action that handles subscription confirmation requests in your MVC application. For example: <i class=" ">/NewsletterSubscription/ConfirmSubscription</i></p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>If the <i class=" ">Approval page URL</i> value is empty for a newsletter, the system uses the URL assigned in the <strong class=" ">Settings -&gt; On-line marketing -&gt; Email marketing -&gt; Double opt-in approval page URL</strong> setting.</p>
        </div>
    </div>
</li></ul></li><li class=" "><p   
><strong class=" ">Save</strong> the newsletter.</p>
</li></ol>    <h4 id="src-68880504_TroubleshootingmarketingemailsonMVCsites-EmailtrackingURLs" class="heading "><span>Email tracking URLs</span></h4>
<p   
>If you have   <a   href="Tracking-marketing-emails">tracking</a> features enabled for your email feed (opened emails and clicked links), verify the following:</p>
<ul class=" "><li class=" "><p   
>The <strong class=" ">Presentation URL</strong> of your site in the <strong class=" ">Sites</strong> application matches the domain name of the running MVC website.</p>
</li><li class=" "><p   
>Your MVC site has the email tracking routes registered according to the instructions in   <a   href="Tracking-marketing-emails-on-MVC-sites">Tracking marketing emails on MVC sites</a>.</p>
</li></ul>        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
