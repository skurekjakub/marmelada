<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Example - Developing custom form controls - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260" elementpageid="68882190">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15">
                    <input type="submit" style="display:none" tabindex="-4">
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo">
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68882190"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Custom-development.html">Custom development</a></li>
                                                                                     <li><a href="Developing-form-controls.html">Developing form controls</a></li>
                                                            </ul>
</div>            <h1 id="src-68882190"> <span>Example - Developing custom form controls</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<div class="sp-grid-section"><div class="sp-grid-cell sp-grid-60"><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-60"><p>The following example demonstrates how to create a <a href="developing-form-controls">form control</a> that allows users to choose a color from a drop-down list. You can use the same basic approach to create any type of custom form control.</p><p></p><ul class="toc-indentation "><li class=" "><p><a href="#src-68882190_exampledevelopingcustomformcontrols-definingthecodeofacustomformcontrol">Defining the code of a custom form control</a></p>
</li><li class=" "><p><a href="#src-68882190_exampledevelopingcustomformcontrols-registeringthecustomformcontrolinthesystem">Registering the custom form control in the system</a></p>
</li><li class=" "><p><a href="#src-68882190_exampledevelopingcustomformcontrols-placingtheformcontrolinapageeditingform">Placing the form control in a page editing form</a></p>
</li><li class=" "><p><a href="#src-68882190_exampledevelopingcustomformcontrols-result">Result</a></p>
</li></ul><p></p><div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Note</strong>: This example implements the custom form control as a Web user control (.ascx file) within the Kentico web project. You can alternatively create form controls by adding a control class to a separate assembly (the class must also inherit from the <i class=" ">FormEngineUserControl</i> base class).</p>
        </div>
    </div><div class="sp-grid-section"></div><div class="sp-grid-section"></div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="developing-form-controls">Developing form controls</a></p>
</li><li class=" "><p><a href="creating-form-controls-with-xml-values">Creating form controls with XML values</a></p>
</li></ul>        </div>
    </div></div><div class="sp-grid-cell sp-grid-40 sp-grid-sidebar"><div class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p><a href="developing-form-controls">Developing form controls</a></p>
</li><li class=" "><p><a href="creating-form-controls-with-xml-values">Creating form controls with XML values</a></p>
</li></ul>        </div>
    </div></div></div><div class="sp-grid-section"></div>


    
    
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Defining the code of a custom form control</span></h3>
<ol class=" "><li class=" "><p>Open your web project in Visual Studio (using the <strong class=" ">WebSite.sln</strong> or <strong class=" ">WebApp.sln</strong> file).</p>
</li><li class=" "><p>Right-click the <strong class=" ">CMSFormControls</strong> folder and choose <strong class=" ">Add -&gt; New Item</strong>.</p>
</li><li class=" "><p>Create a new <strong class=" ">Web User Control</strong> and call it <i class=" ">ColorSelector.ascx</i>.</p>
</li><li class=" "><p>Add a standard <strong class=" ">DropDownList</strong> control onto the user control's form:</p>
</li><li class=" "><p>Set the DropDownList's <strong class=" ">ID</strong> property to <i class=" ">drpColor</i>.</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">asp</code><code class="plain">:DropDownList </code><code class="color1">ID</code><code class="plain">=</code><code class="string">"drpColor"</code><code class="plain"> </code><code class="color1">runat</code><code class="plain">=</code><code class="string">"server"</code><code class="plain">&gt;&lt;/</code><code class="keyword">asp</code><code class="plain">:DropDownList&gt;</code></div>
</div>
    </div>
</li><li class=" "><p>Switch to the code behind and add <i class=" ">using</i> statements for the following namespaces:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> System;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> System.Web.UI.WebControls;</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.FormEngine.Web.UI;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.Helpers;</code></div>
</div>
    </div>
</li><li class=" "><p>Make the user control class inherit from <strong class=" ">FormEngineUserControl:</strong></p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">partial</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> CMSFormControls_ColorSelector : FormEngineUserControl</code></div>
</div>
    </div>
</li><li class=" "><p>Add the following members into the class:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Gets or sets the value entered into the field, a hexadecimal color code in this case.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">object</code><code class="plain"> Value</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">     </code><code class="keyword">get</code></div>
<div class="line"><code class="plain">     {</code></div>
<div class="line"><code class="plain">         </code><code class="keyword">return</code><code class="plain"> drpColor.SelectedValue;</code></div>
<div class="line"><code class="plain">     }</code></div>
<div class="line"><code class="plain">     </code><code class="keyword">set</code></div>
<div class="line"><code class="plain">     {</code></div>
<div class="line"><code class="plain">         </code><code class="comments">// Selects the matching value in the drop-down</code></div>
<div class="line"><code class="plain">         EnsureItems();</code></div>
<div class="line"><code class="plain">         drpColor.SelectedValue = System.Convert.ToString(value);</code></div>
<div class="line"><code class="plain">     }</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Property used to access the Width parameter of the form control.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">int</code><code class="plain"> SelectorWidth</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">     </code><code class="keyword">get</code></div>
<div class="line"><code class="plain">     {</code></div>
<div class="line"><code class="plain">         </code><code class="keyword">return</code><code class="plain"> ValidationHelper.GetInteger(GetValue(</code><code class="string">"SelectorWidth"</code><code class="plain">), 0);</code></div>
<div class="line"><code class="plain">     }</code></div>
<div class="line"><code class="plain">     </code><code class="keyword">set</code></div>
<div class="line"><code class="plain">     {</code></div>
<div class="line"><code class="plain">         SetValue(</code><code class="string">"SelectorWidth"</code><code class="plain">, value);</code></div>
<div class="line"><code class="plain">     }</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Returns an array of values of any other fields returned by the control.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="comments">/// &lt;returns&gt;It returns an array where the first dimension is the field name and the second is its value.&lt;/returns&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">object</code><code class="plain">[,] GetOtherValues()</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">     </code><code class="keyword">object</code><code class="plain">[,] array = </code><code class="keyword">new</code><code class="plain"> </code><code class="keyword">object</code><code class="plain">[1, 2];</code></div>
<div class="line"><code class="plain">     array[0, 0] = </code><code class="string">"ProductColor"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">     array[0, 1] = drpColor.SelectedItem.Text;</code></div>
<div class="line"><code class="plain">     </code><code class="keyword">return</code><code class="plain"> array;</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Returns true if a color is selected. Otherwise, it returns false and displays an error message.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">bool</code><code class="plain"> IsValid()</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">     </code><code class="keyword">if</code><code class="plain"> ((</code><code class="keyword">string</code><code class="plain">)Value != </code><code class="string">""</code><code class="plain">)</code></div>
<div class="line"><code class="plain">     {</code></div>
<div class="line"><code class="plain">         </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">true</code><code class="plain">;</code></div>
<div class="line"><code class="plain">     }</code></div>
<div class="line"><code class="plain">     </code><code class="keyword">else</code></div>
<div class="line"><code class="plain">     {</code></div>
<div class="line"><code class="plain">         </code><code class="comments">// Sets the form control validation error message</code></div>
<div class="line"><code class="plain">         </code><code class="keyword">this</code><code class="plain">.ValidationError = </code><code class="string">"Please choose a color."</code><code class="plain">;</code></div>
<div class="line"><code class="plain">         </code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">false</code><code class="plain">;</code></div>
<div class="line"><code class="plain">     }</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line">&nbsp;</div>
<div class="line">&nbsp;</div>
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Sets up the internal DropDownList control.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="keyword">protected</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> EnsureItems()</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">    </code><code class="comments">// Applies the width specified through the parameter of the form control if it is valid</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">if</code><code class="plain"> (SelectorWidth &gt; 0)</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">         drpColor.Width = SelectorWidth;</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="plain">	</code><code class="comments">// Generates the options in the drop-down list</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">if</code><code class="plain"> (drpColor.Items.Count == 0)</code></div>
<div class="line"><code class="plain">    {</code></div>
<div class="line"><code class="plain">         drpColor.Items.Add(</code><code class="keyword">new</code><code class="plain"> ListItem(</code><code class="string">"(select color)"</code><code class="plain">, </code><code class="string">""</code><code class="plain">));</code></div>
<div class="line"><code class="plain">         drpColor.Items.Add(</code><code class="keyword">new</code><code class="plain"> ListItem(</code><code class="string">"Red"</code><code class="plain">, </code><code class="string">"#FF0000"</code><code class="plain">));</code></div>
<div class="line"><code class="plain">         drpColor.Items.Add(</code><code class="keyword">new</code><code class="plain"> ListItem(</code><code class="string">"Green"</code><code class="plain">, </code><code class="string">"#00FF00"</code><code class="plain">));</code></div>
<div class="line"><code class="plain">         drpColor.Items.Add(</code><code class="keyword">new</code><code class="plain"> ListItem(</code><code class="string">"Blue"</code><code class="plain">, </code><code class="string">"#0000FF"</code><code class="plain">));        </code></div>
<div class="line"><code class="plain">    }    </code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="comments">/// &lt;summary&gt;</code></div>
<div class="line"><code class="comments">/// Handler for the Load event of the control.</code></div>
<div class="line"><code class="comments">/// &lt;/summary&gt;</code></div>
<div class="line"><code class="keyword">protected</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> Page_Load(</code><code class="keyword">object</code><code class="plain"> sender, EventArgs e)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">     </code><code class="comments">// Initializes the drop-down list options</code></div>
<div class="line"><code class="plain">     EnsureItems();</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>The above code overrides three members inherited from the <strong class=" ">FormEngineUserControl</strong> class that are most commonly used when developing form controls:</p>
<ul class=" "><li class=" "><p><strong class=" ">Value</strong> - it is necessary to override this property for every form control. It is used to get and set the value of the field provided by the control.</p>
</li><li class=" "><p><strong class=" ">GetOtherValues()</strong> - this method is used to set values for other fields of the object in which the form control is used. It must return a two dimensional array containing the names of the fields and their assigned values. Typically used for multi‑field form controls that need to store data in multiple database columns, but only occupy a single field in the form.</p>
</li><li class=" "><p><strong class=" ">IsValid()</strong> - this method is used to implement validation for the values entered into the field. It must return <i class=" ">true</i> or <i class=" ">false</i> depending on the result of the validation.</p>
</li></ul><p>The <strong class=" ">SelectorWidth</strong> property provides a way to access the value of a parameter that will be defined for the form control later in the example. The value of the property is used in the <strong class=" ">EnsureItems()</strong> method to set the width of the internal drop-down list.</p>
        </div>
    </div>
    <div class="confbox admonition admonition-tip">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Tip</strong>: You can access the settings of the field to which the form control is assigned through the <strong class=" ">FieldInfo </strong>property of the form control (inherited from the <i class=" ">FormEngineUserControl</i> class). For example:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="comments">// Checks whether the field using the form control is Required</code></div>
<div class="line"><code class="keyword">if</code><code class="plain"> (</code><code class="keyword">this</code><code class="plain">.FieldInfo.AllowEmpty)</code></div>
</div>
    </div>
        </div>
    </div>
</li><li class=" "><p>Save the both code files. <strong class=" ">Build</strong> your project if it is installed as a web application.</p>
</li></ol>    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Registering the custom form control in the system</span></h3>
<ol class=" "><li class=" "><p>Sign in to the Kentico administration interface.</p>
</li><li class=" "><p>Open the <strong class=" ">Form controls</strong> application.</p>
</li><li class=" "><p>Click <strong class=" ">New form control</strong>.</p>
</li><li class=" "><p>Enter the following values:</p>
<ul class=" "><li class=" "><p><strong class=" ">Control source</strong>: Web user control</p>
</li><li class=" "><p><strong class=" ">Display name</strong>: Custom color selector</p>
</li><li class=" "><p><strong class=" ">Code name</strong>: Leave the <i class=" ">(automatic)</i> value</p>
</li><li class=" "><p><strong class=" ">Type</strong>: Selector</p>
</li><li class=" "><p><strong class=" ">File name</strong>: ~/CMSFormControls/ColorSelector.ascx (you can click <strong class=" ">Select</strong> to choose the file)</p>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li></ol><p>The system creates your control and the <strong class=" ">General</strong> tab of the control's editing interface opens.</p>
<ol class=" "><li class=" "><p>Select <strong class=" ">Text</strong> and <strong class=" ">Page types</strong> in the <strong class=" ">Control scope</strong> section.</p>
</li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>Switch to the <strong class=" ">Properties</strong> tab.</p>
</li><li class=" "><p>Click <strong class=" ">New field</strong>.</p>
</li><li class=" "><p>Set the following values for the form control parameter:</p>
<ul class=" "><li class=" "><p><strong class=" ">Field name</strong>: SelectorWidth</p>
</li><li class=" "><p><strong class=" ">Data type</strong>: Integer number<br><br></p>
</li><li class=" "><p><strong class=" ">Display field in the editing form</strong>: yes (checked)<br><br></p>
</li><li class=" "><p><strong class=" ">Field caption</strong>: Drop-down list width</p>
</li><li class=" "><p><strong class=" ">Form control</strong>: Text box</p>
</li></ul></li><li class="confluence-link "><p>Click <strong class=" ">Save</strong>.</p>
</li></ol><p>This parameter allows users to specify the width of the color selector directly from the administration interface whenever they assign the control to a form field. The code of the form control already ensures that the value is properly applied.</p>
<p>Now you can test the control by placing it into a page editing form.</p>
    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Placing the form control in a page editing form</span></h3>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Page types</strong> application.</p>
</li><li class=" "><p>Edit (<img class="confluence-embedded-image" src="images/download/attachments/68879208/edit.png" alt="images/download/attachments/68879208/edit.png">
) the <strong class=" ">Product</strong> page type.</p>
</li><li class=" "><p>Select the <strong class=" ">Fields</strong> tab to access the field editor for the page type.</p>
</li><li class=" "><p>Click <strong class=" ">New field</strong>.</p>
</li><li class=" "><p>Set the following properties for the field:</p>
<ul class=" "><li class=" "><p><strong class=" ">Field name</strong>: ProductColor</p>
</li><li class=" "><p><strong class=" ">Data type</strong>: Text</p>
</li><li class=" "><p><strong class=" ">Size</strong>: 100</p>
</li><li class=" "><p><strong class=" ">Display field in the editing form</strong>: no (clear the check box)</p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>This field stores the name of the color selected for the product. It will not be available in the editing form, the value is set automatically by the <strong class=" ">GetOtherValues()</strong> method of the <strong class=" ">ColorSelector.ascx</strong> control (notice that the <i class=" ">Field name</i> matches the name used in the code of the method).</p>
        </div>
    </div>
</li></ul></li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p>Click <strong class=" ">New field</strong> again to add another field.</p>
</li><li class=" "><p>Set the following parameters for this field:</p>
<ul class=" "><li class=" "><p><strong class=" ">Field name</strong>: ProductHexaColor</p>
</li><li class=" "><p><strong class=" ">Data type</strong>: Text</p>
</li><li class=" "><p><strong class=" ">Size</strong>: 100</p>
</li><li class=" "><p><strong class=" ">Display field in the editing form</strong>: yes (selected)</p>
</li><li class=" "><p><strong class=" ">Field caption</strong>: Color</p>
</li><li class=" "><p><strong class=" ">Form control</strong>: Custom color selector</p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p>This field stores the hexadecimal code of the selected color. In the code of the form control, the value is handled through the <strong class=" ">Value</strong> property. The field is visible in the page's editing form according to the design of the custom form control.</p>
        </div>
    </div>
</li></ul></li><li class=" "><p>Set the width of the selected via the <strong class=" ">Drop-down list width</strong> option in the <strong class=" ">Editing control settings </strong>section. For example, enter <i class=" ">200.</i> This is the <strong class=" ">SelectorWidth</strong> parameter that you defined for the form control.</p>
</li><li class=" "><p>Click <strong class=" ">Save</strong>.</p>
</li></ol>    <h3 $stringutils.tolowercase(${idattribute})="" class="heading "><span>Result</span></h3>
<ol class=" "><li class=" "><p>Open the <strong class=" ">Pages</strong> application.</p>
</li><li class=" "><p>Create a new page of the <strong class=" ">Product</strong> page type (for example under the <i class=" ">/Products</i> section of the sample Corporate site).</p>
</li><li class=" "><p>Select the<strong class=" "> Do not create an SKU</strong> option.</p>
</li></ol><p>The page's editing form contains the new form control.</p>
<p><img class="confluence-embedded-image confluence-content-image-border" src="images/download/attachments/68882190/Custom_Form_Control_Result.png" alt="images/download/attachments/68882190/Custom_Form_Control_Result.png" width="500">
        <br><span class="caption">Selecting a value through the custom color selector form control</span>
    </p>
<p>The interface of the <strong class=" ">Color</strong> page field uses the custom form control. The width of the displayed drop-down list matches the value that you entered into the form control's parameter (200). If you do not choose any color, the validation error message defined in the code of the form control appears.</p>
    <div class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p><strong class=" ">Getting and setting values of other fields using the API</strong></p>
<p>You can access the data of the current form through the <strong class=" ">Form</strong> property of the form control (inherited from the <i class=" ">FormEngineUserControl</i> class).</p>
<p>To retrieve the values entered into other fields, use the <strong class=" ">GetFieldValue</strong> method:</p>
<ul class=" "><li class=" "><p><strong class=" ">Form.GetFieldValue(string fieldName)</strong> – returns an object containing the value of the specified field.</p>
</li></ul><p>For example, use the following code to get the value of the <strong class=" ">ProductName</strong> field (<i class=" ">New product</i> is returned if the field is empty):</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">string</code><code class="plain"> productName = CMS.Helpers.ValidationHelper.GetString(Form.GetFieldValue(</code><code class="string">"ProductName"</code><code class="plain">), </code><code class="string">"New product"</code><code class="plain">);</code></div>
</div>
    </div>
<p>To set the value of a field, you can use the following approach:</p>
<ul class=" "><li class=" "><p><strong class=" ">Form.Data.SetValue(string fieldName, object value)</strong> – sets a value for the specified field.</p>
</li></ul><p>To modify the value of a field <strong class=" ">before the form is validated or saved</strong>, you need to place the code inside a handler of the underlying form's <strong class=" ">OnBeforeValidate</strong> or <strong class=" ">OnBeforeSave</strong> events. For example:</p>
    <div class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">protected</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> Page_Load(</code><code class="keyword">object</code><code class="plain"> sender, EventArgs e)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	</code><code class="comments">// Assigns a handler method to the OnBeforeValidate event of the form where the control is used</code></div>
<div class="line"><code class="plain">	Form.OnBeforeValidate += BeforeValidateHandler;</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line">&nbsp;</div>
<div class="line"><code class="keyword">private</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> BeforeValidateHandler(</code><code class="keyword">object</code><code class="plain"> sender, EventArgs e)</code></div>
<div class="line"><code class="plain">{	</code></div>
<div class="line"><code class="plain">	</code><code class="comments">// Sets a value into the form's "TextFieldName" field</code></div>
<div class="line"><code class="plain">	Form.Data.SetValue(</code><code class="string">"TextFieldName"</code><code class="plain">, </code><code class="string">"TextFieldValue"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
        </div>
    </div>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>


</body></html>