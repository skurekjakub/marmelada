<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Hotfix instructions temp - Documentation Updates</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="56787478">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">DU</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="Documentation-Updates-Home.html" class="ht-space-link">
                    <h2>Documentation Updates</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=56787624"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Documentation-Updates-Home.html">Documentation Updates</a></li>
                                                            </ul>
</div>            <h1 id="src-56787624"> <span>Hotfix instructions temp</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
    <div  class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0additionalnotesandworkarounds">11.0 Additional notes and workarounds</a></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.3">11.0.3</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.5">11.0.5</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.8">11.0.8</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.9">11.0.9</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.10">11.0.10</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.15">11.0.15</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.19">11.0.19</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.23">11.0.23</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.25">11.0.25</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.27">11.0.27</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.29">11.0.29</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.42">11.0.42</a></p>
</li></ul></li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0sourcecodecompilationinstructions">11.0 Source code compilation instructions</a></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-11.0.10.1">11.0.10</a></p>
</li></ul></li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0additionalnotesandworkarounds">12.0 Additional notes and workarounds</a></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.9">12.0.9</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.12">12.0.12</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.14">12.0.14</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.23">12.0.23</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.26">12.0.26</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.30">12.0.30</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.32">12.0.32</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.34">12.0.34</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.35">12.0.35</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.39">12.0.39</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.42">12.0.42</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.47">12.0.47</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.54">12.0.54</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.55">12.0.55</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.61">12.0.61</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.64">12.0.64</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.70">12.0.70</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.77">12.0.77</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.90">12.0.90</a></p>
</li></ul></li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0sourcecodecompilationinstructions">12.0 Source code compilation instructions</a></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-12.0.11">12.0.11</a></p>
</li></ul></li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-13.0additionalnotesandworkarounds">13.0 Additional notes and workarounds</a></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-13.0.4">13.0.4</a></p>
</li><li class=" "><p   
><a   href="#src-56787624_hotfixinstructionstemp-13.0.10">13.0.10</a></p>
</li></ul></li></ul><p   
></p>
        </div>
    </div>
    <div class="section section-1" id="src-56787624_Hotfixinstructionstemp-11.0Additionalnotesandworkarounds">
        <h1 class="heading "><span>11.0 Additional notes and workarounds</span></h1>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.3">
        <h2 class="heading "><span>11.0.3</span></h2>
<ul class=" "><li class=" "><p   
>REST &ndash; The <a   href="http://localhost:8090/display/K11/Kentico+REST+service">REST service</a> limits the length of request data in JSON format to 2097152 characters (4 MB of Unicode string data) by default, which is not sufficient in certain cases (for example when creating objects with large attachments). If you need to adjust the limit, apply the hotfix and add the <strong class=" ">CMSRestMaxJsonLength</strong> key to the <i class=" ">appSettings</i> section of your project&#39;s web.config file.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">key</code><code class="plain">=</code><code class="string">"CMSRestMaxJsonLength"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"2147483647"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.5">
        <h2 class="heading "><span>11.0.5</span></h2>
<ul class=" "><li class=" "><p   
>Cultures &ndash; The <strong class=" ">Related pages</strong> web part did not take <strong class=" ">Combine with default culture</strong> setting into account and displayed the default culture version for untranslated related pages even if the <i class=" ">Combine with default culture</i> setting was disabled. After applying the hotfix, the web part only displays related pages translated into the current culture of the visitor.</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.8">
        <h2 class="heading "><span>11.0.8</span></h2>
<ul class=" "><li class=" "><p   
>Facebook integration &ndash; The hotfix adds support for app secret proof parameters when communicating with integrated Facebook apps. If your website uses the <a   href="http://localhost:8090/display/K11/Integrating+social+media">Facebook page integration</a> features or <a   href="http://localhost:8090/display/K11/Facebook+authentication">Facebook authentication</a>, we strongly recommend applying the hotfix and then securing your Facebook app:</p>
<ol class=" "><li class=" "><p   
>Open the Facebook App editing page at <a  class="external-link" href="https://developers.facebook.com/apps">https://developers.facebook.com/apps</a>.</p>
</li><li class=" "><p   
>Select your app and view the <strong class=" ">Settings -&gt; Advanced</strong> tab.</p>
</li><li class=" "><p   
>Scroll down to the <strong class=" ">Security</strong> section and switch the <strong class=" ">Require App Secret</strong> option to <i class=" ">Yes</i>.</p>
</li><li class=" "><p   
>Click <strong class=" ">Save Changes</strong>.</p>
</li></ol></li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.9">
        <h2 class="heading "><span>11.0.9</span></h2>
<ul class=" "><li class=" "><p   
>The SharePoint data source(*link) web part did not correctly handle multiselect fields with complex types. The hotfix ensures that the data source processes such fields into strings consisting of the type&#39;s properties separated by semicolon (;) characters, and different entries separated by newline characters (environment specific). To display data from multiselect SharePoint fields, you need to manually parse the values within the transformations(*link) applied to the data source&#39;s output. For example:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;%# String.Join(</code><code class="string">" and "</code><code class="plain">, String.Split(Eval&lt;string&gt;(</code><code class="string">"MultiselectField"</code><code class="plain">), Environment.NewLine).Select(l =&gt; String.Format(</code><code class="string">"{1} ({0})"</code><code class="plain">, String.Split(l, </code><code class="string">";"</code><code class="plain">)))) %&gt;</code></div>
</div>
    </div>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.10">
        <h2 class="heading "><span>11.0.10</span></h2>
<ul class=" "><li class=" "><p   
>The original implementation of the <strong class=" ">reCAPTCHA</strong> form control will stop working after March 31, 2018. The hotfix updates the control to use reCAPTCHA v2. Please register your site again at <a  class="external-link" href="https://www.google.com/recaptcha/admin">https://www.google.com/recaptcha/admin</a>, select the reCAPTCHA v2 type, and copy the new API keys into the corresponding Kentico settings. For more information, see <a   href="http://localhost:8090/pages/viewpage.action?pageId=68881167">Spam protection (CAPTCHA)</a>.</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.15">
        <h2 class="heading "><span>11.0.15</span></h2>
<ul class=" "><li class=" "><p   
>Licensing &ndash; After evaluating feedback from partners and clients, Kentico has decided to change the license limitations on the maximum number of enabled <a   href="http://localhost:8090/display/K11/Products">products</a> and make them less restricted. Applying the hotfix removes the limit completely for <i class=" ">Kentico CMS Ultimate</i> license editions and increases the limit to 500 products for <i class=" ">Kentico CMS Base</i> editions. For more information about license editions, see the <a  class="external-link" href="https://www.kentico.com/purchase/configure-your-license">Configure Your License</a> page on <a  class="external-link" href="http://kentico.com">kentico.com</a>.</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.19">
        <h2 class="heading "><span>11.0.19</span></h2>
<ul class=" "><li class=" "><p   
>LinkedIn integration &ndash; Effective May 18th, 2018, the LinkedIn API will no longer work with the original OAuth 1.0 implementation in Kentico. The hotfix updates the system to use OAuth 2.0 authentication for <a   href="http://localhost:8090/display/K11/Integrating+social+media">LinkedIn company management</a> and <a   href="http://localhost:8090/display/K11/LinkedIn+authentication">LinkedIn authentication</a> functionality. After applying the hotfix, you need to manually perform the following:</p>
<ul class=" "><li class=" "><p   
>If you use LinkedIn authentication:</p>
<ol class=" "><li class=" "><p   
>Sign in to <a  class="external-link" href="https://www.linkedin.com/secure/developer">https://www.linkedin.com/secure/developer</a>.</p>
</li><li class=" "><p   
>Select your app on the My applications page.</p>
</li><li class=" "><p   
>On the <strong class=" ">Authentication</strong> tab of the Application Settings, add the URLs of all website pages that provide LinkedIn authentication (i.e. pages that display the <a   href="http://localhost:8090/display/K11/Web+parts+available+for+LinkedIn+authentication">LinkedIn logon web part</a>). Enter the full absolute URL into the <strong class=" ">Authorized Redirect URLs</strong> field (under <i class=" ">OAuth 2.0</i>), including the protocol, domain, virtual directory and trailing slash (if necessary). For example: <i class=" "><a  class="external-link" href="https://mydomain.com/">https://mydomain.com/</a> Special-pages/SignIn</i></p>
</li><li class=" "><p   
>Click <strong class=" ">Add</strong> for each URL.</p>
</li><li class=" "><p   
>Click <strong class=" ">Update</strong> after you add all required redirect URLs.</p>
</li></ol></li><li class=" "><p   
>If you use the LinkedIn company profile management:</p>
<ol class=" "><li class=" "><p   
>Sign in to <a  class="external-link" href="https://www.linkedin.com/secure/developer">https://www.linkedin.com/secure/developer</a>.</p>
</li><li class=" "><p   
>Select your app on the My applications page.</p>
</li><li class=" "><p   
>On the <strong class=" ">Authentication</strong> tab of the Application Settings, enter the following value into the <strong class=" ">Authorized Redirect URLs</strong> field (under <i class=" ">OAuth 2.0</i>):<br/><i class=" "> <i class=" ">&lt;your website&#39;s domain&gt;/CMSModules/SocialMarketing/Pages/LinkedInCompanyAccessTokenDialog.aspx<br/></i></i></p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>The redirect URL value must be absolute, including the protocol, domain and virtual directory. For example:<br/><i class=" "> <a  class="external-link" href="https://mydomain.com/CMSModules/SocialMarketing/Pages/LinkedInCompanyAccessTokenDialog.aspx">https://mydomain.com/CMSModules/SocialMarketing/Pages/LinkedInCompanyAccessTokenDialog.aspx</a></i></p>
<p   
>If your website&#39;s administration interface is available on multiple domains, add all of the possible options.</p>
        </div>
    </div>
</li><li class=" "><p   
>Click <strong class=" ">Add</strong>.</p>
</li><li class=" "><p   
>Click<strong class=" "> Update</strong>.</p>
</li><li class=" "><p   
>Generate new authentication tokens for all registered LinkedIn company profiles in Kentico:</p>
<ol class=" "><li class=" "><p   
>Open the <strong class=" ">LinkedIn</strong> application in Kentico.</p>
</li><li class=" "><p   
>Select the <strong class=" ">Company profiles</strong> tab.</p>
</li><li class=" "><p   
>Edit the company profile and switch to the <strong class=" ">General</strong> tab.</p>
</li><li class=" "><p   
>Click <strong class=" ">Reauthorize</strong> next to <strong class=" ">Company</strong>.</p>
</li><li class=" "><p   
>In the opened dialog, enter your LinkedIn account credentials and click <strong class=" ">Allow access</strong>.</p>
</li><li class=" "><p   
>Click <strong class=" ">Save</strong>.</p>
</li></ol></li></ol></li></ul></li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.23">
        <h2 class="heading "><span>11.0.23</span></h2>
<ul class=" "><li class=" "><p   
>Redundant web farm task generation on shared storage &ndash; If you are running Kentico as a <a   href="http://localhost:8090/display/K11/Enabling+web+farms+on+Azure+Web+Apps">scaled out Azure Web App</a> (i.e., your instance is utilizing multiple web farm servers), add the <i class=" ">CMSSharedFileSystem</i> configuration key to the <i class=" ">web.config</i> file of your application and redeploy the project:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">appSettings</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="plain">	&lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">key</code><code class="plain">=</code><code class="string">"CMSSharedFileSystem"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"true"</code><code class="plain">/&gt;</code></div>
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="plain">&lt;/</code><code class="keyword">appsettings</code><code class="plain">&gt;</code></div>
</div>
    </div>
<p   
>The key signals Kentico that it is running on shared storage, and configures web farm behavior accordingly.</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.25">
        <h2 class="heading "><span>11.0.25</span></h2>
<ul class=" "><li class=" "><p   
>Email widgets did not reflect the selected UI culture when storing their properties which could lead to an error when editing the widget. This error occurred, for example, when the preferred UI culture used different date format from the <i class=" ">en-US</i> culture. After applying the hotfix, you need to manually re-save the configuration of affected widgets in your marketing emails.</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.27">
        <h2 class="heading "><span>11.0.27</span></h2>
<ul class=" "><li class=" "><p   
>Geolocation &ndash; By default, the <a   href="http://localhost:8090/display/K11/Using+geolocation+for+contacts">geolocation feature</a> in Kentico 11 uses MaxMind&#39;s GeoLite or GeoIP Legacy Databases, which will be <a  class="external-link" href="https://blog.maxmind.com/2018/01/02/discontinuation-of-the-geolite-legacy-databases/">discontinued</a> in the future. If you wish to integrate MaxMind&#39;s newer GeoIP2 Databases, use the following manual process:</p>
<ol class=" "><li class=" "><p   
>Apply hotfix 11.0.27 or newer to your Kentico instance.</p>
</li><li class=" "><p   
>Open your web project in Visual Studio. For sites created using the <a   href="http://localhost:8090/display/K11/Developing+sites+using+ASP.NET+MVC">MVC development model</a>, perform all of the following steps in the MVC project that provides the live site.</p>
</li><li class=" "><p   
>Right-click the project in the <strong class=" ">Solution Explorer</strong> and select <strong class=" ">Manage NuGet Packages</strong>.</p>
</li><li class=" "><p   
>Install the <strong class=" ">Kentico.Geolocation.Update-v11</strong> package.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Note</strong>: The package also installs several required dependencies, such as the <strong class=" ">MaxMind.GeoIP2</strong> package and version 11.0.2 of the <strong class=" ">Newtonsoft.Json</strong> package. You need to accept all license agreements and ensure that these packages work correctly with any customizations you may have in your project. If you have any custom projects within the solution that use the same packages, you need to consolidate the package versions.</p>
        </div>
    </div>
</li><li class=" "><p   
>Download the free <a  class="external-link" href="https://dev.maxmind.com/geoip/geoip2/geolite2/">GeoLite2 City</a> database or purchase the <a  class="external-link" href="https://www.maxmind.com/en/geoip2-city">GeoIP2 City</a> database (provides more accuracy and details).</p>
</li><li class=" "><p   
>Place the database file into your project&#39;s <i class=" ">~/App_Data/CMSModules/WebAnalytics/MaxMind/</i> folder.</p>
</li><li class=" "><p   
>Open your project&#39;s <i class=" ">web.config</i> file, and make sure the <strong class=" ">CMSGeoIPLocationFileName</strong> key (in the <i class=" ">appSettings</i> section) is set according to the name of your geolocation database file (<i class=" ">GeoLite2-City.mmdb</i> or <i class=" ">GeoIP2-City.mmdb</i>).</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;add key=</code><code class="string">"CMSGeoIPLocationFileName"</code><code class="plain"> value=</code><code class="string">"GeoIP2-City.mmdb"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
</li><li class=" "><p   
>(Optional) If you also wish to use the GeoLite2 ASN database to determine the organization name of visiting contacts, download the <a  class="external-link" href="https://dev.maxmind.com/geoip/geoip2/geolite2/">GeoLite2 ASN</a> database file (<i class=" ">GeoLite2-ASN.mmdb </i>) and place it into your web project&#39;s <i class=" ">~/App_Data/CMSModules/WebAnalytics/MaxMind/</i> folder.</p>
</li></ol></li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.29">
        <h2 class="heading "><span>11.0.29</span></h2>
<ul class=" "><li class=" "><p   
>E-commerce &ndash; When displaying <a   href="http://localhost:8090/display/K11/Working+with+coupon+codes">coupon codes</a> added to a customer&#39;s shopping cart, it was not possible to adjust the appearance of codes that are no longer valid (for example after products are removed from the cart and the total price falls under the value required by the coupon code&#39;s discount). After applying the hotfix, coupon code transformations provide a new <strong class=" ">IsApplied</strong> data property, which can be used to evaluate whether codes are still valid. You can adjust your site&#39;s transformations, and use the new property to add formatting options for invalid coupon codes. For example:<br/></p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Text / XML transformation</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Text / XML transformation" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;div </code><code class="keyword">class</code><code class="plain">=</code><code class="string">"label"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">  &lt;span {% </code><code class="keyword">if</code><code class="plain"> (!IsApplied) {</code><code class="string">"style='text-decoration: line-through'"</code><code class="plain">} %}&gt;</code></div>
<div class="line"><code class="plain">    {% HTMLEncode(Code) %}</code></div>
<div class="line"><code class="plain">  &lt;/span&gt;</code></div>
<div class="line"><code class="plain">&lt;/div&gt;</code></div>
</div>
    </div>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.42">
        <h2 class="heading "><span>11.0.42</span></h2>
<ul class=" "><li class="conf-macro output-inline "><p   
>Facebook integration &ndash; Due to changes in the Facebook API and updated security requirements, the initial <a   href="http://localhost:8090/display/K11/Facebook+authentication">Facebook authentication</a> and <a   href="http://localhost:8090/display/K11/Integrating+social+media">Facebook page publishing</a> functionality in Kentico 11 no longer works. To use the features, you need to apply the hotfix and manually perform the following changes:</p>
<ul class=" "><li class="conf-macro output-inline "><p   
>If you use Facebook authentication:</p>
<ol class=" "><li class="conf-macro output-inline "><p   
>Log in to <a  class="external-link" href="https://developers.facebook.com/apps">https://developers.facebook.com/apps</a>.</p>
</li><li class="conf-macro output-inline "><p   
>Click the Facebook app that you use for your website.</p>
</li><li class=" "><p   
>Open the <strong class=" ">Settings</strong> tab of the app&#39;s <strong class=" ">Facebook Login</strong> product.</p>
</li><li class=" "><p   
>In the <strong class=" ">Valid OAuth redirect URIs</strong> field, enter the URLs of all pages from your website where you wish to allow Facebook authentication (i.e. pages that display the <i class=" ">Facebook Connect logon</i> web part).</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>The redirect URI values must be absolute, including the protocol, domain and virtual directory. For example:<i class=" "> <a  class="external-link" href="https://mydomain.com/">https://mydomain.com/</a> Special-pages/SignIn</i><i class=" "></i></p>
<p   
>If your website is available on multiple domains, add all of the possible options.</p>
        </div>
    </div>
</li><li class=" "><p   
>Click <strong class=" ">Save Changes</strong>.</p>
</li><li class=" "><p   
>If you wish to retrieve user birthday and location data from Facebook, you additionally need to submit your app for <strong class=" ">App Review</strong> and request the <strong class=" ">user_birthday</strong> and <strong class=" ">user_location</strong> permissions.</p>
</li></ol></li><li class="conf-macro output-inline "><p   
>If you use Facebook page publishing:</p>
<ol class=" "><li class="conf-macro output-inline "><p   
>Log in to <a  class="external-link" href="https://developers.facebook.com/apps">https://developers.facebook.com/apps</a>.</p>
</li><li class="conf-macro output-inline "><p   
>Click the Facebook app that you use for your website.</p>
</li><li class=" "><p   
>Open the <strong class=" ">Settings</strong> tab of the app&#39;s <strong class=" ">Facebook Login</strong> product.</p>
</li><li class="conf-macro output-inline "><p   
>Enter the following values into the <strong class=" ">Valid OAuth redirect URIs</strong> field:</p>
<ul class=" "><li class=" "><p   
><i class=" ">&lt;your website&#39;s domain&gt;/CMSModules/SocialMarketing/Pages/FacebookPageAccessTokenDialog.aspx</i></p>
</li><li class=" "><p   
><i class=" ">&lt;your website&#39;s domain&gt;/CMSModules/SocialMarketing/Pages/FacebookPageAccessTokenDialog.aspx?redirected=1</i></p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>The redirect URI values must be absolute, including the protocol, domain and virtual directory. For example:<br/><i class=" "> <a  class="external-link" href="https://mydomain.com/">https://mydomain.com/</a> <i class=" ">CMSModules/SocialMarketing/Pages/FacebookPageAccessTokenDialog.aspx</i></i></p>
<p   
>If your website&#39;s administration interface is available on multiple domains, add all of the possible options.</p>
        </div>
    </div>
</li></ul></li><li class="conf-macro output-inline "><p   
>Click <strong class=" ">Save Changes</strong>.</p>
</li><li class="conf-macro output-inline "><p   
>Switch to the <strong class=" ">App Review</strong> tab and make sure your app has the following permissions as approved items:<br/></p>
<ul class=" "><li class="conf-macro output-inline "><p   
><strong class=" ">manage_pages</strong> and <strong class=" ">publish_pages</strong> &ndash; required to retrieve Page Access Tokens and <a   href="http://localhost:8090/display/K11/Posting+to+social+media">post content</a> from Kentico to Facebook pages.<strong class=" "></strong></p>
</li><li class=" "><p   
><strong class=" ">read_insights</strong> &ndash; required to retrieve <a   href="http://localhost:8090/display/K11/Viewing+Facebook+insights">Facebook Insights statistics</a> about published posts and the related pages.</p>
</li></ul></li><li class="conf-macro output-inline "><p   
>If your app is missing any of the required permissions, create a submission, add the permission items, and submit your app for review.</p>
</li><li class="conf-macro output-inline "><p   
>In Kentico, open the <strong class=" ">Facebook</strong> application, select the <strong class=" ">Pages</strong> tab, and check that your pages are valid:</p>
<ul class=" "><li class="conf-macro output-inline "><p   
>Existing pages with a valid access token should remain functional.</p>
</li><li class="conf-macro output-inline "><p   
>When adding new pages or renewing the access token, you now need to set the <strong class=" ">Facebook page ID</strong> instead of the originally used page URL. You can find the Page ID value on the <i class=" ">About</i> tab of the given page on Facebook.</p>
</li></ul></li></ol></li></ul></li></ul>    </div>
    </div>
    <div class="section section-1" id="src-56787624_Hotfixinstructionstemp-11.0Sourcecodecompilationinstructions">
        <h1 class="heading "><span>11.0 Source code compilation instructions</span></h1>
<p   
>After applying the hotfix, please perform the following steps in Visual Studio to ensure that the source code works correctly and can be compiled:</p>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-11.0.10.1">
        <h2 class="heading "><span>11.0.10</span></h2>
<ul class=" "><li class=" "><p   
>Install the <strong class=" ">Newtonsoft.Json</strong> NuGet package into the <strong class=" ">UIControls</strong> project (right-click the project in the <i class=" ">Solution Explorer</i> and select <strong class=" ">Manage NuGet Packages</strong>). The package version must be <strong class=" ">7.0.1</strong> (or newer).</p>
</li></ul>    </div>
    </div>
    <div class="section section-1" id="src-56787624_Hotfixinstructionstemp-12.0Additionalnotesandworkarounds">
        <h1 class="heading "><span>12.0 Additional notes and workarounds</span></h1>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.9">
        <h2 class="heading "><span>12.0.9</span></h2>
<ul class=" "><li class=" "><p   
>E-commerce &ndash; <a   href="http://localhost:8090/display/K12/Products">Products</a> that use inventory tracking and have the <strong class=" ">Sell only if items available</strong> property enabled may in some cases be sold even when the inventory is depleted, if multiple customers place orders concurrently. After applying the hotfix, the system logs a warning into the event log if such a situation occurs. Additionally, the hotfix allows you to prevent the creation of such orders by enabling strict inventory management &ndash; use the new <strong class=" ">CMSUseStrictInventoryManagement</strong> web.config key:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">key</code><code class="plain">=</code><code class="string">"CMSUseStrictInventoryManagement"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"true"</code><code class="plain">/&gt;</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Important</strong></p>
<p   
>With strict inventory management enabled, the system throws an <i class=" ">InvalidOperationException</i> when a customer attempts to create an order containing a product that became out-of-stock due to another concurrently placed order. The default <a   href="http://localhost:8090/display/K12/Checkout+process">checkout web parts</a> on Portal Engine sites handle the exception by default and display an error message.</p>
<p   
>If you wish to enable the <i class=" ">CMSUseStrictInventoryManagement</i> key on an <a   href="http://localhost:8090/display/K12/MVC+development+overview">MVC site</a> or a Portal Engine site with custom checkout components, you need to manually ensure that your custom code handles the exception and displays appropriate information to customers.</p>
        </div>
    </div>
</li><li class=" "><p   
>MVC &ndash; Starting from version 12.0.9, the <a  class="external-link" href="https://www.nuget.org/packages/Kentico.AspNet.Mvc/">Kentico.AspNet.Mvc</a> NuGet package no longer directly contains the Kentico API libraries used for MVC development. Instead, the libraries are part of a new <strong class=" ">Kentico.AspNet.Mvc.Libraries</strong> package, which is a dependency. The change does not require any additional steps when updating the package version. The new package allows developers to install the MVC API libraries into custom <i class=" ">Code Library</i> projects, without needing to add the entire <i class=" ">Kentico.AspNet.Mvc</i> package and its content items (which are only intended for MVC web projects).</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.12">
        <h2 class="heading "><span>12.0.12</span></h2>
<ul class=" "><li class=" "><p   
>Form components &ndash; The hotfix removes the 500 character restriction placed on the <i class=" ">Text area</i> form component for the MVC Form builder. After applying the hotfix, the number of allowed characters is by default set to the maximum number of characters allowed by the underlying database column. This change is only reflected in form fields created <strong class=" ">after</strong> the hotfix was applied. Existing form fields based on the <i class=" ">Text area</i> component are still restricted to 500 characters.<br/><br/>A possible workaround for this is to remove fields based on the &#39;old&#39;, pre-hotfixed <i class=" ">Text area</i> component from forms and reinsert them again. However, note that by doing this you <strong class=" ">lose all data</strong> collected by each field up to this point (the underlying database column holding the data is deleted and recreated).</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.14">
        <h2 class="heading "><span>12.0.14</span></h2>
<ul class=" "><li class=" "><p   
>Form builder &ndash;     <span style="color: #333333;">
The hotfix introduces additional API that enables more extensive markup customization options for forms built using the &#39;Form builder&#39; feature. The additions consist of a new static rendering configuration affecting the form&#39;s body and new events that enable contextual modifications of the form and individual form fields (e.g., adding accessibility attributes based on a field&#39;s type and <i class=" ">required</i> status). See <a   href="http://localhost:8090/display/K12/Customizing+the+Form+widget">Customizing the Form widget</a> for a full overview and examples of the added API.    </span>
</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.23">
        <h2 class="heading "><span>12.0.23</span></h2>
<ul class=" "><li class=" "><p   
>Staging &ndash; Staging service authentication using X.509 certificates did not work on instances hosted as an Azure App Service. The system worked with a different certificate store location than the one used by certificates imported into Azure. After applying the hotfix, the correct certificate store location is used (<i class=" ">CurrentUser\My</i>). To use certificates for the staging service on Azure, you also need to make them accessible to the application by following the instructions in <a  class="external-link" href="https://docs.microsoft.com/en-us/azure/app-service/app-service-web-ssl-cert-load#load-your-certificates">Load your certificates</a>.</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.26">
        <h2 class="heading "><span>12.0.26</span></h2>
<ul class=" "><li class=" "><p   
>MVC &ndash; The <strong class=" ">Insert link</strong> dialog, available in the editor on the <strong class=" ">Content</strong> tab for page fields using the <i class=" ">Rich text editor</i> form control, incorrectly created page links with absolute URLs, including the site&#39;s scheme, domain and application path (i.e. the site&#39;s <i class=" ">Presentation URL</i>). This could cause broken links when transferring content between different environments, for example using <a   href="http://localhost:8090/display/K12/Content+staging">staging</a>. After applying the hotfix, the editor creates page links with virtual relative URLs (<i class=" ">~/&lt;link path&gt;</i>). Additionally, the hotfix introduces an output filter that automatically resolves all relative URLs on the side of the MVC live site (based on the environment where the site is actually running). This filter prevents content editors from creating invalid links in cases where your MVC application does not resolve links (by processing the content using the <i class=" ">Html.Kentico().ResolveUrls</i> method). If you want to disable this output filter and resolve relative links manually, you can add the <strong class=" ">CMSMVCResolveRelativeUrls</strong> key to the <i class=" ">appSettings</i> section of your MVC project&#39;s <i class=" ">Web.config</i> file:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">key</code><code class="plain">=</code><code class="string">"CMSMVCResolveRelativeUrls"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"false"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Fixing existing content with absolute links</strong></p>
<p   
>Hotfix 12.0.26 only changes how new page links are saved by the rich text editor. Existing links remain stored with absolute URLs. You can fix the links by resaving them manually after you apply the hotfix. To find links with absolute URLs on your website, you can use the process described in the <a  class="external-link" href="https://devnet.kentico.com/articles/how-to-fix-links-inserted-via-wysiwig-editor-in-kentico-12">How to fix links inserted via WYSIWIG editor in Kentico 12</a> article.</p>
        </div>
    </div>
</li><li class=" "><p   
>Import/Export &ndash; When a package containing site-specific data was imported, the system forced the rebuild of all smart search indexes assigned to the site where the data was imported. This occurred for all imported objects and could result in long and unnecessary rebuild operations for large indexes. The hotfix disables the forced index rebuild and introduces a new <strong class=" ">Rebuild site search indexes </strong>setting in the<i class=" "> Objects selection</i> step of the <a   href="http://localhost:8090/display/K12/Importing+a+site+or+objects">import wizard</a>, allowing users to determine whether an index rebuild is necessary for each individual import.</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.30">
        <h2 class="heading "><span>12.0.30</span></h2>
<ul class=" "><li class=" "><p   
>MVC &ndash; When running an MVC site and the Kentico administration application on different domains, a <a  class="external-link" href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing">CORS policy</a> error could occur when creating new pages of a content-only page type with the <strong class=" ">Show Page tab</strong> setting enabled. The error was encountered if cross-origin resource sharing was not enabled for the MVC application, and only after installing hotfix 12.0.29 (Service Pack). With hotfix 12.0.30 or newer applied, the resource sharing feature is automatically enabled for all MVC projects.</p>
<ul class=" "><li class=" "><p   
>When your MVC application processes requests sent from the domain of the connected Kentico administration application, it now sends a response with the <i class=" ">Access-Control-Allow-Origin</i> header, which enables cross-origin resource sharing.</p>
</li><li class=" "><p   
>The <strong class=" ">UseResourceSharingWithAdministration</strong> method of the <i class=" ">ApplicationBuilder</i> instance, which was originally used to enable the resource sharing feature, no longer has any effect. We recommend removing the method from the code of your MVC application.</p>
</li></ul></li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.32">
        <h2 class="heading "><span>12.0.32</span></h2>
<ul class=" "><li class=" "><p   
>Search &ndash;     <span style="color: #172b4d;">
The method <strong class=" ">SearchParameters.PrepareForPages</strong> created a <strong class=" ">SearchParameters</strong> object that forced a specific level of supported smart search syntax for search queries. This interfered with the smart search functionality, for example not allowing exact field searching to be performed (i.e., the syntax <i class=" ">field:&quot;searchquery&quot;</i> was incorrectly processed). The hotfix introduces overloads for the <i class=" ">SearchParameters.PrepareForPages</i> method that allow users to configure the levels of supported syntax per search request when creating the <i class=" ">SearchParameters</i> object. See the <a  class="external-link" href="https://docs.kentico.com/api12sp/configuration/smart-search">API Examples</a> or <a   href="http://localhost:8090/display/K12SP/Building+a+search+interface+for+local+indexes+in+MVC">Building a search interface for local indexes in MVC</a> for an overview of the added API.    </span>
</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.34">
        <h2 class="heading "><span>12.0.34</span></h2>
<ul class=" "><li class=" "><p   
>    <span style="color: #172b4d;">
Users &ndash; Kentico&#39;s <a   href="http://localhost:8090/display/K12SP/Integrating+Kentico+membership">ASP.NET Identity integration</a> for MVC projects was tightly coupled with the default <strong class=" ">Kentico.Membership.User</strong> class. Any changes to the <i class=" ">User</i> class (e.g., added custom properties or additional logic) required a full re-implementation of the entire ASP.NET Identity integration. The hotfix expands the Kentico membership API by introducing the <strong class=" ">KenticoUserManager</strong>, <strong class=" ">KenticoUserStore</strong>, and <strong class=" ">KenticoSignInManager</strong> types, which allow developers to seamlessly integrate custom user types derived from the default <i class=" ">Kentico.Membership.User</i> class. If you wish to extend the default <i class=" ">User</i> object when working with Kentico&#39;s Identity integration, use the new types with the Kentico prefix in your application&#39;s code instead of the original non-prefixed types. These types accept a generic parameter that specifies the type of the user class. See <a   href="http://localhost:8090/display/K12SP/Adding+custom+fields+to+users">Adding custom fields to users</a> for more information and examples.    </span>
</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.35">
        <h2 class="heading "><span>12.0.35</span></h2>
<ul class=" "><li class=" "><p   
>    <span style="color: #172b4d;">
    <span style="color: #333333;">
General &ndash; When the Kentico application was hosted behind a proxy server or some other service that masks the application&#39;s original domain (e.g., Azure Application Gateway), it generated certain requests with incorrect URLs. This caused errors in parts of the application (e.g., when uploading files into Media libraries). When hosting the Kentico application behind a proxy server, developers need to set the <strong class=" ">CMSUrlHost</strong> <i class=" ">web.config</i> key (added by the hotfix) to the <i class=" ">host</i> component of the proxy server&#39;s URL (omitting the port number, if specified) to ensure the application correctly generates request URLs. Please note that this configuration currently applies only for <a   href="http://localhost:8090/display/K12SP/Portal+Engine+development+overview">Portal Engine projects</a>.<br/><br/>For example, assuming the site is running behind the <i class=" ">https://my.proxyserver.com</i> proxy server, add the <i class=" ">CMSUrlHost</i> key with the <i class=" ">my.proxyserver.com</i> value to the <i class=" ">appSettings</i> section of the Kentico project&#39;s w<i class=" ">eb.config</i> file:<br/>    </span>
    </span>
</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Setting the CMSUrlHost web.config key</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Setting the CMSUrlHost web.config key" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">key</code><code class="plain">=</code><code class="string">"CMSUrlHost"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"my.proxyserver.com"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
<p   
>    <span style="color: #172b4d;">
    <span style="color: #333333;">
See <a   href="http://localhost:8090/display/K12SP/Running+Kentico+behind+a+proxy+server">Running Kentico behind a proxy server</a> for a detailed, step-by-step walkthrough of the configuration.    </span>
    </span>
</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.39">
        <h2 class="heading "><span> 12.0.39 </span></h2>
<ul class=" "><li class=" "><p   
>    <span style="color: #172b4d;">
    <span style="color: #333333;">
Authentication &ndash; After applying the hotfix, the event arguments for handlers of the <strong class=" ">SecurityEvents.AuthenticationRequested</strong> <a   href="http://localhost:8090/display/K12SP/Reference+-+Global+system+events">global event</a> include the query string in the provided redirection URL (in the <i class=" ">RequestedUrl</i> property of the <i class=" ">AuthenticationRequestEventArgs</i> handler parameter).    </span>
    </span>
</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.42">
        <h2 class="heading "><span> 12.0.42 </span></h2>
<ul class=" "><li class=" "><p   
>    <span style="color: #172b4d;">
    <span style="color: #172b4d;">
    <span style="color: #333333;">
E-commerce &ndash;     </span>
    </span>
    </span>
On instances with hotfix 12.0.12 or newer applied, <a   href="http://localhost:8090/display/K12SP/Modifying+customer+details">customers</a> with a filled in <strong class=" ">Tax registration ID</strong> value were incorrectly exempt from tax for products with a <a   href="http://localhost:8090/display/K12SP/Configuring+taxes">tax class</a> that had the <strong class=" ">Zero tax if tax ID is supplied</strong> property disabled.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Note</strong>: Applying hotfix 12.0.42 corrects the default tax exemption, but also reverses the changes from 12.0.12. <a   href="http://localhost:8090/display/K12SP/Customizing+tax+calculation">Custom tax exemptions</a> added using an <strong class=" ">ICustomerTaxClassService</strong> implementation apply only for products under a tax class with the <strong class=" ">Zero tax if tax ID is supplied</strong> property enabled. If you have a custom tax exemption and wish to avoid this behavior, please contact Kentico support.</p>
        </div>
    </div>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.47">
        <h2 class="heading "><span>12.0.47</span></h2>
<ul class=" "><li class=" "><p   
>MVC &ndash; The administration interface URLs internally used in the <i class=" ">Pages</i> application for the preview and page builder editing mode of pages on MVC sites incorrectly had unlimited validity. After applying hotfix 12.0.47, these URLs contain a timestamp parameter and expire after 8 hours by default. If you wish to adjust the expiration time, add the <strong class=" ">CMSPreviewLinkExpiration</strong> key with a value representing a specific number of minutes to     <span style="color: #172b4d;">
    <span style="color: #333333;">
the <i class=" ">appSettings</i> section of the Kentico administration project&#39;s w<i class=" ">eb.config</i> file:    </span>
    </span>
</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">key</code><code class="plain">=</code><code class="string">"CMSPreviewLinkExpiration"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"240"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
</li><li class=" "><p   
>MVC &ndash; When viewing pages on MVC sites through a <a   href="http://localhost:8090/display/K12SP/Sending+links+to+unpublished+pages">preview URL</a> (generated in the Pages application on the <strong class=" ">Properties -&gt; General</strong> tab), links to other pages incorrectly preserved the preview mode and the generated user context. After applying hotfix 12.0.47, the <i class=" ">href</i> attributes of such links no longer contain preview URLs and the links instead open the live site version of the targeted page.</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.54">
        <h2 class="heading "><span>12.0.54</span></h2>
<ul class=" "><li class=" "><p   
>Page builder &ndash; If a <a   href="http://localhost:8090/display/K12SP/Page+builder+development">page builder</a> component (such as a <a   href="http://localhost:8090/display/K12SP/Developing+widgets+in+MVC">widget</a>) included scripts that used certain <a  class="external-link" href="https://www.w3schools.com/js/js_es5.asp">ECMAScript 5 features</a>, an exception could occur in some scenarios when loading page builder scripts on pages containing the component. For example, the error could be encountered after installing the Kentico <a  class="external-link" href="https://www.nuget.org/packages/Kentico.EMS12.MvcComponents.Widget.RichText/">Rich text inline editor widget</a>.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Note</strong>: After applying the hotfix, the system no longer provides minification of page builder component scripts by default. We recommend that you manually ensure minification of custom component scripts in your project.</p>
        </div>
    </div>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.55">
        <h2 class="heading "><span>12.0.55</span></h2>
<ul class=" "><li class=" "><p   
>LinkedIn integration &ndash; Due to changes in the LinkedIn integration API, the <a   href="http://localhost:8090/display/K12SP/Integrating+social+media">LinkedIn company management functionality</a> in Kentico did not work. After applying the hotfix, you need to manually perform the following:<br/></p>
<ul class=" "><li class=" "><p   
>Obtain permissions for your LinkedIn app that are now required for the integration: <strong class=" ">rw_organization_admin</strong>, <strong class=" ">r_organization_social</strong>, <strong class=" ">w_organization_social</strong>. To get the permissions, you need to apply and be approved as a LinkedIn Partner (<a  class="external-link" href="https://business.linkedin.com/marketing-solutions/marketing-partners/become-a-partner/marketing-developer-program">LinkedIn Marketing Developer Program</a>).<br/></p>
<ol class=" "><li class=" "><p   
>Sign in to <a  class="external-link" href="https://www.linkedin.com/secure/developer">https://www.linkedin.com/secure/developer</a>.</p>
</li><li class=" "><p   
>Select your app on the <i class=" ">My apps</i> page.</p>
</li><li class=" "><p   
>On the <strong class=" ">Products</strong> tab, click <strong class=" ">Add more products</strong> and select <strong class=" ">Marketing Developer Platform</strong>.</p>
</li></ol></li><li class=" "><p   
>Once your LinkedIn app has the required permission, generate new authentication tokens for all LinkedIn company profiles registered in Kentico:<br/></p>
<ol class=" "><li class=" "><p   
>Open the <strong class=" ">LinkedIn</strong> application in Kentico.</p>
</li><li class=" "><p   
>Select the <strong class=" ">Company profiles</strong> tab.</p>
</li><li class=" "><p   
>Edit the company profile and switch to the <strong class=" ">General</strong> tab.</p>
</li><li class=" "><p   
>Click <strong class=" ">Reauthorize</strong> next to <strong class=" ">Company</strong>.</p>
</li><li class=" "><p   
>In the opened dialog, enter your LinkedIn account credentials and click <strong class=" ">Allow access</strong>.</p>
</li><li class=" "><p   
>Click <strong class=" ">Save</strong>.</p>
</li></ol></li></ul></li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.61">
        <h2 class="heading "><span>12.0.61</span></h2>
<ul class=" "><li class=" "><p   
>A/B testing &ndash; Page visit conversions for <a   href="http://localhost:8090/pages/viewpage.action?pageId=96437980">A/B tests</a> on MVC sites were not logged correctly for sites running on a URL without a virtual directory (i.e. hosted directly in the root of an IIS website). After applying the hotfix, the <strong class=" ">TryGetRelativePath</strong> public extension method for <i class=" ">System.Uri</i> objects (available in the <i class=" ">Kentico.OnlineMarketing.Web.Mvc</i> namespace) returns path values including a leading slash (&#39;/&#39;).</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.64">
        <h2 class="heading "><span>12.0.64</span></h2>
<ul class=" "><li class=" "><p   
>Web farms &ndash; If using a database server with relatively low-tier performance (for example an Azure SQL database with under 50 DTUs), timeout errors could occur when the system performed cleanup of web farm tasks, typically when the instance contained large synchronization tasks with binary data. This resulted in event log errors and potentially a buildup of web farm tasks in the database. To fix the issue, either increase the connection time out for the database or lower the batch size for task deletion by adding the new <strong class=" ">CMSWebFarmTaskDeleteBatchSize</strong> key to the <i class=" ">appSettings</i> section of the project&#39;s web.config file. The key&#39;s default value is 500.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">key</code><code class="plain">=</code><code class="string">"CMSWebFarmTaskDeleteBatchSize"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"100"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.70">
        <h2 class="heading "><span>12.0.70</span></h2>
<ul class=" "><li class=" "><p   
>Email engine &ndash; If using a database server with relatively low-tier performance (for example an Azure SQL database with 400 DTUs) and sending extremely large numbers of emails, cleaning of archived emails could fail and potentially lead to buildup of sent emails, and even performance issues or crashes on the website. Email cleaning is performed by the <strong class=" ">Clean email queue</strong> <a   href="http://localhost:8090/display/K12SP/Scheduling+tasks">scheduled task</a>, when the <strong class=" ">Settings -&gt; System -&gt; Emails -&gt; Archive emails (days)</strong> setting is greater than 0. To fix the issue, either scale up the database, increase the database connection timeout, or lower the batch size for archived email deletion by adding the new <strong class=" ">CMSEmailDeleteBatchSize</strong> key to the <i class=" ">appSettings</i> section of the project&#39;s web.config file. The key&#39;s default value is 2000.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">key</code><code class="plain">=</code><code class="string">"CMSEmailDeleteBatchSize"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"200"</code><code class="plain"> /&gt;</code></div>
</div>
    </div>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.77">
        <h2 class="heading "><span>12.0.77</span></h2>
<ul class=" "><li class=" "><p   
>E-commerce &ndash; <a   href="http://localhost:8090/display/K12SP/Working+with+free+shipping+offers">Free shipping offers</a> with a <strong class=" ">Minimum order amount</strong> were incorrectly evaluated without subtracting any applied <a   href="http://localhost:8090/display/K12SP/Working+with+order+discounts">order discounts</a> from the checked order price. Note that after applying the hotfix, orders will no longer qualify for free shipping if their price does not meet the minimum amount after subtracting an order discount. The change may affect existing orders if they are edited and recalculated in the administration interface.</p>
</li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.90">
        <h2 class="heading "><span>12.0.90</span></h2>
<ul class=" "><li class=" "><p   
>Facebook integration &ndash; Due to changes in the Facebook API and related permissions, the <a   href="http://localhost:8090/display/K12SP/Integrating+social+media">Facebook page publishing</a> functionality may stop working. To use the feature, you need to apply the hotfix and manually update your Facebook app:</p>
<ol class=" "><li class="conf-macro output-inline "><p   
>Log in to <a  class="external-link" href="https://developers.facebook.com/apps">https://developers.facebook.com/apps</a>.</p>
</li><li class="conf-macro output-inline "><p   
>Click the Facebook app that you use for your website.</p>
</li><li class="conf-macro output-inline "><p   
>Under <strong class=" ">Settings</strong> &gt; <strong class=" ">Advanced,</strong> upgrade the Facebook API Version to <strong class=" ">v8.0</strong>.</p>
</li><li class=" "><p   
>Switch to <strong class=" ">App Review</strong> &gt; <strong class=" ">Permissions and Features</strong> and ensure that your app has the following permissions:</p>
<ul class=" "><li class=" "><p   
><strong class=" ">pages_manage_posts</strong></p>
</li><li class=" "><p   
><strong class=" ">pages_read_user_content</strong> and <strong class=" ">read_insights</strong> (to allow retrieval of <a   href="http://localhost:8090/display/K12SP/Viewing+Facebook+insights">Facebook Insights statistics</a> about published posts and the related pages).</p>
</li></ul></li><li class=" "><p   
>In Kentico, open the <strong class=" ">Facebook</strong> application, select the <strong class=" ">Pages</strong> tab, and generate new access tokens for your pages (click <strong class=" ">Authorize</strong> when editing the page).</p>
</li></ol></li></ul>    </div>
    </div>
    <div class="section section-1" id="src-56787624_Hotfixinstructionstemp-12.0Sourcecodecompilationinstructions">
        <h1 class="heading "><span>12.0 Source code compilation instructions</span></h1>
<p   
>After applying the hotfix, please perform the following steps in Visual Studio to ensure that the source code works correctly and can be compiled:</p>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-12.0.11">
        <h2 class="heading "><span>12.0.11</span></h2>
<ul class=" "><li class=" "><p   
>Manually include the <i class=" ">PreviewResponseRedirectionModule</i> <i class=" ">.cs</i> file into the <i class=" ">Kentico.Content.Web.Mvc</i> project:</p>
<ol class=" "><li class=" "><p   
>Click <strong class=" ">Show all files</strong> at the top of the Solution Explorer.</p>
</li><li class=" "><p   
>Expand the <i class=" ">Kentico.Content.Web.Mvc</i> project under the <i class=" ">MVC</i> folder.</p>
</li><li class=" "><p   
>Locate the <i class=" ">PreviewResponseRedirectionModule</i> <i class=" ">.cs</i> file (in the <i class=" ">Preview</i> folder).</p>
</li><li class=" "><p   
>Right-click the file and select <strong class=" ">Include in Project</strong>.</p>
</li></ol></li></ul>    </div>
    </div>
    <div class="section section-1" id="src-56787624_Hotfixinstructionstemp-13.0Additionalnotesandworkarounds">
        <h1 class="heading "><span>13.0 Additional notes and workarounds</span></h1>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-13.0.4">
        <h2 class="heading "><span>13.0.4</span></h2>
<ul class=" "><li class=" "><p   
><strong class=" ">(Added feature)</strong> Media libraries &ndash; The hotfix allows <a   href="http://localhost:8090/display/13/Media+library+files">media libraries</a> to use the direct file path in URLs when adding links to files in Xperience content (instead of permanent media file URLs). For example, direct file URLs may be desired for media files placed in external storage (such as <a   href="http://localhost:8090/display/13/Configuring+Azure+storage">Microsoft Azure Blob storage</a>). The option can be configured when editing individual media libraries on the <strong class=" ">General</strong> tab. The URL format applies in the following scenarios:</p>
<ul class=" "><li class=" "><p   
>Adding media files using the <a   href="http://localhost:8090/display/13/Using+the+Rich+text+widget">Rich text widget</a> in page builder content</p>
</li><li class=" "><p   
>Adding media files using the <a   href="http://localhost:8090/display/13/Editing+content+in+rich+text+fields">editor</a> for page fields based on the <strong class=" ">Rich text editor</strong> form control</p>
</li><li class=" "><p   
><a   href="http://localhost:8090/display/13/Allowing+users+to+insert+media+links+in+page+fields">Selecting media files</a> in page fields based on the <strong class=" ">Media selection</strong> form control</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Note</strong>: Files accessed through a direct path are not handled by the Xperience system &ndash; no permission or security restrictions are enforced and image resizing is not applied. Additionally, direct file links may become broken in certain deployment scenarios if your instances each use a different location or container for media files.</p>
        </div>
    </div>
</li></ul></li></ul>    </div>
    <div class="section section-2" id="src-56787624_Hotfixinstructionstemp-13.0.10">
        <h2 class="heading "><span>13.0.10</span></h2>
<ul class=" "><li class=" "><p   
>Filesystem handling for ASP.NET Core applications on Linux &ndash; The hotfix addresses a number of filesystem-related issues encountered when hosting ASP.NET Core live site applications in Linux environments. The issues were primarily caused by a dependency on Windows-like filesystem conventions, so mostly impacted features reliant on Input/Output operations. The following is a non-exhaustive list of affected features: <a   href="http://localhost:8090/display/13/Media+library+files">media library</a> operations (insert, modify, delete), <a   href="http://localhost:8090/display/13/Setting+up+search+on+your+website">smart search</a> (running indexing tasks, index rebuilds), web farm synchronization, scheduler functionality run on the live site.<strong class=" "> <br/><br/></strong>The hotfix additionally introduces a new approach for detecting absolute and relative paths on Unix-like filesystems. This applies <strong class=" ">only</strong> to ASP.NET Core applications hosted on Linux. Since both relative and absolute paths on Unix-like filesystems begin with a forward slash (&#39;/&#39;), Xperience cannot determine whether a path segment is absolute or relative. For example, this is important when determining the location of media library content, or in general whenever it is necessary to prepend relative path fragments with the physical path to the web application.<br/><br/>By default, the system uses the following process to detect the path type:<br/></p>
<ol class=" "><li class=" "><p   
>The system receives a path fragment. For example: <i class=" ">/media/mediagallery/image.jpg</i></p>
</li><li class=" "><p   
>The system checks whether the first two folders exist on the filesystem <strong class=" ">starting from the root</strong> (the first two folders produced the least false positives during extensive testing). For the example above, the system tests for the existence of: <i class=" ">/media/mediagallery</i></p>
</li><li class=" "><p   
>If the first two folders in the path do not exist, the path is treated as <strong class=" ">relative</strong>. If the first two folders exist, the path is treated as <strong class=" ">absolute</strong>.</p>
</li></ol><p   
>You can override this behavior by adding the <strong class=" ">CMSUnixRootedPathPrefixes</strong> configuration key to the Core application. Adding the key <strong class=" ">disables</strong> the process described above. Instead, the key needs to contain a semicolon-delimited list of all path prefixes (e.g., <i class=" ">/etc</i>, <i class=" ">/var</i>, <i class=" ">/myfolder</i>) the system should treat as absolute. The list must be case-sensitive.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">appsettings.json</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="appsettings.json" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	</code><code class="string">"CMSUnixRootedPathPrefixes"</code><code class="plain">: </code><code class="string">"/etc;/var;/myfolder"</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Only use the <strong class=" ">CMSUnixRootedPathPrefixes</strong> configuration key if your project contains non-standard <a   href="http://localhost:8090/display/13/Configuring+file+system+providers">filesystem mapping</a> (e.g., for media library files), or if you encounter issues with the built-in path type detection mechanism. The default functionality covers all expected cases and filesystem configurations.</p>
        </div>
    </div>
</li><li class=" "><p   
>Rich text editor &ndash; The <a   href="http://localhost:8090/display/13/Configuring+the+rich+text+editor+for+page+builder">Rich text editor</a> component for the page builder was updated to use version <strong class=" ">3.2.6</strong> of the Froala WYSIWYG editor. The update resolves an issue where adding a new line caused the page to scroll down to the bottom of the rich text editor content (when the content was very long).</p>
</li><li class=" "><p   
>Search &ndash; The <strong class=" ">Search fields</strong> tab in the Page type editing interface was only available for page types that had the <i class=" ">URL</i> feature enabled. After applying the hotfix, the search configuration is displayed for all page types that have either custom fields or the <i class=" ">URL</i> feature. The change allows searching for page items that hold content, but do not need their own URL.</p>
</li></ul>    </div>
    </div>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
