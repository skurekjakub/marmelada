<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Displaying shopping cart details on pages - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="Kentico_11_Documentation_Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=72975080"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico_11_Documentation_Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="E-commerce_features.html">E-commerce features</a></li>
                                                                                                         <li class="shortcut"><a href="Configuring_your_store.html">Configuring your store</a></li>
                                                                                     <li><a href="Checkout_process.html">Checkout process</a></li>
                                                            </ul>
</div>            <h1 id="src-72975080"> <span>Displaying shopping cart details on pages</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
        $page.content
<p   
>When designing the pages of your store&#39;s <a   href="Checkout_process.html">checkout process</a>, you may want to display various types of information related to the current shopping cart, such as tax summaries or discount details.</p>
    <h3 id="src-72975080_Displayingshoppingcartdetailsonpages-Taxsummaries" class="heading "><span>Tax summaries</span></h3>
<p   
>A tax summary in Kentico is a list of all <a   href="Configuring_taxes.html">tax classes</a> that apply to a shopping cart or order (including contained <a   href="Products.html">products</a> and the selected <a   href="Configuring_shipping_options.html">shipping option</a>), along with the sums of the tax values for each tax class.</p>
<p   
>By default, the system displays tax summaries only in <a   href="Configuring_invoices.html">invoices</a>. Checkout pages on the live site often display only the tax total.</p>
<p   
>However, if you wish to display detailed tax information on your checkout pages (for example in the order review step of the checkout process), you can add the tax summary using a combination of the <strong class=" ">Static text </strong>web part, <a   href="Macro_expressions.html">macros</a> and <a   href="Using_transformations_in_macro_expressions.html">transformations</a>.</p>
<ol class=" "><li class=" "><p   
>Open the <strong class=" ">Pages </strong>application.</p>
</li><li class=" "><p   
>Select the shopping cart page where you wish to display the tax summary.</p>
</li><li class=" "><p   
>Switch to the <strong class=" ">Design </strong>tab.</p>
</li><li class=" "><p   
><a   href="Using_and_configuring_web_parts.html">Place</a> the <strong class=" ">Static text</strong> web part onto the page.</p>
</li><li class=" "><p   
>In the web part&#39;s configuration, enter an appropriate macro expression into the web part&#39;s <strong class=" ">Text</strong> property.</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>The tax summary data is available in macros within the <strong class=" ">TaxSummary</strong> property of the current shopping cart object.</p>
        </div>
    </div>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">{% EcommerceContext.CurrentShoppingCart.TaxSummary.Any() ? </code></div>
<div class="line"><code class="plain">	EcommerceContext.CurrentShoppingCart.TaxSummary.ApplyTransformation(</code></div>
<div class="line"><code class="plain">		</code><code class="string">"Ecommerce.Transformations.Live_TaxTable"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">		</code><code class="string">"Ecommerce.Transformations.Order_TaxesTableHeader"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">		</code><code class="string">"Ecommerce.Transformations.Order_TaxesTableFooter"</code><code class="plain">)</code></div>
<div class="line"><code class="plain"> : </code><code class="string">"No taxes applied."</code><code class="plain"> %}</code></div>
</div>
    </div>
</li><li class=" "><p   
>Click <strong class=" ">Save &amp; Close</strong>.<br/></p>
</li></ol>    <div  class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="#src-72975080_Displayingshoppingcartdetailsonpages-Taxsummaries">Tax summaries</a></p>
</li><li class=" "><p   
><a   href="#src-72975080_Displayingshoppingcartdetailsonpages-Discountsappliedtoshoppingcartitems">Discounts applied to shopping cart items</a></p>
</li><li class=" "><p   
><a   href="#src-72975080_Displayingshoppingcartdetailsonpages-Orderdiscounts">Order discounts</a></p>
</li><li class=" "><p   
><a   href="#src-72975080_Displayingshoppingcartdetailsonpages-Giftcards">Gift cards</a></p>
</li></ul><p   
></p>
        </div>
    </div>
    <div  class="confbox panel">
            <div class="title panel-header">Configuring the checkout process</div>
            <div class="panel-content">
<ol class=" "><li class=" "><p   
><a   href="Configuring_steps_of_the_checkout_process.html">Configuring steps of the checkout process</a><br/></p>
<ul class=" "><li class=" "><p   
>(Optional) <strong class=" ">Displaying shopping cart details on pages</strong></p>
</li><li class=" "><p   
><a   href="Reference_-_Checkout_process_web_parts.html">Reference - Checkout process web parts</a></p>
</li></ul></li><li class=" "><p   
><a   href="Allowing_checkout_processes_for_anonymous_or_registered_customers.html">Allowing checkout processes for anonymous or registered customers</a></p>
</li><li class=" "><p   
>(Optional) <a   href="Enabling_automatic_registration_for_anonymous_customers.html">Enabling automatic registration for anonymous customers</a></p>
</li><li class=" "><p   
>(Optional) <a   href="Displaying_the_shopping_cart_preview_on_pages.html">Displaying the shopping cart preview on pages</a></p>
</li><li class=" "><p   
>(Optional) <a   href="Removing_old_shopping_carts_from_the_database.html">Removing old shopping carts from the database</a></p>
</li></ol>        </div>
    </div>
<p   
>Define the appearance of the tax summary through the <a   href="Using_transformations_in_macro_expressions.html">transformations</a> assigned into the parameters of the <i class=" ">ApplyTransformation</i> method in the macro expression. The sample macro above uses the default tax summary table transformations, with the main item transformation modified for use on live site pages.</p>
<ol class=" "><li class=" "><p   
>Open the <strong class=" ">Page types</strong> application.</p>
</li><li class=" "><p   
>Edit the page type where you wish to store the tax summary transformations. The example uses the     <span style="color: #262524;">
default <strong class=" ">E-commerce - Transformations</strong>    </span>
 page type.</p>
</li><li class=" "><p   
>Select the <strong class=" ">Transformations</strong> tab and click <strong class=" ">New transformation</strong>.</p>
</li><li class=" "><p   
>Set the transformation properties and code:</p>
<ul class=" "><li class=" "><p   
><strong class=" ">Transformation name</strong>: Live_TaxTable <i class=" ">(example)</i><br/></p>
</li><li class=" "><p   
><strong class=" ">Transformation type</strong>: Text / XML</p>
</li><li class=" "><p   
><strong class=" ">Code</strong>:<br/></p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">tr</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">  &lt;</code><code class="keyword">td</code><code class="plain">&gt;{% HTMLEncode(Localize(Name)) %}&lt;/</code><code class="keyword">td</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">  &lt;</code><code class="keyword">td</code><code class="plain">&gt;{% FormatPrice(Value) %}&lt;/</code><code class="keyword">td</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">&lt;/</code><code class="keyword">tr</code><code class="plain">&gt;</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>You can add the transformations under any page type and use any transformation name. You only need to adjust the parameters of the <strong class=" ">ApplyTransformation</strong> method in the tax summary macro correspondingly.</p>
<p   
>When writing transformations for tax summary data items, the tax class data is available in the <strong class=" ">Name</strong> and <strong class=" ">Value</strong> fields.</p>
        </div>
    </div>
<p   
><br/></p>
</li></ul></li><li class=" "><p   
>Click <strong class=" ">Save</strong>.</p>
</li><li class=" "><p   
>(Optional) Create custom header and footer transformations if you use them in the <i class=" ">ApplyTransformation</i> macro method. The example uses the default tax summary table transformations.</p>
</li></ol><p   
>The page where you added the <i class=" ">Static text</i> web part now displays a tax summary for the current shopping cart. The appearance of the tax summary is determined by the applied transformations.</p>
<p   
><img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/72975080/live_tax_summary.png" alt="images/download/attachments/72975080/live_tax_summary.png" width="388" height="367" />
        <br/><span class="caption">Tax summary displayed on a checkout page</span>
    </p>
    <h3 id="src-72975080_Displayingshoppingcartdetailsonpages-Discountsappliedtoshoppingcartitems" class="heading "><span>Discounts applied to shopping cart items</span></h3>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Note</strong>: The information in this section does not apply to <a   href="Working_with_catalog_discounts.html">catalog</a> and <a   href="Working_with_volume_discounts.html">volume discounts</a>. These discounts are included directly in the basic unit price of each product.</p>
        </div>
    </div>
<p   
>When a customer&#39;s shopping cart fulfills the conditions of a <a   href="Working_with_Buy_X_Get_Y_discounts.html">Buy X Get Y discount</a> or the customer enters a <a   href="Working_with_product_coupons.html">product coupon</a>, the system applies discounts to individual items in the shopping cart. Each shopping cart item represents one or more units of a specific <a   href="Products.html">product</a>.</p>
<p   
>To display information about the applied discounts on your store&#39;s checkout pages, include the appropriate code in the <a   href="Writing_transformations.html">transformation</a> that you use to format the content of the shopping cart. A typical way of displaying the shopping cart items is using the <strong class=" ">Shopping cart content</strong> web part together with<strong class=" "> ASCX</strong> transformations.</p>
<p   
>When editing your shopping cart item ASCX transformations, call the <strong class=" ">GetMultiBuyDiscountNames</strong> method to generate the names and values of Buy X Get Y discounts and product coupons applied to the given item, enclosed within <strong class=" ">&lt;li&gt;</strong> HTML tags.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;%# IfEmpty(GetMultiBuyDiscountNames(), </code><code class="string">""</code><code class="plain">, </code><code class="string">"&lt;span&gt;Special discounts:&lt;/span&gt;&lt;ul&gt;"</code><code class="plain"> + GetMultiBuyDiscountNames() + </code><code class="string">"&lt;/ul&gt;"</code><code class="plain">) %&gt;</code></div>
</div>
    </div>
<p   
>If you want full control over the HTML output of the discount content, you can instead add inline code and process the <strong class=" ">DiscountSummary</strong> property of the transformed shopping cart item.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;% </code><code class="keyword">var</code><code class="plain"> summary = ((ShoppingCartItemInfo)DataItem).DiscountSummary;</code></div>
<div class="line"><code class="keyword">if</code><code class="plain"> ((summary != </code><code class="keyword">null</code><code class="plain">) &amp;&amp; summary.Count &gt; 0) { %&gt;</code></div>
<div class="line"><code class="plain">  &lt;span&gt;Special discounts:&lt;/span&gt;</code></div>
<div class="line"><code class="plain">  &lt;ul&gt;</code></div>
<div class="line"><code class="plain">  &lt;% </code><code class="keyword">foreach</code><code class="plain">(</code><code class="keyword">var</code><code class="plain"> discountItem </code><code class="keyword">in</code><code class="plain"> summary) { %&gt;</code></div>
<div class="line"><code class="plain">    &lt;li&gt;&lt;%= HTMLEncode(Localize(discountItem.Name)) %&gt; &lt;strong&gt;(&lt;%= FormatPrice(discountItem.Value) %&gt;)&lt;/strong&gt;&lt;/li&gt;</code></div>
<div class="line"><code class="plain">  &lt;% } %&gt;</code></div>
<div class="line"><code class="plain">  &lt;/ul&gt;</code></div>
<div class="line"><code class="plain">&lt;% } %&gt;</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>The summary items stored in <strong class=" ">DiscountSummary</strong> provide the following properties:</p>
<ul class=" "><li class=" "><p   
><strong class=" ">Name</strong> &ndash; the display name of the discount as specified in the <strong class=" ">Buy X Get Y discounts</strong> or <strong class=" ">Product coupons</strong> application.</p>
</li><li class=" "><p   
><strong class=" ">Value</strong> &ndash; the total amount saved after applying the discount to the given shopping cart item (for all units). To format the value into the <a   href="Configuring_currencies.html">format string of the currently selected currency</a>, use the <i class=" ">FormatPrice</i> method.</p>
</li></ul>        </div>
    </div>
<p   
><img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/72975080/displaying_item_discounts_pages.png" alt="images/download/attachments/72975080/displaying_item_discounts_pages.png" width="500"  />
        <br/><span class="caption">Shopping cart item discounts displayed on a checkout page</span>
    </p>
    <h4 id="src-72975080_Displayingshoppingcartdetailsonpages-Displayingdiscountsummariesseparatelyfromthemaincartcontent" class="heading "><span>Displaying discount summaries separately from the main cart content</span></h4>
<p   
>Alternatively, you can display a summary of Buy X Get Y discounts and product coupons separately from the main shopping cart content. For example, the following steps show how to use the <strong class=" ">Static text</strong> web part and <a   href="Macro_expressions.html">macros</a> to generate a basic list of all applied Buy X Get Y discounts and product coupons.</p>
<ol class=" "><li class=" "><p   
>Open the <strong class=" ">Pages </strong>application.</p>
</li><li class=" "><p   
>Select the shopping cart page where you wish to display the discount summary.</p>
</li><li class=" "><p   
>Switch to the <strong class=" ">Design </strong>tab.</p>
</li><li class=" "><p   
><a   href="Using_and_configuring_web_parts.html">Place</a> the <strong class=" ">Static text</strong> web part onto the page.</p>
</li><li class=" "><p   
>In the web part&#39;s configuration, enter an appropriate macro expression into the web part&#39;s <strong class=" ">Text</strong> property.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">{%</code></div>
<div class="line"><code class="plain">  result = </code><code class="string">""</code><code class="plain">;</code></div>
<div class="line"><code class="plain">  cartItems = ECommerceContext.CurrentShoppingCart.ShoppingCartItems;</code></div>
<div class="line"><code class="plain">  </code><code class="keyword">if</code><code class="plain"> (cartItems.Any()) {</code></div>
<div class="line"><code class="plain">    result += </code><code class="string">"&lt;ul&gt;"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    foreach (item in cartItems) {</code></div>
<div class="line"><code class="plain">      result += </code><code class="string">"&lt;li&gt;"</code><code class="plain"> + HTMLEncode(Localize(item.SKU.SKUName));</code></div>
<div class="line"><code class="plain">      itemDiscountSummary = item.DiscountSummary;</code></div>
<div class="line"><code class="plain">      </code><code class="keyword">if</code><code class="plain"> (itemDiscountSummary.Any()) {      </code></div>
<div class="line"><code class="plain">        result += </code><code class="string">"&lt;ul&gt;"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">        foreach (summaryItem in itemDiscountSummary) {</code></div>
<div class="line"><code class="plain">          result += </code><code class="string">"&lt;li&gt;"</code><code class="plain"> + HTMLEncode(Localize(summaryItem.Name)) + </code><code class="string">" ("</code><code class="plain"> + FormatPrice(summaryItem.Value) + </code><code class="string">")&lt;/li&gt;"</code><code class="plain">;          </code></div>
<div class="line"><code class="plain">        };</code></div>
<div class="line"><code class="plain">        result += </code><code class="string">"&lt;/ul&gt;"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">      }</code></div>
<div class="line"><code class="plain">      result += </code><code class="string">"&lt;/li&gt;"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    };</code></div>
<div class="line"><code class="plain">    result += </code><code class="string">"&lt;/ul&gt;"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">  }</code></div>
<div class="line"><code class="plain">  </code><code class="keyword">return</code><code class="plain"> result;</code></div>
<div class="line"><code class="plain">%}</code></div>
</div>
    </div>
</li><li class=" "><p   
>Click <strong class=" ">Save &amp; Close</strong>.</p>
</li></ol><p   
>The first level of the list displays the names of all items in the current shopping cart. Items that have their price reduced by Buy X Get Y discounts or product coupons have a second list level with the names and values of the given discounts.</p>
    <h3 id="src-72975080_Displayingshoppingcartdetailsonpages-Orderdiscounts" class="heading "><span>Order discounts</span></h3>
<p   
>Any <a   href="Working_with_order_discounts.html">order discounts</a> that apply to the displayed shopping cart reduce its price total.</p>
<p   
>To display the total value of applied order discounts, add the <a   href="Configuring_the_Shopping_cart_totals_web_part.html">Shopping cart totals web part</a> onto the page, with the <strong class=" ">Total to display</strong> property set to <i class=" ">Order discounts total</i>.</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Alternatively, you can display the order discount total value by using the following <a   href="Macro_expressions.html">macro expression</a>:</p>
<p   
><i class=" ">{% FormatPrice(ECommerceContext.CurrentShoppingCart.OrderDiscount) %}</i></p>
        </div>
    </div>
<p   
>If you wish to display a detailed order discount summary on your checkout pages, you can use a combination of the <strong class=" ">Static text </strong>web part and macros:</p>
<ol class=" "><li class=" "><p   
>Open the <strong class=" ">Pages </strong>application.</p>
</li><li class=" "><p   
>Select the shopping cart page where you wish to display the order discount summary.</p>
</li><li class=" "><p   
>Switch to the <strong class=" ">Design </strong>tab.</p>
</li><li class=" "><p   
><a   href="Using_and_configuring_web_parts.html">Place</a> the <strong class=" ">Static text</strong> web part onto the page.</p>
</li><li class=" "><p   
>In the web part&#39;s configuration, enter an appropriate macro expression into the web part&#39;s <strong class=" ">Text</strong> property.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">{%</code></div>
<div class="line"><code class="plain">result = </code><code class="string">""</code><code class="plain">;</code></div>
<div class="line"><code class="plain">orderDiscountSummary = ECommerceContext.CurrentShoppingCart.OrderDiscountSummary;</code></div>
<div class="line"><code class="keyword">if</code><code class="plain"> (orderDiscountSummary.Any()) {</code></div>
<div class="line"><code class="plain">    result += </code><code class="string">"&lt;ul&gt;"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    foreach (item in orderDiscountSummary) {</code></div>
<div class="line"><code class="plain">      result += </code><code class="string">"&lt;li&gt;"</code><code class="plain"> + HTMLEncode(Localize(item.Name)) + </code><code class="string">" (- "</code><code class="plain"> + FormatPrice(item.Value) + </code><code class="string">")&lt;/li&gt;"</code></div>
<div class="line"><code class="plain">    };</code></div>
<div class="line"><code class="plain">    result += </code><code class="string">"&lt;/ul&gt;"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">  }</code></div>
<div class="line"><code class="plain">  </code><code class="keyword">return</code><code class="plain"> result;</code></div>
<div class="line"><code class="plain">%}</code></div>
</div>
    </div>
</li><li class=" "><p   
>Click <strong class=" ">Save &amp; Close</strong>.</p>
</li></ol><p   
>The <i class=" ">{% ECommerceContext.CurrentShoppingCart.OrderDiscountSummary %}</i> macro provides a collection of summary items representing order discounts applied to the current shopping cart. You can access the display name and value of each order discount in the <strong class=" ">Name</strong> and <strong class=" ">Value</strong> fields of the summary items, and format the data according to your site&#39;s requirements.</p>
    <h3 id="src-72975080_Displayingshoppingcartdetailsonpages-Giftcards" class="heading "><span>Gift cards</span></h3>
<p   
>When a customer redeems a <a   href="Working_with_gift_cards.html">gift card</a> during checkout, the system subtracts the gift card&#39;s value from the final price of the shopping cart.</p>
<p   
>To display the value of applied gift cards, add the <a   href="Configuring_the_Shopping_cart_totals_web_part.html">Shopping cart totals web part</a> onto the page, with the <strong class=" ">Total to display</strong> property set to <i class=" ">Other payments total</i>.</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Alternatively, you can display the gift card total value by using the following <a   href="Macro_expressions.html">macro expression</a>:</p>
<p   
><i class=" ">{% FormatPrice(ECommerceContext.CurrentShoppingCart.OtherPayments) %}</i></p>
        </div>
    </div>
<p   
>If you wish to display a detailed gift card summary on your checkout pages, you can use a combination of the <strong class=" ">Static text </strong>web part and macros:</p>
<ol class=" "><li class=" "><p   
>Open the <strong class=" ">Pages </strong>application.</p>
</li><li class=" "><p   
>Select the shopping cart page where you wish to display the gift card summary.</p>
</li><li class=" "><p   
>Switch to the <strong class=" ">Design </strong>tab.</p>
</li><li class=" "><p   
><a   href="Using_and_configuring_web_parts.html">Place</a> the <strong class=" ">Static text</strong> web part onto the page.</p>
</li><li class=" "><p   
>In the web part&#39;s configuration, enter an appropriate macro expression into the web part&#39;s <strong class=" ">Text</strong> property.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">{%</code></div>
<div class="line"><code class="plain">result = </code><code class="string">""</code><code class="plain">;</code></div>
<div class="line"><code class="plain">giftCardSummary = ECommerceContext.CurrentShoppingCart.OtherPaymentsSummary;</code></div>
<div class="line"><code class="keyword">if</code><code class="plain"> (giftCardSummary.Any()) {</code></div>
<div class="line"><code class="plain">    result += </code><code class="string">"&lt;ul&gt;"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">    foreach (item in giftCardSummary) {</code></div>
<div class="line"><code class="plain">      result += </code><code class="string">"&lt;li&gt;"</code><code class="plain"> + HTMLEncode(Localize(item.Name)) + </code><code class="string">" (- "</code><code class="plain"> + FormatPrice(item.Value) + </code><code class="string">")&lt;/li&gt;"</code></div>
<div class="line"><code class="plain">    };</code></div>
<div class="line"><code class="plain">    result += </code><code class="string">"&lt;/ul&gt;"</code><code class="plain">;</code></div>
<div class="line"><code class="plain">  }</code></div>
<div class="line"><code class="plain">  </code><code class="keyword">return</code><code class="plain"> result;</code></div>
<div class="line"><code class="plain">%}</code></div>
</div>
    </div>
</li><li class=" "><p   
>Click <strong class=" ">Save &amp; Close</strong>.</p>
</li></ol><p   
>The <i class=" ">{% ECommerceContext.CurrentShoppingCart.OtherPaymentsSummary %}</i> macro provides a collection of summary items representing gift cards applied to the current shopping cart. You can access the display name and value of each gift card in the <strong class=" ">Name</strong> and <strong class=" ">Value</strong> fields of the summary items, and format the data according to your site&#39;s requirements.</p>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
