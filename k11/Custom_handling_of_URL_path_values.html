<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Custom handling of URL path values - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="Kentico_11_Documentation_Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68881931"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico_11_Documentation_Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Configuring_Kentico.html">Configuring Kentico</a></li>
                                                                                     <li><a href="Configuring_page_URLs.html">Configuring page URLs</a></li>
                                                            </ul>
</div>            <h1 id="src-68881931"> <span>Custom handling of URL path values</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
        $page.content
<p   
>To ensure that URLs can be processed correctly, the system checks text values for unsafe characters before they are added to the URL path, and makes any necessary changes. This affects fields such as page aliases, page URL paths, forum names, post subjects etc.</p>
<p   
>By default, the process includes removal of diacritics and replacement of all forbidden characters according to the settings defined for the given site (as described in <a   href="URL_format_and_configuration.html">URL format and configuration</a>). Characters with diacritics are replaced by the appropriate base character, for example <i class=" ">&uuml;</i> is converted to <i class=" ">u</i>.</p>
<p   
>If you need to change the default behavior in any way, you can register and implement a handler for one or both of the following system events:</p>
<ul class=" "><li class=" "><p   
><strong class=" ">OnBeforeGetSafeUrlPart</strong> - occurs whenever a potentially unsafe text value is added to a part of a URL, e.g. when the page alias field is saved (or filled automatically based on the page&#39;s name). This event can be used to customize the final format of URL paths. For example, you can convert characters from an international character set to an equivalent in Latin characters (ASCII) or specify a unique replacement string for particular forbidden characters.<br/><br/></p>
</li><li class=" "><p   
><strong class=" ">OnBeforeRemoveDiacritics</strong> - occurs whenever the system removes diacritics from text. This is one of the default steps performed when creating safe URLs, but the event is also triggered during many text parsing operations that are not directly related to URLs (for example when indexing text for the <a   href="Setting_up_search_on_your_website.html">Smart search</a>).</p>
</li></ul><p   
>The events are members of the <strong class=" ">URLHelper</strong> and <strong class=" ">TextHelper</strong> classes respectively, which can be found under the <strong class=" ">CMS.Helpers</strong> namespace.</p>
<ul class=" "><li class=" "><p   
>The handlers for these events have the source text included as a string parameter passed by reference, so any changes that you make in the code are reflected in the result.</p>
</li><li class=" "><p   
>Both handlers have a <i class=" ">boolean</i> return value that indicates whether the default functionality should also be performed after the handler is executed. For this reason, it is highly recommended to set the return value to <i class=" ">true</i> for all but the most extensive customizations.</p>
</li></ul>    <div  class="confbox admonition admonition-warning">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Warning</strong></p>
<p   
>Only return a <i class=" ">false</i> value if you are sure that your custom handler can take full responsibility for all URL safety or diacritics removal requirements.</p>
<p   
>Disabling the default system functionality may prevent parts of your website from working correctly, particularly in the case of handlers for the <strong class=" ">OnBeforeGetSafeUrlPart</strong> event.</p>
        </div>
    </div>
    <div  class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p   
><a   href="URL_format_and_configuration.html">URL format and configuration</a></p>
</li><li class=" "><p   
><a   href="Setting_page_aliases.html">Setting page aliases</a></p>
</li><li class=" "><p   
><a   href="Handling_global_events.html">Handling global events</a></p>
</li></ul>        </div>
    </div>
    <h3 id="src-68881931_CustomhandlingofURLpathvalues-Example" class="heading "><span>Example</span></h3>
<p   
>The following example demonstrates how to define handlers for the forbidden character events:</p>
<ol class=" "><li class=" "><p   
>Open your Kentico web project in Visual Studio.</p>
</li><li class=" "><p   
>Create a <a   href="Initializing_modules_to_run_custom_code.html">custom module class</a>.</p>
<ul class=" "><li class=" "><p   
>Either add the class into a custom project within the Kentico solution (recommended) or directly into the Kentico web project (into a custom folder under the <strong class=" ">CMSApp</strong> project for <i class=" ">web application</i> installations, into the <strong class=" ">App_Code</strong> folder for <i class=" ">web site</i> installations).<br/><br/></p>
</li></ul></li><li class=" "><p   
>Override the module&#39;s <strong class=" ">OnInit</strong> method and assign handlers to the required events:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> System;</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.DataEngine;</code></div>
<div class="line"><code class="keyword">using</code><code class="plain"> CMS.Helpers;</code></div>
<div class="line"> </div>
<div class="line"><code class="comments">// Registers the custom module into the system</code></div>
<div class="line"><code class="plain">[assembly: RegisterModule(</code><code class="keyword">typeof</code><code class="plain">(CustomURLPathModule))]</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">class</code><code class="plain"> CustomURLPathModule : Module</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	</code><code class="comments">// Module class constructor, the system registers the module under the name "CustomURLPathHandling"</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">public</code><code class="plain"> CustomURLPathModule()</code></div>
<div class="line"><code class="plain">		: </code><code class="keyword">base</code><code class="plain">(</code><code class="string">"CustomURLPathHandling"</code><code class="plain">)</code></div>
<div class="line"><code class="plain">	{</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">	</code><code class="comments">// Contains initialization code that is executed when the application starts</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">protected</code><code class="plain"> </code><code class="keyword">override</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> OnInit()</code></div>
<div class="line"><code class="plain">	{</code></div>
<div class="line"><code class="plain">		</code><code class="keyword">base</code><code class="plain">.OnInit();</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">		</code><code class="comments">// Assigns a handler to the OnBeforeGetSafeURLPart event</code></div>
<div class="line"><code class="plain">		URLHelper.OnBeforeGetSafeUrlPart += Custom_OnBeforeGetSafeUrlPart;</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">		</code><code class="comments">// Assigns a handler to the OnBeforeRemoveDiacritics event</code></div>
<div class="line"><code class="plain">		TextHelper.OnBeforeRemoveDiacritics += Custom_OnBeforeRemoveDiacritics;</code></div>
<div class="line"><code class="plain">	}</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
</li><li class=" "><p   
>Add the definition of the <strong class=" ">Custom_OnBeforeGetSafeUrlPart</strong> handler into the module class:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">static</code><code class="plain"> </code><code class="keyword">bool</code><code class="plain"> Custom_OnBeforeGetSafeUrlPart(</code><code class="keyword">ref</code><code class="plain"> </code><code class="keyword">string</code><code class="plain"> url, </code><code class="keyword">string</code><code class="plain"> siteName, EventArgs e)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	</code><code class="comments">// Replaces all &amp; characters with the word "and"</code></div>
<div class="line"><code class="plain">	url = url.Replace(</code><code class="string">"&amp;"</code><code class="plain">, </code><code class="string">"and"</code><code class="plain">);</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">	</code><code class="comments">// Returns true to indicate that the default URL replacements should also be performed - removing forbidden characters and diacritics (both default and custom)</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">true</code><code class="plain">;</code></div>
<div class="line"><code class="plain"> }</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>This code replaces all ampersand (&amp;) characters with the word <i class=" ">and</i>. For example, a page named <i class=" ">Products &amp; Services</i> has its default page alias generated as <i class=" ">Products-and-Services</i>, which is then used in the page&#39;s URL. This example is only meant as a simple demonstration. In real&#8209;world scenarios, the handler can be much more complex, for example when mapping the character set of an international language to appropriate ASCII characters or words.</p>
<p   
>The <strong class=" ">siteName</strong> parameter of the handler contains the code name of the site under which the event occurred. This can be useful if you need to access the forbidden character settings of the given site in your custom code.</p>
        </div>
    </div>
</li><li class=" "><p   
>Add the <strong class=" ">Custom_OnBeforeRemoveDiacritics</strong> handler:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">static</code><code class="plain"> </code><code class="keyword">bool</code><code class="plain"> Custom_OnBeforeRemoveDiacritics(</code><code class="keyword">ref</code><code class="plain"> </code><code class="keyword">string</code><code class="plain"> text, EventArgs e)</code></div>
<div class="line"><code class="plain">{           </code></div>
<div class="line"><code class="plain">	</code><code class="comments">// Replaces German special characters</code></div>
<div class="line"><code class="plain">	text = text.Replace( </code><code class="string">"ä"</code><code class="plain">, </code><code class="string">"ae"</code><code class="plain"> );</code></div>
<div class="line"><code class="plain">	text = text.Replace( </code><code class="string">"ö"</code><code class="plain">, </code><code class="string">"oe"</code><code class="plain"> );</code></div>
<div class="line"><code class="plain">	text = text.Replace( </code><code class="string">"ü"</code><code class="plain">, </code><code class="string">"ue"</code><code class="plain"> );</code></div>
<div class="line"><code class="plain">	text = text.Replace( </code><code class="string">"Ä"</code><code class="plain">, </code><code class="string">"Ae"</code><code class="plain"> );</code></div>
<div class="line"><code class="plain">	text = text.Replace( </code><code class="string">"Ö"</code><code class="plain">, </code><code class="string">"Oe"</code><code class="plain"> );</code></div>
<div class="line"><code class="plain">	text = text.Replace( </code><code class="string">"Ü"</code><code class="plain">, </code><code class="string">"Ue"</code><code class="plain"> );</code></div>
<div class="line"><code class="plain">	text = text.Replace( </code><code class="string">"ß"</code><code class="plain">, </code><code class="string">"ss"</code><code class="plain"> );</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">	</code><code class="comments">// Returns true to indicate that the default diacritics removal should also be performed</code></div>
<div class="line"><code class="plain">	</code><code class="keyword">return</code><code class="plain"> </code><code class="keyword">true</code><code class="plain">;                </code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>This ensures that the system uses custom replacements for German special characters rather than simply stripping the diacritics and leaving the base character.</p>
        </div>
    </div>
</li><li class=" "><p   
><strong class=" ">Save</strong> the file (Build your project if it was installed as a web application).</p>
</li></ol><p   
>The system applies the changes when creating new URLs and when removing diacritics from text.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Note</strong>: The customization does not automatically change the aliases and URL paths of existing pages until the current value is changed or saved.</p>
        </div>
    </div>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
