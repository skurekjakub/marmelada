<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Creating custom error handling pages - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68881111"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Securing-websites.html">Securing websites</a></li>
                                                                                                         <li class="shortcut"><a href="Developing-secure-websites.html">Developing secure websites</a></li>
                                                                                     <li><a href="Handling-error-messages-securely.html">Handling error messages securely</a></li>
                                                            </ul>
</div>            <h1 id="src-68881111"> <span>Creating custom error handling pages</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<p   
>You can configure the system to display custom pages instead of standard error messages. Custom pages help reduce the inconvenience caused to visitors if they run into an error while browsing your website, and also improves the security of the site by hiding potentially sensitive internal data (such as code in stack traces). You can create custom pages for this purpose with any kind of content, such as an apology or additional instructions, and then configure the system to display the pages in the appropriate situations.</p>
    <h3 id="src-68881111_Creatingcustomerrorhandlingpages-AddingcustomPagenotfounderrorpages" class="heading "><span>Adding custom Page not found error pages</span></h3>
<p   
>The <i class=" ">Page not found</i> error (404 HTTP status code) is one of the most common problems encountered by visitors. Kentico provides several features that allow you to conveniently set up a custom page as a response. For <i class=" ">page not found</i> errors, the error page can either be a physical <i class=" ">.aspx</i> file placed under the web project or a dedicated page created in a specific website&#39;s content tree.</p>
<p   
>To assign your custom page to a particular website (or globally):</p>
<ol class=" "><li class=" "><p   
>Go to <strong class=" ">Settings -&gt; Content</strong>.</p>
</li><li class=" "><p   
>Enter the URL of the given page as the value of the <strong class=" ">Page not found URL</strong> setting, for example:<i class=" "> ~/SpecialPages/PageNotFound.aspx</i></p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Since there are two possible types of error pages, the system interprets the URL in two different ways. The sample URL value above specifies either:</p>
<ul class=" "><li class=" "><p   
>The URL of a physical page named <i class=" ">PageNotFound.aspx</i> located in the web project under a folder called <i class=" ">SpecialPages</i>.</p>
</li><li class=" "><p   
>If such a file does not exist, the system attempts to select a Kentico page under the current website, with an alias path equal to <i class=" ">/SpecialPages/PageNotFound</i>.</p>
</li></ul>        </div>
    </div>
</li><li class=" "><p   
>Click <strong class=" ">Save</strong>.</p>
</li></ol><p   
>It is recommended to use Kentico pages for page not found error pages. With this approach, you can define the error page&#39;s content using the portal engine and leverage all of its features. For instance, you can translate the page not found page on a   <a   href="Multilingual-websites">multilingual website</a> and Kentico automatically displays the culture version that matches the language selected by the user.</p>
<p   
>You do not need to manually handle the HTTP response code of the page specified by the setting. The page automatically returns a 404 status code when accessed (applies to both pages and physical pages). This allows applications, services and web crawlers to find out that a <i class=" ">page not found</i> error has occurred.</p>
    <div  class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
>  <a   href="#src-68881111_Creatingcustomerrorhandlingpages-AddingcustomPagenotfounderrorpages">Adding custom Page not found error pages</a></p>
</li><li class=" "><p   
>  <a   href="#src-68881111_Creatingcustomerrorhandlingpages-Handlinggeneralerrors">Handling general errors</a></p>
</li></ul><p   
></p>
        </div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Handling 404 errors for general content</strong></p>
<p   
>Perform the following steps to ensure that the system returns your custom <i class=" ">Page not found</i> error page for invalid requests that target all types of site content, not just the pages processed by the Kentico engine:</p>
<ol class=" "><li class=" "><p   
>Edit your application&#39;s <strong class=" ">web.config</strong> file.</p>
</li><li class=" "><p   
>Find the <strong class=" ">system.webServer</strong> section directly under the root (i.e. not under a specific <i class=" ">&lt;location&gt;</i> element).</p>
</li><li class=" "><p   
>Set the <strong class=" ">runAllManagedModulesForAllRequests</strong> attribute to <i class=" ">true</i> for the opening tag of the <strong class=" ">&lt;modules&gt;</strong> element:</p>
</li></ol>    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;system.webServer&gt;</code></div>
<div class="line"><code class="plain">  &lt;modules runAllManagedModulesForAllRequests=</code><code class="string">"true"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">    ...</code></div>
<div class="line"><code class="plain">  &lt;/modules&gt;</code></div>
</div>
    </div>
        </div>
    </div>
    <h3 id="src-68881111_Creatingcustomerrorhandlingpages-Handlinggeneralerrors" class="heading "><span>Handling general errors</span></h3>
<p   
>Kentico is a standard ASP.NET application, so you can configure the handling of all types of errors and exceptions via the <strong class=" ">&lt;customErrors&gt;</strong> element under the <i class=" ">&lt;system.web&gt;</i> section of your web.config file. See the <a  class="external-link" href="https://msdn.microsoft.com/en-us/library/h0hfz6fc%28v=vs.85%29.aspx">customErrors</a> MSDN article for more information.</p>
<p   
>By default, the Kentico web.config sets a general error page for errors with the 500 HTTP status code. The error page is displayed only for remote clients, requests from local development machines return errors with full details.</p>
<p   
>You can add any number of child <strong class=" ">&lt;error&gt;</strong> elements representing individual types of HTTP errors that you wish to handle.</p>
<ul class=" "><li class=" "><p   
>You need to enter the HTTP response code of the given error into the <strong class=" ">statusCode</strong> attribute and the URL of the appropriate error page as the <strong class=" ">redirect</strong> value.</p>
</li><li class=" "><p   
>It is recommended to add general error pages directly into your web project as <i class=" ">.aspx</i> files, for example under the <strong class=" ">CMSMessages</strong> folder.</p>
</li><li class=" "><p   
>You can define the content of the error page to match your specific requirements.</p>
</li><li class=" "><p   
>Keep in mind that your custom error pages should always return the appropriate <i class=" ">HTTPResponse</i> status code.</p>
</li></ul>    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                    <div class="title">Example</div>
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-title="Example" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">system</code><code class="plain">.web&gt;</code></div>
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="plain">	&lt;</code><code class="keyword">customErrors</code><code class="plain"> </code><code class="color1">mode</code><code class="plain">=</code><code class="string">"RemoteOnly"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">		&lt;</code><code class="keyword">error</code><code class="plain"> </code><code class="color1">statusCode</code><code class="plain">=</code><code class="string">"500"</code><code class="plain"> </code><code class="color1">redirect</code><code class="plain">=</code><code class="string">"~/CMSMessages/CustomError.aspx"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">		&lt;</code><code class="keyword">error</code><code class="plain"> </code><code class="color1">statusCode</code><code class="plain">=</code><code class="string">"503"</code><code class="plain"> </code><code class="color1">redirect</code><code class="plain">=</code><code class="string">"~/CMSMessages/CustomError.aspx"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">	&lt;/</code><code class="keyword">customErrors</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="plain">&lt;/</code><code class="keyword">system</code><code class="plain">.web&gt;</code></div>
</div>
    </div>
<p   
>When using <i class=" ">&lt;customErrors&gt;,</i> it is also recommended to disable handling of errors on the level of IIS by adding a <strong class=" ">httpErrors</strong> element under the application&#39;s main <i class=" ">&lt;system.webServer&gt;</i> element, with the <strong class=" ">existingResponse</strong> attribute set to <i class=" ">PassThrough</i>:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;system.webServer&gt;</code></div>
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="plain">	&lt;httpErrors existingResponse=</code><code class="string">"PassThrough"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="plain">&lt;/system.webServer&gt;</code></div>
</div>
    </div>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Using &lt;httpErrors&gt; for error handling<br/></strong></p>
<p   
>Alternatively, handling of errors can also be configured on the IIS level via the <strong class=" ">&lt;httpErrors&gt;</strong> element under your web.config&#39;s main <strong class=" ">&lt;system.webServer&gt;</strong> element. See the <a  class="external-link" href="https://www.iis.net/configreference/system.webserver/httperrors">HTTP Errors</a> article for more information.</p>
<p   
>Choose and test which approach works best, depending on the environment in which your application is running.</p>
        </div>
    </div>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Before deployment</strong></p>
<p   
>Set custom error messages as described in this procedure <i class=" ">before</i> deploying your website and going live. Also, remember to   <a   href="Web.config-file-settings#src-68881136_Web.configfilesettings-Errormessagesanddisablingthedebugandtrace">disable debugging and tracing for your ASP.NET application</a>.</p>
        </div>
    </div>
    <h4 id="src-68881111_Creatingcustomerrorhandlingpages-Pagenotfounderrorconflicts" class="heading "><span>Page not found error conflicts</span></h4>
<p   
>If you set the <strong class=" ">defaultRedirect</strong> attribute of the <strong class=" ">customErrors</strong> element in your web.config file, the default redirect may override the page assigned for 404 page not found errors in the   <a   href="#src-68881111_Creatingcustomerrorhandlingpages-AddingcustomPagenotfounderrorpages">Kentico settings</a>. This applies to URLs ending with the <i class=" ">.ashx, .asmx</i> or <i class=" ">.svc</i> extensions.</p>
<p   
>To work around this behavior, you can set the <strong class=" ">redirectMode</strong> attribute to <i class=" ">ResponseRewrite:</i></p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;customErrors defaultRedirect=</code><code class="string">"~/CMSMessages/CustomError.aspx"</code><code class="plain"> mode=</code><code class="string">"RemoteOnly"</code><code class="plain"> redirectMode=</code><code class="string">"ResponseRewrite"</code><code class="plain">&gt;</code></div>
</div>
    </div>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
