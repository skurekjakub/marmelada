<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Starting with MVC development - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="Kentico-11-Documentation-Home.htm" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68880561"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.htm">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Developing-websites.htm">Developing websites</a></li>
                                                                                     <li><a href="Developing-sites-using-ASP.NET-MVC.htm">Developing sites using ASP.NET MVC</a></li>
                                                            </ul>
</div>            <h1 id="src-68880561"> <span>Starting with MVC development</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<p   
>This page provides instructions on how to set up an MVC application together with a Kentico instance so that you have a starting point for further MVC development.</p>
<p   
>Kentico provides ASP.NET MVC support based on a separate MVC application. The application takes care of the presentation and is separated from the Kentico administration. Both applications access the same database as the Kentico application and content synchronization can be handled by web farms.</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Licensing for MVC applications<br/></strong></p>
<p   
>You only need to purchase a license for the MVC application. The additional license for the Kentico administration and one extra web farm server is provided for free. To obtain the additional license, <a  class="external-link" href="http://www.kentico.com/company/contact/our-offices">contact our sales department</a>.</p>
        </div>
    </div>
    <h3 id="src-68880561_StartingwithMVCdevelopment-SettinguptheKenticoinstance" class="heading "><span>Setting up the Kentico instance</span></h3>
<p   
>In order to develop an MVC application with Kentico, you need to use a content only site that will serve as a repository for content:</p>
<ol class=" "><li class=" "><p   
>Go to the <strong class=" ">Sites</strong> application.</p>
</li><li class=" "><p   
>Click on the <strong class=" ">New site wizard </strong>button.</p>
</li><li class=" "><p   
>Select <strong class=" ">Use web template</strong>.</p>
</li><li class=" "><p   
>Click <strong class=" ">Next</strong>.</p>
</li><li class=" "><p   
>Select the <strong class=" ">MVC Blank Site</strong> template from the list.<br/></p>
<img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/68880561/MVC_Blank_Site_Template.png" alt="images/download/attachments/68880561/MVC_Blank_Site_Template.png" width="500" height="287" />
        <br/><span class="caption">MVC Blank Site template selection</span>
    </li><li class=" "><p   
>Continue with the remaining steps of the wizard and finish creating the new site.</p>
</li></ol>    <div  class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="k11/#src-68880561_StartingwithMVCdevelopment-SettinguptheKenticoinstance">Setting up the Kentico instance</a></p>
</li><li class=" "><p   
><a   href="k11/#src-68880561_StartingwithMVCdevelopment-SettinguptheMVCapplication">Setting up the MVC application</a></p>
</li></ul><p   
></p>
        </div>
    </div>
    <div  class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p   
><a   href="k11/Kentico-licensing-for-MVC-applications.htm">Kentico licensing for MVC applications</a></p>
</li><li class=" "><p   
><a   href="k11/Defining-content-structure-on-MVC-sites.htm">Defining content structure on MVC sites</a></p>
</li><li class=" "><p   
><a   href="k11/Developing-MVC-applications.htm">Developing MVC applications</a></p>
</li><li class=" "><p   
><a   href="k11/Deploying-MVC-applications.htm">Deploying MVC applications</a></p>
</li></ul>        </div>
    </div>
<p   
>Now edit (<img  class="confluence-embedded-image"  src="images/download/attachments/68879208/edit.png" alt="images/download/attachments/68879208/edit.png"   />
) your new site and on the <strong class=" ">General</strong> tab set the <strong class=" ">Presentation URL</strong>. This is the URL that will be used by the MVC application. For example, <i class=" ">http://localhost/MvcApplication</i> or <i class=" ">http://www.SiteDomain.com</i>.</p>
<p   
>Next, you need to set up a content synchronization mechanism:</p>
<ol class=" "><li class=" "><p   
>Go to the <strong class=" ">Settings</strong> application.</p>
</li><li class=" "><p   
>Navigate to <strong class=" ">Versioning &amp; Synchronization</strong> -&gt; <strong class=" ">Web farm</strong>.</p>
</li><li class=" "><p   
>Set the <strong class=" ">Web farm mode</strong> to <strong class=" ">Automatic</strong>.</p>
</li><li class=" "><p   
>Click <strong class=" ">Save</strong>.</p>
</li></ol>    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Ensuring unique server names</strong></p>
<p   
>The system generates the names of automatic web farm servers by combining the machine name and the virtual directory in which the given application is running. If this combination of variables is not unique in your environment, you need to manually assign unique server names to the web farm servers. For example, this problem can occur if you run your MVC application and Kentico application on the same machine without using virtual directories, e.g. on different domains.</p>
<p   
>To learn how to set web farm server names manually, see <i class=" ">Step 5</i> in <a   href="k11/Configuring-web-farm-servers.htm#src-68881978_Configuringwebfarmservers-Configuringwebfarmsmanually">Configuring web farms manually</a>.</p>
        </div>
    </div>
<p   
>At this point the content only site and your Kentico instance are set up to be used with an MVC application.</p>
    <h3 id="src-68880561_StartingwithMVCdevelopment-SettinguptheMVCapplication" class="heading "><span>Setting up the MVC application</span></h3>
<p   
>Your new MVC application needs to be configured to work with Kentico:</p>
<ol class=" "><li class=" "><p   
>Create a new project in Visual Studio.<br/></p>
<ul class=" "><li class=" "><p   
>Select the <strong class=" ">ASP.NET Web Application (.NET Framework)</strong> project template.</p>
</li><li class=" "><p   
>Choose the <strong class=" ">Empty</strong> template option.</p>
</li><li class=" "><p   
>Enable the <i class=" ">MVC</i> checkbox to add folders and core references for MVC.<br/></p>
<img  class="confluence-embedded-image"  src="images/download/attachments/68880561/Empty_MVC_Project.png" alt="images/download/attachments/68880561/Empty_MVC_Project.png" width="500"  />
        <br/><span class="caption">Creating a new MVC application in Visual Studio</span>
    </li></ul></li><li class=" "><p   
>Right-click the solution and select <strong class=" ">Manage NuGet Packages for Solution</strong>.</p>
</li><li class=" "><p   
>Install the <strong class=" ">Kentico.Web.Mvc</strong> integration package into your MVC application project (with all dependencies).</p>
</li><li class=" "><p   
>Edit the MVC project&#39;s main <strong class=" ">web.config</strong> file:</p>
<ul class=" "><li class=" "><p   
>Add a connection string to your Kentico database. We recommend copying the exact connection string from the <i class=" ">web.config</i> file of the related Kentico application project.</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">connectionStrings</code><code class="plain">&gt; </code></div>
<div class="line"><code class="plain">    &lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">name</code><code class="plain">=</code><code class="string">"CMSConnectionString"</code><code class="plain"> </code><code class="color1">connectionString</code><code class="plain">=</code><code class="string">"Persist Security Info=False;database=Kentico;server=myserver;user id=username;password=mypassword;Current Language=English;Connection Timeout=120;"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">&lt;/</code><code class="keyword">connectionStrings</code><code class="plain">&gt;</code></div>
</div>
    </div>
</li><li class=" "><p   
>Copy the value of the <strong class=" ">CMSHashStringSalt</strong><i class=" "> appSettings</i> key from the <i class=" ">web.config</i> of the Kentico project and add the value into the same key in the MVC project&#39;s <i class=" ">web.config</i> (it is empty by default). This ensures that the MVC application generates hashes using the same salt value as the Kentico application (for example for <a   href="k11/Working-with-macro-signatures.htm">macro signatures</a> or page preview links).</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">&lt;</code><code class="keyword">appSettings</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">	&lt;</code><code class="keyword">add</code><code class="plain"> </code><code class="color1">key</code><code class="plain">=</code><code class="string">"CMSHashStringSalt"</code><code class="plain"> </code><code class="color1">value</code><code class="plain">=</code><code class="string">"e68b9ad6-a461-4707-8e3e-ece73f03dd02"</code><code class="plain"> /&gt;</code></div>
<div class="line"><code class="plain">	...</code></div>
<div class="line"><code class="plain">&lt;/</code><code class="keyword">appSettings</code><code class="plain">&gt;</code></div>
</div>
    </div>
</li></ul></li><li class=" "><p   
>In the MVC application&#39;s <strong class=" ">Global.asax</strong> file, add a using statement for the <strong class=" ">Kentico.Web.Mvc</strong> namespace and add the following line in the <strong class=" ">Application_Start</strong> method:</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> Kentico.Web.Mvc;</code></div>
<div class="line"><code class="plain">...</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">protected</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> Application_Start()</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	...</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">	</code><code class="comments">// Enables and configures the selected Kentico ASP.NET MVC integration features</code></div>
<div class="line"><code class="plain">	ApplicationConfig.RegisterFeatures(ApplicationBuilder.Current);</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
</li><li class=" "><p   
>In the <strong class=" ">App_Start\RouteConfig.cs</strong> file, add a using statement for the <strong class=" ">Kentico.Web.Mvc</strong> namespace, and call the <strong class=" ">MapRoutes</strong> method (must be called before you map any of your own routes).</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> Kentico.Web.Mvc;</code></div>
<div class="line"> </div>
<div class="line"><code class="keyword">public</code><code class="plain"> </code><code class="keyword">static</code><code class="plain"> </code><code class="keyword">void</code><code class="plain"> RegisterRoutes(RouteCollection routes)</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">	routes.IgnoreRoute(</code><code class="string">"{resource}.axd/{*pathInfo}"</code><code class="plain">);</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">	</code><code class="comments">// Maps routes to Kentico HTTP handlers.</code></div>
<div class="line"><code class="plain">	</code><code class="comments">// Must be first, since some Kentico URLs may be matched by the default ASP.NET MVC routes,</code></div>
<div class="line"><code class="plain">	</code><code class="comments">// which can result in pages being displayed without images.</code></div>
<div class="line"><code class="plain">	routes.Kentico().MapRoutes();</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">	...</code></div>
<div class="line"><code class="plain">} </code></div>
</div>
    </div>
</li><li class=" "><p   
>Expand the project&#39;s <strong class=" ">Properties</strong> folder and create a new class, for example named <i class=" ">WebAssemblyInfo.cs</i>. Add the <strong class=" ">AssemblyDiscoverable</strong> assembly attribute into the class.</p>
<ul class=" "><li class=" "><p   
>The attribute allows you to work with <a   href="k11/Generating-classes-for-Kentico-objects.htm">classes generated for Kentico objects</a>.</p>
</li><li class=" "><p   
>The attribute is placed into a separate class because the default <i class=" ">AssemblyInfo</i> class cannot access code from external libraries in cases where the web project is precompiled with outputs merged into a single assembly (during deployment).</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">using</code><code class="plain"> CMS;</code></div>
<div class="line"> </div>
<div class="line"><code class="comments">// Ensures that the Kentico API can discover and work with custom classes registered in the MVC web project</code></div>
<div class="line"><code class="plain">[assembly: AssemblyDiscoverable]</code></div>
</div>
    </div>
</li></ul></li><li class=" "><p   
>Set a URL for the MVC application:</p>
<ul class=" "><li class=" "><p   
>Right-click the MVC project and select <strong class=" ">Properties</strong>.</p>
</li><li class=" "><p   
>Open the <strong class=" ">Web</strong> tab.</p>
</li><li class=" "><p   
>In the <strong class=" ">Servers</strong> section, select Local IIS.</p>
</li><li class=" "><p   
>Set the <strong class=" ">Project Url</strong> identical to the <strong class=" ">Presentation URL</strong> assigned in your MVC site&#39;s settings in Kentico.</p>
</li><li class=" "><p   
>Click <strong class=" ">Create Virtual Directory</strong>.</p>
</li></ul></li></ol><p   
>After you run the MVC application, you can see it within the related Kentico administration interface in the <strong class=" ">Web farm</strong> application on the <strong class=" ">Servers</strong> tab, as a new server. The server&#39;s <i class=" ">Status</i> changes to <i class=" ">Healthy</i> after a few moments.</p>
<p   
>You can now continue to <a   href="k11/Defining-content-structure-on-MVC-sites.htm">define the content structure</a> of your site and <a   href="k11/Developing-MVC-applications.htm">develop the MVC application</a>.</p>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
