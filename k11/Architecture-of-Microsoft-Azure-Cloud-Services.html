<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Architecture of Microsoft Azure Cloud Services - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="Kentico-11-Documentation-Home.html" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68881709"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.html">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Running-Kentico-on-Microsoft-Azure.html">Running Kentico on Microsoft Azure</a></li>
                                                                                     <li><a href="Running-Kentico-in-Azure-Cloud-Services.html">Running Kentico in Azure Cloud Services</a></li>
                                                            </ul>
</div>            <h1 id="src-68881709"> <span>Architecture of Microsoft Azure Cloud Services</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<p   
>This topic describes how Kentico works within the Microsoft Azure environment using <a  class="external-link" href="https://azure.microsoft.com/en-us/services/cloud-services/">Azure Cloud Services</a>, which features of the service are utilized and how the application stores and manages its data in the cloud.</p>
<p   
><img  class="confluence-embedded-image"  src="images/download/attachments/68881709/AzureArchitecture.png" alt="images/download/attachments/68881709/AzureArchitecture.png" width="437" height="425" />
        <br/><span class="caption">Web role and worker role and their relations with the file system (Blob storage) and database (Microsoft Azure SQL Database)</span>
    </p>
    <h3 id="src-68881709_ArchitectureofMicrosoftAzureCloudServices-Application" class="heading "><span>Application</span></h3>
<p   
>If you choose to   <a   href="Installing-Kentico-Azure-projects">install Kentico as an Azure project</a>, all files will be grouped into a solution based on Visual Studio&#39;s Microsoft Azure template. The solution contains several projects. One of them is a web application, which encompasses almost all the functions of Kentico and is designed to run as an Azure<strong class=" "> ASP.NET Web role</strong>.</p>
<p   
>The <strong class=" ">Smart search </strong>worker is separated from the web application in another project because it cannot run together with the application as the Web role. To index content of websites correctly and effectively, the Smart search worker runs as an Azure <strong class=" ">Worker role</strong>.</p>
<p   
>Because the application is divided into these two services, you also need to configure them separately. See   <a   href="Configuring-Kentico-Azure-projects-for-Cloud-Services">Configuring Kentico Azure projects for Cloud Services</a>.</p>
<p   
><br/></p>
    <div  class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
>  <a   href="#src-68881709_ArchitectureofMicrosoftAzureCloudServices-Application">Application</a></p>
</li><li class=" "><p   
>  <a   href="#src-68881709_ArchitectureofMicrosoftAzureCloudServices-Database">Database</a></p>
</li><li class=" "><p   
>  <a   href="#src-68881709_ArchitectureofMicrosoftAzureCloudServices-Filestorage">File storage</a></p>
</li><li class=" "><p   
>  <a   href="#src-68881709_ArchitectureofMicrosoftAzureCloudServices-Multiplewebroleinstances">Multiple web role instances</a></p>
</li><li class=" "><p   
>  <a   href="#src-68881709_ArchitectureofMicrosoftAzureCloudServices-Storingsessionstate">Storing session state</a></p>
</li><li class=" "><p   
>  <a   href="#src-68881709_ArchitectureofMicrosoftAzureCloudServices-MicrosoftAzureWebAppsorVirtualMachines">Microsoft Azure Web Apps or Virtual Machines</a></p>
</li></ul><p   
></p>
        </div>
    </div>
    <div  class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p   
>  <a   href="Requirements-and-limitations-for-running-Kentico-in-Azure-Cloud-Services">Requirements and limitations for running Kentico in Azure Cloud Services</a></p>
</li><li class=" "><p   
>  <a   href="Lifecycle-for-developing-Kentico-projects-in-Azure-Cloud-Services">Lifecycle for developing Kentico projects in Azure Cloud Services</a></p>
</li><li class=" "><p   
>  <a   href="Working-with-physical-files-using-the-API">Working with physical files using the API</a></p>
</li></ul>        </div>
    </div>
    <h3 id="src-68881709_ArchitectureofMicrosoftAzureCloudServices-Database" class="heading "><span>Database</span></h3>
<p   
>Kentico on Microsoft Azure uses an<strong class=" "> Azure SQL </strong>relational database. This database engine is almost identical to the standard SQL Server engine, with only a few limitations. These limitations are taken into account in Kentico, and no additional configuration or customization is required. If you are interested in learning which SQL Server features are not available in Azure SQL, refer to <a  class="external-link" href="https://docs.microsoft.com/en-us/azure/sql-database/sql-database-transact-sql-information">Resolving Transact-SQL differences during migration to SQL Database</a>. Also see our   <a   href="Recommendations-on-using-Azure-SQL-Database-tiers">Recommendations on using Azure SQL Database tiers</a> to prevent performance problems.</p>
    <h3 id="src-68881709_ArchitectureofMicrosoftAzureCloudServices-Filestorage" class="heading "><span>File storage</span></h3>
<p   
>Microsoft Azure does not offer a persistent file system similar to the file systems in Windows that you are used to. Data stored within Azure cannot be hierarchically organized into folders. However, Kentico provides an abstract layer called <strong class=" ">CMS.IO</strong>, which enables the system to operate on different types of file storages. See   <a   href="Working-with-physical-files-using-the-API">Working with physical files using the API</a> for more information.</p>
<p   
>The CMS.IO namespace acts as an intermediary between the Kentico business layer and various file storages, including Azure <strong class=" ">blob storage</strong>. On a standard non-Azure installation, CMS.IO only overrides the System.IO namespace. On Microsoft Azure, the namespace uses a provider which works with the blob storage,<strong class=" "> </strong>creating an imitation of the regular Windows file system. The CMS.IO namespace can be extended to support any other type of storage, e.g. the Amazon cloud drive.</p>
<p   
>Additionally, you can make use of the Azure storage provider and store files in the cloud even if you&#39;re running a non-Azure installation. You can find more information about this approach in   <a   href="Configuring-Azure-storage">Configuring Azure storage</a>.</p>
<p   
>The file storage is shared across multiple web role instances, therefore, no file synchronization is needed.</p>
    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
><strong class=" ">Case sensitivity</strong></p>
<p   
>Unlike Windows file systems, the blob storage is case-sensitive. As a result, names of all files processed by Kentico are <strong class=" ">converted to lower case</strong> before saving.</p>
        </div>
    </div>
    <h3 id="src-68881709_ArchitectureofMicrosoftAzureCloudServices-Multiplewebroleinstances" class="heading "><span>Multiple web role instances</span></h3>
<p   
>Kentico application can run in multiple instances of one web role on Microsoft Azure. Therefore, the data must be synchronized between these instances. Kentico handles the synchronization by treating each instance as a web farm server. When you   <a   href="Configuring-Kentico-Azure-projects-for-Cloud-Services#src-68881729_ConfiguringKenticoAzureprojectsforCloudServices-Configuringthenumberofinstances">set the number of instances</a>, the web farm servers are configured automatically. Also, web farm tasks are created and executed automatically so no manual configuration is needed.</p>
    <h3 id="src-68881709_ArchitectureofMicrosoftAzureCloudServices-Storingsessionstate" class="heading "><span>Storing session state</span></h3>
<p   
>Every complex web application needs to store information about its state, especially user session data. Since the Azure environment is dynamic and the application does not reside constantly in one place, its state has to be stored separately. When your application uses only one web role instance, the session state data can be stored on that instance. If your application uses two or more web role instances, you need to configure your project to store the session state data elsewhere. We recommend these options for storing the session state data:</p>
<ul class=" "><li class=" "><p   
>In Microsoft Azure SQL Database &ndash; easy to set up, suitable for small projects or projects with mostly read access to web pages.</p>
</li><li class=" "><p   
>In Microsoft Azure Redis Cache &ndash; more suitable for larger projects than the Azure SQL database option, but requires configuration of Azure Redis Cache.</p>
</li></ul><p   
>See   <a   href="Storing-cache-and-session-state-data-in-Azure-environment">Storing cache and session state data in Azure environment</a> for more information.</p>
    <h3 id="src-68881709_ArchitectureofMicrosoftAzureCloudServices-MicrosoftAzureWebAppsorVirtualMachines" class="heading "><span>Microsoft Azure Web Apps or Virtual Machines</span></h3>
<p   
>This section describes the setup and deployment of Kentico to an <strong class=" ">Azure Cloud Service</strong>. However, there are other Azure environments, in which Kentico is supported as well.</p>
<ul class=" "><li class=" "><p   
>Web Apps are quick to deploy and easy to set up and manage. However, they do not offer as much customization options as cloud services. See   <a   href="Setting-up-Kentico-in-Azure-Web-Apps">Setting up Kentico in Azure Web Apps</a> for information on how to set up Web Apps.</p>
</li><li class=" "><p   
>Virtual Machines allow you to configure and maintain a virtual server in the cloud. They offer more control but require complex setup. You can start using the Virtual Machines by creating one in the <a  class="external-link" href="https://portal.azure.com/">Azure Management Portal</a>.</p>
</li><li class=" "><p   
>For a more detailed comparison of all three services provided by Microsoft Azure, see the <a  class="external-link" href="https://docs.microsoft.com/en-us/azure/app-service-web/choose-web-site-cloud-service-vm">Azure App Service, Virtual Machines, Service Fabric, and Cloud Services comparison</a> article.</p>
</li></ul>        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
