<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Setting display conditions for personalization variants - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="Kentico-11-Documentation-Home.htm" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68882391"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.htm">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="On-line-marketing-features.htm">On-line marketing features</a></li>
                                                                                                         <li class="shortcut"><a href="Managing-your-on-line-marketing-features.htm">Managing your on-line marketing features</a></li>
                                                                                     <li><a href="Content-personalization.htm">Content personalization</a></li>
                                                            </ul>
</div>            <h1 id="src-68882391"> <span>Setting display conditions for personalization variants</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<p   
>When setting up personalized pages, the most important part of the process is to properly define the conditions that indicate when the system displays individual variants. You can build personalized conditions using the macro condition editor.</p>
<p   
>To edit the display conditions of the existing personalization variants:</p>
<ol class=" "><li class=" "><p   
>Open the <strong class=" ">Pages </strong>application and select the personalized page in the page tree.</p>
</li><li class=" "><p   
>Switch to the page&#39;s <strong class=" ">Properties -&gt; Variants</strong> tab.</p>
</li><li class=" "><p   
><strong class=" ">Edit</strong> (<img  class="confluence-embedded-image"  src="images/download/attachments/68879208/edit.png" alt="images/download/attachments/68879208/edit.png"   />
) the selected personalization variant.</p>
</li><li class=" "><p   
>Specify the variant&#39;s <strong class=" ">Display condition</strong> property.<br/><br/></p>
<img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/68882391/configuring_personalization_variant_properties.png" alt="images/download/attachments/68882391/configuring_personalization_variant_properties.png" width="500"  />
        <br/><span class="caption">Configuring p</span>
    <p   
><br/><br/></p>
<ul class=" "><li class=" "><p   
>Click <strong class=" ">Edit</strong> to use the Macro condition editor, which allows non-technical users to create <a   href="k11/Building-conditions-using-macro-rules.htm">conditions based on predefined macro rules</a>.</p>
</li><li class=" "><p   
>The <strong class=" ">Clear</strong> action removes the current content of the condition field.</p>
</li></ul></li><li class=" "><p   
>Click <strong class=" ">Save</strong>.</p>
</li></ol><p   
>See also: <a   href="k11/#src-68882391_Settingdisplayconditionsforpersonalizationvariants-Example-Buildingapersonalizationcondition">Example - Building a personalization condition</a></p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Alternatively, your developers can help you write conditions for virtually any type of scenario according to your specific requirements by utilizing macro expressions. Keep in mind that the result of a condition&#39;s expression must be a logical (boolean) value. For more information about the available macro options, refer to the <a   href="k11/On-line-marketing-macros.htm">On-line marketing macros</a> page.</p>
        </div>
    </div>
    <div  class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<ul class="toc-indentation "><li class=" "><p   
><a   href="k11/#src-68882391_Settingdisplayconditionsforpersonalizationvariants-Settingthepriorityofpersonalizationvariants">Setting the priority of personalization variants</a></p>
</li><li class=" "><p   
><a   href="k11/#src-68882391_Settingdisplayconditionsforpersonalizationvariants-Example-Buildingapersonalizationcondition">Example - Building a personalization condition</a></p>
</li></ul>        </div>
    </div>
    <div  class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p   
><a   href="k11/Personalizing-editor-widgets.htm">Personalizing editor widgets</a></p>
</li><li class=" "><p   
><a   href="k11/Personalizing-web-parts-and-web-part-zones.htm">Personalizing web parts and web part zones</a></p>
</li><li class=" "><p   
><a   href="k11/On-line-marketing-macros.htm">On-line marketing macros</a></p>
</li><li class=" "><p   
><a   href="k11/Building-conditions-using-macro-rules.htm">Building conditions using macro rules</a></p>
</li><li class=" "><p   
><a   href="k11/Writing-macro-conditions.htm">Writing macro conditions</a></p>
</li></ul>        </div>
    </div>
<p   
></p>
    <div  class="confbox admonition admonition-info">
                    <p class="title">Kentico EMS required</p>
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Features described on this page require the <strong class=" ">Kentico EMS</strong> license.</p>
        </div>
    </div>
<p   
></p>
    <h3 id="src-68882391_Settingdisplayconditionsforpersonalizationvariants-Settingthepriorityofpersonalizationvariants" class="heading "><span>Setting the priority of personalization variants</span></h3>
<p   
>On the live site, the page displays only one variant for each personalized object. The system processes variants in the order of their priority and selects the first <strong class=" ">enabled</strong> variant whose condition is fulfilled in the given context.</p>
<p   
>By default, the priority of variants depends on the order in which they were created. You can see the current order on the personalization slider. Apart from the original object, which is always first, variants with a higher priority can be found further on the left of the slider.</p>
<p   
><img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/68882391/managing_variants.png" alt="images/download/attachments/68882391/managing_variants.png" width="385" height="104" />
        <br/><span class="caption">Managing personalization variants</span>
    </p>
<p   
>To change the priority of a page component&#39;s variants:</p>
<ol class=" "><li class=" "><p   
>Click the <strong class=" ">Variant list</strong> button on the object&#39;s personalization slider.</p>
<ul class=" "><li class=" "><p   
>A dialog containing a list of the variants opens.<br/><br/></p>
</li></ul><p   
><img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/68882391/managing_variant_order.png" alt="images/download/attachments/68882391/managing_variant_order.png" width="426" height="170" />
</p>
</li><li class=" "><p   
>Reorganize the variants as necessary through the <strong class=" ">Up</strong> (<img  class="confluence-embedded-image"  src="images/download/attachments/68879208/move_up.png" alt="images/download/attachments/68879208/move_up.png"   />
) or <strong class=" ">Down</strong> (<img  class="confluence-embedded-image"  src="images/download/attachments/68879208/move_down.png" alt="images/download/attachments/68879208/move_down.png"   />
) actions.</p>
</li></ol><p   
>The system now evaluates the conditions of the component&#39;s variants according to the new order, starting from the top of the list.</p>
    <h3 id="src-68882391_Settingdisplayconditionsforpersonalizationvariants-Example-Buildingapersonalizationcondition" class="heading "><span>Example - Building a personalization condition</span></h3>
<p   
>The following example demonstrates how to build a condition using <a   href="k11/Building-conditions-using-macro-rules.htm">macro rules</a>. The condition causes the page to display the given variant only during a specific part of the day, or to users with special authorization.</p>
<ol class=" "><li class=" "><p   
>Create a content personalization variant for an <a   href="k11/Personalizing-editor-widgets.htm">editor widget</a> or a <a   href="k11/Personalizing-web-parts-and-web-part-zones.htm">web part and web part zone</a>.</p>
</li><li class=" "><p   
>Click <strong class=" ">Edit </strong>next to the <strong class=" ">Display condition</strong> field in the variant properties dialog.</p>
</li><li class=" "><p   
>On the <strong class=" ">Rule designer</strong> tab, select <strong class=" ">Current day time is in range</strong> in the list of available rules.</p>
</li><li class=" "><p   
>Click <strong class=" ">Add rule </strong>(<img  class="confluence-embedded-image"  src="images/download/attachments/68879208/left.png" alt="images/download/attachments/68879208/left.png"   />
).</p>
<ul class=" "><li class=" "><p   
>The selected rule appears in the condition.</p>
</li></ul></li><li class=" "><p   
>Add the <strong class=" ">Current user is in role</strong> rule.</p>
</li><li class=" "><p   
>Click the <strong class=" "><u class=" ">and</u></strong> operator between the two clauses in the designer area. The operator changes to <u class=" "><strong class=" ">or</strong></u>.</p>
</li><li class=" "><p   
>Click on the underlined parameters in the text of the rules and set the required time and role values.<br/><br/></p>
<img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/68882391/editing_macro_condition.png" alt="images/download/attachments/68882391/editing_macro_condition.png" width="550"  />
        <br/><span class="caption">Designing a macro using the Rule designer</span>
    </li><li class=" "><p   
>Click <strong class=" ">Save &amp; Close</strong>.</p>
</li></ol><p   
>The condition builder inserts the variant&#39;s display condition as a user-friendly expression composed of macro rule clauses.</p>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>Alternatively, your developers can help you enter the condition directly on the macro condition editor&#39;s <strong class=" ">Code</strong> tab or in the variant&#39;s <strong class=" ">Display condition </strong>field using <a   href="k11/Macro-syntax.htm">K# macro syntax</a>. For example:</p>
    <div  class="confbox programlisting">
                <div class="content">
        <pre><code>(CurrentDateTime.Hour &gt;= 9 &amp;&amp; CurrentDateTime.Hour &lt;= 17) || CurrentUser.IsInRole(&quot;GoldPartners&quot;)</code></pre>
        </div>
    </div>
<p   
>This sample condition ensures that the variant is only displayed to regular users if the current time is between 9 a.m and 5 p.m.. Users who belong to the <i class=" ">GoldPartners</i> role can see the variant&#39;s content at any time.</p>
        </div>
    </div>
<p   
></p>
<p   
></p>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
