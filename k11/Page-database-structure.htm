<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page database structure - Kentico 11 Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script> 
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="68879260">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">K11</span>
                    <img class="space-logo" src="global.logo" />
                </h1>
                <a href="Kentico-11-Documentation-Home.htm" class="ht-space-link">
                    <h2>Kentico 11 Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=68882166"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="Kentico-11-Documentation-Home.htm">Kentico 11 Documentation</a></li>
                                                                                                             <li><a href="" onclick="$('.shortcut').each(function(){$(this).removeClass('shortcut')}); $(this).parent().addClass('shortcut'); return false;">...</a> </li>
                                        <li class="shortcut"><a href="Custom-development.htm">Custom development</a></li>
                                                                                     <li><a href="Working-with-pages-in-the-API.htm">Working with pages in the API</a></li>
                                                            </ul>
</div>            <h1 id="src-68882166"> <span>Page database structure</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">
<p   
>The Kentico database stores pages (nodes in the content tree of websites) in several interconnected tables:</p>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Database table</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>CMS_Tree<br/>    <span style="color: #ffffff;">
_______________________    </span>
<br/>    <span style="color: #ffffff;">
__________________    </span>
</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Stores:</p>
<ul class=" "><li class=" "><p   
>Data that determines the position of pages in the website content tree</p>
</li><li class=" "><p   
>Basic page properties that are shared between all <a   href="k11/Editing-the-content-of-multilingual-websites.htm">language versions</a> of the same page</p>
</li></ul><p   
>Contains <strong class=" ">only one record for each page</strong>, regardless of the number of language versions. The table doesn&#39;t store any <a   href="k11/Configuring-and-using-page-versioning.htm">versioned data</a>.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>CMS_Document</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Stores:</p>
<ul class=" "><li class=" "><p   
>Page properties that have unique values for each <a   href="k11/Editing-the-content-of-multilingual-websites.htm">language version</a></p>
</li><li class=" "><p   
>The content of <a   href="k11/Editing-pages.htm">editable regions</a></p>
</li><li class=" "><p   
>The data of <a   href="k11/Adding-page-content-through-widgets.htm">editor widgets</a></p>
</li></ul><p   
>May contain <strong class=" ">multiple records per page</strong>, one for each language version. Some of the page columns are <a   href="k11/Configuring-and-using-page-versioning.htm">versioned</a>.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Coupled data tables<br/>(CONTENT_&lt;doc type&gt;)</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Stores the fields of individual <a   href="k11/Page-types.htm">page types</a>.</p>
<p   
>For example, the <i class=" ">News</i> page type has the <strong class=" ">CONTENT_News</strong> coupled table with the columns defined for news pages, such as <i class=" ">NewsTitle</i>, <i class=" ">NewsSummary</i>, <i class=" ">NewsText</i>.</p>
<ul class=" "><li class=" "><p   
>Records in the coupled data tables are bound to pages through the <strong class=" ">DocumentForeignKeyValue</strong> column of the <strong class=" ">CMS_Document</strong> table.</p>
</li><li class=" "><p   
>The page type of tree nodes is determined by the <strong class=" ">NodeClassID</strong> column in the <strong class=" ">CMS_Tree</strong> table.</p>
</li><li class=" "><p   
>Container page types, such as <i class=" ">Folder</i>, do not have a coupled table.</p>
</li><li class=" "><p   
>Every <a   href="k11/Editing-the-content-of-multilingual-websites.htm">language version</a> of a page has its own record in the corresponding coupled data table.</p>
</li><li class=" "><p   
>All columns in coupled data tables are <a   href="k11/Configuring-and-using-page-versioning.htm">versioned</a>.</p>
</li></ul>            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
><img  class="confluence-embedded-image"  src="images/download/attachments/68882166/Document_tables.png" alt="images/download/attachments/68882166/Document_tables.png" width="500"  />
        <br/><span class="caption">The relationships between page database tables</span>
    </p>
    <div  class="confbox panel">
            <div class="title panel-header">On this page</div>
            <div class="panel-content">
<p   
></p>
<ul class="toc-indentation "><li class=" "><p   
><a   href="k11/#src-68882166_Pagedatabasestructure-Pageattachmentsandversions">Page attachments and versions</a></p>
</li><li class=" "><p   
><a   href="k11/#src-68882166_Pagedatabasestructure-Products">Products</a></p>
</li><li class=" "><p   
><a   href="k11/#src-68882166_Pagedatabasestructure-Pagerelationships">Page relationships</a></p>
</li></ul><p   
></p>
        </div>
    </div>
    <div  class="confbox panel">
            <div class="title panel-header">Related pages</div>
            <div class="panel-content">
<ul class=" "><li class=" "><p   
><a   href="k11/Working-with-pages.htm">Working with pages</a></p>
</li><li class=" "><p   
><a   href="k11/Page-types.htm">Page types</a></p>
</li></ul>        </div>
    </div>
    <h3 id="src-68882166_Pagedatabasestructure-Pageattachmentsandversions" class="heading "><span>Page attachments and versions</span></h3>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Database table</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>CMS_Attachment</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Stores files uploaded to the database as <a   href="k11/Page-attachments.htm">page attachments</a>.</p>
<p   
>Includes all types of page attachments:</p>
<ul class=" "><li class=" "><p   
>Unsorted attachments added on the <i class=" ">Properties -&gt; Attachments</i> tab in the <i class=" ">Pages</i> application. Such attachments are linked to the related page by storing its identifier (<i class=" ">AttachmentDocumentID</i> column).</p>
</li><li class=" "><p   
>Attachments uploaded through specific page fields (of either the <i class=" ">File</i> or <i class=" ">Attachments</i> data type) on the <i class=" ">Form</i> or <i class=" ">Content</i> tab in the <i class=" ">Pages</i> application. Such fields are represented by columns in the given page type&#39;s coupled data table.<br/></p>
<ul class=" "><li class=" "><p   
>Page type fields of the <i class=" ">File</i> data type store a GUID value, which identifies the corresponding attachment in the <i class=" ">CMS_Attachment</i> table.</p>
</li><li class=" "><p   
>For fields of the <i class=" ">Attachments</i> data type, the value in the database is always empty. Instead, the given records in the <i class=" ">CMS_Attachment</i> table store an identifier of the related page (<i class=" ">AttachmentDocumentID</i> column) and a GUID value that identifies the specific field in the page type&#39;s form definition (<i class=" ">AttachmentGroupGUID</i> column).</p>
</li></ul></li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>CMS_VersionHistory<br/>    <span style="color: #ffffff;">
_______________________    </span>
</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Stores <a   href="k11/Configuring-and-using-page-versioning.htm">page versions</a>, including older versions and versions that are being edited. When a version is published, the system updates the corresponding records in the <strong class=" ">CMS_Tree</strong> and <strong class=" ">CMS_Document</strong> tables using the data of the version record.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>CMS_AttachmentHistory</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Stores attachments of page versions. The main purpose of this table is to avoid redundancy for page versions that use the same attachments.</p>
<p   
>When a page version is published, the system updates the records in the <strong class=" ">CMS_Attachment</strong> table using the data of the version record.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>CMS_VersionAttachment</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Stores relationships between page versions and their page attachments.</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
><img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/68882166/Database_documents.png" alt="images/download/attachments/68882166/Database_documents.png" width="500" height="454" />
        <br/><span class="caption">Database diagram of all page tables</span>
    </p>
    <h3 id="src-68882166_Pagedatabasestructure-Products" class="heading "><span>Products</span></h3>
<p   
><a   href="k11/Products.htm">Products</a> represent merchandise or services in online stores. The system associates product objects (SKUs) with pages representing product types.</p>
<p   
>The primary product data is stored in the <strong class=" ">COM_SKU</strong> database table.</p>
<ul class=" "><li class=" "><p   
>Pages representing products are bound to the related SKU through the <strong class=" ">NodeSKUID</strong> column of the <strong class=" ">CMS_Tree</strong> table.</p>
</li><li class=" "><p   
>Most product columns are <a   href="k11/Configuring-and-using-page-versioning.htm">versioned</a> and covered by <a   href="k11/Configuring-workflows.htm">workflow</a> (exceptions include the product image, as well as the <i class=" ">Track inventory</i> and <i class=" ">Available items</i> properties).</p>
</li><li class=" "><p   
>If a product page is available in multiple <a   href="k11/Editing-the-content-of-multilingual-websites.htm">language versions</a> AND covered by workflow, the versioned product properties are <strong class=" ">NOT shared between different language versions</strong> of a single product. Any updates of the product <strong class=" ">Price</strong> (or other key properties) need to be made separately for each language version.</p>
</li></ul>    <h3 id="src-68882166_Pagedatabasestructure-Pagerelationships" class="heading "><span>Page relationships</span></h3>
    <div  class="tablewrap">
        <table class="wrapped confluenceTable">
                    <colgroup>
                                    <col />
                                    <col />
                            </colgroup>
        <thead class=" ">    <tr>
            <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Database table</p>
            </td>
                <td  class="confluenceTh" rowspan="1" colspan="1">
    <p   
>Description</p>
            </td>
        </tr>
</thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>CMS_Relationship</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Stores records representing relationships between two pages. Used for both:</p>
<ul class=" "><li class=" "><p   
><a   href="k11/Displaying-related-pages-using-named-relationships.htm">Standard named relationships</a></p>
</li><li class=" "><p   
>Ad-hoc relationships that represent re-use of a page&#39;s content within a <i class=" ">Pages</i> field of another page (see <a   href="k11/Advanced-content-modeling.htm">Advanced content modeling</a>)</p>
</li></ul>            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>CMS_RelationshipName</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Stores the relationship names (types) defined in the system.</p>
            </td>
        </tr>
    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>CMS_RelationshipNameSite</p>
            </td>
                <td  class="confluenceTd" rowspan="1" colspan="1">
    <p   
>Binding table that connects relationship names to websites. Each entry indicates that a relationship can be used on a given site.</p>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
><img  class="confluence-embedded-image confluence-content-image-border"  src="images/download/attachments/68882166/Database_doc_Relationships.png" alt="images/download/attachments/68882166/Database_doc_Relationships.png" width="500" height="507" />
        <br/><span class="caption">Database diagram of page relationship tables</span>
    </p>
        </div>

    </article>


               
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
